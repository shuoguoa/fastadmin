var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};define("template",["jquery"],function(t){"use strict";return function(e,n){var r;return r=e||"",t.each(n,function(e,n){var i,o;i="undefined"==typeof n?"undefined":_typeof(n),o=new RegExp("{{\\s*"+e+"\\s*}}","g"),"object"===i&&null!==n?t.each(n,function(t,n){var i;i=new RegExp("{{\\s*"+e+"."+t+"\\s*}}","g"),r=r.replace(i,n)}):r=r.replace(o,n)}),r}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};define("sfModal",["jquery","template"],function(t,e){"use strict";return function(n){var r,i;if("object"!==("undefined"==typeof n?"undefined":_typeof(n))){if("hide"===n)return void t(".sfmodal").modal("hide");if("toggle"===n)return void t(".sfmodal").modal("toggle");n={content:n,hideDone:!0}}r=t.extend({hideTitle:!1,hideFooter:!1,modalSize:"",title:"操作失败",content:"玩脱了",wrapper:null,$content:null,hideClose:!1,closeText:"取消",closeClass:"btn-default",backdrop:!0,closeFn:function(){},hideDone:!1,doneText:"确认",doneClass:"btn-primary",keyboard:"true",afterShow:function(){},doneFn:function(){t(".sfmodal").modal("hide")},show:function(){},shown:function(){},hide:function(){},hidden:function(){},loaded:function(){}},n),i='<div class="sfmodal modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">  <div class="modal-dialog {{modalSize}}">    <div class="modal-content">      '+(r.hideTitle?"":'<div class="modal-header">        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>        <h4 class="modal-title">{{title}}</h4>      </div>')+'<div class="modal-body">        <p class="sfModal-content">          </div>          <div class="modal-footer '+(r.hideFooter?"hidden":"")+'">'+(r.hideClose?"":'<button type="button" class="btn {{closeClass}}" data-dismiss="modal">{{closeText}}</button>')+(r.hideDone?"":'<button type="button" class="btn {{doneClass}} done-btn">{{doneText}}</button>')+"</div>        </div>      </div>    </div>",t(".sfmodal").length>0&&(t(".sfmodal").remove(),t(".modal-backdrop").remove()),r.wrapper?(t(r.wrapper).append(e(i,r)),t(r.wrapper).append('<div class="modal-backdrop in"></div>')):t("body").append(e(i,r)),r.$content?t(".sfmodal .sfModal-content").append(r.$content):t(".sfmodal .sfModal-content").html(r.content),t(".sfmodal").modal({keyboard:r.keyboard,backdrop:r.backdrop}),t(".sfmodal").on("show.bs.modal",r.show).on("hide.bs.modal",function(e){r.hide(e),r.wrapper&&t(".modal-backdrop").remove()}).on("hidden.bs.modal",r.hidden).on("loaded.bs.modal",r.loaded).on("shown.bs.modal",r.shown).modal("show"),r.afterShow&&r.afterShow(),t(".sfmodal .done-btn").click(function(e){r.doneFn(e),r.wrapper&&t(".modal-backdrop").remove()}),t(".sfmodal .close-btn").click(function(e){r.closeFn(e),r.wrapper&&t(".modal-backdrop").remove()})}}),define("mobile",["jquery"],function(t){return window.innerWidth>767?{login:null,signup:null}:(t(".hate, .like").data("toggle","false"),{login:function(){location.href="/user/login"},signup:function(){location.href="/user/register"}})}),define("isMobile",[],function(){var t;return t=function(t){var e,n;return e={Android:function(){return!!navigator.userAgent.match(/Android/i)},BlackBerry:function(){return!!navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},Windows:function(){return!!navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Windows()}},n=e[t]()||!1}}),function(t){t.fn.hoverIntent=function(e,n,r,i){var o={interval:i||400,sensitivity:5,timeout:600};o="object"==typeof e?t.extend(o,e):t.isFunction(n)?t.extend(o,{over:e,out:n,selector:r}):t.extend(o,{over:e,out:e,selector:n});var a,s,l,c,u=function(t){a=t.pageX,s=t.pageY},d=function(e,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.sqrt((l-a)*(l-a)+(c-s)*(c-s))<o.sensitivity?(t(n).off("mousemove.hoverIntent",u),n.hoverIntent_s=!0,o.over.apply(n,[e])):(l=a,c=s,n.hoverIntent_t=setTimeout(function(){d(e,n)},o.interval),void 0)},h=function(t,e){return e.hoverIntent_t=clearTimeout(e.hoverIntent_t),e.hoverIntent_s=!1,o.out.apply(e,[t])},p=function(e){var n=t.extend({},e),r=this;r.hoverIntent_t&&(r.hoverIntent_t=clearTimeout(r.hoverIntent_t)),"mouseenter"===e.type?(l=n.pageX,c=n.pageY,t(r).on("mousemove.hoverIntent",u),r.hoverIntent_s||(r.hoverIntent_t=setTimeout(function(){d(n,r)},o.interval))):(t(r).off("mousemove.hoverIntent",u),r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){h(n,r)},o.timeout)))};return this.on({"mouseenter.hoverIntent":p,"mouseleave.hoverIntent":p},o.selector)}}(jQuery),define("jquery_hoverIntent",["jquery"],function(t){return function(){var e;return e||t.$.fn.hoverIntent}}(this)),define("sfAjax",["jquery"],function(t){"use strict";t.sfAjax=function(e,n,r,i){var o,a,s,l;a=t.extend({id:e.data("id")||e.closest(".js__content-ops").data("id"),do:e.data("do")||e.data("action"),type:e.data("type")},r),o=a.do,s=o.indexOf("/cancel")>0?o.replace("/cancel",""):o+"/cancel",l="/api/"+a.type+"/"+a.id+"/"+a.do,t.post(l,function(t){0===t.status?(e.data("do",s),n?n(t):location.reload()):i&&i(t)})}}),function(t){"function"==typeof define&&define.amd?define("jquery_cookie",["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function e(t){return s.raw?t:encodeURIComponent(t)}function n(t){return s.raw?t:decodeURIComponent(t)}function r(t){return e(s.json?JSON.stringify(t):String(t))}function i(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(a," ")),s.json?JSON.parse(t):t}catch(t){}}function o(e,n){var r=s.raw?e:i(e);return t.isFunction(n)?n(r):r}var a=/\+/g,s=t.cookie=function(i,a,l){if(void 0!==a&&!t.isFunction(a)){if(l=t.extend({},s.defaults,l),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setTime(+u+864e5*c)}return document.cookie=[e(i),"=",r(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var d=i?void 0:{},h=document.cookie?document.cookie.split("; "):[],p=0,f=h.length;p<f;p++){var m=h[p].split("="),g=n(m.shift()),v=m.join("=");if(i&&i===g){d=o(v,a);break}i||void 0===(v=o(v))||(d[g]=v)}return d};s.defaults={},t.removeCookie=function(e,n){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},n,{expires:-1})),!t.cookie(e))}}),function(t,e,n,r){var i=t(e);t.fn.lazyload=function(o){function a(){var e=0;l.each(function(){var n=t(this);if(!c.skip_invisible||n.is(":visible"))if(t.abovethetop(this,c)||t.leftofbegin(this,c));else if(t.belowthefold(this,c)||t.rightoffold(this,c)){if(++e>c.failure_limit)return!1}else n.trigger("appear"),e=0})}var s,l=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:SF.staticUrl+"/global/img/squares.svg"};return o&&(r!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),r!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),t.extend(c,o)),s=c.container===r||c.container===e?i:t(c.container),0===c.event.indexOf("scroll")&&s.bind(c.event,function(){return a()}),this.each(function(){var e=this,n=t(e);e.loaded=!1,n.attr("src")!==r&&n.attr("src")!==!1||n.is("img")&&n.attr("src",c.placeholder),n.one("appear",function(){if(!this.loaded){if(c.appear){var r=l.length;c.appear.call(e,r,c)}t("<img />").bind("load",function(){var r=n.attr("data-"+c.data_attribute);n.hide(),n.is("img")?n.attr("src",r):n.css("background-image","url('"+r+"')"),n[c.effect](c.effect_speed),e.loaded=!0;var i=t.grep(l,function(t){return!t.loaded});if(l=t(i),c.load){var o=l.length;c.load.call(e,o,c)}}).attr("src",n.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&n.bind(c.event,function(){e.loaded||n.trigger("appear")})}),i.bind("resize",function(){a()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&l.each(function(){t(this).trigger("appear")})}),t(n).ready(function(){a()}),this},t.belowthefold=function(n,o){var a;return a=o.container===r||o.container===e?(e.innerHeight?e.innerHeight:i.height())+i.scrollTop():t(o.container).offset().top+t(o.container).height(),a<=t(n).offset().top-o.threshold},t.rightoffold=function(n,o){var a;return a=o.container===r||o.container===e?i.width()+i.scrollLeft():t(o.container).offset().left+t(o.container).width(),a<=t(n).offset().left-o.threshold},t.abovethetop=function(n,o){var a;return a=o.container===r||o.container===e?i.scrollTop():t(o.container).offset().top,a>=t(n).offset().top+o.threshold+t(n).height()},t.leftofbegin=function(n,o){var a;return a=o.container===r||o.container===e?i.scrollLeft():t(o.container).offset().left,a>=t(n).offset().left+o.threshold+t(n).width()},t.inviewport=function(e,n){return!(t.rightoffold(e,n)||t.leftofbegin(e,n)||t.belowthefold(e,n)||t.abovethetop(e,n))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document),define("jquery_lazyload",["jquery"],function(t){return function(){var e;return e||t.$.fn.lazyload}}(this)),function(){var t=this,e=t._,n=Array.prototype,r=Object.prototype,i=Function.prototype,o=n.push,a=n.slice,s=n.concat,l=r.toString,c=r.hasOwnProperty,u=Array.isArray,d=Object.keys,h=i.bind,p=function(t){return t instanceof p?t:this instanceof p?void(this._wrapped=t):new p(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):t._=p,p.VERSION="1.7.0";var f=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}};p.iteratee=function(t,e,n){return null==t?p.identity:p.isFunction(t)?f(t,e,n):p.isObject(t)?p.matches(t):p.property(t)},p.each=p.forEach=function(t,e,n){if(null==t)return t;e=f(e,n);var r,i=t.length;if(i===+i)for(r=0;i>r;r++)e(t[r],r,t);else{var o=p.keys(t);for(r=0,i=o.length;i>r;r++)e(t[o[r]],o[r],t)}return t},p.map=p.collect=function(t,e,n){if(null==t)return[];e=p.iteratee(e,n);for(var r,i=t.length!==+t.length&&p.keys(t),o=(i||t).length,a=Array(o),s=0;o>s;s++)r=i?i[s]:s,a[s]=e(t[r],r,t);return a};var m="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(t,e,n,r){null==t&&(t=[]),e=f(e,r,4);var i,o=t.length!==+t.length&&p.keys(t),a=(o||t).length,s=0;if(arguments.length<3){if(!a)throw new TypeError(m);n=t[o?o[s++]:s++]}for(;a>s;s++)i=o?o[s]:s,n=e(n,t[i],i,t);return n},p.reduceRight=p.foldr=function(t,e,n,r){null==t&&(t=[]),e=f(e,r,4);var i,o=t.length!==+t.length&&p.keys(t),a=(o||t).length;if(arguments.length<3){if(!a)throw new TypeError(m);n=t[o?o[--a]:--a]}for(;a--;)i=o?o[a]:a,n=e(n,t[i],i,t);return n},p.find=p.detect=function(t,e,n){var r;return e=p.iteratee(e,n),p.some(t,function(t,n,i){return e(t,n,i)?(r=t,!0):void 0}),r},p.filter=p.select=function(t,e,n){var r=[];return null==t?r:(e=p.iteratee(e,n),p.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r)},p.reject=function(t,e,n){return p.filter(t,p.negate(p.iteratee(e)),n)},p.every=p.all=function(t,e,n){if(null==t)return!0;e=p.iteratee(e,n);var r,i,o=t.length!==+t.length&&p.keys(t),a=(o||t).length;for(r=0;a>r;r++)if(i=o?o[r]:r,!e(t[i],i,t))return!1;return!0},p.some=p.any=function(t,e,n){if(null==t)return!1;e=p.iteratee(e,n);var r,i,o=t.length!==+t.length&&p.keys(t),a=(o||t).length;for(r=0;a>r;r++)if(i=o?o[r]:r,e(t[i],i,t))return!0;return!1},p.contains=p.include=function(t,e){return null!=t&&(t.length!==+t.length&&(t=p.values(t)),p.indexOf(t,e)>=0)},p.invoke=function(t,e){var n=a.call(arguments,2),r=p.isFunction(e);return p.map(t,function(t){return(r?e:t[e]).apply(t,n)})},p.pluck=function(t,e){return p.map(t,p.property(e))},p.where=function(t,e){return p.filter(t,p.matches(e))},p.findWhere=function(t,e){return p.find(t,p.matches(e))},p.max=function(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var s=0,l=t.length;l>s;s++)r=t[s],r>o&&(o=r)}else e=p.iteratee(e,n),p.each(t,function(t,n,r){i=e(t,n,r),(i>a||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},p.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var s=0,l=t.length;l>s;s++)r=t[s],o>r&&(o=r)}else e=p.iteratee(e,n),p.each(t,function(t,n,r){i=e(t,n,r),(a>i||1/0===i&&1/0===o)&&(o=t,a=i)});return o},p.shuffle=function(t){for(var e,n=t&&t.length===+t.length?t:p.values(t),r=n.length,i=Array(r),o=0;r>o;o++)e=p.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},p.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=p.values(t)),t[p.random(t.length-1)]):p.shuffle(t).slice(0,Math.max(0,e))},p.sortBy=function(t,e,n){return e=p.iteratee(e,n),p.pluck(p.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var g=function(t){return function(e,n,r){var i={};return n=p.iteratee(n,r),p.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};p.groupBy=g(function(t,e,n){p.has(t,n)?t[n].push(e):t[n]=[e]}),p.indexBy=g(function(t,e,n){t[n]=e}),p.countBy=g(function(t,e,n){p.has(t,n)?t[n]++:t[n]=1}),p.sortedIndex=function(t,e,n,r){n=p.iteratee(n,r,1);for(var i=n(e),o=0,a=t.length;a>o;){var s=o+a>>>1;n(t[s])<i?o=s+1:a=s}return o},p.toArray=function(t){return t?p.isArray(t)?a.call(t):t.length===+t.length?p.map(t,p.identity):p.values(t):[]},p.size=function(t){return null==t?0:t.length===+t.length?t.length:p.keys(t).length},p.partition=function(t,e,n){e=p.iteratee(e,n);var r=[],i=[];return p.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},p.first=p.head=p.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:a.call(t,0,e)},p.initial=function(t,e,n){return a.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},p.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},p.rest=p.tail=p.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},p.compact=function(t){return p.filter(t,p.identity)};var v=function(t,e,n,r){if(e&&p.every(t,p.isArray))return s.apply(r,t);for(var i=0,a=t.length;a>i;i++){var l=t[i];p.isArray(l)||p.isArguments(l)?e?o.apply(r,l):v(l,e,n,r):n||r.push(l)}return r};p.flatten=function(t,e){return v(t,e,!1,[])},p.without=function(t){return p.difference(t,a.call(arguments,1))},p.uniq=p.unique=function(t,e,n,r){if(null==t)return[];p.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=p.iteratee(n,r));for(var i=[],o=[],a=0,s=t.length;s>a;a++){var l=t[a];if(e)a&&o===l||i.push(l),o=l;else if(n){var c=n(l,a,t);p.indexOf(o,c)<0&&(o.push(c),i.push(l))}else p.indexOf(i,l)<0&&i.push(l)}return i},p.union=function(){return p.uniq(v(arguments,!0,!0,[]))},p.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,r=0,i=t.length;i>r;r++){var o=t[r];if(!p.contains(e,o)){for(var a=1;n>a&&p.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},p.difference=function(t){var e=v(a.call(arguments,1),!0,!0,[]);return p.filter(t,function(t){return!p.contains(e,t)})},p.zip=function(t){if(null==t)return[];for(var e=p.max(arguments,"length").length,n=Array(e),r=0;e>r;r++)n[r]=p.pluck(arguments,r);return n},p.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},p.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=p.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}for(;i>r;r++)if(t[r]===e)return r;return-1},p.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=t.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(t[r]===e)return r;return-1},p.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;r>o;o++,t+=n)i[o]=t;return i};var b=function(){};p.bind=function(t,e){var n,r;if(h&&t.bind===h)return h.apply(t,a.call(arguments,1));if(!p.isFunction(t))throw new TypeError("Bind must be called on a function");return n=a.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(a.call(arguments)));b.prototype=t.prototype;var i=new b;b.prototype=null;var o=t.apply(i,n.concat(a.call(arguments)));return p.isObject(o)?o:i}},p.partial=function(t){var e=a.call(arguments,1);return function(){for(var n=0,r=e.slice(),i=0,o=r.length;o>i;i++)r[i]===p&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return t.apply(this,r)}},p.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=p.bind(t[n],t);return t},p.memoize=function(t,e){var n=function(r){var i=n.cache,o=e?e.apply(this,arguments):r;return p.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},p.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},p.defer=function(t){return p.delay.apply(p,[t,1].concat(a.call(arguments,1)))},p.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:p.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var c=p.now();s||n.leading!==!1||(s=c);var u=e-(c-s);return r=this,i=arguments,0>=u||u>e?(clearTimeout(a),a=null,s=c,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(l,u)),o}},p.debounce=function(t,e,n){var r,i,o,a,s,l=function(){var c=p.now()-a;e>c&&c>0?r=setTimeout(l,e-c):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=p.now();var c=n&&!r;return r||(r=setTimeout(l,e)),c&&(s=t.apply(o,i),o=i=null),s}},p.wrap=function(t,e){return p.partial(e,t)},p.negate=function(t){return function(){return!t.apply(this,arguments)}},p.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},p.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},p.before=function(t,e){var n;return function(){return--t>0?n=e.apply(this,arguments):e=null,n}},p.once=p.partial(p.before,2),p.keys=function(t){if(!p.isObject(t))return[];if(d)return d(t);var e=[];for(var n in t)p.has(t,n)&&e.push(n);return e},p.values=function(t){for(var e=p.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},p.pairs=function(t){for(var e=p.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},p.invert=function(t){for(var e={},n=p.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},p.functions=p.methods=function(t){var e=[];for(var n in t)p.isFunction(t[n])&&e.push(n);return e.sort()},p.extend=function(t){if(!p.isObject(t))return t;for(var e,n,r=1,i=arguments.length;i>r;r++){e=arguments[r];for(n in e)c.call(e,n)&&(t[n]=e[n])}return t},p.pick=function(t,e,n){var r,i={};if(null==t)return i;if(p.isFunction(e)){e=f(e,n);for(r in t){var o=t[r];e(o,r,t)&&(i[r]=o)}}else{var l=s.apply([],a.call(arguments,1));t=new Object(t);for(var c=0,u=l.length;u>c;c++)r=l[c],r in t&&(i[r]=t[r])}return i},p.omit=function(t,e,n){if(p.isFunction(e))e=p.negate(e);else{var r=p.map(s.apply([],a.call(arguments,1)),String);e=function(t,e){return!p.contains(r,e)}}return p.pick(t,e,n)},p.defaults=function(t){if(!p.isObject(t))return t;for(var e=1,n=arguments.length;n>e;e++){var r=arguments[e];for(var i in r)void 0===t[i]&&(t[i]=r[i])}return t},p.clone=function(t){return p.isObject(t)?p.isArray(t)?t.slice():p.extend({},t):t},p.tap=function(t,e){return e(t),t};var y=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof p&&(t=t._wrapped),e instanceof p&&(e=e._wrapped);var i=l.call(t);if(i!==l.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]===t)return r[o]===e;var a=t.constructor,s=e.constructor;if(a!==s&&"constructor"in t&&"constructor"in e&&!(p.isFunction(a)&&a instanceof a&&p.isFunction(s)&&s instanceof s))return!1;n.push(t),r.push(e);var c,u;if("[object Array]"===i){if(c=t.length,u=c===e.length)for(;c--&&(u=y(t[c],e[c],n,r)););}else{var d,h=p.keys(t);if(c=h.length,u=p.keys(e).length===c)for(;c--&&(d=h[c],u=p.has(e,d)&&y(t[d],e[d],n,r)););}return n.pop(),r.pop(),u};p.isEqual=function(t,e){return y(t,e,[],[])},p.isEmpty=function(t){if(null==t)return!0;if(p.isArray(t)||p.isString(t)||p.isArguments(t))return 0===t.length;for(var e in t)if(p.has(t,e))return!1;return!0},p.isElement=function(t){return!(!t||1!==t.nodeType)},p.isArray=u||function(t){return"[object Array]"===l.call(t)},p.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){p["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),p.isArguments(arguments)||(p.isArguments=function(t){return p.has(t,"callee")}),"function"!=typeof/./&&(p.isFunction=function(t){return"function"==typeof t||!1}),p.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},p.isNaN=function(t){return p.isNumber(t)&&t!==+t},p.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===l.call(t)},p.isNull=function(t){return null===t},p.isUndefined=function(t){return void 0===t},p.has=function(t,e){return null!=t&&c.call(t,e)},p.noConflict=function(){return t._=e,this},p.identity=function(t){return t},p.constant=function(t){return function(){return t}},p.noop=function(){},p.property=function(t){return function(e){return e[t]}},p.matches=function(t){var e=p.pairs(t),n=e.length;return function(t){if(null==t)return!n;t=new Object(t);for(var r=0;n>r;r++){var i=e[r],o=i[0];if(i[1]!==t[o]||!(o in t))return!1}return!0}},p.times=function(t,e,n){var r=Array(Math.max(0,t));e=f(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},p.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},p.now=Date.now||function(){return(new Date).getTime()};var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=p.invert(x),_=function(t){var e=function(e){return t[e]},n="(?:"+p.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};p.escape=_(x),p.unescape=_(w),p.result=function(t,e){if(null!=t){var n=t[e];return p.isFunction(n)?t[e]():n}};var k=0;p.uniqueId=function(t){var e=++k+"";return t?t+e:e},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,T=function(t){return"\\"+S[t]};p.template=function(t,e,n){!e&&n&&(e=n),e=p.defaults({},e,p.templateSettings);var r=RegExp([(e.escape||C).source,(e.interpolate||C).source,(e.evaluate||C).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(D,T),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,p)},l=e.variable||"obj";return s.source="function("+l+"){\n"+o+"}",s},p.chain=function(t){var e=p(t);return e._chain=!0,e};var E=function(t){return this._chain?p(t).chain():t};p.mixin=function(t){p.each(p.functions(t),function(e){var n=p[e]=t[e];p.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),E.call(this,n.apply(p,t))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];p.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],E.call(this,n)}}),p.each(["concat","join","slice"],function(t){var e=n[t];p.prototype[t]=function(){return E.call(this,e.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}.call(this),function(t){function e(e,n,r,i){var o={data:i||0===i||i===!1?i:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:c,nest:u,wrap:d,html:h,update:p};return e&&t.extend(o,e,{nodes:[],parent:n}),r&&(o.tmpl=r,o._ctnt=o._ctnt||o.tmpl(t,o),o.key=++w,(k.length?y:b)[w]=o),o}function n(e,i,o){var a,s=o?t.map(o,function(t){return"string"==typeof t?e.key?t.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+g+'="'+e.key+'" $2'):t:n(t,e,t._ctnt)}):e;return i?s:(s=s.join(""),s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(e,n,i,o){a=t(i).get(),l(a),n&&(a=r(n).concat(a)),o&&(a=a.concat(r(o)))}),a?a:r(s))}function r(e){var n=document.createElement("div");return n.innerHTML=e,t.makeArray(n.childNodes)}function i(e){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+t.trim(e).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(e,n,r,i,o,s,l){var c,u,d,h=t.tmpl.tag[r];if(!h)throw"Unknown template tag: "+r;return c=h._default||[],s&&!/\w$/.test(o)&&(o+=s,s=""),o?(o=a(o),l=l?","+a(l)+")":s?")":"",u=s?o.indexOf(".")>-1?o+a(s):"("+o+").call($item"+l:o,d=s?u:"(typeof("+o+")==='function'?("+o+").call($item):("+o+"))"):d=u=c.$1||"null",i=a(i),"');"+h[n?"close":"open"].split("$notnull_1").join(o?"typeof("+o+")!=='undefined' && ("+o+")!=null":"true").split("$1a").join(d).split("$1").join(u).split("$2").join(i||c.$2||"")+"__.push('"})+"');}return __;")}function o(e,r){e._wrap=n(e,!0,t.isArray(r)?r:[v.test(r)?r:t(r).html()]).join("")}function a(t){return t?t.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}function l(n){function r(n){function r(t){t+=c,a=u[t]=u[t]||e(a,b[a.parent.key+c]||a.parent)}var i,o,a,s,l=n;if(s=n.getAttribute(g)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(i=l.getAttribute(g)););i!==s&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(g)||0:0,(a=b[s])||(a=y[s],a=e(a,b[l]||y[l]),a.key=++w,b[w]=a),_&&r(s)),n.removeAttribute(g)}else _&&(a=t.data(n,"tmplItem"))&&(r(a.key),b[a.key]=a,l=t.data(n.parentNode,"tmplItem"),l=l?l.key:0);if(a){for(o=a;o&&o.key!=l;)o.nodes.push(n),o=o.parent;delete a._ctnt,delete a._wrap,t.data(n,"tmplItem",a)}}var i,o,a,s,l,c="_"+_,u={};for(a=0,s=n.length;a<s;a++)if(1===(i=n[a]).nodeType){for(o=i.getElementsByTagName("*"),l=o.length-1;l>=0;l--)r(o[l]);r(i)}}function c(t,e,n,r){return t?void k.push({_:t,tmpl:e,item:this,data:n,options:r}):k.pop()}function u(e,n,r){return t.tmpl(t.template(e),n,r,this)}function d(e,n){var r=e.options||{};return r.wrapped=n,t.tmpl(t.template(e.tmpl),e.data,r,e.item)}function h(e,n){var r=this._wrap;return t.map(t(t.isArray(r)?r.join(""):r).filter(e||"*"),function(t){return n?t.innerText||t.textContent:t.outerHTML||s(t)})}function p(){var e=this.nodes;t.tmpl(null,null,null,this).insertBefore(e[0]),t(e).remove()}var f,m=t.fn.domManip,g="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},y={},x={key:0,data:{}},w=0,_=0,k=[];t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){t.fn[e]=function(r){var i,o,a,s,l=[],c=t(r),u=1===this.length&&this[0].parentNode;if(f=b||{},u&&11===u.nodeType&&1===u.childNodes.length&&1===c.length)c[n](this[0]),l=this;else{for(o=0,a=c.length;o<a;o++)_=o,i=(o>0?this.clone(!0):this).get(),t(c[o])[n](i),l=l.concat(i);_=0,l=this.pushStack(l,e,c.selector)}return s=f,f=null,t.tmpl.complete(s),l}}),t.fn.extend({tmpl:function(e,n,r){return t.tmpl(this[0],e,n,r)},tmplItem:function(){return t.tmplItem(this[0])},template:function(e){return t.template(e,this[0])},domManip:function(e,n,r){if(e[0]&&t.isArray(e[0])){for(var i,o=t.makeArray(arguments),a=e[0],s=a.length,l=0;l<s&&!(i=t.data(a[l++],"tmplItem")););i&&_&&(o[2]=function(e){t.tmpl.afterManip(this,e,r)}),m.apply(this,o)}else m.apply(this,arguments);return _=0,!f&&t.tmpl.complete(b),this}}),t.extend({tmpl:function(r,i,a,s){var l,c=!s;if(c)s=x,r=t.template[r]||t.template(null,r),y={};else if(!r)return r=s.tmpl,b[s.key]=s,s.nodes=[],s.wrapped&&o(s,s.wrapped),t(n(s,null,s.tmpl(t,s)));return r?("function"==typeof i&&(i=i.call(s||{})),a&&a.wrapped&&o(a,a.wrapped),l=t.isArray(i)?t.map(i,function(t){return t?e(a,s,r,t):null}):[e(a,s,r,i)],c?t(n(s,null,l)):l):[]},tmplItem:function(e){var n;for(e instanceof t&&(e=e[0]);e&&1===e.nodeType&&!(n=t.data(e,"tmplItem"))&&(e=e.parentNode););return n||x},template:function(e,n){return n?("string"==typeof n?n=i(n):n instanceof t&&(n=n[0]||{}),n.nodeType&&(n=t.data(n,"tmpl")||t.data(n,"tmpl",i(n.innerHTML))),"string"==typeof e?t.template[e]=n:n):e?"string"!=typeof e?t.template(null,e):t.template[e]||t.template(null,v.test(e)?e:t(e)):null},encode:function(t){return(""+t).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),t.extend(t.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(e,n,r){var i=11===n.nodeType?t.makeArray(n.childNodes):1===n.nodeType?[n]:[];r.call(e,n),l(i),_++}})}(jQuery),define("jquery_tmpl",["jquery"],function(t){return function(){var e;return e||t.$.fn.tmpl}}(this)),define("typeHelper",["jquery","jquery_tmpl"],function(t){"use strict";var e,n,r,i,o,a,s,l;s='<ul class="dropdown-menu" role="menu"></ul>',i=void 0,e=void 0,r=void 0,n=void 0,o=void 0,a=["gmail.com","qq.com","163.com","hotmail.com","sina.com","126.com","live.com","live.cn","vip.sina.com","vip.qq.com","sina.cn","sohu.com","139.com","wo.com.cn","189.cn","21cn.com"],l='<button class="btn btn-default result" type="button">${result}</button><a href="#" class="i-cancel ml10 delete-result">&times;</a>',t.fn.typeHelperOld=function(c){var u;i=t.extend({data:null,tpl:'<li><a href="#" data-value="${name}">${name}</a></li>',defaultList:[],showNum:5,remoteData:null,submitKey:null,onlyResult:!0,autoSelect:!0,emailMode:!1,insertHandler:function(){}},c),u=[],n=t(this),0!==n.length&&(n.after(t("<div></div>").addClass("typehelper")).siblings(".typehelper").append(n),
e=n.parent().css("position","relative"),t.tmpl(s).insertAfter(n),r=e.find("ul").hide().css("minWidth",n.outerWidth()),t.each(i.defaultList,function(e,n){t.tmpl(i.tpl,n).appendTo(r)}),n.on("focus",function(){i.defaultList.length>0&&t(this).parent().trigger("show.typehelper")}),n.on("input",function(e){n.is(":focus")&&(t(this).parent().trigger("search.typehelper"),t(this).parent().trigger("show.typehelper"))}),n.on("keydown",function(e){t(this).parent().trigger("select.typehelper",e)}),r.delegate("li","mouseover",function(){t(this).siblings("li").removeClass("active"),t(this).addClass("active")}),n.on("blur",function(){var e,n;t(this).parent().trigger("hide.typehelper"),i.autoSelect&&(t(this).siblings("ul").find(".active").length>0?(e=r.find(".active").index(),n=u[e],t(this).parent().trigger("insert.typehelper",[r.find(".active a"),n])):t(this).val(""))}),e.on("show.typehelper",function(){t(this).find("ul").show()}),e.on("hide.typehelper",function(){t(this).find("ul").hide()}),e.on("insert.typehelper",function(o,a,s){e=t(this),n=e.find("input"),r=e.find("ul"),n.val(t(a).data("value")),t(".result",e).length>0&&(t(".result",e).remove(),e.find(".delete-result").remove()),i.onlyResult&&(n.hide(),r.after(t.tmpl(l,{result:n.val()})),i.submitKey&&n.data(i.submitKey,t(a).data(i.submitKey)),e.find(".result").on("click",function(){t(this).siblings(".delete-result").remove(),t(this).remove(),n.show().focus(),e.trigger("search.typehelper")}),e.find(".delete-result").on("click",function(){return t(this).siblings(".result").remove(),t(this).remove(),n.val("").show(),!1})),e.parents(".form-group").next(".form-group").find("input").focus(),i.insertHandler(s)}),e.on("select.typehelper",function(i,o){var a,s,l,c,d,h;if(e=t(this),n=e.find("input"),r=e.find("ul"),a=r.find("li"),o)switch(o.keyCode){case 9:o.shiftKey||(o.preventDefault(),e.parent(".form-group").next(".form-group").find("input").focus());break;case 38:o.preventDefault(),a.length&&(r.find(".active").length?r.find(".active").removeClass("active").prev("li").addClass("active"):a.last().addClass("active"));break;case 40:o.preventDefault(),a.length&&(r.find(".active").length?r.find(".active").removeClass("active").next("li").addClass("active"):a.first().addClass("active"));break;case 13:if(o.stopPropagation(),o.preventDefault(),r.find(".active").length<=0)return;c=r.find(".active").index(),h=u[c],e.trigger("insert.typehelper",[r.find(".active a"),h]),e.trigger("hide.typehelper");break;case 9:s=t(this).parents("form").find("input"),l=s.index(t("input:focus")),l!==-1&&(d=s.slice(l+1),d.length&&d.each(function(){var e,n;if(n=t(this).attr("type"),e=["text","email","password","url"],!t(this).val()&&e.indexOf(n)!==-1)return t(this).focus(),!1}));break;case 27:o.preventDefault();break;default:return}}),e.on("search.typehelper",function(){var s,l,c,d;if(e=t(this),n=e.find("input"),r=e.find("ul"),n.val().length)if(c=[],i.remoteData)i.remoteData(n.val(),function(e){u=e,c=e,c.length>0&&(r.children().remove(),t.tmpl(i.tpl,c).appendTo(r),1===c.length&&r.children().first().addClass("active"))});else{for(d=0,i.emailMode&&(i.data=[{name:n.val()}],t.each(a,function(t,e){n.val().split("@")[1]!=e&&i.data.push({name:n.val().replace(/@.*$/,"")+"@"+e})})),o=i.data.length,l=0;l<o&&(s=i.data[l],!(0===s.name.toLowerCase().indexOf(n.val().toLowerCase())&&(c.push(s),d++,d>=i.showNum)));)l++;c.length>0&&(r.children().remove(),t.tmpl(i.tpl,c).appendTo(r),(1===c.length||i.emailMode)&&r.children().first().addClass("active"))}}),n.val().length>0&&e.trigger("insert.typehelper",n))}}),function(t){"function"==typeof define&&define.amd?define("jquery-mousewheel",["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var a=e||window.event,s=l.call(arguments,1),c=0,d=0,h=0,p=0,f=0,m=0;if(e=t.event.fix(a),e.type="mousewheel","detail"in a&&(h=a.detail*-1),"wheelDelta"in a&&(h=a.wheelDelta),"wheelDeltaY"in a&&(h=a.wheelDeltaY),"wheelDeltaX"in a&&(d=a.wheelDeltaX*-1),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=h*-1,h=0),c=0===h?d:h,"deltaY"in a&&(h=a.deltaY*-1,c=h),"deltaX"in a&&(d=a.deltaX,0===h&&(c=d*-1)),0!==h||0!==d){if(1===a.deltaMode){var g=t.data(this,"mousewheel-line-height");c*=g,h*=g,d*=g}else if(2===a.deltaMode){var v=t.data(this,"mousewheel-page-height");c*=v,h*=v,d*=v}if(p=Math.max(Math.abs(h),Math.abs(d)),(!o||p<o)&&(o=p,r(a,p)&&(o/=40)),r(a,p)&&(c/=40,d/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/o),d=Math[d>=1?"floor":"ceil"](d/o),h=Math[h>=1?"floor":"ceil"](h/o),u.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();f=e.clientX-b.left,m=e.clientY-b.top}return e.deltaX=d,e.deltaY=h,e.deltaFactor=o,e.offsetX=f,e.offsetY=m,e.deltaMode=0,s.unshift(e,c,d,h),i&&clearTimeout(i),i=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,s)}}function n(){o=null}function r(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var i,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=a.length;c;)t.event.fixHooks[a[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),r=n["offsetParent"in t.fn?"offsetParent":"parent"]();return r.length||(r=t("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){"undefined"!=typeof module&&module.exports?module.exports=t:t(jQuery,window,document)}(function(t){!function(e){var n="function"==typeof define&&define.amd,r="undefined"!=typeof module&&module.exports,i="https:"==document.location.protocol?"https:":"http:",o="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";n||(r?require("jquery-mousewheel")(t):t.event.special.mousewheel||t("head").append(decodeURI("%3Cscript src="+i+"//"+o+"%3E%3C/script%3E"))),e()}(function(){var e,n="mCustomScrollbar",r="mCS",i=".mCustomScrollbar",o={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},a=0,s={},l=window.attachEvent&&!window.addEventListener?1:0,c=!1,u=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],d={init:function(e){var e=t.extend(!0,{},o,e),n=h.call(this);if(e.live){var l=e.liveSelector||this.selector||i,c=t(l);if("off"===e.live)return void f(l);s[l]=setTimeout(function(){c.mCustomScrollbar(e),"once"===e.live&&c.length&&f(l)},500)}else f(l);return e.setWidth=e.set_width?e.set_width:e.setWidth,e.setHeight=e.set_height?e.set_height:e.setHeight,e.axis=e.horizontalScroll?"x":m(e.axis),e.scrollInertia=e.scrollInertia>0&&e.scrollInertia<17?17:e.scrollInertia,"object"!=typeof e.mouseWheel&&1==e.mouseWheel&&(e.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),e.mouseWheel.scrollAmount=e.mouseWheelPixels?e.mouseWheelPixels:e.mouseWheel.scrollAmount,e.mouseWheel.normalizeDelta=e.advanced.normalizeMouseWheelDelta?e.advanced.normalizeMouseWheelDelta:e.mouseWheel.normalizeDelta,e.scrollButtons.scrollType=g(e.scrollButtons.scrollType),p(e),t(n).each(function(){var n=t(this);if(!n.data(r)){n.data(r,{idx:++a,opt:e,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:n.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var i=n.data(r),o=i.opt,s=n.data("mcs-axis"),l=n.data("mcs-scrollbar-position"),c=n.data("mcs-theme");s&&(o.axis=s),l&&(o.scrollbarPosition=l),c&&(o.theme=c,p(o)),v.call(this),i&&o.callbacks.onCreate&&"function"==typeof o.callbacks.onCreate&&o.callbacks.onCreate.call(this),t("#mCSB_"+i.idx+"_container img:not(."+u[2]+")").addClass(u[2]),d.update.call(null,n)}})},update:function(e,n){var i=e||h.call(this);return t(i).each(function(){var e=t(this);if(e.data(r)){var i=e.data(r),o=i.opt,a=t("#mCSB_"+i.idx+"_container"),s=t("#mCSB_"+i.idx),l=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")];if(!a.length)return;i.tweenRunning&&V(e),n&&i&&o.callbacks.onBeforeUpdate&&"function"==typeof o.callbacks.onBeforeUpdate&&o.callbacks.onBeforeUpdate.call(this),e.hasClass(u[3])&&e.removeClass(u[3]),e.hasClass(u[4])&&e.removeClass(u[4]),s.css("max-height","none"),s.height()!==e.height()&&s.css("max-height",e.height()),y.call(this),"y"===o.axis||o.advanced.autoExpandHorizontalScroll||a.css("width",b(a)),i.overflowed=C.call(this),E.call(this),o.autoDraggerLength&&w.call(this),_.call(this),D.call(this);var c=[Math.abs(a[0].offsetTop),Math.abs(a[0].offsetLeft)];"x"!==o.axis&&(i.overflowed[0]?l[0].height()>l[0].parent().height()?S.call(this):(X(e,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),i.contentReset.y=null):(S.call(this),"y"===o.axis?T.call(this):"yx"===o.axis&&i.overflowed[1]&&X(e,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==o.axis&&(i.overflowed[1]?l[1].width()>l[1].parent().width()?S.call(this):(X(e,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),i.contentReset.x=null):(S.call(this),"x"===o.axis?T.call(this):"yx"===o.axis&&i.overflowed[0]&&X(e,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),n&&i&&(2===n&&o.callbacks.onImageLoad&&"function"==typeof o.callbacks.onImageLoad?o.callbacks.onImageLoad.call(this):3===n&&o.callbacks.onSelectorChange&&"function"==typeof o.callbacks.onSelectorChange?o.callbacks.onSelectorChange.call(this):o.callbacks.onUpdate&&"function"==typeof o.callbacks.onUpdate&&o.callbacks.onUpdate.call(this)),W.call(this)}})},scrollTo:function(e,n){if("undefined"!=typeof e&&null!=e){var i=h.call(this);return t(i).each(function(){var i=t(this);if(i.data(r)){var o=i.data(r),a=o.opt,s={trigger:"external",scrollInertia:a.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=t.extend(!0,{},s,n),c=q.call(this,e),u=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;c[0]=H.call(this,c[0],"y"),c[1]=H.call(this,c[1],"x"),l.moveDragger&&(c[0]*=o.scrollRatio.y,c[1]*=o.scrollRatio.x),l.dur=nt()?0:u,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==a.axis&&o.overflowed[0]&&(l.dir="y",l.overwrite="all",X(i,c[0].toString(),l)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==a.axis&&o.overflowed[1]&&(l.dir="x",l.overwrite="none",X(i,c[1].toString(),l))},l.timeout)}})}},stop:function(){var e=h.call(this);return t(e).each(function(){var e=t(this);e.data(r)&&V(e)})},disable:function(e){var n=h.call(this);return t(n).each(function(){var n=t(this);if(n.data(r)){n.data(r);W.call(this,"remove"),T.call(this),e&&S.call(this),E.call(this,!0),n.addClass(u[3])}})},destroy:function(){var e=h.call(this);return t(e).each(function(){var i=t(this);if(i.data(r)){var o=i.data(r),a=o.opt,s=t("#mCSB_"+o.idx),l=t("#mCSB_"+o.idx+"_container"),c=t(".mCSB_"+o.idx+"_scrollbar");a.live&&f(a.liveSelector||t(e).selector),W.call(this,"remove"),T.call(this),S.call(this),i.removeData(r),Z(this,"mcs"),c.remove(),l.find("img."+u[2]).removeClass(u[2]),s.replaceWith(l.contents()),i.removeClass(n+" _"+r+"_"+o.idx+" "+u[6]+" "+u[7]+" "+u[5]+" "+u[3]).addClass(u[4])}})}},h=function(){return"object"!=typeof t(this)||t(this).length<1?i:this},p=function(e){var n=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],r=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],i=["minimal","minimal-dark"],o=["minimal","minimal-dark"],a=["minimal","minimal-dark"];e.autoDraggerLength=!(t.inArray(e.theme,n)>-1)&&e.autoDraggerLength,e.autoExpandScrollbar=!(t.inArray(e.theme,r)>-1)&&e.autoExpandScrollbar,e.scrollButtons.enable=!(t.inArray(e.theme,i)>-1)&&e.scrollButtons.enable,e.autoHideScrollbar=t.inArray(e.theme,o)>-1||e.autoHideScrollbar,e.scrollbarPosition=t.inArray(e.theme,a)>-1?"outside":e.scrollbarPosition},f=function(t){s[t]&&(clearTimeout(s[t]),Z(s,t))},m=function(t){return"yx"===t||"xy"===t||"auto"===t?"yx":"x"===t||"horizontal"===t?"x":"y"},g=function(t){return"stepped"===t||"pixels"===t||"step"===t||"click"===t?"stepped":"stepless"},v=function(){var e=t(this),i=e.data(r),o=i.opt,a=o.autoExpandScrollbar?" "+u[1]+"_expand":"",s=["<div id='mCSB_"+i.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+i.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+i.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+i.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+i.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===o.axis?s[0]+s[1]:"x"===o.axis?s[1]:s[0],d="yx"===o.axis?"<div id='mCSB_"+i.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",h=o.autoHideScrollbar?" "+u[6]:"",p="x"!==o.axis&&"rtl"===i.langDir?" "+u[7]:"";o.setWidth&&e.css("width",o.setWidth),o.setHeight&&e.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===i.langDir?"989999px":o.setLeft,e.addClass(n+" _"+r+"_"+i.idx+h+p).wrapInner("<div id='mCSB_"+i.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+l+"'><div id='mCSB_"+i.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir="+i.langDir+" /></div>");var f=t("#mCSB_"+i.idx),m=t("#mCSB_"+i.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||m.css("width",b(m)),"outside"===o.scrollbarPosition?("static"===e.css("position")&&e.css("position","relative"),e.css("overflow","visible"),f.addClass("mCSB_outside").after(c)):(f.addClass("mCSB_inside").append(c),m.wrap(d)),x.call(this);var g=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},b=function(e){var n=[e[0].scrollWidth,Math.max.apply(Math,e.children().map(function(){return t(this).outerWidth(!0)}).get())],r=e.parent().width();return n[0]>r?n[0]:n[1]>r?n[1]:"100%"},y=function(){var e=t(this),n=e.data(r),i=n.opt,o=t("#mCSB_"+n.idx+"_container");if(i.advanced.autoExpandHorizontalScroll&&"y"!==i.axis){o.css({width:"auto","min-width":0,"overflow-x":"scroll"});var a=Math.ceil(o[0].scrollWidth);3===i.advanced.autoExpandHorizontalScroll||2!==i.advanced.autoExpandHorizontalScroll&&a>o.parent().width()?o.css({width:a,"min-width":"100%","overflow-x":"inherit"}):o.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(o[0].getBoundingClientRect().right+.4)-Math.floor(o[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},x=function(){var e=t(this),n=e.data(r),i=n.opt,o=t(".mCSB_"+n.idx+"_scrollbar:first"),a=tt(i.scrollButtons.tabindex)?"tabindex='"+i.scrollButtons.tabindex+"'":"",s=["<a href='#' class='"+u[13]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[14]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[15]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[16]+"' oncontextmenu='return false;' "+a+" />"],l=["x"===i.axis?s[2]:s[0],"x"===i.axis?s[3]:s[1],s[2],s[3]];i.scrollButtons.enable&&o.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])},w=function(){var e=t(this),n=e.data(r),i=t("#mCSB_"+n.idx),o=t("#mCSB_"+n.idx+"_container"),a=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")],s=[i.height()/o.outerHeight(!1),i.width()/o.outerWidth(!1)],c=[parseInt(a[0].css("min-height")),Math.round(s[0]*a[0].parent().height()),parseInt(a[1].css("min-width")),Math.round(s[1]*a[1].parent().width())],u=l&&c[1]<c[0]?c[0]:c[1],d=l&&c[3]<c[2]?c[2]:c[3];a[0].css({height:u,"max-height":a[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),a[1].css({width:d,"max-width":a[1].parent().width()-10})},_=function(){var e=t(this),n=e.data(r),i=t("#mCSB_"+n.idx),o=t("#mCSB_"+n.idx+"_container"),a=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")],s=[o.outerHeight(!1)-i.height(),o.outerWidth(!1)-i.width()],l=[s[0]/(a[0].parent().height()-a[0].height()),s[1]/(a[1].parent().width()-a[1].width())];n.scrollRatio={y:l[0],x:l[1]}},k=function(t,e,n){var r=n?u[0]+"_expanded":"",i=t.closest(".mCSB_scrollTools");"active"===e?(t.toggleClass(u[0]+" "+r),i.toggleClass(u[1]),t[0]._draggable=t[0]._draggable?0:1):t[0]._draggable||("hide"===e?(t.removeClass(u[0]),i.removeClass(u[1])):(t.addClass(u[0]),i.addClass(u[1])))},C=function(){var e=t(this),n=e.data(r),i=t("#mCSB_"+n.idx),o=t("#mCSB_"+n.idx+"_container"),a=null==n.overflowed?o.height():o.outerHeight(!1),s=null==n.overflowed?o.width():o.outerWidth(!1),l=o[0].scrollHeight,c=o[0].scrollWidth;return l>a&&(a=l),c>s&&(s=c),[a>i.height(),s>i.width()]},S=function(){var e=t(this),n=e.data(r),i=n.opt,o=t("#mCSB_"+n.idx),a=t("#mCSB_"+n.idx+"_container"),s=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")];if(V(e),("x"!==i.axis&&!n.overflowed[0]||"y"===i.axis&&n.overflowed[0])&&(s[0].add(a).css("top",0),X(e,"_resetY")),"y"!==i.axis&&!n.overflowed[1]||"x"===i.axis&&n.overflowed[1]){var l=dx=0;"rtl"===n.langDir&&(l=o.width()-a.outerWidth(!1),dx=Math.abs(l/n.scrollRatio.x)),a.css("left",l),s[1].css("left",dx),X(e,"_resetX")}},D=function(){function e(){a=setTimeout(function(){t.event.special.mousewheel?(clearTimeout(a),A.call(n[0])):e()},100)}var n=t(this),i=n.data(r),o=i.opt;if(!i.bindEvents){if(M.call(this),o.contentTouchScroll&&L.call(this),B.call(this),o.mouseWheel.enable){var a;e()}P.call(this),O.call(this),o.advanced.autoScrollOnFocus&&F.call(this),o.scrollButtons.enable&&R.call(this),o.keyboard.enable&&z.call(this),i.bindEvents=!0}},T=function(){var e=t(this),n=e.data(r),i=n.opt,o=r+"_"+n.idx,a=".mCSB_"+n.idx+"_scrollbar",s=t("#mCSB_"+n.idx+",#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,"+a+" ."+u[12]+",#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal,"+a+">a"),l=t("#mCSB_"+n.idx+"_container");i.advanced.releaseDraggableSelectors&&s.add(t(i.advanced.releaseDraggableSelectors)),i.advanced.extraDraggableSelectors&&s.add(t(i.advanced.extraDraggableSelectors)),n.bindEvents&&(t(document).add(t(!I()||top.document)).unbind("."+o),s.each(function(){t(this).unbind("."+o)}),clearTimeout(e[0]._focusTimeout),Z(e[0],"_focusTimeout"),clearTimeout(n.sequential.step),Z(n.sequential,"step"),clearTimeout(l[0].onCompleteTimeout),Z(l[0],"onCompleteTimeout"),n.bindEvents=!1)},E=function(e){var n=t(this),i=n.data(r),o=i.opt,a=t("#mCSB_"+i.idx+"_container_wrapper"),s=a.length?a:t("#mCSB_"+i.idx+"_container"),l=[t("#mCSB_"+i.idx+"_scrollbar_vertical"),t("#mCSB_"+i.idx+"_scrollbar_horizontal")],c=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==o.axis&&(i.overflowed[0]&&!e?(l[0].add(c[0]).add(l[0].children("a")).css("display","block"),s.removeClass(u[8]+" "+u[10])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[0].css("display","none"),s.removeClass(u[10])):(l[0].css("display","none"),s.addClass(u[10])),s.addClass(u[8]))),"y"!==o.axis&&(i.overflowed[1]&&!e?(l[1].add(c[1]).add(l[1].children("a")).css("display","block"),s.removeClass(u[9]+" "+u[11])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[1].css("display","none"),s.removeClass(u[11])):(l[1].css("display","none"),s.addClass(u[11])),s.addClass(u[9]))),i.overflowed[0]||i.overflowed[1]?n.removeClass(u[5]):n.addClass(u[5])},$=function(e){var n=e.type,r=e.target.ownerDocument!==document?[t(frameElement).offset().top,t(frameElement).offset().left]:null,i=I()&&e.target.ownerDocument!==top.document?[t(e.view.frameElement).offset().top,t(e.view.frameElement).offset().left]:[0,0];switch(n){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return r?[e.originalEvent.pageY-r[0]+i[0],e.originalEvent.pageX-r[1]+i[1],!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var o=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],a=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[o.screenY,o.screenX,a>1]:[o.pageY,o.pageX,a>1];default:return r?[e.pageY-r[0]+i[0],e.pageX-r[1]+i[1],!1]:[e.pageY,e.pageX,!1]}},M=function(){function e(t){var e=f.find("iframe");if(e.length){var n=t?"auto":"none";e.css("pointer-events",n)}}function n(t,e,n,r){if(f[0].idleTimer=d.scrollInertia<233?250:0,i.attr("id")===p[1])var o="x",a=(i[0].offsetLeft-e+r)*u.scrollRatio.x;else var o="y",a=(i[0].offsetTop-t+n)*u.scrollRatio.y;X(s,a.toString(),{dir:o,drag:!0})}var i,o,a,s=t(this),u=s.data(r),d=u.opt,h=r+"_"+u.idx,p=["mCSB_"+u.idx+"_dragger_vertical","mCSB_"+u.idx+"_dragger_horizontal"],f=t("#mCSB_"+u.idx+"_container"),m=t("#"+p[0]+",#"+p[1]),g=d.advanced.releaseDraggableSelectors?m.add(t(d.advanced.releaseDraggableSelectors)):m,v=d.advanced.extraDraggableSelectors?t(!I()||top.document).add(t(d.advanced.extraDraggableSelectors)):t(!I()||top.document);m.bind("mousedown."+h+" touchstart."+h+" pointerdown."+h+" MSPointerDown."+h,function(n){if(n.stopImmediatePropagation(),n.preventDefault(),Q(n)){c=!0,l&&(document.onselectstart=function(){return!1}),e(!1),V(s),i=t(this);var r=i.offset(),u=$(n)[0]-r.top,h=$(n)[1]-r.left,p=i.height()+r.top,f=i.width()+r.left;u<p&&u>0&&h<f&&h>0&&(o=u,a=h),k(i,"active",d.autoExpandScrollbar)}}).bind("touchmove."+h,function(t){t.stopImmediatePropagation(),t.preventDefault();var e=i.offset(),r=$(t)[0]-e.top,s=$(t)[1]-e.left;n(o,a,r,s)}),t(document).add(v).bind("mousemove."+h+" pointermove."+h+" MSPointerMove."+h,function(t){if(i){var e=i.offset(),r=$(t)[0]-e.top,s=$(t)[1]-e.left;if(o===r&&a===s)return;n(o,a,r,s)}}).add(g).bind("mouseup."+h+" touchend."+h+" pointerup."+h+" MSPointerUp."+h,function(t){i&&(k(i,"active",d.autoExpandScrollbar),i=null),c=!1,l&&(document.onselectstart=null),e(!0)})},L=function(){function n(t){if(!J(t)||c||$(t)[2])return void(e=0);e=1,_=0,k=0,u=1,C.removeClass("mCS_touch_action");var n=M.offset();d=$(t)[0]-n.top,h=$(t)[1]-n.left,F=[$(t)[0],$(t)[1]]}function i(t){if(J(t)&&!c&&!$(t)[2]&&(D.documentTouchScroll||t.preventDefault(),t.stopImmediatePropagation(),(!k||_)&&u)){g=G();var e=E.offset(),n=$(t)[0]-e.top,r=$(t)[1]-e.left,i="mcsLinearOut";if(B.push(n),A.push(r),F[2]=Math.abs($(t)[0]-F[0]),F[3]=Math.abs($(t)[1]-F[1]),S.overflowed[0])var o=L[0].parent().height()-L[0].height(),a=d-n>0&&n-d>-(o*S.scrollRatio.y)&&(2*F[3]<F[2]||"yx"===D.axis);if(S.overflowed[1])var s=L[1].parent().width()-L[1].width(),p=h-r>0&&r-h>-(s*S.scrollRatio.x)&&(2*F[2]<F[3]||"yx"===D.axis);a||p?(z||t.preventDefault(),_=1):(k=1,C.addClass("mCS_touch_action")),z&&t.preventDefault(),x="yx"===D.axis?[d-n,h-r]:"x"===D.axis?[null,h-r]:[d-n,null],M[0].idleTimer=250,S.overflowed[0]&&l(x[0],N,i,"y","all",!0),S.overflowed[1]&&l(x[1],N,i,"x",P,!0)}}function o(t){if(!J(t)||c||$(t)[2])return void(e=0);e=1,t.stopImmediatePropagation(),V(C),m=G();var n=E.offset();p=$(t)[0]-n.top,f=$(t)[1]-n.left,B=[],A=[]}function a(t){if(J(t)&&!c&&!$(t)[2]){u=0,t.stopImmediatePropagation(),_=0,k=0,v=G();var e=E.offset(),n=$(t)[0]-e.top,r=$(t)[1]-e.left;if(!(v-g>30)){y=1e3/(v-m);var i="mcsEaseOut",o=y<2.5,a=o?[B[B.length-2],A[A.length-2]]:[0,0];b=o?[n-a[0],r-a[1]]:[n-p,r-f];var d=[Math.abs(b[0]),Math.abs(b[1])];y=o?[Math.abs(b[0]/4),Math.abs(b[1]/4)]:[y,y];var h=[Math.abs(M[0].offsetTop)-b[0]*s(d[0]/y[0],y[0]),Math.abs(M[0].offsetLeft)-b[1]*s(d[1]/y[1],y[1])];x="yx"===D.axis?[h[0],h[1]]:"x"===D.axis?[null,h[1]]:[h[0],null],w=[4*d[0]+D.scrollInertia,4*d[1]+D.scrollInertia];var C=parseInt(D.contentTouchScroll)||0;x[0]=d[0]>C?x[0]:0,x[1]=d[1]>C?x[1]:0,S.overflowed[0]&&l(x[0],w[0],i,"y",P,!1),S.overflowed[1]&&l(x[1],w[1],i,"x",P,!1)}}}function s(t,e){var n=[1.5*e,2*e,e/1.5,e/2];return t>90?e>4?n[0]:n[3]:t>60?e>3?n[3]:n[2]:t>30?e>8?n[1]:e>6?n[0]:e>4?e:n[2]:e>8?e:n[3]}function l(t,e,n,r,i,o){t&&X(C,t.toString(),{dur:e,scrollEasing:n,dir:r,overwrite:i,drag:o})}var u,d,h,p,f,m,g,v,b,y,x,w,_,k,C=t(this),S=C.data(r),D=S.opt,T=r+"_"+S.idx,E=t("#mCSB_"+S.idx),M=t("#mCSB_"+S.idx+"_container"),L=[t("#mCSB_"+S.idx+"_dragger_vertical"),t("#mCSB_"+S.idx+"_dragger_horizontal")],B=[],A=[],N=0,P="yx"===D.axis?"none":"all",F=[],O=M.find("iframe"),R=["touchstart."+T+" pointerdown."+T+" MSPointerDown."+T,"touchmove."+T+" pointermove."+T+" MSPointerMove."+T,"touchend."+T+" pointerup."+T+" MSPointerUp."+T],z=void 0!==document.body.style.touchAction;M.bind(R[0],function(t){n(t)}).bind(R[1],function(t){i(t)}),E.bind(R[0],function(t){o(t)}).bind(R[2],function(t){a(t)}),O.length&&O.each(function(){t(this).load(function(){I(this)&&t(this.contentDocument||this.contentWindow.document).bind(R[0],function(t){n(t),o(t)}).bind(R[1],function(t){i(t)}).bind(R[2],function(t){a(t)})})})},B=function(){function n(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function i(t,e,n){u.type=n&&o?"stepped":"stepless",u.scrollAmount=10,j(a,t,e,"mcsLinearOut",n?60:null)}var o,a=t(this),s=a.data(r),l=s.opt,u=s.sequential,d=r+"_"+s.idx,h=t("#mCSB_"+s.idx+"_container"),p=h.parent();h.bind("mousedown."+d,function(t){e||o||(o=1,c=!0)}).add(document).bind("mousemove."+d,function(t){if(!e&&o&&n()){var r=h.offset(),a=$(t)[0]-r.top+h[0].offsetTop,c=$(t)[1]-r.left+h[0].offsetLeft;a>0&&a<p.height()&&c>0&&c<p.width()?u.step&&i("off",null,"stepped"):("x"!==l.axis&&s.overflowed[0]&&(a<0?i("on",38):a>p.height()&&i("on",40)),"y"!==l.axis&&s.overflowed[1]&&(c<0?i("on",37):c>p.width()&&i("on",39)))}}).bind("mouseup."+d+" dragend."+d,function(t){e||(o&&(o=0,i("off",null)),c=!1)})},A=function(){function e(e,r){if(V(n),!N(n,e.target)){var a="auto"!==o.mouseWheel.deltaFactor?parseInt(o.mouseWheel.deltaFactor):l&&e.deltaFactor<100?100:e.deltaFactor||100,u=o.scrollInertia;if("x"===o.axis||"x"===o.mouseWheel.axis)var d="x",h=[Math.round(a*i.scrollRatio.x),parseInt(o.mouseWheel.scrollAmount)],p="auto"!==o.mouseWheel.scrollAmount?h[1]:h[0]>=s.width()?.9*s.width():h[0],f=Math.abs(t("#mCSB_"+i.idx+"_container")[0].offsetLeft),m=c[1][0].offsetLeft,g=c[1].parent().width()-c[1].width(),v=e.deltaX||e.deltaY||r;else var d="y",h=[Math.round(a*i.scrollRatio.y),parseInt(o.mouseWheel.scrollAmount)],p="auto"!==o.mouseWheel.scrollAmount?h[1]:h[0]>=s.height()?.9*s.height():h[0],f=Math.abs(t("#mCSB_"+i.idx+"_container")[0].offsetTop),m=c[0][0].offsetTop,g=c[0].parent().height()-c[0].height(),v=e.deltaY||r;"y"===d&&!i.overflowed[0]||"x"===d&&!i.overflowed[1]||((o.mouseWheel.invert||e.webkitDirectionInvertedFromDevice)&&(v=-v),o.mouseWheel.normalizeDelta&&(v=v<0?-1:1),(v>0&&0!==m||v<0&&m!==g||o.mouseWheel.preventDefault)&&(e.stopImmediatePropagation(),e.preventDefault()),e.deltaFactor<2&&!o.mouseWheel.normalizeDelta&&(p=e.deltaFactor,u=17),X(n,(f-v*p).toString(),{dir:d,dur:u}))}}if(t(this).data(r)){var n=t(this),i=n.data(r),o=i.opt,a=r+"_"+i.idx,s=t("#mCSB_"+i.idx),c=[t("#mCSB_"+i.idx+"_dragger_vertical"),t("#mCSB_"+i.idx+"_dragger_horizontal")],u=t("#mCSB_"+i.idx+"_container").find("iframe");u.length&&u.each(function(){t(this).load(function(){I(this)&&t(this.contentDocument||this.contentWindow.document).bind("mousewheel."+a,function(t,n){e(t,n)})})}),s.bind("mousewheel."+a,function(t,n){e(t,n)})}},I=function(t){var e=null;if(t){try{var n=t.contentDocument||t.contentWindow.document;e=n.body.innerHTML}catch(t){}return null!==e}try{var n=top.document;e=n.body.innerHTML}catch(t){}return null!==e},N=function(e,n){var i=n.nodeName.toLowerCase(),o=e.data(r).opt.mouseWheel.disableOver,a=["select","textarea"];return t.inArray(i,o)>-1&&!(t.inArray(i,a)>-1&&!t(n).is(":focus"))},P=function(){var e,n=t(this),i=n.data(r),o=r+"_"+i.idx,a=t("#mCSB_"+i.idx+"_container"),s=a.parent(),l=t(".mCSB_"+i.idx+"_scrollbar ."+u[12]);l.bind("mousedown."+o+" touchstart."+o+" pointerdown."+o+" MSPointerDown."+o,function(n){c=!0,t(n.target).hasClass("mCSB_dragger")||(e=1)}).bind("touchend."+o+" pointerup."+o+" MSPointerUp."+o,function(t){c=!1}).bind("click."+o,function(r){if(e&&(e=0,t(r.target).hasClass(u[12])||t(r.target).hasClass("mCSB_draggerRail"))){V(n);var o=t(this),l=o.find(".mCSB_dragger");if(o.parent(".mCSB_scrollTools_horizontal").length>0){if(!i.overflowed[1])return;var c="x",d=r.pageX>l.offset().left?-1:1,h=Math.abs(a[0].offsetLeft)-d*(.9*s.width())}else{if(!i.overflowed[0])return;var c="y",d=r.pageY>l.offset().top?-1:1,h=Math.abs(a[0].offsetTop)-d*(.9*s.height())}X(n,h.toString(),{dir:c,scrollEasing:"mcsEaseInOut"})}})},F=function(){var e=t(this),n=e.data(r),i=n.opt,o=r+"_"+n.idx,a=t("#mCSB_"+n.idx+"_container"),s=a.parent();a.bind("focusin."+o,function(n){var r=t(document.activeElement),o=a.find(".mCustomScrollBox").length,l=0;r.is(i.advanced.autoScrollOnFocus)&&(V(e),clearTimeout(e[0]._focusTimeout),e[0]._focusTimer=o?(l+17)*o:0,e[0]._focusTimeout=setTimeout(function(){var t=[et(r)[0],et(r)[1]],n=[a[0].offsetTop,a[0].offsetLeft],o=[n[0]+t[0]>=0&&n[0]+t[0]<s.height()-r.outerHeight(!1),n[1]+t[1]>=0&&n[0]+t[1]<s.width()-r.outerWidth(!1)],c="yx"!==i.axis||o[0]||o[1]?"all":"none";"x"===i.axis||o[0]||X(e,t[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:c,dur:l}),"y"===i.axis||o[1]||X(e,t[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:c,dur:l})},e[0]._focusTimer))})},O=function(){var e=t(this),n=e.data(r),i=r+"_"+n.idx,o=t("#mCSB_"+n.idx+"_container").parent();o.bind("scroll."+i,function(e){0===o.scrollTop()&&0===o.scrollLeft()||t(".mCSB_"+n.idx+"_scrollbar").css("visibility","hidden")})},R=function(){var e=t(this),n=e.data(r),i=n.opt,o=n.sequential,a=r+"_"+n.idx,s=".mCSB_"+n.idx+"_scrollbar",l=t(s+">a");l.bind("mousedown."+a+" touchstart."+a+" pointerdown."+a+" MSPointerDown."+a+" mouseup."+a+" touchend."+a+" pointerup."+a+" MSPointerUp."+a+" mouseout."+a+" pointerout."+a+" MSPointerOut."+a+" click."+a,function(r){function a(t,n){o.scrollAmount=i.scrollButtons.scrollAmount,
j(e,t,n)}if(r.preventDefault(),Q(r)){var s=t(this).attr("class");switch(o.type=i.scrollButtons.scrollType,r.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===o.type)return;c=!0,n.tweenRunning=!1,a("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===o.type)return;c=!1,o.dir&&a("off",s);break;case"click":if("stepped"!==o.type||n.tweenRunning)return;a("on",s)}}})},z=function(){function e(e){function r(t,e){a.type=o.keyboard.scrollType,a.scrollAmount=o.keyboard.scrollAmount,"stepped"===a.type&&i.tweenRunning||j(n,t,e)}switch(e.type){case"blur":i.tweenRunning&&a.dir&&r("off",null);break;case"keydown":case"keyup":var s=e.keyCode?e.keyCode:e.which,l="on";if("x"!==o.axis&&(38===s||40===s)||"y"!==o.axis&&(37===s||39===s)){if((38===s||40===s)&&!i.overflowed[0]||(37===s||39===s)&&!i.overflowed[1])return;"keyup"===e.type&&(l="off"),t(document.activeElement).is(d)||(e.preventDefault(),e.stopImmediatePropagation(),r(l,s))}else if(33===s||34===s){if((i.overflowed[0]||i.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type){V(n);var h=34===s?-1:1;if("x"===o.axis||"yx"===o.axis&&i.overflowed[1]&&!i.overflowed[0])var p="x",f=Math.abs(c[0].offsetLeft)-h*(.9*u.width());else var p="y",f=Math.abs(c[0].offsetTop)-h*(.9*u.height());X(n,f.toString(),{dir:p,scrollEasing:"mcsEaseInOut"})}}else if((35===s||36===s)&&!t(document.activeElement).is(d)&&((i.overflowed[0]||i.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type)){if("x"===o.axis||"yx"===o.axis&&i.overflowed[1]&&!i.overflowed[0])var p="x",f=35===s?Math.abs(u.width()-c.outerWidth(!1)):0;else var p="y",f=35===s?Math.abs(u.height()-c.outerHeight(!1)):0;X(n,f.toString(),{dir:p,scrollEasing:"mcsEaseInOut"})}}}var n=t(this),i=n.data(r),o=i.opt,a=i.sequential,s=r+"_"+i.idx,l=t("#mCSB_"+i.idx),c=t("#mCSB_"+i.idx+"_container"),u=c.parent(),d="input,textarea,select,datalist,keygen,[contenteditable='true']",h=c.find("iframe"),p=["blur."+s+" keydown."+s+" keyup."+s];h.length&&h.each(function(){t(this).load(function(){I(this)&&t(this.contentDocument||this.contentWindow.document).bind(p[0],function(t){e(t)})})}),l.attr("tabindex","0").bind(p[0],function(t){e(t)})},j=function(e,n,i,o,a){function s(t){d.snapAmount&&(h.scrollAmount=d.snapAmount instanceof Array?"x"===h.dir[0]?d.snapAmount[1]:d.snapAmount[0]:d.snapAmount);var n="stepped"!==h.type,r=a?a:t?n?m/1.5:g:1e3/60,i=t?n?7.5:40:2.5,l=[Math.abs(p[0].offsetTop),Math.abs(p[0].offsetLeft)],u=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],f="x"===h.dir[0]?l[1]+h.dir[1]*(u[1]*i):l[0]+h.dir[1]*(u[0]*i),v="x"===h.dir[0]?l[1]+h.dir[1]*parseInt(h.scrollAmount):l[0]+h.dir[1]*parseInt(h.scrollAmount),b="auto"!==h.scrollAmount?v:f,y=o?o:t?n?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",x=!!t;return t&&r<17&&(b="x"===h.dir[0]?l[1]:l[0]),X(e,b.toString(),{dir:h.dir[0],scrollEasing:y,dur:r,onComplete:x}),t?void(h.dir=!1):(clearTimeout(h.step),void(h.step=setTimeout(function(){s()},r)))}function l(){clearTimeout(h.step),Z(h,"step"),V(e)}var c=e.data(r),d=c.opt,h=c.sequential,p=t("#mCSB_"+c.idx+"_container"),f="stepped"===h.type,m=d.scrollInertia<26?26:d.scrollInertia,g=d.scrollInertia<1?17:d.scrollInertia;switch(n){case"on":if(h.dir=[i===u[16]||i===u[15]||39===i||37===i?"x":"y",i===u[13]||i===u[15]||38===i||37===i?-1:1],V(e),tt(i)&&"stepped"===h.type)return;s(f);break;case"off":l(),(f||c.tweenRunning&&h.dir)&&s(!0)}},q=function(e){var n=t(this).data(r).opt,i=[];return"function"==typeof e&&(e=e()),e instanceof Array?i=e.length>1?[e[0],e[1]]:"x"===n.axis?[null,e[0]]:[e[0],null]:(i[0]=e.y?e.y:e.x||"x"===n.axis?null:e,i[1]=e.x?e.x:e.y||"y"===n.axis?null:e),"function"==typeof i[0]&&(i[0]=i[0]()),"function"==typeof i[1]&&(i[1]=i[1]()),i},H=function(e,n){if(null!=e&&"undefined"!=typeof e){var i=t(this),o=i.data(r),a=o.opt,s=t("#mCSB_"+o.idx+"_container"),l=s.parent(),c=typeof e;n||(n="x"===a.axis?"x":"y");var u="x"===n?s.outerWidth(!1):s.outerHeight(!1),h="x"===n?s[0].offsetLeft:s[0].offsetTop,p="x"===n?"left":"top";switch(c){case"function":return e();case"object":var f=e.jquery?e:t(e);if(!f.length)return;return"x"===n?et(f)[1]:et(f)[0];case"string":case"number":if(tt(e))return Math.abs(e);if(e.indexOf("%")!==-1)return Math.abs(u*parseInt(e)/100);if(e.indexOf("-=")!==-1)return Math.abs(h-parseInt(e.split("-=")[1]));if(e.indexOf("+=")!==-1){var m=h+parseInt(e.split("+=")[1]);return m>=0?0:Math.abs(m)}if(e.indexOf("px")!==-1&&tt(e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(l.height()-s.outerHeight(!1));if("right"===e)return Math.abs(l.width()-s.outerWidth(!1));if("first"===e||"last"===e){var f=s.find(":"+e);return"x"===n?et(f)[1]:et(f)[0]}return t(e).length?"x"===n?et(t(e))[1]:et(t(e))[0]:(s.css(p,e),void d.update.call(null,i[0]))}}},W=function(e){function n(){return clearTimeout(h[0].autoUpdate),0===s.parents("html").length?void(s=null):void(h[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(l.poll.change.n=o(),l.poll.change.n!==l.poll.change.o)?(l.poll.change.o=l.poll.change.n,void a(3)):c.advanced.updateOnContentResize&&(l.poll.size.n=s[0].scrollHeight+s[0].scrollWidth+h[0].offsetHeight+s[0].offsetHeight+s[0].offsetWidth,l.poll.size.n!==l.poll.size.o)?(l.poll.size.o=l.poll.size.n,void a(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(l.poll.img.n=h.find("img").length,l.poll.img.n===l.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&n()):(l.poll.img.o=l.poll.img.n,void h.find("img").each(function(){i(this)}))},c.advanced.autoUpdateTimeout))}function i(e){function n(t,e){return function(){return e.apply(t,arguments)}}function r(){this.onload=null,t(e).addClass(u[2]),a(2)}if(t(e).hasClass(u[2]))return void a();var i=new Image;i.onload=n(i,r),i.src=e.src}function o(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange="*");var t=0,e=h.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&e.length>0&&e.each(function(){t+=this.offsetHeight+this.offsetWidth}),t}function a(t){clearTimeout(h[0].autoUpdate),d.update.call(null,s[0],t)}var s=t(this),l=s.data(r),c=l.opt,h=t("#mCSB_"+l.idx+"_container");return e?(clearTimeout(h[0].autoUpdate),void Z(h[0],"autoUpdate")):void n()},U=function(t,e,n){return Math.round(t/e)*e-n},V=function(e){var n=e.data(r),i=t("#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal");i.each(function(){Y.call(this)})},X=function(e,n,i){function o(t){return l&&c.callbacks[t]&&"function"==typeof c.callbacks[t]}function a(){return[c.callbacks.alwaysTriggerOffsets||x>=w[0]+C,c.callbacks.alwaysTriggerOffsets||x<=-S]}function s(){var t=[p[0].offsetTop,p[0].offsetLeft],n=[b[0].offsetTop,b[0].offsetLeft],r=[p.outerHeight(!1),p.outerWidth(!1)],o=[h.height(),h.width()];e[0].mcs={content:p,top:t[0],left:t[1],draggerTop:n[0],draggerLeft:n[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(r[0])-o[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(r[1])-o[1])),direction:i.dir}}var l=e.data(r),c=l.opt,u={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},i=t.extend(u,i),d=[i.dur,i.drag?0:i.dur],h=t("#mCSB_"+l.idx),p=t("#mCSB_"+l.idx+"_container"),f=p.parent(),m=c.callbacks.onTotalScrollOffset?q.call(e,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?q.call(e,c.callbacks.onTotalScrollBackOffset):[0,0];if(l.trigger=i.trigger,0===f.scrollTop()&&0===f.scrollLeft()||(t(".mCSB_"+l.idx+"_scrollbar").css("visibility","visible"),f.scrollTop(0).scrollLeft(0)),"_resetY"!==n||l.contentReset.y||(o("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(e[0]),l.contentReset.y=1),"_resetX"!==n||l.contentReset.x||(o("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(e[0]),l.contentReset.x=1),"_resetY"!==n&&"_resetX"!==n){if(!l.contentReset.y&&e[0].mcs||!l.overflowed[0]||(o("onOverflowY")&&c.callbacks.onOverflowY.call(e[0]),l.contentReset.x=null),!l.contentReset.x&&e[0].mcs||!l.overflowed[1]||(o("onOverflowX")&&c.callbacks.onOverflowX.call(e[0]),l.contentReset.x=null),c.snapAmount){var v=c.snapAmount instanceof Array?"x"===i.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;n=U(n,v,c.snapOffset)}switch(i.dir){case"x":var b=t("#mCSB_"+l.idx+"_dragger_horizontal"),y="left",x=p[0].offsetLeft,w=[h.width()-p.outerWidth(!1),b.parent().width()-b.width()],_=[n,0===n?0:n/l.scrollRatio.x],C=m[1],S=g[1],D=C>0?C/l.scrollRatio.x:0,T=S>0?S/l.scrollRatio.x:0;break;case"y":var b=t("#mCSB_"+l.idx+"_dragger_vertical"),y="top",x=p[0].offsetTop,w=[h.height()-p.outerHeight(!1),b.parent().height()-b.height()],_=[n,0===n?0:n/l.scrollRatio.y],C=m[0],S=g[0],D=C>0?C/l.scrollRatio.y:0,T=S>0?S/l.scrollRatio.y:0}_[1]<0||0===_[0]&&0===_[1]?_=[0,0]:_[1]>=w[1]?_=[w[0],w[1]]:_[0]=-_[0],e[0].mcs||(s(),o("onInit")&&c.callbacks.onInit.call(e[0])),clearTimeout(p[0].onCompleteTimeout),K(b[0],y,Math.round(_[1]),d[1],i.scrollEasing),!l.tweenRunning&&(0===x&&_[0]>=0||x===w[0]&&_[0]<=w[0])||K(p[0],y,Math.round(_[0]),d[0],i.scrollEasing,i.overwrite,{onStart:function(){i.callbacks&&i.onStart&&!l.tweenRunning&&(o("onScrollStart")&&(s(),c.callbacks.onScrollStart.call(e[0])),l.tweenRunning=!0,k(b),l.cbOffsets=a())},onUpdate:function(){i.callbacks&&i.onUpdate&&o("whileScrolling")&&(s(),c.callbacks.whileScrolling.call(e[0]))},onComplete:function(){if(i.callbacks&&i.onComplete){"yx"===c.axis&&clearTimeout(p[0].onCompleteTimeout);var t=p[0].idleTimer||0;p[0].onCompleteTimeout=setTimeout(function(){o("onScroll")&&(s(),c.callbacks.onScroll.call(e[0])),o("onTotalScroll")&&_[1]>=w[1]-D&&l.cbOffsets[0]&&(s(),c.callbacks.onTotalScroll.call(e[0])),o("onTotalScrollBack")&&_[1]<=T&&l.cbOffsets[1]&&(s(),c.callbacks.onTotalScrollBack.call(e[0])),l.tweenRunning=!1,p[0].idleTimer=0,k(b,"hide")},t)}}})}},K=function(t,e,n,r,i,o,a){function s(){w.stop||(b||f.call(),b=G()-v,l(),b>=w.time&&(w.time=b>w.time?b+h-(b-w.time):b+h-1,w.time<b+1&&(w.time=b+1)),w.time<r?w.id=p(s):g.call())}function l(){r>0?(w.currVal=d(w.time,y,_,r,i),x[e]=Math.round(w.currVal)+"px"):x[e]=n+"px",m.call()}function c(){h=1e3/60,w.time=b+h,p=window.requestAnimationFrame?window.requestAnimationFrame:function(t){return l(),setTimeout(t,.01)},w.id=p(s)}function u(){null!=w.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(w.id):clearTimeout(w.id),w.id=null)}function d(t,e,n,r,i){switch(i){case"linear":case"mcsLinear":return n*t/r+e;case"mcsLinearOut":return t/=r,t--,n*Math.sqrt(1-t*t)+e;case"easeInOutSmooth":return t/=r/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e);case"easeInOutStrong":return t/=r/2,t<1?n/2*Math.pow(2,10*(t-1))+e:(t--,n/2*(-Math.pow(2,-10*t)+2)+e);case"easeInOut":case"mcsEaseInOut":return t/=r/2,t<1?n/2*t*t*t+e:(t-=2,n/2*(t*t*t+2)+e);case"easeOutSmooth":return t/=r,t--,-n*(t*t*t*t-1)+e;case"easeOutStrong":return n*(-Math.pow(2,-10*t/r)+1)+e;case"easeOut":case"mcsEaseOut":default:var o=(t/=r)*t,a=o*t;return e+n*(.499999999999997*a*o+-2.5*o*o+5.5*a+-6.5*o+4*t)}}t._mTween||(t._mTween={top:{},left:{}});var h,p,a=a||{},f=a.onStart||function(){},m=a.onUpdate||function(){},g=a.onComplete||function(){},v=G(),b=0,y=t.offsetTop,x=t.style,w=t._mTween[e];"left"===e&&(y=t.offsetLeft);var _=n-y;w.stop=0,"none"!==o&&u(),c()},G=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},Y=function(){var t=this;t._mTween||(t._mTween={top:{},left:{}});for(var e=["top","left"],n=0;n<e.length;n++){var r=e[n];t._mTween[r].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(t._mTween[r].id):clearTimeout(t._mTween[r].id),t._mTween[r].id=null,t._mTween[r].stop=1)}},Z=function(t,e){try{delete t[e]}catch(n){t[e]=null}},Q=function(t){return!(t.which&&1!==t.which)},J=function(t){var e=t.originalEvent.pointerType;return!(e&&"touch"!==e&&2!==e)},tt=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},et=function(t){var e=t.parents(".mCSB_container");return[t.offset().top-e.offset().top,t.offset().left-e.offset().left]},nt=function(){function t(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}var e=t();return!!e&&document[e]};t.fn[n]=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):d.init.apply(this,arguments)},t[n]=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):d.init.apply(this,arguments)},t[n].defaults=o,window[n]=!0,t(window).load(function(){t(i)[n](),t.extend(t.expr[":"],{mcsInView:t.expr[":"].mcsInView||function(e){var n,r,i=t(e),o=i.parents(".mCSB_container");if(o.length)return n=o.parent(),r=[o[0].offsetTop,o[0].offsetLeft],r[0]+et(i)[0]>=0&&r[0]+et(i)[0]<n.height()-i.outerHeight(!1)&&r[1]+et(i)[1]>=0&&r[1]+et(i)[1]<n.width()-i.outerWidth(!1)},mcsOverflow:t.expr[":"].mcsOverflow||function(e){var n=t(e).data(r);if(n)return n.overflowed[0]||n.overflowed[1]}})})})}),define("mCustomScrollbar",["jquery"],function(t){return function(){var e;return e||t.$.fn.mCustomScrollbar}}(this));var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};define("main",["jquery","sfModal","mobile","isMobile","jquery_hoverIntent","sfAjax","bootstrap","jquery_cookie","jquery_lazyload","underscore","typeHelper","jquery-mousewheel","mCustomScrollbar"],function(t,e,n,r){var i,o,a,s,l,c,u,d,h,p,f;return"localhost:3000"===location.host&&t("body").css({"-webkit-font-smoothing":"antialiased"}),r("any")&&(t("#icon4weChat").attr("src",t("#icon4weChat").data("src")),t(".sfad-sidebar").remove()),t(".js-content-restore").on("click",function(){var e,n,r,i;if(e=t(this),i=e.data("type"),r=e.data("id"),n="/api/"+i+"/"+r+"/delete/cancel",confirm("真的要恢复吗?"))return t.post(n,function(t){return location.reload()})}),function(){d=function(){t(".opts__item--message").removeClass("hide"),t.get("/api/notifications",function(e){var n,r,i,o;e.status||(e.data=null!=(r=e.data)?r:[],i={data:e.data,unread:{general:_.filter(e.data.general,function(t){return 0===parseInt(t.viewed)}).length,ranked:_.filter(e.data.ranked,function(t){return 0===parseInt(t.viewed)}).length,followed:_.filter(e.data.followed,function(t){return 0===parseInt(t.viewed)}).length}},o=_.reduce(i.unread,function(t,e){return t+e},0),o>0&&t(".opts__item--message .message-ingore-all").removeClass("hide"),t("#messageGeneral").html(_.template(t("#messageGeneralTpl").html())(i.data)),t("#messageRanked").html(_.template(t("#messageRankedTpl").html())(i.data)),t("#messageFollowed").html(_.template(t("#messageFollowedTpl").html())(i.data)),t(".opts__item--message-loading").remove(),n={},t(".mCustomScrollbar-message").mCustomScrollbar({scrollInertia:0,callbacks:{onScroll:function(){var e,r,i;if(i=this.mcs.topPct,r=t(this).data("proto"),n[r]=n[r]||2,i>55&&n[r]!==-1){if(console.log(r,i,"ajax page "+n[r]),e="/api/notifications?type="+r+"&page="+n[r],window.__api===e)return;return window.__api=e,t.get(e,function(e){var i,o;if(!e.status)return i=e.data[r],i.length>0?(o=_.template(t("#item--"+r).html())(e.data),t(".tab-pane.active .mCSB_container").append(o),n[r]++):n[r]=-1})}}}}))})},t(".opts__item--message .message-ingore-all").on("click",function(){var e;e=t(this),t.post("/api/notifications/all/view",function(n){return d(),t(".notice-dot").addClass("hide"),e.addClass("hide")})}),t(".opts__item--message").on("click",".message__btn--follow",function(){var e,n;return e=t(this),n=e.data("id"),e.addClass("disabled"),t.post("/api/user/"+n+"/follow",function(t){return d(),e.removeClass("disabled")})}),t(".opts__item--message").on("click",".message__btn--unfollow",function(){var e,n;return e=t(this),n=e.data("id"),e.addClass("disabled"),t.post("/api/user/"+n+"/follow/cancel",function(t){return d(),e.removeClass("disabled")})}),t(".dropdown-toggle-message").on("click",function(e){var n,r;return e.preventDefault(),r=t(".opts__item--message"),"undefined"!=typeof socket&&socket.emit("read"),n=t("title"),n.text(n.text().replace(/^\(\d+[\+]?\)/,"")),"none"!==r.css("display")?r.addClass("hide"):(d(),t.get("/api/notifications/viewed",function(e){var n;if(n=null,!e.status)return _.each(e.data,function(e,r){if(!e)return n?(n=t(".notice-dot-"+r),n.removeClass("hide"),n.removeClass("notice-dot--special")):(n=t(".notice-dot-"+r),n.addClass("notice-dot--special"),n.closest("a[role='tab']").trigger("click"))})}))}),t(".opts__item--message a[role='tab']").on("click",function(e){var n;if(t(".opts__item--message .active").not(".btn").removeClass("active"),t(this).addClass("active"),t(this).find(".notice-dot.hide").length>0&&0===t(this).find(".notice-dot--special").length);else if(t(this).find(".notice-dot").addClass("hide"),n=t(this).attr("href"),"#messageRanked"===n&&t.post("/api/notifications/viewed?type=ranked"),"#messageGeneral"===n&&t.post("/api/notifications/viewed?type=general"),"#messageInbox"===n&&t.post("/api/notifications/viewed?type=inbox"),"#messageFollowed"===n)return t.post("/api/notifications/viewed?type=followed")}),t("body").on("click",function(e){"none"!==t(".opts__item--message").css("display")&&0===t(e.target).parents(".message").length&&t(".opts__item--message").addClass("hide")})}(),function(){var e=function(){t(".opts__item--letter").removeClass("hide"),t.get("/api/messages",function(e){if(!e.status){t("#messageInbox").html(_.template(t("#messageInboxTpl").html())({inboxes:e.data})),t(".opts__item--letter-loading").remove();var n=_.filter(e.data,function(t){return 0===parseInt(t.viewed)}).length;n>0&&t(".opts__item--letter .message-ingore-all").removeClass("hide")}})};t("#messageInbox").on("click","li",function(){var e,n;if(e=t(this),n=e.data("click"),Boolean(n))return location.href=n}),t(".opts__item--letter .message-ingore-all").on("click",function(){var n;n=t(this),t.post("/api/messages/all/view",function(t){e(),n.addClass("hide")})}),t(".dropdown-toggle-letter").on("click",function(n){n.preventDefault();var r=t(".opts__item--letter");"none"!==r.css("display")?r.addClass("hide"):e()}),t("body").on("click",function(e){"none"!==t(".opts__item--letter").css("display")&&0===t(e.target).parents(".letter").length&&t(".opts__item--letter").addClass("hide")})}(),"/tags"===t(".nav__item--more>a").attr("href")||(t("body").on("click",function(e){if("none"!==t(".tag-mgr__box").css("display")&&0===t(e.target).closest(".nav__item--more").length&&0===t(e.target).closest(".tag-mgr__box").length)return t(".nav__item--more").trigger("click")}),t(".tag-mgr__query").on("keyup",function(e){var n,r,i,o;return n=t(this),o=n.data("tags"),r=t(this).val(),i=function(e){var n,i,a;if(a='<li><a href="<%= url %>"><%= name %></a></li>',n=_.filter(o,function(t){return t.name.search(e)!==-1}),i=_.reduce(n,function(t,e){return t+_.template(a)(e)},""),t(".tag-mgr__list").html(i),t(".tag-mgr__list li").length>0&&r.length>0)return t(".tag-mgr__list li:first-child").addClass("active")},p.inputT&&clearTimeout(p.inputT),p.inputT=setTimeout(function(){return i(r)},100)}),t(".tag-mgr__list").on("mouseover",function(){if(t(".tag-mgr__list li").length>1)return t(".tag-mgr__list li.active").removeClass("active")}),p={inputT:0,t:0},t(".nav__item--more").on("click",function(){var e,n,r;return n=t(this),e=t(".tag-mgr__box"),r=Number(n.data("open")),r?e.addClass("hide"):(e.removeClass("hide"),t(".tag-mgr__query").focus()),t(this).data("open",Number(!r))})),t("body").on("click",".reloadCaptcha",function(){return t(this).find("img").attr("src","/user/captcha?w=240&h=50")}),t(".js__action--complain").on("click",function(){return e({title:"我要申诉",content:_.template(t("#js__action--complain-tpl").html()),doneFn:function(){return t(".complain__form").submit()}})}),t(".js__view--selector").on("click",function(){var e;return e=t(this).data("action"),t.cookie("view",e),location.reload()}),t.cookie("view")&&t(".js__view--selector").removeClass("hidden-sm").removeClass("hidden-md").removeClass("hidden-lg"),a=function(){var t,e,n;n="test",e=window.sessionStorage;try{return e.setItem(n,"1"),e.removeItem(n),!0}catch(e){return t=e,!1}},f=function(e){var n;a()&&(e>500||(localStorage&&(n=localStorage.getItem("show-app-promotion-bar"),n=n||!0,n!==!0?t(".app-promotion-bar").hide():t(".app-promotion-bar").show()),t("body").on("click",".close",function(){t(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)}),t("body").on("click",".icon",function(){t(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)})))},f(document.body.clientWidth),o=function(t){var e,n;switch(n="",e=new Date(t),e.getDay()){case 0:n="周日";break;case 1:n="周一";break;case 2:n="周二";break;case 3:n="周三";break;case 4:n="周四";break;case 5:n="周五";break;case 6:n="周六"}return n},s=function(){e({modalSize:"modal-lg",title:"登录",doneText:"登录",hideClose:!0,hideDone:!0,hideFooter:!0,content:t("#loginModal").text(),show:function(){return window.ga&&ga("send","event","login modal","show","login modal"),t("[name=mail]").first().focus(),t("#loginShowMore").click(function(e){e.preventDefault(),t(this).hide(),t(this).siblings().removeClass("hidden")}),t(".sfmodal .widget-login a").click(function(e){e.preventDefault(),window.open(t(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),t("#loginReloadCaptcha").click(function(){t(this).find("img").attr("src","/user/captcha?w=240&h=50")})}}),t(".register-mail").typeHelperOld({emailMode:!0,onlyResult:!1})},l=function(){e({modalSize:"modal-md",title:"绑定手机号",doneText:"绑定",content:t("#bindPhoneModal").text(),doneFn:function(){var e=t(".form__bindphone-apply").serializeArray(),n={};e.map(function(t){n[t.name]=t.value}),console.log("data",n),t.post("/api/user/phone/bind/check",n,function(t){t.status||(alert("绑定成功"),location.reload())})}})},t(".addWeek").each(function(e,n){t(this).append(" "+o(t(this).html()))}),t('[data-toggle="tooltip"]').tooltip({container:"body"}),t("img.lazy").lazyload({effect:"fadeIn"}),window.oauthLogin=function(t){location.hostname.indexOf("segmentfault")!==-1?location.reload():location.href="/"},window.oauthRegister=function(t){location.href="/user/bind"},i={_:window.SF.token,staticUrl:window.SF.staticUrl,userId:t("#SFUserId").attr("value"),userRank:t("#SFUserRank").attr("value"),login:n.login||s,bindphone:l},t(document).ajaxError(function(e,n,r){413===n.status?(t("#uploading")&&t("#uploading").text(""),alert("文件大小或尺寸超出限制，请修改后重新上传！")):console.log("Ajax "+n.status+": ",r.url)}),t(document).ajaxSend(function(t,e,n){n.url.indexOf("?")===-1?n.url=n.url+"?_="+i._:n.url=n.url+"&_="+i._}),t(document).ajaxComplete(function(n,r,o){var a,s,l,c,u,d,h;if(window.captchaPostData=null!=(l=window.captchaPostData)?l:{},r.responseText)if(r.responseText.indexOf("<br />")!==-1||r.responseText.indexOf("<pre>exception ")!==-1)console.log("后端返回错误信息=> ",r.responseText),"localhost"===location.hostname&&e({title:"警告：前方高能！",$content:r.responseText,hideClose:!0,modalSize:"modal-lg"});else if(r.responseJSON&&1===r.responseJSON.status){var p=function(){if(h=r.responseJSON,!h.data)return{v:void 0};var n=h.data[0];o.url.indexOf("/user/stat")===-1&&"login"===n?i.login():"form"===n&&h.data[1].hasOwnProperty("captcha")&&1===_.keys(h.data[1]).length?(captchaPostData.api=o.url,captchaPostData.data=o.data,e({modalSize:"modal-sm",title:h.data[1].captcha,content:"<div id='captchaPostForm' ><div class='reloadCaptcha'><img title='点击切换验证码'  src='/user/captcha?w=240&h=50' ></div><div class='form-group'><input class='form-action form-control' name='captcha'></div></div>",hideClose:!0,doneText:"确认并提交",doneFn:function(){var e;return e=t("#captchaPostForm").find("input[name=captcha]"),captchaPostData.captcha=e.val(),t.post("/api/captcha/check",{captcha:captchaPostData.captcha},function(n){if(!n.status)return n.data?t.post(captchaPostData.api,captchaPostData.data+"&captcha="+captchaPostData.captcha,function(t){return window.captchaPostData={},t.data.hasOwnProperty("url")?location.href=t.data.url:location.reload()}):(e.addClass("error"),console.log("验证码错误"),t(".reloadCaptcha").trigger("click"))})}})):"robot"===n?location.href="/stop-robot":"unactivated"===n?(e("hide"),t("#activate").modal("show")):"nonBlocked"===n?e(h.data[1]):"access"===n?e({title:h.data[1][0],content:h.data[1][1],hideClose:!0}):"form"===n?!function(){var e=o.url.split("?")[0];e=e.replace(/\d+/g,"[id]"),d=o.url.split("/")[2],d=d.split("?")[0],c=new RegExp("[?&]_="+i._),u=o.url.replace(c,""),a=!0;var n=h.data[1];t.each(n,function(n,r){var i,o,s,l;if("captcha"===n&&(t("[name=captcha]").parents(".form-group").show(),t(".captcha").parent("a").click()),s=n.toLowerCase().replace(/\b[a-z]/g,function(t){return t.toUpperCase()}),"tags"===n&&"必须填写标签"===r)return void t("#article .sf-typeHelper, #question .sf-typeHelper").addClass("error").after('<span class="error--msg">'+r+"</span>");if(l="#"+d+s,0===t(l).length&&(l="#"+d.replace(/s$/,"")+s),o=t("form#"+d+" *[name="+n+"]").not("[type=hidden]").parents(".form-group"),0===o.length&&(o=t("form#"+d.replace(/s$/,"")+" *[name="+n+"]").not("[type=hidden]").parents(".form-group")),i=t('form[action="'+e+'"] *[name='+n+"]").not("[type=hidden]").parents(".form-group"),i.length||(i=t('form[action="'+u+'"] *[name='+n+"]").not("[type=hidden]").parents(".form-group"),i.length||(i=t('.form[action="'+e+'"] *[name='+n+"]").not("[type=hidden]").parents(".form-group"),i.length||(i=t("form *[name="+n+"]").not("[type=hidden]").parents(".form-group"),i.length||(i=t("form *[data-name="+n+"]").not("[type=hidden]").parents(".form-group"))))),t(l).length)t(l).addClass("error").attr("data-error",r),0===t(l).next(".error--msg").length&&t(l).after('<span class="error--msg">'+r+"</span>");else if(o.length){o.find(".help-block.err").remove(),o.addClass("has-error");var c=o.find("[name="+n+"]").not("[type=hidden]"),h=c.closest(".input-group");h.length>0?h.after('<span class="help-block err">'+r+"</span>"):c.after('<span class="help-block err">'+r+"</span>")}else if(i.length)i.find(".help-block").remove(),i.addClass("has-error"),i.find(".input-group").length>0?i.find(".input-group").after('<span class="help-block err">'+r+"</span>"):(i.find("[name="+n+"]").not("[type=hidden]").after('<span class="help-block err">'+r+"</span>"),i.find("[data-name="+n+"]").not("[type=hidden]").after('<span class="help-block err">'+r+"</span>"));else if(t("form").length&&!t("form").hasClass("header-search")){if(t("form#"+d+" *[name="+n+"]").not("[type=hidden]").siblings(".error--msg").remove(),t("form#"+d+" *[name="+n+"]").not("[type=hidden]").addClass("error").attr("data-error",r).after('<span class="error--msg">'+r+"</span>"),1===t("form").length&&t("form").hasClass("header-search")){var p=t(".form *[data-name="+n+"]");0==p.length&&(p=t(".form *[name="+n+"]"));var f=p.closest(".form-group");f.addClass("has-error"),f.find(".err").remove(),p.after('<span class="help-block err">'+r+"</span>")}}else if(t(".form").length){var m=t(".form *[data-name="+n+"]");0==m.length&&(m=t(".form *[name="+n+"]"));var g=m.closest(".form-group");g.addClass("has-error"),g.find(".err").remove(),m.after('<span class="help-block err">'+r+"</span>")}a&&(t(l).length?t(l).focus():(i.length&&i.find("[name="+n+"]").not("[type=hidden]").focus(),o.length&&o.find("[name="+n+"]").not("[type=hidden]").focus(),a=!1))})}():(s=["limit","lock","author","rank","account"],_.find(s,function(t){return t===n})?t.get("/api/errorMessage",{type:n,key:h.data[1]},function(t){if(t.data)return e({title:t.data[0],content:t.data[1],hideClose:!0})}):e({title:n,content:h.data[1],hideClose:!0}))}();if("object"===("undefined"==typeof p?"undefined":_typeof(p)))return p.v}}),t("body").delegate("form","submit",function(e){var n;n=t(this),n.attr("method")&&n.attr("action")&&(e.preventDefault(),n.find("button[type=submit]").attr("disabled","disabled"),t.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),success:function(t){n.find("button[type=submit]").removeAttr("disabled"),0===t.status&&("/api/user?do=login"===n.attr("action")&&"/user/login"!==location.pathname?window.location.reload():/^\//.test(t.data)?window.location=t.data:window.location.reload())}}))}),t("body").delegate("form input, form textarea, .form input, .form textarea","keydown",function(e){t(this).removeClass("error"),t(this).parents(".form-group").removeClass("has-error"),t(this).next(".help-block.err").remove(),t(this).next(".error--msg").remove(),t(this).parents(".form-group").find(".help-block.err").remove()}),t("#backtop").click(function(){return t("body,html").animate({scrollTop:0}),!1}),t(document).scroll(function(){t(this).scrollTop()>720?t("#backtop").removeClass("hidden"):t("#backtop").addClass("hidden")}),t(".topframe").length&&t(".topframe .close").click(function(e){t(this).parent().remove(),0!==t(".topframe").length&&t(".topframe .content").text()||t("body").removeClass("have-notify")}),window.SFHacker={setOldVersion:function(){t.cookie("v","old"),window.location.reload()},unSetOldVersion:function(){t.removeCookie("v",{path:"/"}),window.location.reload()},makePureTextarea:function(){t.cookie("typemode","native"),window.location.reload()},unMakePureTextarea:function(){t.removeCookie("typemode",{path:"/"}),window.location.reload()}},t("body").on("click",".SFLogin",function(t){t.preventDefault(),i.login()}),function(){var e={phone:'\n    <input type="phone" class="form-control mb15" name="phone" required placeholder="仅支持大陆手机号"\n                           autocomplete="off">\n                    <div class="input-group"><input name="code" type="text"\n                                                    class="form-control js-user-login__phone-code-value"\n                                                    placeholder="短信验证码">\n                        <span class="input-group-btn"><button class="btn btn-default js-user-login__phone-vaild-btn"\n                                                              style="width:96px;" type="button">获取验证码</button></span>\n                    </div>\n\n    ',mail:'\n     <input type="email" class="form-control" name="mail" required placeholder="hello@segmentfault.com"\n                           autocomplete="off">\n    '};t("body").on("click",".login-modal .login-wrap .js-register-switch-box input[name=register_type]",function(){var n=t(this).val();t(".js-register-switch-content").html(e[n]),"phone"===n?t(this).closest("form").attr("action","/api/user/phone/register"):t(this).closest("form").attr("action","/api/user/register")}),t("body").on("click",".login-modal .login-wrap .js-user-login__phone-vaild-btn",function(){var e=t(this),n=60,r=void 0,i=function(){n>1?(n--,e.text(n+"s")):(clearInterval(r),e.text("获取验证码"),e.prop("disabled",!1))};t.post("/api/user/phone/register/send",{phone:t(".js-register-switch-box input[name=phone]").val()},function(t){t.status||(e.prop("disabled",!0),r=setInterval(i,1e3))})})}(),t("body").on("click",".bindphone-model .user-bind__phone-vaild-btn",function(){var e=t(this),n=60,r=void 0,i=function(){n>1?(n--,e.text(n+"s")):(clearInterval(r),e.text("获取验证码"),e.prop("disabled",!1))};t.post("/api/user/phone/bind",{phone:t(".bindphone--phone").val()},function(t){t.status||(e.prop("disabled",!0),r=setInterval(i,1e3))})}),t(".3rdLogin").click(function(e){e.preventDefault(),window.open(t(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),t(".hoverDropdown").hoverIntent(function(){
t(this).hasClass("open")||t(this).find(".dropdownBtn").dropdown("toggle")},function(){t(this).hasClass("open")&&t(this).find(".dropdownBtn").dropdown("toggle")},null,1),t(".dropdownBtn").click(function(e){var n;t(this).parent(".hoverDropdown").hasClass("open")&&(e.preventDefault(),n=t(this).attr("href"),e.ctrlKey||e.metaKey?window.open(n):location.href=n)}),h=function(e,n,r,i){var o;o=e,o.on("shown.bs.modal",function(){return t.post("/api/user/active/alert",function(t){})}),o.length>0&&t(".write-btns a").each(function(e,n){t(this).click(function(t){return o.modal("show"),!1})}),o.find(".activate-form").on("submit",function(e){var n;return e.preventDefault(),n=t(this),t.post(r,{mail:n.find(".mail").val()},function(e){0===e.status&&(n.parent().find(".session-mail").text(n.find(".mail").val()),t(".activate-showmail").show(),t(".activate-form").hide(),location.reload())}),!1}),o.find(".activate-resend",o).click(function(e){var r,o,a,s;o=t(this),r=o.siblings("span").find("span"),a=void 0,s=void 0,a=120,a--,t.post(n,function(e){var n;0===e.status?(t(".company-activete-tips").length&&t(".company-activete-tips").html(null!=(n='<div class="alert alert-success">'+e.message)?n:e.data[1]+"</div>"),i&&i(),s=setInterval(function(){return 0===a?(clearInterval(s),o.show(),o.siblings("span").hide()):(o.hide(),o.siblings("span").show(),r.text(a--))},1e3)):(t(".company-activete-tips").length&&(e.message?t(".company-activete-tips").html('<div class="alert alert-danger">'+e.message+"</div>"):t(".company-activete-tips").html('<div class="alert alert-danger">'+e.data[1]+"</div>")),setTimeout(function(){return t(".company-activete-tips").length&&t(".company-activete-tips").html('<div class="alert alert-success">激活邮件已发送 （<span>120</span>）</div>'),o.show()},9e5))})})},h(t("#activate"),"/api/user/reactivate","/api/user/activate/mail"),h(t("#companyActivate"),"/api/company/reactivate","/api/settings/mail/edit"),t(".side-ask [class*=btn-sn-]").click(function(e){e.preventDefault(),window.open(t(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),function(){t("body").on("click",".activate__step--init input[name=activate_type]",function(){var e=t(this),n=e.val();t('.activate__step--init .form-group[data-type="'+n+'"]').removeClass("hide"),"phone"===n?t(".activate__step--init .form-group[data-type=mail]").addClass("hide"):"mail"===n&&t(".activate__step--init .form-group[data-type=phone]").addClass("hide")}),t("body").on("click",".activate__step--init .activate__step-code-btn",function(){var e=void 0,n=t(this),r=(t(".activate__step-code-value"),t(".activate__step-phone-value")),i=60,o=function(){i<1?(n.text("获取验证码"),n.prop("disabled",!1),clearInterval(e)):n.text(--i+"s")};n.prop("disabled",!0),t.post("/api/user/phone/activate/send",{phone:r.val()},function(t){t.status?n.prop("disabled",!1):e=setInterval(o,1e3)})}),t("body").on("click",".activate-change",function(e){t(".activate-showmail").hide(),t(".activate-form").show()}),t("#activate").on("show.bs.modal",function(){var e=t(".activate__step--init>form").serializeArray(),n={};e.map(function(t){n[t.name]=t.value}),n.mail&&n.mail.length>0&&(t(".activate__step--init input[value=mail]").trigger("click"),setTimeout(function(){},50),t(".activate__step--init .btn-primary").trigger("click"))}),t("body").on("click",".activate__step--init .btn-primary",function(){var e=t(this),n=t(".activate__step--init>form").serializeArray(),r={};n.map(function(t){r[t.name]=t.value}),r.hasOwnProperty("activate_type")&&("mail"===r.activate_type?!function(){r={mail:r.mail};var n=function(e,n){t(".activate__step--mail .session-mail").text(e);var r="",i={"mail.google.com":["gmail.com"],"mail.qq.com":["qq.com","vip.qq.com","foxmail.com"],"mail.163.com":["163.com"],"mail.126.com":["126.com"],"mail.sina.com":["sina.com","vip.sina.com","sina.cn"],"mail.sohu.com":["sohu.com"],"mail.139.com":["139.com"],"mail.wo.com.cn":["wo.com.cn"],"mail.189.cn":["189.cn"],"mail.21cn.com":["21.cn"],"mail.aliyun.com":["aliyun.com"],"mail.yahoo.com":["yahoo.com"]};for(var o in i){var a=i[o],s=a.find(function(t){return t===e.split("@")[1]});s&&(r=o)}r.length>0?t(".activate__step--mail .activate_step-mail-goto").attr("href","http://"+r):t(".activate__step--mail .activate_step-mail-goto").hide();var l="mailto:pr@segmentfault.com?subject=邮箱 "+e+" 无法激活&body=请描述具体内容";t(".activate__step-contact").attr("href",l);var c=t(".activate__step-reactivate-btn");n||c.addClass("disabled");var u=void 0,d=120,h=function(){d>0?c.text("激活邮件已发送（"+d--+"s）"):(c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled"))};return n||(u=setInterval(h,1e3)),{destory:function(){c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled")}}},i=e.closest(".activate__step");i.next(".activate__step").removeClass("hide"),i.remove();var o=n(r.mail,!0);0!=t('input[name="mail"]').data("mail").length&&t.post("/api/user/activate/mail",r,function(t){t.status&&o.destory()}),t(".activate__step-reactivate-btn").on("click",function(){o=n(r.mail),t.post("/api/user/activate/mail",r,function(t){t.status&&o.destory()})}),t(".activate-form").on("click",".btn-primary",function(){var e=t(".activate-form .change-mail").val();e.length>0&&(o.destory(),o=n(e),t.post("/api/user/activate/mail",{mail:e},function(e){e.status?o.destory():(t(".activate-showmail").show(),t(".activate-form").hide())}))})}():(delete r.mail,delete r.activate_type,t.post("/api/user/activate/phone",r,function(t){t.status||location.reload()})))})}(),function(){t("[name=userId]").length>0&&/micromessenger/.test(navigator.userAgent.toLowerCase())&&t.get("/api/user/weixin/openid?type=bind",function(e){if(!e.status&&1!=e.data){var n=e.data,r='<div class="app-promotion-bar app-promotion-bar--show">\n    <a href="javascript:;"><i class="fa fa-close close"></i></a>\n    <div class="icon"></div>\n    <h5 class="title h5">绑定 SF 微信助手</h5>\n    <p class="describe">实时获取信息提醒</p>\n    <a class="btn btn-sm btn-primary download-btn" href="'+n+'">立即绑定</a>\n</div>';t("body").append(r)}})}(),function(){var e=["/lives","/news"];e.forEach(function(e){!function(e){var n="navItemHighlight"+e,r=t('.sf-header--index [href="'+e+'"]');localStorage.getItem(n)||r.addClass("menu__item--new-show"),r.on("click",function(){localStorage.getItem(n)||localStorage.setItem(n,1)})}(e)})}(),localStorage.getItem("alert-tos")||t(".alert--tos").removeClass("hide"),t(".read-tos").on("click",function(){localStorage.setItem("alert-tos",1),t(this).hasClass("close")||(location.href=t(this).data("url"))}),i.userId&&(c="7001","beta.segmentfault.com"===location.hostname&&(u="8001"),require([i.staticUrl+"/3rd/socket/socket.io.js"],function(e){var n;n=e("segmentfault.com:"+c),window.socket=n,n.on("event",function(e){var n,r=e.event,i=e.message;n=t("title"),i>0?(i>99&&(i="99+"),t("#letterCount").siblings(".has-unread__count").remove(),t("#letterCount").after('<span class="has-unread__count">'+i+"</span>")):t(".letter .has-unread__count").remove(),r>0?(r>99&&(r="99+"),t("#messageCount").siblings(".has-unread__count").remove(),t("#messageCount").after('<span class="has-unread__count">'+r+"</span>"),t("#m-messageCount").text(r),t(".mobile-menu__unreadpoint").show(),window.isMobile||(/^\(\d+[\+]?\)/.test(n.text())?n.text(n.text().replace(/^\(\d+[\+]?\)/,"("+r+")")):n.text("("+r+")"+t("title").text()))):(t(".message .has-unread__count").remove(),n.text(n.text().replace(/^\(\d+[\+]?\)/,"")))})})),t(".topframe").text().indexOf(!0)&&t(".send-mail").click(),t(".slidebar_login").on("click",".getCode",function(){var e="/api/user/phone/register/send",n=t(this),r=void 0,i=60,o=function(){i>1?(i--,n.text(i+"s")):(clearInterval(r),n.text("获取验证码"),n.prop("disabled",!1))};t.post(e,{phone:t(".register-form input[name=phone]").val()},function(t){t.status||(n.prop("disabled",!0),r=setInterval(o,1e3))})}),t(".slidebar_login").on("click",".register-button",function(e){e.preventDefault();var n="/api/user/phone/register",r={name:t(".register-form input[name=name]").val(),phone:t(".register-form input[name=phone]").val(),code:t(".register-form input[name=code]").val(),password:t(".register-form input[name=password]").val()};t.post(n,r,function(t){t.status||location.reload()})}),t(".slidebar_login").on("click",".login_now",function(t){t.preventDefault(),i.login()}),t(".bindphone").on("click",function(t){t.preventDefault(),i.bindphone()}),i}),define("likeHate",["jquery","jquery_tmpl"],function(t){"use strict";function e(t,e){for(var n=e.split("."),r=n.length,i=0,o=t;i<r;i++)o=o[n[i]];return o}var n,r;r='<div class="alert alert-danger alert-dismissible unlike-alert" role="alert">                              <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                              如果该问题有可改进的余地，欢迎在评论里给作者建议。                            </div>',n='<div class="alert alert-danger alert-dismissible unlike-alert" role="alert">                              <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                              如果该回答有可改进的余地，欢迎在评论里给作者建议。                            </div>',t.fn.likeHate=function(i,o){var a,s;a=null,i&&(s=!0),t(this).click(function(){var l,c,u,d,h,p;l=t(this),h=l.siblings(".active").hasClass("hate"),d=l.siblings(".active").hasClass("like"),u=l.data("do"),p="",p=0===u.indexOf("un")?u.slice(2):"un"+u,c=l.parents(".widget-vote").find(".count"),l.siblings(".like, .hate").removeClass("active"),l.toggleClass("active"),"like"===u?h&&l.siblings(".hate").data("do","hate"):"hate"===u?d&&t(this).siblings(".like").data("do","like"):"unlike"===u||"unhate"===u&&console.log(1),a&&clearTimeout(a),a=setTimeout(function(){"like"===u?(l.addClass("active"),l.after('<span class="ani-num">+1</span>'),function(t){setTimeout(function(){t.next(".ani-num").addClass("active")},0)}(l),t.sfAjax(l,function(t){s?c.text(e(t,i)):(console.log(1),c.text(t.data)),o&&o.call(l,t)},{},function(t){l.removeClass("active"),l.next(".ani-num").remove()})):"hate"===u?t.sfAjax(l,function(a){l.addClass("active"),s?c.text(e(a,i)):c.text(a.data),o&&o.call(l,a),"question"===l.data("type")?l.parent().after(t.tmpl(r)):"answer"===l.data("type")&&l.parent().after(t.tmpl(n))},{},function(t){l.removeClass("active")}):t.sfAjax(l,function(t){l.removeClass("active"),s?c.text(e(t,i)):c.text(t.data),o&&o.call(l,t),l.next(".ani-num").remove()})},100)})}}),define("getRelated",["jquery","template","sfModal"],function(t,e,n){"use strict";return function(r,i,o,a,s){var l,c,u;r&&(c=r+"",i=i||'<li class="widget-links__item">                <a href="javascript:void(0);" class="ranks" data-toggle="tooltip" data-placement="top" title="{{ answers }}个回答">{{ answers }}</a>                <a href="{{ url }}">{{ title }}</a>            </li>',u={},l="",16===c.length&&0===c.indexOf("101")?(l="GET",u={do:"related",id:c}):(l="GET",u={q:c}),t.ajax({url:"/api/question/search",data:u,type:l,dataType:"json"}).done(function(r){var l;if(0!==r.status)n("○|￣|_ 服务器跪了！");else{if(0===r.data.length)return void(a&&(t("#titleSuggest").hide(),t(o).html(a)));s&&(r.data=r.data.slice(0,s)),l="",r.data.forEach(function(t){t.isAccepted?(t.acceptedWord=" | 解决",t.isSolved=" | 已解决"):(t.acceptedWord="",t.isSolved=""),l+=e(i,t)}),t("#titleSuggest").removeClass("hidden").show(),t(o).html(l),t(o).find(".ranks").tooltip()}}))}}),define("bookmark",["jquery","sfModal","main","jquery_tmpl"],function(t,e,n){"use strict";var r,i;return r='<form class="bookmarklist-form" id="bookmarkArchives"><div class="form-group"><label for="bookmarkArchiveName" class="required">名称</label>    <input type="text" name="name" id="name" id="bookmarkArchiveName" class="form-control" value="${name}" placeholder="最多输入32个字" maxlength="32"></div><div class="form-group"><label for="bookmarkArchiveDescription">描述</label>    <textarea name="description" id="bookmarkArchiveDescription" class="form-control" placeholder="最多输入256个字">${description}</textarea></div><div class="form-group"><input type="radio" name="isPrivate" class="mt10" value="0" id="bookmark-public"{{if !isPrivate}} checked{{/if}}/><label class="ml10" for="bookmark-public">公开</label>    <span class="text-muted">&mdash; 公开后不可再设置为私密</span><br />    <input type="radio" name="isPrivate" value="1" id="bookmark-private"{{if isPrivate}} checked{{/if}}{{if !isPrivate}} disabled{{/if}}/><label class="ml10" for="bookmark-private">私密</label>    <span class="text-muted">&mdash; 仅自己可见</span></div>    </form>',i='<form class="bookmarklist-form"><p class="required">添加到收藏夹</p><ul class="bookmarklist list-unstyled mb0">    {{each list}}<li data-id="${id}"{{if isBookmarked}}class="active"{{/if}}><input type="checkbox" {{if isBookmarked}}checked{{/if}}>${name}{{if ~~isPrivate}}<span class="text-muted label label-default ml10">私密</span>{{/if}}</li>{{/each}}</ul>    <div class="mt20"><a href="#" class="new-bookmark">+ 创建新收藏夹</a></div></form>',{createArchive:function(n,i,o){var a;a=this,e({title:"创建收藏夹",content:t.tmpl(r,{name:"",description:"",isPrivate:!0}),doneText:"提交",doneFn:function(){var e;e=t(".bookmarklist-form"),t.post("/api/bookmarkArchives/add",{name:e.find("[name=name]").val(),description:e.find("[name=description]").val(),isPrivate:e.find("[name=isPrivate]:checked").val()},function(t){0===t.status&&("edit"===i?a.editBookmark(n,o):"bookmark"===i?a.addBookmark(n,o,t.data.id):"other"===i?o(t):window.location.reload())})},hide:function(){"edit"===i?a.editBookmark(n,o):"bookmark"===i&&a.addBookmark(n,o)}})},editArchive:function(n){e({title:"编辑收藏夹",$content:t.tmpl(r,{name:n.data("name"),description:n.data("desc"),isPrivate:n.data("isprivate")}),doneText:"提交",doneFn:function(){var e;e=t(".bookmarklist-form"),t.post("/api/bookmarkArchive/"+n.data("id")+"/edit",{name:e.find("[name=name]").val(),description:e.find("[name=description]").val(),isPrivate:e.find("[name=isPrivate]:checked").val()},function(t){0===t.status&&window.location.reload()})}})},deleteArchive:function(n){e({title:"删除收藏夹",content:'确认要删除收藏夹「<span class="fuckXss"></span>」么？<br /><span class="text-danger">注意：收藏夹下的收藏也会被删除！</span>',doneText:"删除",doneClass:"btn-danger",closeText:"取消",show:function(){t(".fuckXss").text(n.data("name"))},doneFn:function(){t.post("/api/bookmarkArchive/"+n.data("id")+"/delete",function(t){t.status||(location.href=t.data)})}})},addBookmark:function(t,e,n){this.getArchive(t,e,"bookmark",n)},editBookmark:function(t,e){this.getArchive(t,e,"edit")},successFn:null,getArchive:function(n,r,o,a){var s;s=this,s.successFn=r,t.get("/api/user/bookmarkArchives",{objectId:n.data("id")},function(l){var c;c="",0===l.status&&(e({title:"收藏",content:t.tmpl(i),doneText:"提交",show:function(){return setTimeout(function(){var e;if(e=t(".sfmodal input[type=checkbox]").length,1===e)return t(".sfmodal input[type=checkbox]").trigger("click")},100)},doneFn:function(){var i,o,a;o=t(this),t(".bookmarklist").removeClass("error").siblings(".error--msg").remove(),a=[],i=t(".bookmarklist-form").length>1?t(".bookmarklist-form").eq(1):t(".bookmarklist-form"),i.find("li.active").each(function(){a.push(t(this).data("id"))}),t(".sfmodal").find(".done-btn").text("加载中").attr("disabled","disabled"),t.post("/api/"+n.data("type")+"/"+n.data("id")+"/bookmark",{archiveIds:a},function(n){var i;0===n.status?("false"===n.data&&window.location.reload(),r&&r(n,a.length),e("hide"),i=location.pathname.split("/"),"bookmark"===i[1]&&a.indexOf(i[2])===-1&&location.reload()):(t(".bookmarklist").addClass("error").after('<span class="error--msg">必须选择收藏夹</span>'),t(".sfmodal").find(".done-btn").text("提交").removeAttr("disabled"))})}}),t(".sfModal-content").html(t.tmpl(i,[{list:l.data}])),t(".bookmarklist").delegate("li","click",function(){var e;e=t(this).find("input[type=checkbox]"),t(this).toggleClass("active"),t(this).hasClass("active")?e.prop("checked",!0):e.prop("checked",!1)}),a&&t(".bookmarklist li[data-id="+a+"]").click(),t(".sfmodal .new-bookmark").click(function(){return s.createArchive(n,o,r),!1}))})},deleteBookmark:function(n){e({title:"删除收藏",content:'确认要从收藏夹「<span class="delete-archivemodal"></span>」中删除收藏「<span class="delete-bookmarkmodal"></span>」么？',doneText:"删除",doneClass:"btn-danger",closeText:"取消",show:function(){t(".delete-archivemodal").text(n.data("archive")),t(".delete-bookmarkmodal").text(n.data("title"))},doneFn:function(){t.post("/api/"+n.data("type")+"/"+n.data("id")+"/bookmark",{archiveId:null},function(t){0===t.status&&(n.parents(".stream-list__item").fadeOut().remove(),e("hide"))})}})}}}),!function(t){"undefined"!=typeof exports?t(exports):(window.hljs=t({}),"function"==typeof define&&define.amd&&define("highlightjs",[],function(){return window.hljs}))}(function(t){function e(t){return t.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function n(t){return t.nodeName.toLowerCase()}function r(t,e){var n=t&&t.exec(e);return n&&0==n.index}function i(t){var e=(t.className+" "+(t.parentNode?t.parentNode.className:"")).split(/\s+/);return e=e.map(function(t){return t.replace(/^lang(uage)?-/,"")}),e.filter(function(t){return y(t)||/no(-?)highlight/.test(t)})[0]}function o(t,e){var n={};for(var r in t)n[r]=t[r];if(e)for(var r in e)n[r]=e[r];return n}function a(t){var e=[];return function t(r,i){for(var o=r.firstChild;o;o=o.nextSibling)3==o.nodeType?i+=o.nodeValue.length:1==o.nodeType&&(e.push({event:"start",offset:i,node:o}),i=t(o,i),n(o).match(/br|hr|img|input/)||e.push({event:"stop",offset:i,node:o}));return i}(t,0),e}function s(t,r,i){function o(){return t.length&&r.length?t[0].offset!=r[0].offset?t[0].offset<r[0].offset?t:r:"start"==r[0].event?t:r:t.length?t:r}function a(t){function r(t){return" "+t.nodeName+'="'+e(t.value)+'"'}u+="<"+n(t)+Array.prototype.map.call(t.attributes,r).join("")+">"}function s(t){u+="</"+n(t)+">"}function l(t){("start"==t.event?a:s)(t.node)}for(var c=0,u="",d=[];t.length||r.length;){var h=o();if(u+=e(i.substr(c,h[0].offset-c)),c=h[0].offset,h==t){d.reverse().forEach(s);do l(h.splice(0,1)[0]),h=o();while(h==t&&h.length&&h[0].offset==c);d.reverse().forEach(a)}else"start"==h[0].event?d.push(h[0].node):d.pop(),l(h.splice(0,1)[0])}return u+e(i.substr(c))}function l(t){function e(t){return t&&t.source||t}function n(n,r){return RegExp(e(n),"m"+(t.cI?"i":"")+(r?"g":""))}function r(i,a){if(!i.compiled){if(i.compiled=!0,i.k=i.k||i.bK,i.k){var s={},l=function(e,n){t.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(t){var n=t.split("|");s[n[0]]=[e,n[1]?Number(n[1]):1]})};"string"==typeof i.k?l("keyword",i.k):Object.keys(i.k).forEach(function(t){l(t,i.k[t])}),i.k=s}i.lR=n(i.l||/\b[A-Za-z0-9_]+\b/,!0),a&&(i.bK&&(i.b="\\b("+i.bK.split(" ").join("|")+")\\b"),i.b||(i.b=/\B|\b/),i.bR=n(i.b),i.e||i.eW||(i.e=/\B|\b/),i.e&&(i.eR=n(i.e)),i.tE=e(i.e)||"",i.eW&&a.tE&&(i.tE+=(i.e?"|":"")+a.tE)),i.i&&(i.iR=n(i.i)),void 0===i.r&&(i.r=1),i.c||(i.c=[]);var c=[];i.c.forEach(function(t){t.v?t.v.forEach(function(e){c.push(o(t,e))}):c.push("self"==t?i:t)}),i.c=c,i.c.forEach(function(t){r(t,i)}),i.starts&&r(i.starts,a);var u=i.c.map(function(t){return t.bK?"\\.?("+t.b+")\\.?":t.b}).concat([i.tE,i.i]).map(e).filter(Boolean);i.t=u.length?n(u.join("|"),!0):{exec:function(){return null}}}}r(t)}function c(t,n,i,o){function a(t,e){for(var n=0;n<e.c.length;n++)if(r(e.c[n].bR,t))return e.c[n]}function s(t,e){return r(t.eR,e)?t:t.eW?s(t.parent,e):void 0}function d(t,e){return!i&&r(e.iR,t)}function h(t,e){var n=_.cI?e[0].toLowerCase():e[0];return t.k.hasOwnProperty(n)&&t.k[n]}function p(t,e,n,r){var i=r?"":x.classPrefix,o='<span class="'+i,a=n?"":"</span>";return o+=t+'">',o+e+a}function f(){if(!k.k)return e(T);var t="",n=0;k.lR.lastIndex=0;for(var r=k.lR.exec(T);r;){t+=e(T.substr(n,r.index-n));var i=h(k,r);i?(E+=i[1],t+=p(i[0],e(r[0]))):t+=e(r[0]),n=k.lR.lastIndex,r=k.lR.exec(T)}return t+e(T.substr(n))}function m(){if(k.sL&&!w[k.sL])return e(T);var t=k.sL?c(k.sL,T,!0,C[k.sL]):u(T);return k.r>0&&(E+=t.r),"continuous"==k.subLanguageMode&&(C[k.sL]=t.top),p(t.language,t.value,!1,!0)}function g(){return void 0!==k.sL?m():f()}function v(t,n){var r=t.cN?p(t.cN,"",!0):"";t.rB?(S+=r,T=""):t.eB?(S+=e(n)+r,T=""):(S+=r,T=n),k=Object.create(t,{parent:{value:k}})}function b(t,n){if(T+=t,void 0===n)return S+=g(),0;var r=a(n,k);if(r)return S+=g(),v(r,n),r.rB?0:n.length;var i=s(k,n);if(i){var o=k;o.rE||o.eE||(T+=n),S+=g();do k.cN&&(S+="</span>"),E+=k.r,k=k.parent;while(k!=i.parent);return o.eE&&(S+=e(n)),T="",i.starts&&v(i.starts,""),o.rE?0:n.length}if(d(n,k))throw new Error('Illegal lexeme "'+n+'" for mode "'+(k.cN||"<unnamed>")+'"');return T+=n,n.length||1}var _=y(t);if(!_)throw new Error('Unknown language: "'+t+'"');l(_);for(var k=o||_,C={},S="",D=k;D!=_;D=D.parent)D.cN&&(S=p(D.cN,"",!0)+S);var T="",E=0;try{for(var $,M,L=0;k.t.lastIndex=L,$=k.t.exec(n),$;)M=b(n.substr(L,$.index-L),$[0]),L=$.index+M;b(n.substr(L));for(var D=k;D.parent;D=D.parent)D.cN&&(S+="</span>");return{r:E,value:S,language:t,top:k}}catch(t){if(-1!=t.message.indexOf("Illegal"))return{r:0,value:e(n)};throw t}}function u(t,n){n=n||x.languages||Object.keys(w);var r={r:0,value:e(t)},i=r;return n.forEach(function(e){if(y(e)){var n=c(e,t,!1);n.language=e,n.r>i.r&&(i=n),n.r>r.r&&(i=r,r=n)}}),i.language&&(r.second_best=i),r}function d(t){return x.tabReplace&&(t=t.replace(/^((<[^>]+>|\t)+)/gm,function(t,e){return e.replace(/\t/g,x.tabReplace)})),x.useBR&&(t=t.replace(/\n/g,"<br>")),t}function h(t,e,n){var r=e?_[e]:n,i=[t.trim()];return t.match(/(\s|^)hljs(\s|$)/)||i.push("hljs"),r&&i.push(r),i.join(" ").trim()}function p(t){var e=i(t);if(!/no(-?)highlight/.test(e)){var n;x.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div"),n.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):n=t;var r=n.textContent,o=e?c(e,r,!0):u(r),l=a(n);if(l.length){var p=document.createElementNS("http://www.w3.org/1999/xhtml","div");p.innerHTML=o.value,o.value=s(l,a(p),r)}o.value=d(o.value),t.innerHTML=o.value,t.className=h(t.className,e,o.language),t.result={language:o.language,re:o.r},o.second_best&&(t.second_best={language:o.second_best.language,re:o.second_best.r})}}function f(t){x=o(x,t)}function m(){if(!m.called){m.called=!0;var t=document.querySelectorAll("pre code");Array.prototype.forEach.call(t,p)}}function g(){addEventListener("DOMContentLoaded",m,!1),addEventListener("load",m,!1)}function v(e,n){var r=w[e]=n(t);r.aliases&&r.aliases.forEach(function(t){_[t]=e})}function b(){return Object.keys(w)}function y(t){return w[t]||w[_[t]]}var x={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},w={},_={};return t.highlight=c,t.highlightAuto=u,t.fixMarkup=d,t.highlightBlock=p,t.configure=f,t.initHighlighting=m,t.initHighlightingOnLoad=g,t.registerLanguage=v,t.listLanguages=b,t.getLanguage=y,t.inherit=o,t.IR="[a-zA-Z][a-zA-Z0-9_]*",t.UIR="[a-zA-Z_][a-zA-Z0-9_]*",t.NR="\\b\\d+(\\.\\d+)?",t.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",t.BNR="\\b(0b[01]+)",t.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",t.BE={b:"\\\\[\\s\\S]",r:0},t.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[t.BE]},t.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[t.BE]},t.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such)\b/},t.CLCM={cN:"comment",b:"//",e:"$",c:[t.PWM]},t.CBCM={cN:"comment",b:"/\\*",e:"\\*/",c:[t.PWM]},t.HCM={cN:"comment",b:"#",e:"$",c:[t.PWM]},t.NM={cN:"number",b:t.NR,r:0},t.CNM={cN:"number",b:t.CNR,r:0},t.BNM={cN:"number",b:t.BNR,r:0},t.CSSNM={cN:"number",b:t.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},t.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[t.BE,{b:/\[/,e:/\]/,r:0,c:[t.BE]}]},t.TM={cN:"title",b:t.IR,r:0},t.UTM={cN:"title",b:t.UIR,r:0},t}),hljs.registerLanguage("coffeescript",function(t){var e={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",reserved:"case default function var void with const let enum export import native __hasProp __extends __slice __bind __indexOf",built_in:"npm require console print module global window document"},n="[A-Za-z$_][0-9A-Za-z$_]*",r={cN:"subst",b:/#\{/,e:/}/,k:e},i=[t.BNM,t.inherit(t.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[t.BE]},{b:/'/,e:/'/,c:[t.BE]},{b:/"""/,e:/"""/,c:[t.BE,r]},{b:/"/,e:/"/,c:[t.BE,r]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[r,t.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{cN:"property",b:"@"+n},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];r.c=i;var o=t.inherit(t.TM,{b:n}),a="(\\(.*\\))?\\s*\\B[-=]>",s={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:e,c:["self"].concat(i)}]};return{aliases:["coffee","cson","iced"],k:e,i:/\/\*/,c:i.concat([{cN:"comment",b:"###",e:"###",c:[t.PWM]},t.HCM,{cN:"function",b:"^\\s*"+n+"\\s*=\\s*"+a,e:"[-=]>",rB:!0,c:[o,s]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:a,e:"[-=]>",rB:!0,c:[s]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[o]},o]},{cN:"attribute",b:n+":",e:":",rB:!0,rE:!0,r:0}])}}),hljs.registerLanguage("apache",function(t){var e={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[t.HCM,{cN:"tag",b:"</?",e:">"},{cN:"keyword",b:/\w+/,r:0,k:{common:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"sqbracket",b:"\\s\\[",e:"\\]$"},{cN:"cbracket",b:"[\\$%]\\{",e:"\\}",c:["self",e]},e,t.QSM]}}],i:/\S/}}),hljs.registerLanguage("http",function(){return{i:"\\S",c:[{cN:"status",b:"^HTTP/[0-9\\.]+",e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{cN:"request",b:"^[A-Z]+ (.*?) HTTP/[0-9\\.]+$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{cN:"string",e:"$"}},{b:"\\n\\n",starts:{sL:"",eW:!0}}]}}),hljs.registerLanguage("cs",function(t){var e="abstract as base bool break byte case catch char checked const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long null object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while async protected public private internal ascending descending from get group into join let orderby partial select set value var where yield",n=t.IR+"(<"+t.IR+">)?";return{aliases:["csharp"],k:e,i:/::/,c:[{cN:"comment",b:"///",e:"$",rB:!0,c:[{cN:"xmlDocTag",v:[{b:"///",r:0},{b:"<!--|-->"},{b:"</?",e:">"}]}]},t.CLCM,t.CBCM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},t.ASM,t.QSM,t.CNM,{bK:"class namespace interface",e:/[{;=]/,i:/[^\s:]/,c:[t.TM,t.CLCM,t.CBCM]},{bK:"new return throw await",r:0},{cN:"function",b:"("+n+"\\s+)+"+t.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:e,c:[{b:t.IR+"\\s*\\(",rB:!0,c:[t.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:e,r:0,c:[t.ASM,t.QSM,t.CNM,t.CBCM]},t.CLCM,t.CBCM]}]}}),hljs.registerLanguage("java",function(t){var e=t.UIR+"(<"+t.UIR+">)?",n="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private",r="(\\b(0b[01_]+)|\\b0[xX][a-fA-F0-9_]+|(\\b[\\d_]+(\\.[\\d_]*)?|\\.[\\d_]+)([eE][-+]?\\d+)?)[lLfF]?",i={cN:"number",b:r,r:0};return{aliases:["jsp"],k:n,i:/<\//,c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",r:0,c:[{cN:"javadoctag",b:"(^|\\s)@[A-Za-z]+"}]},t.CLCM,t.CBCM,t.ASM,t.QSM,{cN:"class",bK:"class interface",e:/[{;=]/,eE:!0,k:"class interface",i:/[:"\[\]]/,c:[{bK:"extends implements"},t.UTM]},{bK:"new throw return",r:0},{cN:"function",b:"("+e+"\\s+)+"+t.UIR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:n,c:[{b:t.UIR+"\\s*\\(",rB:!0,r:0,c:[t.UTM]},{cN:"params",b:/\(/,e:/\)/,k:n,r:0,c:[t.ASM,t.QSM,t.CNM,t.CBCM]},t.CLCM,t.CBCM]},i,{cN:"annotation",b:"@[A-Za-z]+"}]}}),hljs.registerLanguage("sql",function(t){var e={cN:"comment",b:"--",e:"$"};return{cI:!0,i:/[<>]/,c:[{cN:"operator",bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate savepoint release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup",e:/;/,eW:!0,k:{keyword:"abs absolute acos action add adddate addtime aes_decrypt aes_encrypt after aggregate all allocate alter analyze and any are as asc ascii asin assertion at atan atan2 atn2 authorization authors avg backup before begin benchmark between bin binlog bit_and bit_count bit_length bit_or bit_xor both by cache call cascade cascaded case cast catalog ceil ceiling chain change changed char_length character_length charindex charset check checksum checksum_agg choose close coalesce coercibility collate collation collationproperty column columns columns_updated commit compress concat concat_ws concurrent connect connection connection_id consistent constraint constraints continue contributors conv convert convert_tz corresponding cos cot count count_big crc32 create cross cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime data database databases datalength date_add date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts datetimeoffsetfromparts day dayname dayofmonth dayofweek dayofyear deallocate declare decode default deferrable deferred degrees delayed delete des_decrypt des_encrypt des_key_file desc describe descriptor diagnostics difference disconnect distinct distinctrow div do domain double drop dumpfile each else elt enclosed encode encrypt end end-exec engine engines eomonth errors escape escaped event eventdata events except exception exec execute exists exp explain export_set extended external extract fast fetch field fields find_in_set first first_value floor flush for force foreign format found found_rows from from_base64 from_days from_unixtime full function get get_format get_lock getdate getutcdate global go goto grant grants greatest group group_concat grouping grouping_id gtid_subset gtid_subtract handler having help hex high_priority hosts hour ident_current ident_incr ident_seed identified identity if ifnull ignore iif ilike immediate in index indicator inet6_aton inet6_ntoa inet_aton inet_ntoa infile initially inner innodb input insert install instr intersect into is is_free_lock is_ipv4 is_ipv4_compat is_ipv4_mapped is_not is_not_null is_used_lock isdate isnull isolation join key kill language last last_day last_insert_id last_value lcase lead leading least leaves left len lenght level like limit lines ln load load_file local localtime localtimestamp locate lock log log10 log2 logfile logs low_priority lower lpad ltrim make_set makedate maketime master master_pos_wait match matched max md5 medium merge microsecond mid min minute mod mode module month monthname mutex name_const names national natural nchar next no no_write_to_binlog not now nullif nvarchar oct octet_length of old_password on only open optimize option optionally or ord order outer outfile output pad parse partial partition password patindex percent_rank percentile_cont percentile_disc period_add period_diff pi plugin position pow power pragma precision prepare preserve primary prior privileges procedure procedure_analyze processlist profile profiles public publishingservername purge quarter query quick quote quotename radians rand read references regexp relative relaylog release release_lock rename repair repeat replace replicate reset restore restrict return returns reverse revoke right rlike rollback rollup round row row_count rows rpad rtrim savepoint schema scroll sec_to_time second section select serializable server session session_user set sha sha1 sha2 share show sign sin size slave sleep smalldatetimefromparts snapshot some soname soundex sounds_like space sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sql_variant_property sqlstate sqrt square start starting status std stddev stddev_pop stddev_samp stdev stdevp stop str str_to_date straight_join strcmp string stuff subdate substr substring subtime subtring_index sum switchoffset sysdate sysdatetime sysdatetimeoffset system_user sysutcdatetime table tables tablespace tan temporary terminated tertiary_weights then time time_format time_to_sec timediff timefromparts timestamp timestampadd timestampdiff timezone_hour timezone_minute to to_base64 to_days to_seconds todatetimeoffset trailing transaction translation trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse ucase uncompress uncompressed_length unhex unicode uninstall union unique unix_timestamp unknown unlock update upgrade upped upper usage use user user_resources using utc_date utc_time utc_timestamp uuid uuid_short validate_password_strength value values var var_pop var_samp variables variance varp version view warnings week weekday weekofyear weight_string when whenever where with work write xml xor year yearweek zon",
literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int integer interval number numeric real serial smallint varchar varying int8 serial8 text"},c:[{cN:"string",b:"'",e:"'",c:[t.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[t.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[t.BE]},t.CNM,t.CBCM,e]},t.CBCM,e]}}),hljs.registerLanguage("nginx",function(t){var e={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+t.UIR}]},n={eW:!0,l:"[a-z/_]+",k:{built_in:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[t.HCM,{cN:"string",c:[t.BE,e],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{cN:"url",b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[e]},{cN:"regexp",c:[t.BE,e],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},e]};return{aliases:["nginxconf"],c:[t.HCM,{b:t.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"title",b:t.UIR,starts:n}],r:0}],i:"[^\\s\\}]"}}),hljs.registerLanguage("xml",function(){var t="[A-Za-z0-9\\._:-]+",e={b:/<\?(php)?(?!\w)/,e:/\?>/,sL:"php",subLanguageMode:"continuous"},n={eW:!0,i:/</,r:0,c:[e,{cN:"attribute",b:t,r:0},{b:"=",r:0,c:[{cN:"value",c:[e],v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s\/>]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xsl","plist"],cI:!0,c:[{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[n],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[n],starts:{e:"</script>",rE:!0,sL:"javascript"}},e,{cN:"pi",b:/<\?\w+/,e:/\?>/,r:10},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:/[^ \/><\n\t]+/,r:0},n]}]}}),hljs.registerLanguage("diff",function(){return{aliases:["patch"],c:[{cN:"chunk",r:10,v:[{b:/^\@\@ +\-\d+,\d+ +\+\d+,\d+ +\@\@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"header",v:[{b:/Index: /,e:/$/},{b:/=====/,e:/=====$/},{b:/^\-\-\-/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+\+\+/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}}),hljs.registerLanguage("javascript",function(t){return{aliases:["js"],k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const class",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document"},c:[{cN:"pi",r:10,v:[{b:/^\s*('|")use strict('|")/},{b:/^\s*('|")use asm('|")/}]},t.ASM,t.QSM,t.CLCM,t.CBCM,t.CNM,{b:"("+t.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[t.CLCM,t.CBCM,t.RM,{b:/</,e:/>;/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[t.inherit(t.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,c:[t.CLCM,t.CBCM],i:/["'\(]/}],i:/\[|%/},{b:/\$[(.]/},{b:"\\."+t.IR,r:0}]}}),hljs.registerLanguage("bash",function(t){var e={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)\}/}]},n={cN:"string",b:/"/,e:/"/,c:[t.BE,e,{cN:"variable",b:/\$\(/,e:/\)/,c:[t.BE]}]},r={cN:"string",b:/'/,e:/'/};return{aliases:["sh","zsh"],l:/-?[a-z\.]+/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"shebang",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[t.inherit(t.TM,{b:/\w[\w\d_]*/})],r:0},t.HCM,t.NM,n,r,e]}}),hljs.registerLanguage("objectivec",function(t){var e={keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"NSString NSData NSDictionary CGRect CGPoint UIButton UILabel UITextView UIWebView MKMapView NSView NSViewController NSWindow NSWindowController NSSet NSUUID NSIndexSet UISegmentedControl NSObject UITableViewDelegate UITableViewDataSource NSThread UIActivityIndicator UITabbar UIToolBar UIBarButtonItem UIImageView NSAutoreleasePool UITableView BOOL NSInteger CGFloat NSException NSLog NSMutableString NSMutableArray NSMutableDictionary NSURL NSIndexPath CGSize UITableViewCell UIView UIViewController UINavigationBar UINavigationController UITabBarController UIPopoverController UIPopoverControllerDelegate UIImage NSNumber UISearchBar NSFetchedResultsController NSFetchedResultsChangeType UIScrollView UIScrollViewDelegate UIEdgeInsets UIColor UIFont UIApplication NSNotFound NSNotificationCenter NSNotification UILocalNotification NSBundle NSFileManager NSTimeInterval NSDate NSCalendar NSUserDefaults UIWindow NSRange NSArray NSError NSURLRequest NSURLConnection NSURLSession NSURLSessionDataTask NSURLSessionDownloadTask NSURLSessionUploadTask NSURLResponseUIInterfaceOrientation MPMoviePlayerController dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},n=/[a-zA-Z@][a-zA-Z0-9_]*/,r="@interface @class @protocol @implementation";return{aliases:["m","mm","objc","obj-c"],k:e,l:n,i:"</",c:[t.CLCM,t.CBCM,t.CNM,t.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[t.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"preprocessor",b:"#",e:"$",c:[{cN:"title",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+r.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:r,l:n,c:[t.UTM]},{cN:"variable",b:"\\."+t.UIR,r:0}]}}),hljs.registerLanguage("markdown",function(){return{aliases:["md","mkdown","mkd"],c:[{cN:"header",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"blockquote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"`.+?`"},{b:"^( {4}|\t)",e:"$",r:0}]},{cN:"horizontal_rule",b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"link_label",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link_url",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"link_reference",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:"^\\[.+\\]:",rB:!0,c:[{cN:"link_reference",b:"\\[",e:"\\]:",eB:!0,eE:!0,starts:{cN:"link_url",e:"$"}}]}]}}),hljs.registerLanguage("json",function(t){var e={literal:"true false null"},n=[t.QSM,t.CNM],r={cN:"value",e:",",eW:!0,eE:!0,c:n,k:e},i={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[t.BE],i:"\\n",starts:r}],i:"\\S"},o={b:"\\[",e:"\\]",c:[t.inherit(r,{cN:null})],i:"\\S"};return n.splice(n.length,0,i,o),{c:n,k:e,i:"\\S"}}),hljs.registerLanguage("python",function(t){var e={cN:"prompt",b:/^(>>>|\.\.\.) /},n={cN:"string",c:[t.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[e],r:10},{b:/(u|b)?r?"""/,e:/"""/,c:[e],r:10},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)"/,e:/"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},t.ASM,t.QSM]},r={cN:"number",r:0,v:[{b:t.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:t.CNR+"[lLjJ]?"}]},i={cN:"params",b:/\(/,e:/\)/,c:["self",e,r,n]};return{aliases:["py","gyp"],k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},i:/(<\/|->|\?)/,c:[e,r,n,t.HCM,{v:[{cN:"function",bK:"def",r:10},{cN:"class",bK:"class"}],e:/:/,i:/[${=;\n]/,c:[t.UTM,i]},{cN:"decorator",b:/@/,e:/$/},{b:/\b(print|exec)\(/}]}}),hljs.registerLanguage("ruby",function(t){var e="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",n="and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",r={cN:"yardoctag",b:"@[A-Za-z]+"},i={cN:"value",b:"#<",e:">"},o={cN:"comment",v:[{b:"#",e:"$",c:[r]},{b:"^\\=begin",e:"^\\=end",c:[r],r:10},{b:"^__END__",e:"\\n$"}]},a={cN:"subst",b:"#\\{",e:"}",k:n},s={cN:"string",c:[t.BE,a],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/}]},l={cN:"params",b:"\\(",e:"\\)",k:n},c=[s,i,o,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[t.inherit(t.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+t.IR+"::)?"+t.IR}]},o]},{cN:"function",bK:"def",e:" |$|;",r:0,c:[t.inherit(t.TM,{b:e}),l,o]},{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:t.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":",c:[s,{b:e}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+t.RSR+")\\s*",c:[i,o,{cN:"regexp",c:[t.BE,a],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}],r:0}];a.c=c,l.c=c;var u="[>?]>",d="[\\w#]+\\(\\w+\\):\\d+:\\d+>",h="(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>",p=[{b:/^\s*=>/,cN:"status",starts:{e:"$",c:c}},{cN:"prompt",b:"^("+u+"|"+d+"|"+h+")",starts:{e:"$",c:c}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:n,c:[o].concat(p).concat(c)}}),hljs.registerLanguage("cpp",function(t){var e={keyword:"false int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using true class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue wchar_t inline delete alignof char16_t char32_t constexpr decltype noexcept nullptr static_assert thread_local restrict _Bool complex _Complex _Imaginaryintmax_t uintmax_t int8_t uint8_t int16_t uint16_t int32_t uint32_t  int64_t uint64_tint_least8_t uint_least8_t int_least16_t uint_least16_t int_least32_t uint_least32_tint_least64_t uint_least64_t int_fast8_t uint_fast8_t int_fast16_t uint_fast16_t int_fast32_tuint_fast32_t int_fast64_t uint_fast64_t intptr_t uintptr_t atomic_bool atomic_char atomic_scharatomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llongatomic_ullong atomic_wchar_t atomic_char16_t atomic_char32_t atomic_intmax_t atomic_uintmax_tatomic_intptr_t atomic_uintptr_t atomic_size_t atomic_ptrdiff_t atomic_int_least8_t atomic_int_least16_tatomic_int_least32_t atomic_int_least64_t atomic_uint_least8_t atomic_uint_least16_t atomic_uint_least32_tatomic_uint_least64_t atomic_int_fast8_t atomic_int_fast16_t atomic_int_fast32_t atomic_int_fast64_tatomic_uint_fast8_t atomic_uint_fast16_t atomic_uint_fast32_t atomic_uint_fast64_t",built_in:"std string cin cout cerr clog stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf"};return{aliases:["c","h","c++","h++"],k:e,i:"</",c:[t.CLCM,t.CBCM,t.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},t.CNM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line pragma",c:[{b:'include\\s*[<"]',e:'[>"]',k:"include",i:"\\n"},t.CLCM]},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:e,c:["self"]},{b:t.IR+"::"},{bK:"new throw return",r:0},{cN:"function",b:"("+t.IR+"\\s+)+"+t.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:e,c:[{b:t.IR+"\\s*\\(",rB:!0,c:[t.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:e,r:0,c:[t.CBCM]},t.CLCM,t.CBCM]}]}}),hljs.registerLanguage("css",function(t){var e="[a-zA-Z-][a-zA-Z0-9_-]*",n={cN:"function",b:e+"\\(",rB:!0,eE:!0,e:"\\("};return{cI:!0,i:"[=/|']",c:[t.CBCM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[n,t.ASM,t.QSM,t.CSSNM]}]},{cN:"tag",b:e,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[t.CBCM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[n,t.CSSNM,t.QSM,t.ASM,t.CBCM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]}]}]}}),hljs.registerLanguage("php",function(t){var e={cN:"variable",b:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},n={cN:"preprocessor",b:/<\?(php)?|\?>/},r={cN:"string",c:[t.BE,n],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},t.inherit(t.ASM,{i:null}),t.inherit(t.QSM,{i:null})]},i={v:[t.BNM,t.CNM]};return{aliases:["php3","php4","php5","php6"],cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[t.CLCM,t.HCM,{cN:"comment",b:"/\\*",e:"\\*/",c:[{cN:"phpdoc",b:"\\s@[A-Za-z]+"},n]},{cN:"comment",b:"__halt_compiler.+?;",eW:!0,k:"__halt_compiler",l:t.UIR},{cN:"string",b:"<<<['\"]?\\w+['\"]?$",e:"^\\w+;",c:[t.BE]},n,e,{b:/->+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{cN:"function",bK:"function",e:/[;{]/,eE:!0,i:"\\$|\\[|%",c:[t.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",e,t.CBCM,r,i]}]},{cN:"class",bK:"class interface",e:"{",eE:!0,i:/[:\(\$"]/,c:[{bK:"extends implements"},t.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[t.UTM]},{bK:"use",e:";",c:[t.UTM]},{b:"=>"},r,i]}}),hljs.registerLanguage("perl",function(t){var e="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",n={cN:"subst",b:"[$@]\\{",e:"\\}",k:e},r={b:"->{",e:"}"},i={cN:"variable",v:[{b:/\$\d/},{b:/[\$\%\@](\^\w\b|#\w+(\:\:\w+)*|{\w+}|\w+(\:\:\w*)*)/},{b:/[\$\%\@][^\s\w{]/,r:0}]},o={cN:"comment",b:"^(__END__|__DATA__)",e:"\\n$",r:5},a=[t.BE,n,i],s=[i,t.HCM,o,{cN:"comment",b:"^\\=\\w",e:"\\=cut",eW:!0},r,{cN:"string",c:a,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",r:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",r:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",r:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",r:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",r:5},{b:"qw\\s+q",e:"q",r:5},{b:"'",e:"'",c:[t.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[t.BE]},{b:"{\\w+}",c:[],r:0},{b:"-?\\w+\\s*\\=\\>",c:[],r:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\/\\/|"+t.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[t.HCM,o,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[t.BE],r:0}]},{cN:"sub",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",r:5},{cN:"operator",b:"-\\w\\b",r:0}];return n.c=s,r.c=s,{aliases:["pl"],k:e,c:s}}),hljs.registerLanguage("ini",function(t){return{cI:!0,i:/\S/,c:[{cN:"comment",b:";",e:"$"},{cN:"title",b:"^\\[",e:"\\]"},{cN:"setting",b:"^[a-z0-9\\[\\]_-]+[ \\t]*=[ \\t]*",e:"$",c:[{cN:"value",eW:!0,k:"on off true false yes no",c:[t.QSM,t.NM],r:0}]}]}}),hljs.registerLanguage("makefile",function(t){var e={cN:"variable",b:/\$\(/,e:/\)/,c:[t.BE]};return{aliases:["mk","mak"],c:[t.HCM,{b:/^\w+\s*\W*=/,rB:!0,r:0,starts:{cN:"constant",e:/\s*\W*=/,eE:!0,starts:{e:/$/,r:0,c:[e]}}},{cN:"title",b:/^[\w]+:\s*$/},{cN:"phony",b:/^\.PHONY:/,e:/$/,k:".PHONY",l:/[\.\w]+/},{b:/^\t+/,e:/$/,r:0,c:[t.QSM,e]}]}}),define("math",["jquery","main"],function(t,e){"use strict";return function(n){var r,i;r=n||t(".fmt"),"undefined"!=typeof MathJax?r.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,t(this).get(0)])}):(i=e.staticUrl+"/3rd/MathJax/MathJax.js",t.getScript(i,function(){MathJax.Hub.Config({extensions:["tex2jax.js"],jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,ignoreClass:"side"}}),r.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,t(this).get(0)])})}))}}),function(t){var e,n,r="0.4.2",i="hasOwnProperty",o=/[\.\/]/,a="*",s=function(){},l=function(t,e){return t-e},c={n:{}},u=function(t,r){t=String(t);var i,o=n,a=Array.prototype.slice.call(arguments,2),s=u.listeners(t),c=0,d=[],h={},p=[],f=e;e=t,n=0;for(var m=0,g=s.length;m<g;m++)"zIndex"in s[m]&&(d.push(s[m].zIndex),s[m].zIndex<0&&(h[s[m].zIndex]=s[m]));for(d.sort(l);d[c]<0;)if(i=h[d[c++]],p.push(i.apply(r,a)),n)return n=o,p;for(m=0;m<g;m++)if(i=s[m],"zIndex"in i)if(i.zIndex==d[c]){if(p.push(i.apply(r,a)),n)break;do if(c++,i=h[d[c]],i&&p.push(i.apply(r,a)),n)break;while(i)}else h[i.zIndex]=i;else if(p.push(i.apply(r,a)),n)break;return n=o,e=f,p.length?p:null};u._events=c,u.listeners=function(t){var e,n,r,i,s,l,u,d,h=t.split(o),p=c,f=[p],m=[];for(i=0,s=h.length;i<s;i++){for(d=[],l=0,u=f.length;l<u;l++)for(p=f[l].n,n=[p[h[i]],p[a]],r=2;r--;)e=n[r],e&&(d.push(e),m=m.concat(e.f||[]));f=d}return m},u.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var n=t.split(o),r=c,i=0,a=n.length;i<a;i++)r=r.n,r=r.hasOwnProperty(n[i])&&r[n[i]]||(r[n[i]]={n:{}});for(r.f=r.f||[],i=0,a=r.f.length;i<a;i++)if(r.f[i]==e)return s;return r.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},u.f=function(t){var e=[].slice.call(arguments,1);return function(){u.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},u.stop=function(){n=1},u.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},u.nts=function(){return e.split(o)},u.off=u.unbind=function(t,e){if(!t)return void(u._events=c={n:{}});var n,r,s,l,d,h,p,f=t.split(o),m=[c];for(l=0,d=f.length;l<d;l++)for(h=0;h<m.length;h+=s.length-2){if(s=[h,1],n=m[h].n,f[l]!=a)n[f[l]]&&s.push(n[f[l]]);else for(r in n)n[i](r)&&s.push(n[r]);m.splice.apply(m,s)}for(l=0,d=m.length;l<d;l++)for(n=m[l];n.n;){if(e){if(n.f){for(h=0,p=n.f.length;h<p;h++)if(n.f[h]==e){n.f.splice(h,1);break}!n.f.length&&delete n.f}for(r in n.n)if(n.n[i](r)&&n.n[r].f){var g=n.n[r].f;for(h=0,p=g.length;h<p;h++)if(g[h]==e){g.splice(h,1);break}!g.length&&delete n.n[r].f}}else{delete n.f;for(r in n.n)n.n[i](r)&&n.n[r].f&&delete n.n[r].f}n=n.n}},u.once=function(t,e){var n=function(){return u.unbind(t,n),e.apply(this,arguments)};return u.on(t,n)},u.version=r,u.toString=function(){return"You are running Eve "+r},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):t.eve=u}(this),function(t,e){"function"==typeof define&&define.amd?define("Raphael",["eve"],function(n){return e(t,n)}):e(t,t.eve)}(this,function(t,e){function n(t){if(n.is(t,"function"))return x?t():e.on("raphael.DOMload",t);if(n.is(t,X))return n._engine.create[$](n,t.splice(0,3+n.is(t[0],U))).add(t);var r=Array.prototype.slice.call(arguments,0);if(n.is(r[r.length-1],"function")){var i=r.pop();return x?i.call(n._engine.create[$](n,r)):e.on("raphael.DOMload",function(){i.call(n._engine.create[$](n,r))})}return n._engine.create[$](n,arguments)}function r(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[S](n)&&(e[n]=r(t[n]));return e}function i(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function o(t,e,n){function r(){var o=Array.prototype.slice.call(arguments,0),a=o.join("␀"),s=r.cache=r.cache||{},l=r.count=r.count||[];return s[S](a)?(i(l,a),n?n(s[a]):s[a]):(l.length>=1e3&&delete s[l.shift()],l.push(a),s[a]=t[$](e,o),n?n(s[a]):s[a])}return r}function a(){return this.hex}function s(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var o=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4==r?o[3]={x:+t[0],y:+t[1]}:i-2==r&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4==r?o[3]=o[2]:r||(o[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function l(t,e,n,r,i){var o=-3*e+9*n-9*r+3*i,a=t*o+6*e-12*n+6*r;return t*a-3*e+3*n}function c(t,e,n,r,i,o,a,s,c){null==c&&(c=1),c=c>1?1:c<0?0:c;for(var u=c/2,d=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,m=0;m<d;m++){var g=u*h[m]+u,v=l(g,t,n,i,a),b=l(g,e,r,o,s),y=v*v+b*b;f+=p[m]*R.sqrt(y)}return u*f}function u(t,e,n,r,i,o,a,s,l){if(!(l<0||c(t,e,n,r,i,o,a,s)<l)){var u,d=1,h=d/2,p=d-h,f=.01;for(u=c(t,e,n,r,i,o,a,s,p);q(u-l)>f;)h/=2,p+=(u<l?1:-1)*h,u=c(t,e,n,r,i,o,a,s,p);return p}}function d(t,e,n,r,i,o,a,s){if(!(z(t,n)<j(i,a)||j(t,n)>z(i,a)||z(e,r)<j(o,s)||j(e,r)>z(o,s))){var l=(t*r-e*n)*(i-a)-(t-n)*(i*s-o*a),c=(t*r-e*n)*(o-s)-(e-r)*(i*s-o*a),u=(t-n)*(o-s)-(e-r)*(i-a);if(u){var d=l/u,h=c/u,p=+d.toFixed(2),f=+h.toFixed(2);if(!(p<+j(t,n).toFixed(2)||p>+z(t,n).toFixed(2)||p<+j(i,a).toFixed(2)||p>+z(i,a).toFixed(2)||f<+j(e,r).toFixed(2)||f>+z(e,r).toFixed(2)||f<+j(o,s).toFixed(2)||f>+z(o,s).toFixed(2)))return{x:d,y:h}}}}function h(t,e,r){var i=n.bezierBBox(t),o=n.bezierBBox(e);if(!n.isBBoxIntersect(i,o))return r?0:[];for(var a=c.apply(0,t),s=c.apply(0,e),l=z(~~(a/5),1),u=z(~~(s/5),1),h=[],p=[],f={},m=r?0:[],g=0;g<l+1;g++){var v=n.findDotsAtSegment.apply(n,t.concat(g/l));h.push({x:v.x,y:v.y,t:g/l})}for(g=0;g<u+1;g++)v=n.findDotsAtSegment.apply(n,e.concat(g/u)),p.push({x:v.x,y:v.y,t:g/u});for(g=0;g<l;g++)for(var b=0;b<u;b++){var y=h[g],x=h[g+1],w=p[b],_=p[b+1],k=q(x.x-y.x)<.001?"y":"x",C=q(_.x-w.x)<.001?"y":"x",S=d(y.x,y.y,x.x,x.y,w.x,w.y,_.x,_.y);if(S){if(f[S.x.toFixed(4)]==S.y.toFixed(4))continue;f[S.x.toFixed(4)]=S.y.toFixed(4);var D=y.t+q((S[k]-y[k])/(x[k]-y[k]))*(x.t-y.t),T=w.t+q((S[C]-w[C])/(_[C]-w[C]))*(_.t-w.t);D>=0&&D<=1.001&&T>=0&&T<=1.001&&(r?m++:m.push({x:S.x,y:S.y,t1:j(D,1),t2:j(T,1)}))}}return m}function p(t,e,r){t=n._path2curve(t),e=n._path2curve(e);for(var i,o,a,s,l,c,u,d,p,f,m=r?0:[],g=0,v=t.length;g<v;g++){var b=t[g];if("M"==b[0])i=l=b[1],o=c=b[2];else{"C"==b[0]?(p=[i,o].concat(b.slice(1)),i=p[6],o=p[7]):(p=[i,o,i,o,l,c,l,c],i=l,o=c);for(var y=0,x=e.length;y<x;y++){var w=e[y];if("M"==w[0])a=u=w[1],s=d=w[2];else{"C"==w[0]?(f=[a,s].concat(w.slice(1)),a=f[6],s=f[7]):(f=[a,s,a,s,u,d,u,d],a=u,s=d);var _=h(p,f,r);if(r)m+=_;else{for(var k=0,C=_.length;k<C;k++)_[k].segment1=g,_[k].segment2=y,_[k].bez1=p,_[k].bez2=f;m=m.concat(_)}}}}}return m}function f(t,e,n,r,i,o){null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+r,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function m(){return this.x+A+this.y+A+this.width+" × "+this.height}function g(t,e,n,r,i,o){function a(t){return((d*t+u)*t+c)*t}function s(t,e){var n=l(t,e);return((f*n+p)*n+h)*n}function l(t,e){var n,r,i,o,s,l;for(i=t,l=0;l<8;l++){if(o=a(i)-t,q(o)<e)return i;if(s=(3*d*i+2*u)*i+c,q(s)<1e-6)break;i-=o/s}if(n=0,r=1,i=t,i<n)return n;if(i>r)return r;for(;n<r;){if(o=a(i),q(o-t)<e)return i;t>o?n=i:r=i,i=(r-n)/2+n}return i}var c=3*e,u=3*(r-e)-c,d=1-c-u,h=3*n,p=3*(i-n)-h,f=1-h-p;return s(t,1/(200*o))}function v(t,e){var n=[],r={};if(this.ms=e,this.times=1,t){for(var i in t)t[S](i)&&(r[J(i)]=t[i],n.push(J(i)));n.sort(dt)}this.anim=r,this.top=n[n.length-1],this.percents=n}function b(t,r,i,o,a,s){i=J(i);var l,c,u,d,h,p,m=t.ms,v={},b={},y={};if(o)for(w=0,k=le.length;w<k;w++){var x=le[w];if(x.el.id==r.id&&x.anim==t){x.percent!=i?(le.splice(w,1),u=1):c=x,r.attr(x.totalOrigin);break}}else o=+b;for(var w=0,k=t.percents.length;w<k;w++){if(t.percents[w]==i||t.percents[w]>o*t.top){i=t.percents[w],h=t.percents[w-1]||0,m=m/t.top*(i-h),d=t.percents[w+1],l=t.anim[i];break}o&&r.attr(t.anim[t.percents[w]])}if(l){if(c)c.initstatus=o,c.start=new Date-c.ms*o;else{for(var C in l)if(l[S](C)&&(rt[S](C)||r.paper.customAttributes[S](C)))switch(v[C]=r.attr(C),null==v[C]&&(v[C]=nt[C]),b[C]=l[C],rt[C]){case U:y[C]=(b[C]-v[C])/m;break;case"colour":v[C]=n.getRGB(v[C]);var D=n.getRGB(b[C]);y[C]={r:(D.r-v[C].r)/m,g:(D.g-v[C].g)/m,b:(D.b-v[C].b)/m};break;case"path":var T=Pt(v[C],b[C]),E=T[1];for(v[C]=T[0],y[C]=[],w=0,k=v[C].length;w<k;w++){y[C][w]=[0];for(var $=1,L=v[C][w].length;$<L;$++)y[C][w][$]=(E[w][$]-v[C][w][$])/m}break;case"transform":var B=r._,A=jt(B[C],b[C]);if(A)for(v[C]=A.from,b[C]=A.to,y[C]=[],y[C].real=!0,w=0,k=v[C].length;w<k;w++)for(y[C][w]=[v[C][w][0]],$=1,L=v[C][w].length;$<L;$++)y[C][w][$]=(b[C][w][$]-v[C][w][$])/m;else{var P=r.matrix||new f,F={_:{transform:B.transform},getBBox:function(){return r.getBBox(1)}};v[C]=[P.a,P.b,P.c,P.d,P.e,P.f],Rt(F,b[C]),b[C]=F._.transform,y[C]=[(F.matrix.a-P.a)/m,(F.matrix.b-P.b)/m,(F.matrix.c-P.c)/m,(F.matrix.d-P.d)/m,(F.matrix.e-P.e)/m,(F.matrix.f-P.f)/m]}break;case"csv":var O=I(l[C])[N](_),R=I(v[C])[N](_);if("clip-rect"==C)for(v[C]=R,y[C]=[],w=R.length;w--;)y[C][w]=(O[w]-v[C][w])/m;b[C]=O;break;default:for(O=[][M](l[C]),R=[][M](v[C]),y[C]=[],w=r.paper.customAttributes[C].length;w--;)y[C][w]=((O[w]||0)-(R[w]||0))/m}var z=l.easing,j=n.easing_formulas[z];if(!j)if(j=I(z).match(Z),j&&5==j.length){var q=j;j=function(t){return g(t,+q[1],+q[2],+q[3],+q[4],m)}}else j=pt;if(p=l.start||t.start||+new Date,x={anim:t,percent:i,timestamp:p,start:p+(t.del||0),status:0,initstatus:o||0,stop:!1,ms:m,easing:j,from:v,diff:y,to:b,el:r,callback:l.callback,prev:h,next:d,repeat:s||t.times,origin:r.attr(),totalOrigin:a},le.push(x),o&&!c&&!u&&(x.stop=!0,x.start=new Date-m*o,1==le.length))return ue();u&&(x.start=new Date-x.ms*o),1==le.length&&ce(ue)}e("raphael.anim.start."+r.id,r,t)}}function y(t){for(var e=0;e<le.length;e++)le[e].el.paper==t&&le.splice(e--,1)}n.version="2.1.0",n.eve=e;var x,w,_=/[, ]+/,k={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},C=/\{(\d+)\}/g,S="hasOwnProperty",D={doc:document,win:t},T={was:Object.prototype[S].call(D.win,"Raphael"),is:D.win.Raphael},E=function(){this.ca=this.customAttributes={}},$="apply",M="concat",L="ontouchstart"in D.win||D.win.DocumentTouch&&D.doc instanceof DocumentTouch,B="",A=" ",I=String,N="split",P="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[N](A),F={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},O=I.prototype.toLowerCase,R=Math,z=R.max,j=R.min,q=R.abs,H=R.pow,W=R.PI,U="number",V="string",X="array",K=Object.prototype.toString,G=(n._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),Y={NaN:1,Infinity:1,"-Infinity":1},Z=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=R.round,J=parseFloat,tt=parseInt,et=I.prototype.toUpperCase,nt=n._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},rt=n._availableAnimAttrs={blur:U,"clip-rect":"csv",cx:U,cy:U,fill:"colour","fill-opacity":U,"font-size":U,height:U,opacity:U,path:"path",r:U,rx:U,ry:U,stroke:"colour","stroke-opacity":U,"stroke-width":U,transform:"transform",width:U,x:U,y:U},it=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ot={
hs:1,rg:1},at=/,?([achlmqrstvxz]),?/gi,st=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,lt=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ct=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ut=(n._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),dt=function(t,e){return J(t)-J(e)},ht=function(){},pt=function(t){return t},ft=n._rectPath=function(t,e,n,r,i){return i?[["M",t+i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]]},mt=function(t,e,n,r){return null==r&&(r=n),[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},gt=n._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return mt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return mt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return ft(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return ft(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return ft(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return ft(e.x,e.y,e.width,e.height)}},vt=n.mapPath=function(t,e){if(!e)return t;var n,r,i,o,a,s,l;for(t=Pt(t),i=0,a=t.length;i<a;i++)for(l=t[i],o=1,s=l.length;o<s;o+=2)n=e.x(l[o],l[o+1]),r=e.y(l[o],l[o+1]),l[o]=n,l[o+1]=r;return t};if(n._g=D,n.type=D.win.SVGAngle||D.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==n.type){var bt,yt=D.doc.createElement("div");if(yt.innerHTML='<v:shape adj="1"/>',bt=yt.firstChild,bt.style.behavior="url(#default#VML)",!bt||"object"!=typeof bt.adj)return n.type=B;yt=null}n.svg=!(n.vml="VML"==n.type),n._Paper=E,n.fn=w=E.prototype=n.prototype,n._id=0,n._oid=0,n.is=function(t,e){return e=O.call(e),"finite"==e?!Y[S](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||K.call(t).slice(8,-1).toLowerCase()==e},n.angle=function(t,e,r,i,o,a){if(null==o){var s=t-r,l=e-i;return s||l?(180+180*R.atan2(-l,-s)/W+360)%360:0}return n.angle(t,e,o,a)-n.angle(r,i,o,a)},n.rad=function(t){return t%360*W/180},n.deg=function(t){return 180*t/W%360},n.snapTo=function(t,e,r){if(r=n.is(r,"finite")?r:10,n.is(t,X)){for(var i=t.length;i--;)if(q(t[i]-e)<=r)return t[i]}else{t=+t;var o=e%t;if(o<r)return e-o;if(o>t-r)return e-o+t}return e};n.createUUID=function(t,e){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*R.random()|0,n="x"==t?e:3&e|8;return n.toString(16)});n.setWindow=function(t){e("raphael.setWindow",n,D.win,t),D.win=t,D.doc=D.win.document,n._engine.initWin&&n._engine.initWin(D.win)};var xt=function(t){if(n.vml){var e,r=/^\s+|\s+$/g;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),e=i.body}catch(t){e=createPopup().document.body}var a=e.createTextRange();xt=o(function(t){try{e.style.color=I(t).replace(r,B);var n=a.queryCommandValue("ForeColor");return n=(255&n)<<16|65280&n|(16711680&n)>>>16,"#"+("000000"+n.toString(16)).slice(-6)}catch(t){return"none"}})}else{var s=D.doc.createElement("i");s.title="Raphaël Colour Picker",s.style.display="none",D.doc.body.appendChild(s),xt=o(function(t){return s.style.color=t,D.doc.defaultView.getComputedStyle(s,B).getPropertyValue("color")})}return xt(t)},wt=function(){return"hsb("+[this.h,this.s,this.b]+")"},_t=function(){return"hsl("+[this.h,this.s,this.l]+")"},kt=function(){return this.hex},Ct=function(t,e,r){if(null==e&&n.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(r=t.b,e=t.g,t=t.r),null==e&&n.is(t,V)){var i=n.getRGB(t);t=i.r,e=i.g,r=i.b}return(t>1||e>1||r>1)&&(t/=255,e/=255,r/=255),[t,e,r]},St=function(t,e,r,i){t*=255,e*=255,r*=255;var o={r:t,g:e,b:r,hex:n.rgb(t,e,r),toString:kt};return n.is(i,"finite")&&(o.opacity=i),o};n.color=function(t){var e;return n.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=n.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):n.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=n.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(n.is(t,"string")&&(t=n.getRGB(t)),n.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=n.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=n.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=kt,t},n.hsb2rgb=function(t,e,n,r){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,t=t.h,r=t.o),t*=360;var i,o,a,s,l;return t=t%360/60,l=n*e,s=l*(1-q(t%2-1)),i=o=a=n-l,t=~~t,i+=[l,s,0,0,s,l][t],o+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],St(i,o,a,r)},n.hsl2rgb=function(t,e,n,r){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),t*=360;var i,o,a,s,l;return t=t%360/60,l=2*e*(n<.5?n:1-n),s=l*(1-q(t%2-1)),i=o=a=n-l/2,t=~~t,i+=[l,s,0,0,s,l][t],o+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],St(i,o,a,r)},n.rgb2hsb=function(t,e,n){n=Ct(t,e,n),t=n[0],e=n[1],n=n[2];var r,i,o,a;return o=z(t,e,n),a=o-j(t,e,n),r=0==a?null:o==t?(e-n)/a:o==e?(n-t)/a+2:(t-e)/a+4,r=(r+360)%6*60/360,i=0==a?0:a/o,{h:r,s:i,b:o,toString:wt}},n.rgb2hsl=function(t,e,n){n=Ct(t,e,n),t=n[0],e=n[1],n=n[2];var r,i,o,a,s,l;return a=z(t,e,n),s=j(t,e,n),l=a-s,r=0==l?null:a==t?(e-n)/l:a==e?(n-t)/l+2:(t-e)/l+4,r=(r+360)%6*60/360,o=(a+s)/2,i=0==l?0:o<.5?l/(2*o):l/(2-2*o),{h:r,s:i,l:o,toString:_t}},n._path2string=function(){return this.join(",").replace(at,"$1")};n._preload=function(t,e){var n=D.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){e.call(this),this.onload=null,D.doc.body.removeChild(this)},n.onerror=function(){D.doc.body.removeChild(this)},D.doc.body.appendChild(n),n.src=t};n.getRGB=o(function(t){if(!t||(t=I(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:a};!(ot[S](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=xt(t));var e,r,i,o,s,l,c=t.match(G);return c?(c[2]&&(i=tt(c[2].substring(5),16),r=tt(c[2].substring(3,5),16),e=tt(c[2].substring(1,3),16)),c[3]&&(i=tt((s=c[3].charAt(3))+s,16),r=tt((s=c[3].charAt(2))+s,16),e=tt((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4][N](it),e=J(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),r=J(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),i=J(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(o=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100)),c[5]?(l=c[5][N](it),e=J(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),r=J(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),i=J(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(o=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),n.hsb2rgb(e,r,i,o)):c[6]?(l=c[6][N](it),e=J(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),r=J(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),i=J(l[2]),"%"==l[2].slice(-1)&&(i*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(o=J(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),n.hsl2rgb(e,r,i,o)):(c={r:e,g:r,b:i,toString:a},c.hex="#"+(16777216|i|r<<8|e<<16).toString(16).slice(1),n.is(o,"finite")&&(c.opacity=o),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a}},n),n.hsb=o(function(t,e,r){return n.hsb2rgb(t,e,r).hex}),n.hsl=o(function(t,e,r){return n.hsl2rgb(t,e,r).hex}),n.rgb=o(function(t,e,n){return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)}),n.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},n=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),n.hex},n.getColor.reset=function(){delete this.start},n.parsePathString=function(t){if(!t)return null;var e=Dt(t);if(e.arr)return Et(e.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return n.is(t,X)&&n.is(t[0],X)&&(i=Et(t)),i.length||I(t).replace(st,function(t,e,n){var o=[],a=e.toLowerCase();if(n.replace(ct,function(t,e){e&&o.push(+e)}),"m"==a&&o.length>2&&(i.push([e][M](o.splice(0,2))),a="l",e="m"==e?"l":"L"),"r"==a)i.push([e][M](o));else for(;o.length>=r[a]&&(i.push([e][M](o.splice(0,r[a]))),r[a]););}),i.toString=n._path2string,e.arr=Et(i),i},n.parseTransformString=o(function(t){if(!t)return null;var e=[];return n.is(t,X)&&n.is(t[0],X)&&(e=Et(t)),e.length||I(t).replace(lt,function(t,n,r){var i=[];O.call(n);r.replace(ct,function(t,e){e&&i.push(+e)}),e.push([n][M](i))}),e.toString=n._path2string,e});var Dt=function(t){var e=Dt.ps=Dt.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[S](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]};n.findDotsAtSegment=function(t,e,n,r,i,o,a,s,l){var c=1-l,u=H(c,3),d=H(c,2),h=l*l,p=h*l,f=u*t+3*d*l*n+3*c*l*l*i+p*a,m=u*e+3*d*l*r+3*c*l*l*o+p*s,g=t+2*l*(n-t)+h*(i-2*n+t),v=e+2*l*(r-e)+h*(o-2*r+e),b=n+2*l*(i-n)+h*(a-2*i+n),y=r+2*l*(o-r)+h*(s-2*o+r),x=c*t+l*n,w=c*e+l*r,_=c*i+l*a,k=c*o+l*s,C=90-180*R.atan2(g-b,v-y)/W;return(g>b||v<y)&&(C+=180),{x:f,y:m,m:{x:g,y:v},n:{x:b,y:y},start:{x:x,y:w},end:{x:_,y:k},alpha:C}},n.bezierBBox=function(t,e,r,i,o,a,s,l){n.is(t,"array")||(t=[t,e,r,i,o,a,s,l]);var c=Nt.apply(null,t);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},n.isPointInsideBBox=function(t,e,n){return e>=t.x&&e<=t.x2&&n>=t.y&&n<=t.y2},n.isBBoxIntersect=function(t,e){var r=n.isPointInsideBBox;return r(e,t.x,t.y)||r(e,t.x2,t.y)||r(e,t.x,t.y2)||r(e,t.x2,t.y2)||r(t,e.x,e.y)||r(t,e.x2,e.y)||r(t,e.x,e.y2)||r(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},n.pathIntersection=function(t,e){return p(t,e)},n.pathIntersectionNumber=function(t,e){return p(t,e,1)},n.isPointInsidePath=function(t,e,r){var i=n.pathBBox(t);return n.isPointInsideBBox(i,e,r)&&p(t,[["M",e,r],["H",i.x2+10]],1)%2==1},n._removedFactory=function(t){return function(){e("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var Tt=n.pathBBox=function(t){var e=Dt(t);if(e.bbox)return r(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Pt(t);for(var n,i=0,o=0,a=[],s=[],l=0,c=t.length;l<c;l++)if(n=t[l],"M"==n[0])i=n[1],o=n[2],a.push(i),s.push(o);else{var u=Nt(i,o,n[1],n[2],n[3],n[4],n[5],n[6]);a=a[M](u.min.x,u.max.x),s=s[M](u.min.y,u.max.y),i=n[5],o=n[6]}var d=j[$](0,a),h=j[$](0,s),p=z[$](0,a),f=z[$](0,s),m=p-d,g=f-h,v={x:d,y:h,x2:p,y2:f,width:m,height:g,cx:d+m/2,cy:h+g/2};return e.bbox=r(v),v},Et=function(t){var e=r(t);return e.toString=n._path2string,e},$t=n._pathToRelative=function(t){var e=Dt(t);if(e.rel)return Et(e.rel);n.is(t,X)&&n.is(t&&t[0],X)||(t=n.parsePathString(t));var r=[],i=0,o=0,a=0,s=0,l=0;"M"==t[0][0]&&(i=t[0][1],o=t[0][2],a=i,s=o,l++,r.push(["M",i,o]));for(var c=l,u=t.length;c<u;c++){var d=r[c]=[],h=t[c];if(h[0]!=O.call(h[0]))switch(d[0]=O.call(h[0]),d[0]){case"a":d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d[6]=+(h[6]-i).toFixed(3),d[7]=+(h[7]-o).toFixed(3);break;case"v":d[1]=+(h[1]-o).toFixed(3);break;case"m":a=h[1],s=h[2];default:for(var p=1,f=h.length;p<f;p++)d[p]=+(h[p]-(p%2?i:o)).toFixed(3)}else{d=r[c]=[],"m"==h[0]&&(a=h[1]+i,s=h[2]+o);for(var m=0,g=h.length;m<g;m++)r[c][m]=h[m]}var v=r[c].length;switch(r[c][0]){case"z":i=a,o=s;break;case"h":i+=+r[c][v-1];break;case"v":o+=+r[c][v-1];break;default:i+=+r[c][v-2],o+=+r[c][v-1]}}return r.toString=n._path2string,e.rel=Et(r),r},Mt=n._pathToAbsolute=function(t){var e=Dt(t);if(e.abs)return Et(e.abs);if(n.is(t,X)&&n.is(t&&t[0],X)||(t=n.parsePathString(t)),!t||!t.length)return[["M",0,0]];var r=[],i=0,o=0,a=0,l=0,c=0;"M"==t[0][0]&&(i=+t[0][1],o=+t[0][2],a=i,l=o,c++,r[0]=["M",i,o]);for(var u,d,h=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=c,f=t.length;p<f;p++){if(r.push(u=[]),d=t[p],d[0]!=et.call(d[0]))switch(u[0]=et.call(d[0]),u[0]){case"A":u[1]=d[1],u[2]=d[2],u[3]=d[3],u[4]=d[4],u[5]=d[5],u[6]=+(d[6]+i),u[7]=+(d[7]+o);break;case"V":u[1]=+d[1]+o;break;case"H":u[1]=+d[1]+i;break;case"R":for(var m=[i,o][M](d.slice(1)),g=2,v=m.length;g<v;g++)m[g]=+m[g]+i,m[++g]=+m[g]+o;r.pop(),r=r[M](s(m,h));break;case"M":a=+d[1]+i,l=+d[2]+o;default:for(g=1,v=d.length;g<v;g++)u[g]=+d[g]+(g%2?i:o)}else if("R"==d[0])m=[i,o][M](d.slice(1)),r.pop(),r=r[M](s(m,h)),u=["R"][M](d.slice(-2));else for(var b=0,y=d.length;b<y;b++)u[b]=d[b];switch(u[0]){case"Z":i=a,o=l;break;case"H":i=u[1];break;case"V":o=u[1];break;case"M":a=u[u.length-2],l=u[u.length-1];default:i=u[u.length-2],o=u[u.length-1]}}return r.toString=n._path2string,e.abs=Et(r),r},Lt=function(t,e,n,r){return[t,e,n,r,n,r]},Bt=function(t,e,n,r,i,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]},At=function(t,e,n,r,i,a,s,l,c,u){var d,h=120*W/180,p=W/180*(+i||0),f=[],m=o(function(t,e,n){var r=t*R.cos(n)-e*R.sin(n),i=t*R.sin(n)+e*R.cos(n);return{x:r,y:i}});if(u)C=u[0],S=u[1],_=u[2],k=u[3];else{d=m(t,e,-p),t=d.x,e=d.y,d=m(l,c,-p),l=d.x,c=d.y;var g=(R.cos(W/180*i),R.sin(W/180*i),(t-l)/2),v=(e-c)/2,b=g*g/(n*n)+v*v/(r*r);b>1&&(b=R.sqrt(b),n*=b,r*=b);var y=n*n,x=r*r,w=(a==s?-1:1)*R.sqrt(q((y*x-y*v*v-x*g*g)/(y*v*v+x*g*g))),_=w*n*v/r+(t+l)/2,k=w*-r*g/n+(e+c)/2,C=R.asin(((e-k)/r).toFixed(9)),S=R.asin(((c-k)/r).toFixed(9));C=t<_?W-C:C,S=l<_?W-S:S,C<0&&(C=2*W+C),S<0&&(S=2*W+S),s&&C>S&&(C-=2*W),!s&&S>C&&(S-=2*W)}var D=S-C;if(q(D)>h){var T=S,E=l,$=c;S=C+h*(s&&S>C?1:-1),l=_+n*R.cos(S),c=k+r*R.sin(S),f=At(l,c,n,r,i,0,s,E,$,[S,T,_,k])}D=S-C;var L=R.cos(C),B=R.sin(C),A=R.cos(S),I=R.sin(S),P=R.tan(D/4),F=4/3*n*P,O=4/3*r*P,z=[t,e],j=[t+F*B,e-O*L],H=[l+F*I,c-O*A],U=[l,c];if(j[0]=2*z[0]-j[0],j[1]=2*z[1]-j[1],u)return[j,H,U][M](f);f=[j,H,U][M](f).join()[N](",");for(var V=[],X=0,K=f.length;X<K;X++)V[X]=X%2?m(f[X-1],f[X],p).y:m(f[X],f[X+1],p).x;return V},It=function(t,e,n,r,i,o,a,s,l){var c=1-l;return{x:H(c,3)*t+3*H(c,2)*l*n+3*c*l*l*i+H(l,3)*a,y:H(c,3)*e+3*H(c,2)*l*r+3*c*l*l*o+H(l,3)*s}},Nt=o(function(t,e,n,r,i,o,a,s){var l,c=i-2*n+t-(a-2*i+n),u=2*(n-t)-2*(i-n),d=t-n,h=(-u+R.sqrt(u*u-4*c*d))/2/c,p=(-u-R.sqrt(u*u-4*c*d))/2/c,f=[e,s],m=[t,a];return q(h)>"1e12"&&(h=.5),q(p)>"1e12"&&(p=.5),h>0&&h<1&&(l=It(t,e,n,r,i,o,a,s,h),m.push(l.x),f.push(l.y)),p>0&&p<1&&(l=It(t,e,n,r,i,o,a,s,p),m.push(l.x),f.push(l.y)),c=o-2*r+e-(s-2*o+r),u=2*(r-e)-2*(o-r),d=e-r,h=(-u+R.sqrt(u*u-4*c*d))/2/c,p=(-u-R.sqrt(u*u-4*c*d))/2/c,q(h)>"1e12"&&(h=.5),q(p)>"1e12"&&(p=.5),h>0&&h<1&&(l=It(t,e,n,r,i,o,a,s,h),m.push(l.x),f.push(l.y)),p>0&&p<1&&(l=It(t,e,n,r,i,o,a,s,p),m.push(l.x),f.push(l.y)),{min:{x:j[$](0,m),y:j[$](0,f)},max:{x:z[$](0,m),y:z[$](0,f)}}}),Pt=n._path2curve=o(function(t,e){var n=!e&&Dt(t);if(!e&&n.curve)return Et(n.curve);for(var r=Mt(t),i=e&&Mt(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][M](At[$](0,[e.x,e.y][M](t.slice(1))));break;case"S":"C"==n||"S"==n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i][M](t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][M](Bt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][M](Bt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][M](Lt(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][M](Lt(e.x,e.y,t[1],e.y));break;case"V":t=["C"][M](Lt(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][M](Lt(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)t.splice(e++,0,["C"][M](n.splice(0,6)));t.splice(e,1),d=z(r.length,i&&i.length||0)}},c=function(t,e,n,o,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=t[a][1],n.y=t[a][2],d=z(r.length,i&&i.length||0))},u=0,d=z(r.length,i&&i.length||0);u<d;u++){r[u]=s(r[u],o),l(r,u),i&&(i[u]=s(i[u],a)),i&&l(i,u),c(r,i,o,a,u),c(i,r,a,o,u);var h=r[u],p=i&&i[u],f=h.length,m=i&&p.length;o.x=h[f-2],o.y=h[f-1],o.bx=J(h[f-4])||o.x,o.by=J(h[f-3])||o.y,a.bx=i&&(J(p[m-4])||a.x),a.by=i&&(J(p[m-3])||a.y),a.x=i&&p[m-2],a.y=i&&p[m-1]}return i||(n.curve=Et(r)),i?[r,i]:r},null,Et),Ft=(n._parseDots=o(function(t){for(var e=[],r=0,i=t.length;r<i;r++){var o={},a=t[r].match(/^([^:]*):?([\d\.]*)/);if(o.color=n.getRGB(a[1]),o.color.error)return null;o.color=o.color.hex,a[2]&&(o.offset=a[2]+"%"),e.push(o)}for(r=1,i=e.length-1;r<i;r++)if(!e[r].offset){for(var s=J(e[r-1].offset||0),l=0,c=r+1;c<i;c++)if(e[c].offset){l=e[c].offset;break}l||(l=100,c=i),l=J(l);for(var u=(l-s)/(c-r+1);r<c;r++)s+=u,e[r].offset=s+"%"}return e}),n._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),Ot=(n._tofront=function(t,e){e.top!==t&&(Ft(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},n._toback=function(t,e){e.bottom!==t&&(Ft(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},n._insertafter=function(t,e,n){Ft(t,n),e==n.top&&(n.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},n._insertbefore=function(t,e,n){Ft(t,n),e==n.bottom&&(n.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},n.toMatrix=function(t,e){var n=Tt(t),r={_:{transform:B},getBBox:function(){return n}};return Rt(r,e),r.matrix}),Rt=(n.transformPath=function(t,e){return vt(t,Ot(t,e))},n._extractTransform=function(t,e){if(null==e)return t._.transform;e=I(e).replace(/\.{3}|\u2026/g,t._.transform||B);var r=n.parseTransformString(e),i=0,o=0,a=0,s=1,l=1,c=t._,u=new f;if(c.transform=r||[],r)for(var d=0,h=r.length;d<h;d++){var p,m,g,v,b,y=r[d],x=y.length,w=I(y[0]).toLowerCase(),_=y[0]!=w,k=_?u.invert():0;"t"==w&&3==x?_?(p=k.x(0,0),m=k.y(0,0),g=k.x(y[1],y[2]),v=k.y(y[1],y[2]),u.translate(g-p,v-m)):u.translate(y[1],y[2]):"r"==w?2==x?(b=b||t.getBBox(1),u.rotate(y[1],b.x+b.width/2,b.y+b.height/2),i+=y[1]):4==x&&(_?(g=k.x(y[2],y[3]),v=k.y(y[2],y[3]),u.rotate(y[1],g,v)):u.rotate(y[1],y[2],y[3]),i+=y[1]):"s"==w?2==x||3==x?(b=b||t.getBBox(1),u.scale(y[1],y[x-1],b.x+b.width/2,b.y+b.height/2),s*=y[1],l*=y[x-1]):5==x&&(_?(g=k.x(y[3],y[4]),v=k.y(y[3],y[4]),u.scale(y[1],y[2],g,v)):u.scale(y[1],y[2],y[3],y[4]),s*=y[1],l*=y[2]):"m"==w&&7==x&&u.add(y[1],y[2],y[3],y[4],y[5],y[6]),c.dirtyT=1,t.matrix=u}t.matrix=u,c.sx=s,c.sy=l,c.deg=i,c.dx=o=u.e,c.dy=a=u.f,1==s&&1==l&&!i&&c.bbox?(c.bbox.x+=+o,c.bbox.y+=+a):c.dirtyT=1}),zt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},jt=n._equaliseTransform=function(t,e){e=I(e).replace(/\.{3}|\u2026/g,t),t=n.parseTransformString(t)||[],e=n.parseTransformString(e)||[];for(var r,i,o,a,s=z(t.length,e.length),l=[],c=[],u=0;u<s;u++){if(o=t[u]||zt(e[u]),a=e[u]||zt(o),o[0]!=a[0]||"r"==o[0].toLowerCase()&&(o[2]!=a[2]||o[3]!=a[3])||"s"==o[0].toLowerCase()&&(o[3]!=a[3]||o[4]!=a[4]))return;for(l[u]=[],c[u]=[],r=0,i=z(o.length,a.length);r<i;r++)r in o&&(l[u][r]=o[r]),r in a&&(c[u][r]=a[r])}return{from:l,to:c}};n._getContainer=function(t,e,r,i){var o;if(o=null!=i||n.is(t,"object")?t:D.doc.getElementById(t),null!=o)return o.tagName?null==e?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:e,height:r}:{container:1,x:t,y:e,width:r,height:i}},n.pathToRelative=$t,n._engine={},n.path2curve=Pt,n.matrix=function(t,e,n,r,i,o){return new f(t,e,n,r,i,o)},function(t){function e(t){return t[0]*t[0]+t[1]*t[1]}function r(t){var n=R.sqrt(e(t));t[0]&&(t[0]/=n),t[1]&&(t[1]/=n)}t.add=function(t,e,n,r,i,o){var a,s,l,c,u=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],h=[[t,n,i],[e,r,o],[0,0,1]];for(t&&t instanceof f&&(h=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),a=0;a<3;a++)for(s=0;s<3;s++){for(c=0,l=0;l<3;l++)c+=d[a][l]*h[l][s];u[a][s]=c}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new f(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new f(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,n,r){null==e&&(e=t),(n||r)&&this.add(1,0,0,1,n,r),this.add(t,0,0,e,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},t.rotate=function(t,e,r){t=n.rad(t),e=e||0,r=r||0;var i=+R.cos(t).toFixed(9),o=+R.sin(t).toFixed(9);this.add(i,o,-o,i,e,r),this.add(1,0,0,1,-e,-r)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[I.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return n.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];t.scalex=R.sqrt(e(i[0])),r(i[0]),t.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*t.shear,i[1][1]-i[0][1]*t.shear],t.scaley=R.sqrt(e(i[1])),r(i[1]),t.shear/=t.scaley;var o=-i[0][1],a=i[1][1];return a<0?(t.rotate=n.deg(R.acos(a)),o<0&&(t.rotate=360-t.rotate)):t.rotate=n.deg(R.asin(o)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[N]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:B)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:B)+(e.rotate?"r"+[e.rotate,0,0]:B)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(f.prototype);var qt=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(qt&&qt[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&qt&&qt[1]<8?w.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:w.safari=ht;for(var Ht=function(){this.returnValue=!1},Wt=function(){return this.originalEvent.preventDefault()},Ut=function(){this.cancelBubble=!0},Vt=function(){return this.originalEvent.stopPropagation()},Xt=function(t){var e=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,n=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft;return{x:t.clientX+n,y:t.clientY+e}},Kt=function(){return D.doc.addEventListener?function(t,e,n,r){var i=function(t){var e=Xt(t);return n.call(r,t,e.x,e.y)};if(t.addEventListener(e,i,!1),L&&F[e]){var o=function(e){for(var i=Xt(e),o=e,a=0,s=e.targetTouches&&e.targetTouches.length;a<s;a++)if(e.targetTouches[a].target==t){e=e.targetTouches[a],e.originalEvent=o,e.preventDefault=Wt,e.stopPropagation=Vt;break}return n.call(r,e,i.x,i.y)};t.addEventListener(F[e],o,!1)}return function(){return t.removeEventListener(e,i,!1),L&&F[e]&&t.removeEventListener(F[e],i,!1),!0}}:D.doc.attachEvent?function(t,e,n,r){var i=function(t){t=t||D.win.event;var e=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,i=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft,o=t.clientX+i,a=t.clientY+e;return t.preventDefault=t.preventDefault||Ht,t.stopPropagation=t.stopPropagation||Ut,n.call(r,t,o,a)};t.attachEvent("on"+e,i);var o=function(){return t.detachEvent("on"+e,i),!0};return o}:void 0}(),Gt=[],Yt=function(t){for(var n,r=t.clientX,i=t.clientY,o=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,a=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft,s=Gt.length;s--;){if(n=Gt[s],L&&t.touches){for(var l,c=t.touches.length;c--;)if(l=t.touches[c],l.identifier==n.el._drag.id){r=l.clientX,i=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var u,d=n.el.node,h=d.nextSibling,p=d.parentNode,f=d.style.display;D.win.opera&&p.removeChild(d),d.style.display="none",u=n.el.paper.getElementByPoint(r,i),d.style.display=f,D.win.opera&&(h?p.insertBefore(d,h):p.appendChild(d)),u&&e("raphael.drag.over."+n.el.id,n.el,u),r+=a,i+=o,e("raphael.drag.move."+n.el.id,n.move_scope||n.el,r-n.el._drag.x,i-n.el._drag.y,r,i,t)}},Zt=function(t){n.unmousemove(Yt).unmouseup(Zt);for(var r,i=Gt.length;i--;)r=Gt[i],r.el._drag={},e("raphael.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,t);Gt=[]},Qt=n.el={},Jt=P.length;Jt--;)!function(t){n[t]=Qt[t]=function(e,r){return n.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Kt(this.shape||this.node||D.doc,t,e,r||this)})),this},n["un"+t]=Qt["un"+t]=function(e){for(var r=this.events||[],i=r.length;i--;)r[i].name!=t||!n.is(e,"undefined")&&r[i].f!=e||(r[i].unbind(),r.splice(i,1),!r.length&&delete this.events);return this}}(P[Jt]);Qt.data=function(t,r){var i=ut[this.id]=ut[this.id]||{};if(0==arguments.length)return i;if(1==arguments.length){if(n.is(t,"object")){for(var o in t)t[S](o)&&this.data(o,t[o]);return this}return e("raphael.data.get."+this.id,this,i[t],t),i[t]}return i[t]=r,e("raphael.data.set."+this.id,this,r,t),this},Qt.removeData=function(t){return null==t?ut[this.id]={}:ut[this.id]&&delete ut[this.id][t],this},Qt.getData=function(){return r(ut[this.id]||{})},Qt.hover=function(t,e,n,r){return this.mouseover(t,n).mouseout(e,r||n)},Qt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var te=[];Qt.drag=function(t,r,i,o,a,s){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,u=l.clientY,d=D.doc.documentElement.scrollTop||D.doc.body.scrollTop,h=D.doc.documentElement.scrollLeft||D.doc.body.scrollLeft;if(this._drag.id=l.identifier,L&&l.touches)for(var p,f=l.touches.length;f--;)if(p=l.touches[f],this._drag.id=p.identifier,p.identifier==this._drag.id){c=p.clientX,u=p.clientY;break}this._drag.x=c+h,this._drag.y=u+d,!Gt.length&&n.mousemove(Yt).mouseup(Zt),Gt.push({el:this,move_scope:o,start_scope:a,end_scope:s}),r&&e.on("raphael.drag.start."+this.id,r),t&&e.on("raphael.drag.move."+this.id,t),i&&e.on("raphael.drag.end."+this.id,i),e("raphael.drag.start."+this.id,a||o||this,l.clientX+h,l.clientY+d,l)}return this._drag={},te.push({el:this,start:l}),this.mousedown(l),this},Qt.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Qt.undrag=function(){for(var t=te.length;t--;)te[t].el==this&&(this.unmousedown(te[t].start),te.splice(t,1),e.unbind("raphael.drag.*."+this.id));!te.length&&n.unmousemove(Yt).unmouseup(Zt),Gt=[]},w.circle=function(t,e,r){var i=n._engine.circle(this,t||0,e||0,r||0);return this.__set__&&this.__set__.push(i),i},w.rect=function(t,e,r,i,o){var a=n._engine.rect(this,t||0,e||0,r||0,i||0,o||0);return this.__set__&&this.__set__.push(a),a},w.ellipse=function(t,e,r,i){var o=n._engine.ellipse(this,t||0,e||0,r||0,i||0);return this.__set__&&this.__set__.push(o),o},w.path=function(t){t&&!n.is(t,V)&&!n.is(t[0],X)&&(t+=B);var e=n._engine.path(n.format[$](n,arguments),this);return this.__set__&&this.__set__.push(e),e},w.image=function(t,e,r,i,o){var a=n._engine.image(this,t||"about:blank",e||0,r||0,i||0,o||0);return this.__set__&&this.__set__.push(a),a},w.text=function(t,e,r){var i=n._engine.text(this,t||0,e||0,I(r));return this.__set__&&this.__set__.push(i),i},w.set=function(t){!n.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new he(t);return this.__set__&&this.__set__.push(e),e.paper=this,e.type="set",e},w.setStart=function(t){this.__set__=t||this.set()},w.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},w.setSize=function(t,e){return n._engine.setSize.call(this,t,e)},w.setViewBox=function(t,e,r,i,o){return n._engine.setViewBox.call(this,t,e,r,i,o)},w.top=w.bottom=null,w.raphael=n;var ee=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,r=n.body,i=n.documentElement,o=i.clientTop||r.clientTop||0,a=i.clientLeft||r.clientLeft||0,s=e.top+(D.win.pageYOffset||i.scrollTop||r.scrollTop)-o,l=e.left+(D.win.pageXOffset||i.scrollLeft||r.scrollLeft)-a;return{y:s,x:l}};w.getElementByPoint=function(t,e){var n=this,r=n.canvas,i=D.doc.elementFromPoint(t,e);if(D.win.opera&&"svg"==i.tagName){var o=ee(r),a=r.createSVGRect();a.x=t-o.x,a.y=e-o.y,a.width=a.height=1;var s=r.getIntersectionList(a,null);s.length&&(i=s[s.length-1])}if(!i)return null;for(;i.parentNode&&i!=r.parentNode&&!i.raphael;)i=i.parentNode;return i==n.canvas.parentNode&&(i=r),i=i&&i.raphael?n.getById(i.raphaelid):null},w.getElementsByBBox=function(t){var e=this.set();return this.forEach(function(r){n.isBBoxIntersect(r.getBBox(),t)&&e.push(r)}),e},w.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},w.forEach=function(t,e){for(var n=this.bottom;n;){if(t.call(e,n)===!1)return this;n=n.next}return this},w.getElementsByPoint=function(t,e){var n=this.set();return this.forEach(function(r){r.isPointInside(t,e)&&n.push(r)}),n},Qt.isPointInside=function(t,e){var r=this.realPath=gt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(r=n.transformPath(r,this.attr("transform"))),n.isPointInsidePath(r,t,e)},Qt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=gt[this.type](this),e.bboxwt=Tt(this.realPath),e.bboxwt.toString=m,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=gt[this.type](this)),e.bbox=Tt(vt(this.realPath,this.matrix)),e.bbox.toString=m,e.dirty=e.dirtyT=0),e.bbox)},Qt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Qt.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},n=e.width/2,r=this.paper,i=r.set(),o=this.realPath||gt[this.type](this);o=this.matrix?vt(o,this.matrix):o;for(var a=1;a<n+1;a++)i.push(r.path(o).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*a).toFixed(3),opacity:+(e.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(e.offsetx,e.offsety)};var ne=function(t,e,r,i,o,a,s,l,d){return null==d?c(t,e,r,i,o,a,s,l):n.findDotsAtSegment(t,e,r,i,o,a,s,l,u(t,e,r,i,o,a,s,l,d))},re=function(t,e){return function(r,i,o){
r=Pt(r);for(var a,s,l,c,u,d="",h={},p=0,f=0,m=r.length;f<m;f++){if(l=r[f],"M"==l[0])a=+l[1],s=+l[2];else{if(c=ne(a,s,l[1],l[2],l[3],l[4],l[5],l[6]),p+c>i){if(e&&!h.start){if(u=ne(a,s,l[1],l[2],l[3],l[4],l[5],l[6],i-p),d+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],o)return d;h.start=d,d=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,l[5],l[6]].join(),p+=c,a=+l[5],s=+l[6];continue}if(!t&&!e)return u=ne(a,s,l[1],l[2],l[3],l[4],l[5],l[6],i-p),{x:u.x,y:u.y,alpha:u.alpha}}p+=c,a=+l[5],s=+l[6]}d+=l.shift()+l}return h.end=d,u=t?p:e?h:n.findDotsAtSegment(a,s,l[0],l[1],l[2],l[3],l[4],l[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},ie=re(1),oe=re(),ae=re(0,1);n.getTotalLength=ie,n.getPointAtLength=oe,n.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return ae(t,e).end;var r=ae(t,n,1);return e?ae(r,e).end:r},Qt.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():ie(t)},Qt.getPointAtLength=function(t){var e=this.getPath();if(e)return oe(e,t)},Qt.getPath=function(){var t,e=n._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return e&&(t=e(this)),t},Qt.getSubpath=function(t,e){var r=this.getPath();if(r)return n.getSubpath(r,t,e)};var se=n.easing_formulas={linear:function(t){return t},"<":function(t){return H(t,1.7)},">":function(t){return H(t,.48)},"<>":function(t){var e=.48-t/1.04,n=R.sqrt(.1734+e*e),r=n-e,i=H(q(r),1/3)*(r<0?-1:1),o=-n-e,a=H(q(o),1/3)*(o<0?-1:1),s=i+a+.5;return 3*(1-s)*s*s+s*s*s},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:H(2,-10*t)*R.sin((t-.075)*(2*W)/.3)+1},bounce:function(t){var e,n=7.5625,r=2.75;return t<1/r?e=n*t*t:t<2/r?(t-=1.5/r,e=n*t*t+.75):t<2.5/r?(t-=2.25/r,e=n*t*t+.9375):(t-=2.625/r,e=n*t*t+.984375),e}};se.easeIn=se["ease-in"]=se["<"],se.easeOut=se["ease-out"]=se[">"],se.easeInOut=se["ease-in-out"]=se["<>"],se["back-in"]=se.backIn,se["back-out"]=se.backOut;var le=[],ce=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},ue=function(){for(var t=+new Date,r=0;r<le.length;r++){var i=le[r];if(!i.el.removed&&!i.paused){var o,a,s=t-i.start,l=i.ms,c=i.easing,u=i.from,d=i.diff,h=i.to,p=(i.t,i.el),f={},m={};if(i.initstatus?(s=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*l,i.status=i.initstatus,delete i.initstatus,i.stop&&le.splice(r--,1)):i.status=(i.prev+(i.percent-i.prev)*(s/l))/i.anim.top,!(s<0))if(s<l){var g=c(s/l);for(var v in u)if(u[S](v)){switch(rt[v]){case U:o=+u[v]+g*l*d[v];break;case"colour":o="rgb("+[de(Q(u[v].r+g*l*d[v].r)),de(Q(u[v].g+g*l*d[v].g)),de(Q(u[v].b+g*l*d[v].b))].join(",")+")";break;case"path":o=[];for(var y=0,x=u[v].length;y<x;y++){o[y]=[u[v][y][0]];for(var w=1,_=u[v][y].length;w<_;w++)o[y][w]=+u[v][y][w]+g*l*d[v][y][w];o[y]=o[y].join(A)}o=o.join(A);break;case"transform":if(d[v].real)for(o=[],y=0,x=u[v].length;y<x;y++)for(o[y]=[u[v][y][0]],w=1,_=u[v][y].length;w<_;w++)o[y][w]=u[v][y][w]+g*l*d[v][y][w];else{var k=function(t){return+u[v][t]+g*l*d[v][t]};o=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==v)for(o=[],y=4;y--;)o[y]=+u[v][y]+g*l*d[v][y];break;default:var C=[][M](u[v]);for(o=[],y=p.paper.customAttributes[v].length;y--;)o[y]=+C[y]+g*l*d[v][y]}f[v]=o}p.attr(f),function(t,n,r){setTimeout(function(){e("raphael.anim.frame."+t,n,r)})}(p.id,p,i.anim)}else{if(function(t,r,i){setTimeout(function(){e("raphael.anim.frame."+r.id,r,i),e("raphael.anim.finish."+r.id,r,i),n.is(t,"function")&&t.call(r)})}(i.callback,p,i.anim),p.attr(h),le.splice(r--,1),i.repeat>1&&!i.next){for(a in h)h[S](a)&&(m[a]=i.totalOrigin[a]);i.el.attr(m),b(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&b(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}}n.svg&&p&&p.paper&&p.paper.safari(),le.length&&ce(ue)},de=function(t){return t>255?255:t<0?0:t};Qt.animateWith=function(t,e,r,i,o,a){var s=this;if(s.removed)return a&&a.call(s),s;var l=r instanceof v?r:n.animation(r,i,o,a);b(l,s,l.percents[0],null,s.attr());for(var c=0,u=le.length;c<u;c++)if(le[c].anim==e&&le[c].el==t){le[u-1].start=le[c].start;break}return s},Qt.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},v.prototype.delay=function(t){var e=new v(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},v.prototype.repeat=function(t){var e=new v(this.anim,this.ms);return e.del=this.del,e.times=R.floor(z(t,0))||1,e},n.animation=function(t,e,r,i){if(t instanceof v)return t;!n.is(r,"function")&&r||(i=i||r||null,r=null),t=Object(t),e=+e||0;var o,a,s={};for(a in t)t[S](a)&&J(a)!=a&&J(a)+"%"!=a&&(o=!0,s[a]=t[a]);return o?(r&&(s.easing=r),i&&(s.callback=i),new v({100:s},e)):new v(t,e)},Qt.animate=function(t,e,r,i){var o=this;if(o.removed)return i&&i.call(o),o;var a=t instanceof v?t:n.animation(t,e,r,i);return b(a,o,a.percents[0],null,o.attr()),o},Qt.setTime=function(t,e){return t&&null!=e&&this.status(t,j(e,t.ms)/t.ms),this},Qt.status=function(t,e){var n,r,i=[],o=0;if(null!=e)return b(t,this,-1,j(e,1)),this;for(n=le.length;o<n;o++)if(r=le[o],r.el.id==this.id&&(!t||r.anim==t)){if(t)return r.status;i.push({anim:r.anim,status:r.status})}return t?0:i},Qt.pause=function(t){for(var n=0;n<le.length;n++)le[n].el.id!=this.id||t&&le[n].anim!=t||e("raphael.anim.pause."+this.id,this,le[n].anim)!==!1&&(le[n].paused=!0);return this},Qt.resume=function(t){for(var n=0;n<le.length;n++)if(le[n].el.id==this.id&&(!t||le[n].anim==t)){var r=le[n];e("raphael.anim.resume."+this.id,this,r.anim)!==!1&&(delete r.paused,this.status(r.anim,r.status))}return this},Qt.stop=function(t){for(var n=0;n<le.length;n++)le[n].el.id!=this.id||t&&le[n].anim!=t||e("raphael.anim.stop."+this.id,this,le[n].anim)!==!1&&le.splice(n--,1);return this},e.on("raphael.remove",y),e.on("raphael.clear",y),Qt.toString=function(){return"Raphaël’s object"};var he=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,n=t.length;e<n;e++)!t[e]||t[e].constructor!=Qt.constructor&&t[e].constructor!=he||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},pe=he.prototype;pe.push=function(){for(var t,e,n=0,r=arguments.length;n<r;n++)t=arguments[n],!t||t.constructor!=Qt.constructor&&t.constructor!=he||(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},pe.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},pe.forEach=function(t,e){for(var n=0,r=this.items.length;n<r;n++)if(t.call(e,this.items[n],n)===!1)return this;return this};for(var fe in Qt)Qt[S](fe)&&(pe[fe]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t][$](n,e)})}}(fe));return pe.attr=function(t,e){if(t&&n.is(t,X)&&n.is(t[0],"object"))for(var r=0,i=t.length;r<i;r++)this.items[r].attr(t[r]);else for(var o=0,a=this.items.length;o<a;o++)this.items[o].attr(t,e);return this},pe.clear=function(){for(;this.length;)this.pop()},pe.splice=function(t,e,n){t=t<0?z(this.length+t,0):t,e=z(0,j(this.length-t,e));var r,i=[],o=[],a=[];for(r=2;r<arguments.length;r++)a.push(arguments[r]);for(r=0;r<e;r++)o.push(this[t+r]);for(;r<this.length-t;r++)i.push(this[t+r]);var s=a.length;for(r=0;r<s+i.length;r++)this.items[t+r]=this[t+r]=r<s?a[r]:i[r-s];for(r=this.items.length=this.length-=e-s;this[r];)delete this[r++];return new he(o)},pe.exclude=function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return this.splice(e,1),!0},pe.animate=function(t,e,r,i){(n.is(r,"function")||!r)&&(i=r||null);var o,a,s=this.items.length,l=s,c=this;if(!s)return this;i&&(a=function(){!--s&&i.call(c)}),r=n.is(r,V)?r:a;var u=n.animation(t,e,r,a);for(o=this.items[--l].animate(u);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,u,u),this.items[l]&&!this.items[l].removed||s--;return this},pe.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},pe.getBBox=function(){for(var t=[],e=[],n=[],r=[],i=this.items.length;i--;)if(!this.items[i].removed){var o=this.items[i].getBBox();t.push(o.x),e.push(o.y),n.push(o.x+o.width),r.push(o.y+o.height)}return t=j[$](0,t),e=j[$](0,e),n=z[$](0,n),r=z[$](0,r),{x:t,y:e,x2:n,y2:r,width:n-t,height:r-e}},pe.clone=function(t){t=this.paper.set();for(var e=0,n=this.items.length;e<n;e++)t.push(this.items[e].clone());return t},pe.toString=function(){return"Raphaël‘s set"},pe.glow=function(t){var e=this.paper.set();return this.forEach(function(n,r){var i=n.glow(t);null!=i&&i.forEach(function(t,n){e.push(t)})}),e},pe.isPointInside=function(t,e){var n=!1;return this.forEach(function(r){if(r.isPointInside(t,e))return console.log("runned"),n=!0,!1}),n},n.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},n=t.face["font-family"];for(var r in t.face)t.face[S](r)&&(e.face[r]=t.face[r]);if(this.fonts[n]?this.fonts[n].push(e):this.fonts[n]=[e],!t.svg){e.face["units-per-em"]=tt(t.face["units-per-em"],10);for(var i in t.glyphs)if(t.glyphs[S](i)){var o=t.glyphs[i];if(e.glyphs[i]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},o.k)for(var a in o.k)o[S](a)&&(e.glyphs[i].k[a]=o.k[a])}}return t},w.getFont=function(t,e,r,i){if(i=i||"normal",r=r||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,n.fonts){var o=n.fonts[t];if(!o){var a=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,B)+"(\\s|$)","i");for(var s in n.fonts)if(n.fonts[S](s)&&a.test(s)){o=n.fonts[s];break}}var l;if(o)for(var c=0,u=o.length;c<u&&(l=o[c],l.face["font-weight"]!=e||l.face["font-style"]!=r&&l.face["font-style"]||l.face["font-stretch"]!=i);c++);return l}},w.print=function(t,e,r,i,o,a,s,l){a=a||"middle",s=z(j(s||0,1),-1),l=z(j(l||1,3),1);var c,u=I(r)[N](B),d=0,h=0,p=B;if(n.is(i,"string")&&(i=this.getFont(i)),i){c=(o||16)/i.face["units-per-em"];for(var f=i.face.bbox[N](_),m=+f[0],g=f[3]-f[1],v=0,b=+f[1]+("baseline"==a?g+ +i.face.descent:g/2),y=0,x=u.length;y<x;y++){if("\n"==u[y])d=0,k=0,h=0,v+=g*l;else{var w=h&&i.glyphs[u[y-1]]||{},k=i.glyphs[u[y]];d+=h?(w.w||i.w)+(w.k&&w.k[u[y]]||0)+i.w*s:0,h=1}k&&k.d&&(p+=n.transformPath(k.d,["t",d*c,v*c,"s",c,c,m,b,"t",(t-m)/c,(e-b)/c]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},w.add=function(t){if(n.is(t,"array"))for(var e,r=this.set(),i=0,o=t.length;i<o;i++)e=t[i]||{},k[S](e.type)&&r.push(this[e.type]().attr(e));return r},n.format=function(t,e){var r=n.is(e,X)?[0][M](e):arguments;return t&&n.is(t,V)&&r.length-1&&(t=t.replace(C,function(t,e){return null==r[++e]?B:r[e]})),t||B},n.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,r){var i=r;return n.replace(e,function(t,e,n,r,o){e=e||r,i&&(e in i&&(i=i[e]),"function"==typeof i&&o&&(i=i()))}),i=(null==i||i==r?t:i)+""};return function(e,r){return String(e).replace(t,function(t,e){return n(t,e,r)})}}(),n.ninja=function(){return T.was?D.win.Raphael=T.is:delete Raphael,n},n.st=pe,function(t,e,r){function i(){/in/.test(t.readyState)?setTimeout(i,9):n.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(e,r=function(){t.removeEventListener(e,r,!1),t.readyState="complete"},!1),t.readyState="loading"),i()}(document,"DOMContentLoaded"),e.on("raphael.DOMload",function(){x=!0}),function(){if(n.svg){var t="hasOwnProperty",e=String,r=parseFloat,i=parseInt,o=Math,a=o.max,s=o.abs,l=o.pow,c=/[, ]+/,u=n.eve,d="",h=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};n.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var g=function(r,i){if(i){"string"==typeof r&&(r=g(r));for(var o in i)i[t](o)&&("xlink:"==o.substring(0,6)?r.setAttributeNS(p,o.substring(6),e(i[o])):r.setAttribute(o,e(i[o])))}else r=n._g.doc.createElementNS("http://www.w3.org/2000/svg",r),r.style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},v=function(t,i){var c="linear",u=t.id+i,h=.5,p=.5,f=t.node,m=t.paper,v=f.style,b=n._g.doc.getElementById(u);if(!b){if(i=e(i).replace(n._radial_gradient,function(t,e,n){if(c="radial",e&&n){h=r(e),p=r(n);var i=2*(p>.5)-1;l(h-.5,2)+l(p-.5,2)>.25&&(p=o.sqrt(.25-l(h-.5,2))*i+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*i)}return d}),i=i.split(/\s*\-\s*/),"linear"==c){var y=i.shift();if(y=-r(y),isNaN(y))return null;var x=[0,0,o.cos(n.rad(y)),o.sin(n.rad(y))],w=1/(a(s(x[2]),s(x[3]))||1);x[2]*=w,x[3]*=w,x[2]<0&&(x[0]=-x[2],x[2]=0),x[3]<0&&(x[1]=-x[3],x[3]=0)}var _=n._parseDots(i);if(!_)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&u!=t.gradient.id&&(m.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){b=g(c+"Gradient",{id:u}),t.gradient=b,g(b,"radial"==c?{fx:h,fy:p}:{x1:x[0],y1:x[1],x2:x[2],y2:x[3],gradientTransform:t.matrix.invert()}),m.defs.appendChild(b);for(var k=0,C=_.length;k<C;k++)b.appendChild(g("stop",{offset:_[k].offset?_[k].offset:k?"100%":"0%","stop-color":_[k].color||"#fff"}))}}return g(f,{fill:"url(#"+u+")",opacity:1,"fill-opacity":1}),v.fill=d,v.opacity=1,v.fillOpacity=1,1},b=function(t){var e=t.getBBox(1);g(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},y=function(r,i,o){if("path"==r.type){for(var a,s,l,c,u,h=e(i).toLowerCase().split("-"),p=r.paper,v=o?"end":"start",b=r.node,y=r.attrs,x=y["stroke-width"],w=h.length,_="classic",k=3,C=3,S=5;w--;)switch(h[w]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":_=h[w];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":k=5;break;case"short":k=2}if("open"==_?(k+=2,C+=2,S+=2,l=1,c=o?4:1,u={fill:"none",stroke:y.stroke}):(c=l=k/2,u={fill:y.stroke,stroke:"none"}),r._.arrows?o?(r._.arrows.endPath&&m[r._.arrows.endPath]--,r._.arrows.endMarker&&m[r._.arrows.endMarker]--):(r._.arrows.startPath&&m[r._.arrows.startPath]--,r._.arrows.startMarker&&m[r._.arrows.startMarker]--):r._.arrows={},"none"!=_){var D="raphael-marker-"+_,T="raphael-marker-"+v+_+k+C;n._g.doc.getElementById(D)?m[D]++:(p.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:f[_],id:D})),m[D]=1);var E,$=n._g.doc.getElementById(T);$?(m[T]++,E=$.getElementsByTagName("use")[0]):($=g(g("marker"),{id:T,markerHeight:C,markerWidth:k,orient:"auto",refX:c,refY:C/2}),E=g(g("use"),{"xlink:href":"#"+D,transform:(o?"rotate(180 "+k/2+" "+C/2+") ":d)+"scale("+k/S+","+C/S+")","stroke-width":(1/((k/S+C/S)/2)).toFixed(4)}),$.appendChild(E),p.defs.appendChild($),m[T]=1),g(E,u);var M=l*("diamond"!=_&&"oval"!=_);o?(a=r._.arrows.startdx*x||0,s=n.getTotalLength(y.path)-M*x):(a=M*x,s=n.getTotalLength(y.path)-(r._.arrows.enddx*x||0)),u={},u["marker-"+v]="url(#"+T+")",(s||a)&&(u.d=n.getSubpath(y.path,a,s)),g(b,u),r._.arrows[v+"Path"]=D,r._.arrows[v+"Marker"]=T,r._.arrows[v+"dx"]=M,r._.arrows[v+"Type"]=_,r._.arrows[v+"String"]=i}else o?(a=r._.arrows.startdx*x||0,s=n.getTotalLength(y.path)-a):(a=0,s=n.getTotalLength(y.path)-(r._.arrows.enddx*x||0)),r._.arrows[v+"Path"]&&g(b,{d:n.getSubpath(y.path,a,s)}),delete r._.arrows[v+"Path"],delete r._.arrows[v+"Marker"],delete r._.arrows[v+"dx"],delete r._.arrows[v+"Type"],delete r._.arrows[v+"String"];for(u in m)if(m[t](u)&&!m[u]){var L=n._g.doc.getElementById(u);L&&L.parentNode.removeChild(L)}}},x={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},w=function(t,n,r){if(n=x[e(n).toLowerCase()]){for(var i=t.attrs["stroke-width"]||"1",o={round:i,square:i,butt:0}[t.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,a=[],s=n.length;s--;)a[s]=n[s]*i+(s%2?1:-1)*o;g(t.node,{"stroke-dasharray":a.join(",")})}},_=function(r,o){var l=r.node,u=r.attrs,h=l.style.visibility;l.style.visibility="hidden";for(var f in o)if(o[t](f)){if(!n._availableAttrs[t](f))continue;var m=o[f];switch(u[f]=m,f){case"blur":r.blur(m);break;case"href":case"title":var x=g("title"),_=n._g.doc.createTextNode(m);x.appendChild(_),l.appendChild(x);break;case"target":var k=l.parentNode;if("a"!=k.tagName.toLowerCase()){var x=g("a");k.insertBefore(x,l),x.appendChild(l),k=x}"target"==f?k.setAttributeNS(p,"show","blank"==m?"new":m):k.setAttributeNS(p,f,m);break;case"cursor":l.style.cursor=m;break;case"transform":r.transform(m);break;case"arrow-start":y(r,m);break;case"arrow-end":y(r,m,1);break;case"clip-rect":var S=e(m).split(c);if(4==S.length){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var D=g("clipPath"),T=g("rect");D.id=n.createUUID(),g(T,{x:S[0],y:S[1],width:S[2],height:S[3]}),D.appendChild(T),r.paper.defs.appendChild(D),g(l,{"clip-path":"url(#"+D.id+")"}),r.clip=T}if(!m){var E=l.getAttribute("clip-path");if(E){var $=n._g.doc.getElementById(E.replace(/(^url\(#|\)$)/g,d));$&&$.parentNode.removeChild($),g(l,{"clip-path":d}),delete r.clip}}break;case"path":"path"==r.type&&(g(l,{d:m?u.path=n._pathToAbsolute(m):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&y(r,r._.arrows.startString),"endString"in r._.arrows&&y(r,r._.arrows.endString,1)));break;case"width":if(l.setAttribute(f,m),r._.dirty=1,!u.fx)break;f="x",m=u.x;case"x":u.fx&&(m=-u.x-(u.width||0));case"rx":if("rx"==f&&"rect"==r.type)break;case"cx":l.setAttribute(f,m),r.pattern&&b(r),r._.dirty=1;break;case"height":if(l.setAttribute(f,m),r._.dirty=1,!u.fy)break;f="y",m=u.y;case"y":u.fy&&(m=-u.y-(u.height||0));case"ry":if("ry"==f&&"rect"==r.type)break;case"cy":l.setAttribute(f,m),r.pattern&&b(r),r._.dirty=1;break;case"r":"rect"==r.type?g(l,{rx:m,ry:m}):l.setAttribute(f,m),r._.dirty=1;break;case"src":"image"==r.type&&l.setAttributeNS(p,"href",m);break;case"stroke-width":1==r._.sx&&1==r._.sy||(m/=a(s(r._.sx),s(r._.sy))||1),r.paper._vbSize&&(m*=r.paper._vbSize),l.setAttribute(f,m),u["stroke-dasharray"]&&w(r,u["stroke-dasharray"],o),r._.arrows&&("startString"in r._.arrows&&y(r,r._.arrows.startString),"endString"in r._.arrows&&y(r,r._.arrows.endString,1));break;case"stroke-dasharray":w(r,m,o);break;case"fill":var M=e(m).match(n._ISURL);if(M){D=g("pattern");var L=g("image");D.id=n.createUUID(),g(D,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g(L,{x:0,y:0,"xlink:href":M[1]}),D.appendChild(L),function(t){n._preload(M[1],function(){var e=this.offsetWidth,n=this.offsetHeight;g(t,{width:e,height:n}),g(L,{width:e,height:n}),r.paper.safari()})}(D),r.paper.defs.appendChild(D),g(l,{fill:"url(#"+D.id+")"}),r.pattern=D,r.pattern&&b(r);break}var B=n.getRGB(m);if(B.error){if(("circle"==r.type||"ellipse"==r.type||"r"!=e(m).charAt())&&v(r,m)){if("opacity"in u||"fill-opacity"in u){var A=n._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,d));if(A){var I=A.getElementsByTagName("stop");g(I[I.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=m,u.fill="none";break}}else delete o.gradient,delete u.gradient,!n.is(u.opacity,"undefined")&&n.is(o.opacity,"undefined")&&g(l,{opacity:u.opacity}),!n.is(u["fill-opacity"],"undefined")&&n.is(o["fill-opacity"],"undefined")&&g(l,{"fill-opacity":u["fill-opacity"]});B[t]("opacity")&&g(l,{"fill-opacity":B.opacity>1?B.opacity/100:B.opacity});case"stroke":B=n.getRGB(m),l.setAttribute(f,B.hex),"stroke"==f&&B[t]("opacity")&&g(l,{"stroke-opacity":B.opacity>1?B.opacity/100:B.opacity}),"stroke"==f&&r._.arrows&&("startString"in r._.arrows&&y(r,r._.arrows.startString),"endString"in r._.arrows&&y(r,r._.arrows.endString,1));break;case"gradient":("circle"==r.type||"ellipse"==r.type||"r"!=e(m).charAt())&&v(r,m);break;case"opacity":u.gradient&&!u[t]("stroke-opacity")&&g(l,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(u.gradient){A=n._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,d)),A&&(I=A.getElementsByTagName("stop"),g(I[I.length-1],{"stop-opacity":m}));break}default:"font-size"==f&&(m=i(m,10)+"px");var N=f.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[N]=m,r._.dirty=1,l.setAttribute(f,m)}}C(r,o),l.style.visibility=h},k=1.2,C=function(r,o){if("text"==r.type&&(o[t]("text")||o[t]("font")||o[t]("font-size")||o[t]("x")||o[t]("y"))){var a=r.attrs,s=r.node,l=s.firstChild?i(n._g.doc.defaultView.getComputedStyle(s.firstChild,d).getPropertyValue("font-size"),10):10;if(o[t]("text")){for(a.text=o.text;s.firstChild;)s.removeChild(s.firstChild);for(var c,u=e(o.text).split("\n"),h=[],p=0,f=u.length;p<f;p++)c=g("tspan"),p&&g(c,{dy:l*k,x:a.x}),c.appendChild(n._g.doc.createTextNode(u[p])),s.appendChild(c),h[p]=c}else for(h=s.getElementsByTagName("tspan"),p=0,f=h.length;p<f;p++)p?g(h[p],{dy:l*k,x:a.x}):g(h[0],{dy:0});g(s,{x:a.x,y:a.y}),r._.dirty=1;var m=r._getBBox(),v=a.y-(m.y+m.height/2);v&&n.is(v,"finite")&&g(h[0],{dy:v})}},S=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=n._oid++,t.raphaelid=this.id,this.matrix=n.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},D=n.el;S.prototype=D,D.constructor=S,n._engine.path=function(t,e){var n=g("path");e.canvas&&e.canvas.appendChild(n);var r=new S(n,e);return r.type="path",_(r,{fill:"none",stroke:"#000",path:t}),r},D.rotate=function(t,n,i){if(this.removed)return this;if(t=e(t).split(c),t.length-1&&(n=r(t[1]),i=r(t[2])),t=r(t[0]),null==i&&(n=i),null==n||null==i){var o=this.getBBox(1);n=o.x+o.width/2,i=o.y+o.height/2}return this.transform(this._.transform.concat([["r",t,n,i]])),this},D.scale=function(t,n,i,o){if(this.removed)return this;if(t=e(t).split(c),t.length-1&&(n=r(t[1]),i=r(t[2]),o=r(t[3])),t=r(t[0]),null==n&&(n=t),null==o&&(i=o),null==i||null==o)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",t,n,i,o]])),this},D.translate=function(t,n){return this.removed?this:(t=e(t).split(c),t.length-1&&(n=r(t[1])),t=r(t[0])||0,n=+n||0,this.transform(this._.transform.concat([["t",t,n]])),this)},D.transform=function(e){var r=this._;if(null==e)return r.transform;if(n._extractTransform(this,e),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&b(this),this.node&&g(this.node,{transform:this.matrix}),1!=r.sx||1!=r.sy){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},D.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},D.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},D.remove=function(){if(!this.removed&&this.node.parentNode){var t=this.paper;t.__set__&&t.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),n._tear(this,t),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var e in this)this[e]="function"==typeof this[e]?n._removedFactory(e):null;this.removed=!0}},D._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}return t&&this.hide(),e},D.attr=function(e,r){if(this.removed)return this;if(null==e){var i={};for(var o in this.attrs)this.attrs[t](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&n.is(e,"string")){if("fill"==e&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==e)return this._.transform;for(var a=e.split(c),s={},l=0,d=a.length;l<d;l++)e=a[l],e in this.attrs?s[e]=this.attrs[e]:n.is(this.paper.customAttributes[e],"function")?s[e]=this.paper.customAttributes[e].def:s[e]=n._availableAttrs[e];return d-1?s:s[a[0]]}if(null==r&&n.is(e,"array")){for(s={},l=0,d=e.length;l<d;l++)s[e[l]]=this.attr(e[l]);return s}if(null!=r){var h={};h[e]=r}else null!=e&&n.is(e,"object")&&(h=e);for(var p in h)u("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&n.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(h[p]));this.attrs[p]=h[p];for(var m in f)f[t](m)&&(h[m]=f[m])}return _(this,h),this},D.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&n._tofront(this,t),this},D.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;"a"==t.tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),n._toback(this,this.paper);this.paper;return this},D.insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),n._insertafter(this,t,this.paper),this},D.insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),n._insertbefore(this,t,this.paper),this},D.blur=function(t){var e=this;if(0!==+t){var r=g("filter"),i=g("feGaussianBlur");e.attrs.blur=t,r.id=n.createUUID(),g(i,{stdDeviation:+t||1.5}),r.appendChild(i),e.paper.defs.appendChild(r),e._blur=r,g(e.node,{filter:"url(#"+r.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter");return e},n._engine.circle=function(t,e,n,r){var i=g("circle");t.canvas&&t.canvas.appendChild(i);var o=new S(i,t);return o.attrs={cx:e,cy:n,r:r,fill:"none",stroke:"#000"},o.type="circle",g(i,o.attrs),o},n._engine.rect=function(t,e,n,r,i,o){var a=g("rect");t.canvas&&t.canvas.appendChild(a);var s=new S(a,t);return s.attrs={x:e,y:n,width:r,height:i,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},s.type="rect",g(a,s.attrs),s},n._engine.ellipse=function(t,e,n,r,i){var o=g("ellipse");t.canvas&&t.canvas.appendChild(o);var a=new S(o,t);return a.attrs={cx:e,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},a.type="ellipse",g(o,a.attrs),a},n._engine.image=function(t,e,n,r,i,o){var a=g("image");g(a,{x:n,y:r,width:i,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(p,"href",e),t.canvas&&t.canvas.appendChild(a);var s=new S(a,t);return s.attrs={x:n,y:r,width:i,height:o,src:e},s.type="image",s},n._engine.text=function(t,e,r,i){var o=g("text");t.canvas&&t.canvas.appendChild(o);var a=new S(o,t);return a.attrs={x:e,y:r,"text-anchor":"middle",text:i,font:n._availableAttrs.font,stroke:"none",fill:"#000"},a.type="text",_(a,a.attrs),a},n._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},n._engine.create=function(){var t=n._getContainer.apply(0,arguments),e=t&&t.container,r=t.x,i=t.y,o=t.width,a=t.height;if(!e)throw new Error("SVG container not found.");var s,l=g("svg"),c="overflow:hidden;";return r=r||0,i=i||0,o=o||512,a=a||342,g(l,{height:a,version:1.1,width:o,xmlns:"http://www.w3.org/2000/svg"}),1==e?(l.style.cssText=c+"position:absolute;left:"+r+"px;top:"+i+"px",n._g.doc.body.appendChild(l),s=1):(l.style.cssText=c+"position:relative",e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l)),e=new n._Paper,e.width=o,e.height=a,e.canvas=l,e.clear(),e._left=e._top=0,s&&(e.renderfix=function(){}),e.renderfix(),e},n._engine.setViewBox=function(t,e,n,r,i){u("raphael.setViewBox",this,this._viewBox,[t,e,n,r,i]);var o,s,l=a(n/this.width,r/this.height),c=this.top,d=i?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,o="0 0 "+this.width+h+this.height):(this._vbSize=l,o=t+h+e+h+n+h+r),g(this.canvas,{viewBox:o,preserveAspectRatio:d});l&&c;)s="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":s}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[t,e,n,r,!!i],this},n.prototype.renderfix=function(){var t,e=this.canvas,n=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(n){t=e.createSVGMatrix()}var r=-t.e%1,i=-t.f%1;(r||i)&&(r&&(this._left=(this._left+r)%1,n.left=this._left+"px"),i&&(this._top=(this._top+i)%1,n.top=this._top+"px"))},n.prototype.clear=function(){n.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(n._g.doc.createTextNode("Created with Raphaël "+n.version)),t.appendChild(this.desc),t.appendChild(this.defs=g("defs"))},n.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?n._removedFactory(t):null};var T=n.st;for(var E in D)D[t](E)&&!T[t](E)&&(T[E]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(E))}}(),function(){if(n.vml){var t="hasOwnProperty",e=String,r=parseFloat,i=Math,o=i.round,a=i.max,s=i.min,l=i.abs,c="fill",u=/[, ]+/,d=n.eve,h=" progid:DXImageTransform.Microsoft",p=" ",f="",m={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,b=/-?[^,\s-]+/g,y="position:absolute;left:0;top:0;width:1px;height:1px",x=21600,w={path:1,rect:1,image:1},_={circle:1,ellipse:1},k=function(t){var r=/[ahqstv]/gi,i=n._pathToAbsolute;if(e(t).match(r)&&(i=n._path2curve),r=/[clmz]/g,i==n._pathToAbsolute&&!e(t).match(r)){var a=e(t).replace(g,function(t,e,n){var r=[],i="m"==e.toLowerCase(),a=m[e];return n.replace(b,function(t){i&&2==r.length&&(a+=r+m["m"==e?"l":"L"],r=[]),r.push(o(t*x))}),a+r});return a}var s,l,c=i(t);a=[];for(var u=0,d=c.length;u<d;u++){s=c[u],l=c[u][0].toLowerCase(),"z"==l&&(l="x");for(var h=1,v=s.length;h<v;h++)l+=o(s[h]*x)+(h!=v-1?",":f);a.push(l)}return a.join(p)},C=function(t,e,r){var i=n.matrix();return i.rotate(-t,.5,.5),{dx:i.x(e,r),dy:i.y(e,r)}},S=function(t,e,n,r,i,o){var a=t._,s=t.matrix,u=a.fillpos,d=t.node,h=d.style,f=1,m="",g=x/e,v=x/n;if(h.visibility="hidden",e&&n){if(d.coordsize=l(g)+p+l(v),h.rotation=o*(e*n<0?-1:1),o){var b=C(o,r,i);r=b.dx,i=b.dy}if(e<0&&(m+="x"),n<0&&(m+=" y")&&(f=-1),h.flip=m,d.coordorigin=r*-g+p+i*-v,u||a.fillsize){var y=d.getElementsByTagName(c);y=y&&y[0],d.removeChild(y),u&&(b=C(o,s.x(u[0],u[1]),s.y(u[0],u[1])),y.position=b.dx*f+p+b.dy*f),a.fillsize&&(y.size=a.fillsize[0]*l(e)+p+a.fillsize[1]*l(n)),d.appendChild(y)}h.visibility="visible"}};n.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var D=function(t,n,r){for(var i=e(n).toLowerCase().split("-"),o=r?"end":"start",a=i.length,s="classic",l="medium",c="medium";a--;)switch(i[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=i[a];break;case"wide":case"narrow":c=i[a];break;case"long":case"short":l=i[a]}var u=t.node.getElementsByTagName("stroke")[0];u[o+"arrow"]=s,u[o+"arrowlength"]=l,u[o+"arrowwidth"]=c},T=function(i,l){i.attrs=i.attrs||{};var d=i.node,h=i.attrs,m=d.style,g=w[i.type]&&(l.x!=h.x||l.y!=h.y||l.width!=h.width||l.height!=h.height||l.cx!=h.cx||l.cy!=h.cy||l.rx!=h.rx||l.ry!=h.ry||l.r!=h.r),v=_[i.type]&&(h.cx!=l.cx||h.cy!=l.cy||h.r!=l.r||h.rx!=l.rx||h.ry!=l.ry),b=i;for(var y in l)l[t](y)&&(h[y]=l[y]);if(g&&(h.path=n._getPath[i.type](i),i._.dirty=1),l.href&&(d.href=l.href),l.title&&(d.title=l.title),l.target&&(d.target=l.target),l.cursor&&(m.cursor=l.cursor),"blur"in l&&i.blur(l.blur),(l.path&&"path"==i.type||g)&&(d.path=k(~e(h.path).toLowerCase().indexOf("r")?n._pathToAbsolute(h.path):h.path),"image"==i.type&&(i._.fillpos=[h.x,h.y],i._.fillsize=[h.width,h.height],S(i,1,1,0,0,0))),"transform"in l&&i.transform(l.transform),
v){var C=+h.cx,T=+h.cy,$=+h.rx||+h.r||0,M=+h.ry||+h.r||0;d.path=n.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((C-$)*x),o((T-M)*x),o((C+$)*x),o((T+M)*x),o(C*x)),i._.dirty=1}if("clip-rect"in l){var B=e(l["clip-rect"]).split(u);if(4==B.length){B[2]=+B[2]+ +B[0],B[3]=+B[3]+ +B[1];var A=d.clipRect||n._g.doc.createElement("div"),I=A.style;I.clip=n.format("rect({1}px {2}px {3}px {0}px)",B),d.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=i.paper.width+"px",I.height=i.paper.height+"px",d.parentNode.insertBefore(A,d),A.appendChild(d),d.clipRect=A)}l["clip-rect"]||d.clipRect&&(d.clipRect.style.clip="auto")}if(i.textpath){var N=i.textpath.style;l.font&&(N.font=l.font),l["font-family"]&&(N.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,f)+'"'),l["font-size"]&&(N.fontSize=l["font-size"]),l["font-weight"]&&(N.fontWeight=l["font-weight"]),l["font-style"]&&(N.fontStyle=l["font-style"])}if("arrow-start"in l&&D(b,l["arrow-start"]),"arrow-end"in l&&D(b,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var P=d.getElementsByTagName(c),F=!1;if(P=P&&P[0],!P&&(F=P=L(c)),"image"==i.type&&l.src&&(P.src=l.src),l.fill&&(P.on=!0),null!=P.on&&"none"!=l.fill&&null!==l.fill||(P.on=!1),P.on&&l.fill){var O=e(l.fill).match(n._ISURL);if(O){P.parentNode==d&&d.removeChild(P),P.rotate=!0,P.src=O[1],P.type="tile";var R=i.getBBox(1);P.position=R.x+p+R.y,i._.fillpos=[R.x,R.y],n._preload(O[1],function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]})}else P.color=n.getRGB(l.fill).hex,P.src=f,P.type="solid",n.getRGB(l.fill).error&&(b.type in{circle:1,ellipse:1}||"r"!=e(l.fill).charAt())&&E(b,l.fill,P)&&(h.fill="none",h.gradient=l.fill,P.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var z=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+n.getRGB(l.fill).o+1||2)-1);z=s(a(z,0),1),P.opacity=z,P.src&&(P.color="none")}d.appendChild(P);var j=d.getElementsByTagName("stroke")&&d.getElementsByTagName("stroke")[0],q=!1;!j&&(q=j=L("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(j.on=!0),("none"==l.stroke||null===l.stroke||null==j.on||0==l.stroke||0==l["stroke-width"])&&(j.on=!1);var H=n.getRGB(l.stroke);j.on&&l.stroke&&(j.color=H.hex),z=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+H.o+1||2)-1);var W=.75*(r(l["stroke-width"])||1);if(z=s(a(z,0),1),null==l["stroke-width"]&&(W=h["stroke-width"]),l["stroke-width"]&&(j.weight=W),W&&W<1&&(z*=W)&&(j.weight=1),j.opacity=z,l["stroke-linejoin"]&&(j.joinstyle=l["stroke-linejoin"]||"miter"),j.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(j.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var U={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};j.dashstyle=U[t](l["stroke-dasharray"])?U[l["stroke-dasharray"]]:f}q&&d.appendChild(j)}if("text"==b.type){b.paper.canvas.style.display=f;var V=b.paper.span,X=100,K=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);m=V.style,h.font&&(m.font=h.font),h["font-family"]&&(m.fontFamily=h["font-family"]),h["font-weight"]&&(m.fontWeight=h["font-weight"]),h["font-style"]&&(m.fontStyle=h["font-style"]),K=r(h["font-size"]||K&&K[0])||10,m.fontSize=K*X+"px",b.textpath.string&&(V.innerHTML=e(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var G=V.getBoundingClientRect();b.W=h.w=(G.right-G.left)/X,b.H=h.h=(G.bottom-G.top)/X,b.X=h.x,b.Y=h.y+b.H/2,("x"in l||"y"in l)&&(b.path.v=n.format("m{0},{1}l{2},{1}",o(h.x*x),o(h.y*x),o(h.x*x)+1));for(var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,Q=Y.length;Z<Q;Z++)if(Y[Z]in l){b._.dirty=1;break}switch(h["text-anchor"]){case"start":b.textpath.style["v-text-align"]="left",b.bbx=b.W/2;break;case"end":b.textpath.style["v-text-align"]="right",b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},E=function(t,o,a){t.attrs=t.attrs||{};var s=(t.attrs,Math.pow),l="linear",c=".5 .5";if(t.attrs.gradient=o,o=e(o).replace(n._radial_gradient,function(t,e,n){return l="radial",e&&n&&(e=r(e),n=r(n),s(e-.5,2)+s(n-.5,2)>.25&&(n=i.sqrt(.25-s(e-.5,2))*(2*(n>.5)-1)+.5),c=e+p+n),f}),o=o.split(/\s*\-\s*/),"linear"==l){var u=o.shift();if(u=-r(u),isNaN(u))return null}var d=n._parseDots(o);if(!d)return null;if(t=t.shape||t.node,d.length){t.removeChild(a),a.on=!0,a.method="none",a.color=d[0].color,a.color2=d[d.length-1].color;for(var h=[],m=0,g=d.length;m<g;m++)d[m].offset&&h.push(d[m].offset+p+d[m].color);a.colors=h.length?h.join():"0% "+a.color,"radial"==l?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=c,a.angle=0):(a.type="gradient",a.angle=(270-u)%360),t.appendChild(a)}return 1},$=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=n._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=e,this.matrix=n.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},M=n.el;$.prototype=M,M.constructor=$,M.transform=function(t){if(null==t)return this._.transform;var r,i=this.paper._viewBoxShift,o=i?"s"+[i.scale,i.scale]+"-1-1t"+[i.dx,i.dy]:f;i&&(r=t=e(t).replace(/\.{3}|\u2026/g,this._.transform||f)),n._extractTransform(this,o+t);var a,s=this.matrix.clone(),l=this.skew,c=this.node,u=~e(this.attrs.fill).indexOf("-"),d=!e(this.attrs.fill).indexOf("url(");if(s.translate(1,1),d||u||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",a=s.split(),u&&a.noRotation||!a.isSimple){c.style.filter=s.toFilter();var h=this.getBBox(),m=this.getBBox(1),g=h.x-m.x,v=h.y-m.y;c.coordorigin=g*-x+p+v*-x,S(this,1,1,g,v,0)}else c.style.filter=f,S(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else c.style.filter=f,l.matrix=e(s),l.offset=s.offset();return r&&(this._.transform=r),this},M.rotate=function(t,n,i){if(this.removed)return this;if(null!=t){if(t=e(t).split(u),t.length-1&&(n=r(t[1]),i=r(t[2])),t=r(t[0]),null==i&&(n=i),null==n||null==i){var o=this.getBBox(1);n=o.x+o.width/2,i=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,n,i]])),this}},M.translate=function(t,n){return this.removed?this:(t=e(t).split(u),t.length-1&&(n=r(t[1])),t=r(t[0])||0,n=+n||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=n),this.transform(this._.transform.concat([["t",t,n]])),this)},M.scale=function(t,n,i,o){if(this.removed)return this;if(t=e(t).split(u),t.length-1&&(n=r(t[1]),i=r(t[2]),o=r(t[3]),isNaN(i)&&(i=null),isNaN(o)&&(o=null)),t=r(t[0]),null==n&&(n=t),null==o&&(i=o),null==i||null==o)var a=this.getBBox(1);return i=null==i?a.x+a.width/2:i,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",t,n,i,o]])),this._.dirtyT=1,this},M.hide=function(){return!this.removed&&(this.node.style.display="none"),this},M.show=function(){return!this.removed&&(this.node.style.display=f),this},M._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},M.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),n.eve.unbind("raphael.*.*."+this.id),n._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]="function"==typeof this[t]?n._removedFactory(t):null;this.removed=!0}},M.attr=function(e,r){if(this.removed)return this;if(null==e){var i={};for(var o in this.attrs)this.attrs[t](o)&&(i[o]=this.attrs[o]);return i.gradient&&"none"==i.fill&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(null==r&&n.is(e,"string")){if(e==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=e.split(u),s={},l=0,h=a.length;l<h;l++)e=a[l],e in this.attrs?s[e]=this.attrs[e]:n.is(this.paper.customAttributes[e],"function")?s[e]=this.paper.customAttributes[e].def:s[e]=n._availableAttrs[e];return h-1?s:s[a[0]]}if(this.attrs&&null==r&&n.is(e,"array")){for(s={},l=0,h=e.length;l<h;l++)s[e[l]]=this.attr(e[l]);return s}var p;null!=r&&(p={},p[e]=r),null==r&&n.is(e,"object")&&(p=e);for(var f in p)d("raphael.attr."+f+"."+this.id,this,p[f]);if(p){for(f in this.paper.customAttributes)if(this.paper.customAttributes[t](f)&&p[t](f)&&n.is(this.paper.customAttributes[f],"function")){var m=this.paper.customAttributes[f].apply(this,[].concat(p[f]));this.attrs[f]=p[f];for(var g in m)m[t](g)&&(p[g]=m[g])}p.text&&"text"==this.type&&(this.textpath.string=p.text),T(this,p)}return this},M.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&n._tofront(this,this.paper),this},M.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),n._toback(this,this.paper)),this)},M.insertAfter=function(t){return this.removed?this:(t.constructor==n.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),n._insertafter(this,t,this.paper),this)},M.insertBefore=function(t){return this.removed?this:(t.constructor==n.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),n._insertbefore(this,t,this.paper),this)},M.blur=function(t){var e=this.node.runtimeStyle,r=e.filter;return r=r.replace(v,f),0!==+t?(this.attrs.blur=t,e.filter=r+p+h+".Blur(pixelradius="+(+t||1.5)+")",e.margin=n.format("-{0}px 0 0 -{0}px",o(+t||1.5))):(e.filter=r,e.margin=0,delete this.attrs.blur),this},n._engine.path=function(t,e){var n=L("shape");n.style.cssText=y,n.coordsize=x+p+x,n.coordorigin=e.coordorigin;var r=new $(n,e),i={fill:"none",stroke:"#000"};t&&(i.path=t),r.type="path",r.path=[],r.Path=f,T(r,i),e.canvas.appendChild(n);var o=L("skew");return o.on=!0,n.appendChild(o),r.skew=o,r.transform(f),r},n._engine.rect=function(t,e,r,i,o,a){var s=n._rectPath(e,r,i,o,a),l=t.path(s),c=l.attrs;return l.X=c.x=e,l.Y=c.y=r,l.W=c.width=i,l.H=c.height=o,c.r=a,c.path=s,l.type="rect",l},n._engine.ellipse=function(t,e,n,r,i){var o=t.path();o.attrs;return o.X=e-r,o.Y=n-i,o.W=2*r,o.H=2*i,o.type="ellipse",T(o,{cx:e,cy:n,rx:r,ry:i}),o},n._engine.circle=function(t,e,n,r){var i=t.path();i.attrs;return i.X=e-r,i.Y=n-r,i.W=i.H=2*r,i.type="circle",T(i,{cx:e,cy:n,r:r}),i},n._engine.image=function(t,e,r,i,o,a){var s=n._rectPath(r,i,o,a),l=t.path(s).attr({stroke:"none"}),u=l.attrs,d=l.node,h=d.getElementsByTagName(c)[0];return u.src=e,l.X=u.x=r,l.Y=u.y=i,l.W=u.width=o,l.H=u.height=a,u.path=s,l.type="image",h.parentNode==d&&d.removeChild(h),h.rotate=!0,h.src=e,h.type="tile",l._.fillpos=[r,i],l._.fillsize=[o,a],d.appendChild(h),S(l,1,1,0,0,0),l},n._engine.text=function(t,r,i,a){var s=L("shape"),l=L("path"),c=L("textpath");r=r||0,i=i||0,a=a||"",l.v=n.format("m{0},{1}l{2},{1}",o(r*x),o(i*x),o(r*x)+1),l.textpathok=!0,c.string=e(a),c.on=!0,s.style.cssText=y,s.coordsize=x+p+x,s.coordorigin="0 0";var u=new $(s,t),d={fill:"#000",stroke:"none",font:n._availableAttrs.font,text:a};u.shape=s,u.path=l,u.textpath=c,u.type="text",u.attrs.text=e(a),u.attrs.x=r,u.attrs.y=i,u.attrs.w=1,u.attrs.h=1,T(u,d),s.appendChild(c),s.appendChild(l),t.canvas.appendChild(s);var h=L("skew");return h.on=!0,s.appendChild(h),u.skew=h,u.transform(f),u},n._engine.setSize=function(t,e){var r=this.canvas.style;return this.width=t,this.height=e,t==+t&&(t+="px"),e==+e&&(e+="px"),r.width=t,r.height=e,r.clip="rect(0 "+t+" "+e+" 0)",this._viewBox&&n._engine.setViewBox.apply(this,this._viewBox),this},n._engine.setViewBox=function(t,e,r,i,o){n.eve("raphael.setViewBox",this,this._viewBox,[t,e,r,i,o]);var s,l,c=this.width,u=this.height,d=1/a(r/c,i/u);return o&&(s=u/i,l=c/r,r*s<c&&(t-=(c-r*s)/2/s),i*l<u&&(e-=(u-i*l)/2/l)),this._viewBox=[t,e,r,i,!!o],this._viewBoxShift={dx:-t,dy:-e,scale:d},this.forEach(function(t){t.transform("...")}),this};var L;n._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),L=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){L=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},n._engine.initWin(n._g.win),n._engine.create=function(){var t=n._getContainer.apply(0,arguments),e=t.container,r=t.height,i=t.width,o=t.x,a=t.y;if(!e)throw new Error("VML container not found.");var s=new n._Paper,l=s.canvas=n._g.doc.createElement("div"),c=l.style;return o=o||0,a=a||0,i=i||512,r=r||342,s.width=i,s.height=r,i==+i&&(i+="px"),r==+r&&(r+="px"),s.coordsize=1e3*x+p+1e3*x,s.coordorigin="0 0",s.span=n._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(s.span),c.cssText=n.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",i,r),1==e?(n._g.doc.body.appendChild(l),c.left=o+"px",c.top=a+"px",c.position="absolute"):e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l),s.renderfix=function(){},s},n.prototype.clear=function(){n.eve("raphael.clear",this),this.canvas.innerHTML=f,this.span=n._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},n.prototype.remove=function(){n.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?n._removedFactory(t):null;return!0};var B=n.st;for(var A in M)M[t](A)&&!B[t](A)&&(B[A]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(A))}}(),T.was?D.win.Raphael=n:Raphael=n,n}),!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd&&define("flow_diagram",[],e)}(this,function(){function t(e,n){if(!e||"function"==typeof e)return n;var r={};for(var i in n)r[i]=n[i];for(i in e)e[i]&&(r[i]="object"==typeof r[i]?t(r[i],e[i]):e[i]);return r}function e(t,e){if("function"==typeof Object.create)t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}function n(t,e,n){var r,i,o="M{0},{1}";for(r=2,i=2*n.length+2;i>r;r+=2)o+=" L{"+r+"},{"+(r+1)+"}";var a=[e.x,e.y];for(r=0,i=n.length;i>r;r++)a.push(n[r].x),a.push(n[r].y);var s=t.paper.path(o,a);s.attr("stroke",t.options["element-color"]),s.attr("stroke-width",t.options["line-width"]);var l=t.options.font,c=t.options["font-family"],u=t.options["font-weight"];return l&&s.attr({font:l}),c&&s.attr({"font-family":c}),u&&s.attr({"font-weight":u}),s}function r(t,e,n,r){var i,o;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]);var a="M{0},{1}";for(i=2,o=2*n.length+2;o>i;i+=2)a+=" L{"+i+"},{"+(i+1)+"}";var s=[e.x,e.y];for(i=0,o=n.length;o>i;i++)s.push(n[i].x),s.push(n[i].y);var l=t.paper.path(a,s);l.attr({stroke:t.options["line-color"],"stroke-width":t.options["line-width"],"arrow-end":t.options["arrow-end"]});var c=t.options.font,u=t.options["font-family"],d=t.options["font-weight"];if(c&&l.attr({font:c}),u&&l.attr({"font-family":u}),d&&l.attr({"font-weight":d}),r){var h=!1,p=t.paper.text(0,0,r),f=!1,m=n[0];e.y===m.y&&(f=!0);var g=0,v=0;h?(g=e.x>m.x?e.x-(e.x-m.x)/2:m.x-(m.x-e.x)/2,v=e.y>m.y?e.y-(e.y-m.y)/2:m.y-(m.y-e.y)/2,f?(g-=p.getBBox().width/2,v-=t.options["text-margin"]):(g+=t.options["text-margin"],v-=p.getBBox().height/2)):(g=e.x,v=e.y,f?(g+=t.options["text-margin"]/2,v-=t.options["text-margin"]):(g+=t.options["text-margin"]/2,v+=t.options["text-margin"])),p.attr({"text-anchor":"start","font-size":t.options["font-size"],fill:t.options["font-color"],x:g,y:v}),c&&p.attr({font:c}),u&&p.attr({"font-family":u}),d&&p.attr({"font-weight":d})}return l}function i(t,e,n,r,i,o,a,s){var l,c,u,d,h,p={x:null,y:null,onLine1:!1,onLine2:!1};return l=(s-o)*(n-t)-(a-i)*(r-e),0===l?p:(c=e-o,u=t-i,d=(a-i)*c-(s-o)*u,h=(n-t)*c-(r-e)*u,c=d/l,u=h/l,p.x=t+c*(n-t),p.y=e+c*(r-e),c>0&&1>c&&(p.onLine1=!0),u>0&&1>u&&(p.onLine2=!0),p)}function o(t,e){e=e||{},this.paper=new Raphael(t),this.options=g.defaults(e,m),this.symbols=[],this.lines=[],this.start=null}function a(t,e,n){this.chart=t,this.group=this.chart.paper.set(),this.symbol=n,this.connectedTo=[],this.symbolType=e.symbolType,this.flowstate=e.flowstate||"future",this.next_direction=e.next&&e.direction_next?e.direction_next:void 0,this.text=this.chart.paper.text(0,0,e.text),e.key&&(this.text.node.id=e.key+"t"),this.text.node.setAttribute("class",this.getAttr("class")+"t"),this.text.attr({"text-anchor":"start",x:this.getAttr("text-margin"),fill:this.getAttr("font-color"),"font-size":this.getAttr("font-size")});var r=this.getAttr("font"),i=this.getAttr("font-family"),o=this.getAttr("font-weight");r&&this.text.attr({font:r}),i&&this.text.attr({"font-family":i}),o&&this.text.attr({"font-weight":o}),e.link&&this.text.attr("href",e.link),e.target&&this.text.attr("target",e.target);var a=this.getAttr("maxWidth");if(a){for(var s=e.text.split(" "),l="",c=0,u=s.length;u>c;c++){var d=s[c];this.text.attr("text",l+" "+d),l+=this.text.getBBox().width>a?"\n"+d:" "+d}this.text.attr("text",l.substring(1))}if(this.group.push(this.text),n){var h=this.getAttr("text-margin");n.attr({fill:this.getAttr("fill"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*h,height:this.text.getBBox().height+2*h}),n.node.setAttribute("class",this.getAttr("class")),e.link&&n.attr("href",e.link),e.target&&n.attr("target",e.target),e.key&&(n.node.id=e.key),this.group.push(n),n.insertBefore(this.text),this.text.attr({y:n.getBBox().height/2}),this.initialize()}}function s(t,e){var n=t.paper.rect(0,0,0,0,20);e=e||{},e.text=e.text||"Start",a.call(this,t,e,n)}function l(t,e){var n=t.paper.rect(0,0,0,0,20);e=e||{},e.text=e.text||"End",a.call(this,t,e,n)}function c(t,e){var n=t.paper.rect(0,0,0,0);e=e||{},a.call(this,t,e,n)}function u(t,e){var n=t.paper.rect(0,0,0,0);e=e||{},a.call(this,t,e,n),n.attr({width:this.text.getBBox().width+4*this.getAttr("text-margin")}),this.text.attr({x:2*this.getAttr("text-margin")});var r=t.paper.rect(0,0,0,0);r.attr({x:this.getAttr("text-margin"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*this.getAttr("text-margin"),height:this.text.getBBox().height+2*this.getAttr("text-margin"),fill:this.getAttr("fill")}),e.key&&(r.node.id=e.key+"i");var i=this.getAttr("font"),o=this.getAttr("font-family"),s=this.getAttr("font-weight");i&&r.attr({font:i}),o&&r.attr({"font-family":o}),s&&r.attr({"font-weight":s}),e.link&&r.attr("href",e.link),e.target&&r.attr("target",e.target),this.group.push(r),r.insertBefore(this.text),this.initialize()}function d(t,e){e=e||{},a.call(this,t,e),this.textMargin=this.getAttr("text-margin"),this.text.attr({x:3*this.textMargin});var r=this.text.getBBox().width+4*this.textMargin,i=this.text.getBBox().height+2*this.textMargin,o=this.textMargin,s=i/2,l={x:o,y:s},c=[{x:o-this.textMargin,y:i},{x:o-this.textMargin+r,y:i},{x:o-this.textMargin+r+2*this.textMargin,y:0},{x:o-this.textMargin+2*this.textMargin,y:0},{x:o,y:s}],u=n(t,l,c);u.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),e.link&&u.attr("href",e.link),e.target&&u.attr("target",e.target),e.key&&(u.node.id=e.key),u.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:u.getBBox().height/2}),this.group.push(u),u.insertBefore(this.text),this.initialize()}function h(t,e){e=e||{},a.call(this,t,e),this.textMargin=this.getAttr("text-margin"),this.yes_direction="bottom",this.no_direction="right",e.yes&&e.direction_yes&&e.no&&!e.direction_no?"right"===e.direction_yes?(this.no_direction="bottom",this.yes_direction="right"):(this.no_direction="right",this.yes_direction="bottom"):e.yes&&!e.direction_yes&&e.no&&e.direction_no?"right"===e.direction_no?(this.yes_direction="bottom",this.no_direction="right"):(this.yes_direction="right",this.no_direction="bottom"):(this.yes_direction="bottom",this.no_direction="right"),this.yes_direction=this.yes_direction||"bottom",this.no_direction=this.no_direction||"right",this.text.attr({x:2*this.textMargin});var r=this.text.getBBox().width+3*this.textMargin;r+=r/2;var i=this.text.getBBox().height+2*this.textMargin;i+=i/2,i=Math.max(.5*r,i);var o=r/4,s=i/4;this.text.attr({x:o+this.textMargin/2});var l={x:o,y:s},c=[{x:o-r/4,y:s+i/4},{x:o-r/4+r/2,y:s+i/4+i/2},{x:o-r/4+r,y:s+i/4},{x:o-r/4+r/2,y:s+i/4-i/2},{x:o-r/4,y:s+i/4}],u=n(t,l,c);u.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),e.link&&u.attr("href",e.link),e.target&&u.attr("target",e.target),e.key&&(u.node.id=e.key),u.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:u.getBBox().height/2}),this.group.push(u),u.insertBefore(this.text),this.initialize()}function p(t){function e(t){var e=t.indexOf("(")+1,n=t.indexOf(")");return e>=0&&n>=0?r.symbols[t.substring(0,e-1)]:r.symbols[t]}function n(t){var e="next",n=t.indexOf("(")+1,r=t.indexOf(")");return n>=0&&r>=0&&(e=$.substring(n,r),e.indexOf(",")<0&&"yes"!==e&&"no"!==e&&(e="next, "+e)),e}t=t||"",t=t.trim();for(var r={symbols:{},start:null,drawSVG:function(t,e){function n(t){if(a[t.key])return a[t.key];switch(t.symbolType){case"start":a[t.key]=new s(i,t);break;case"end":a[t.key]=new l(i,t);break;case"operation":a[t.key]=new c(i,t);break;case"inputoutput":a[t.key]=new d(i,t);break;case"subroutine":a[t.key]=new u(i,t);break;case"condition":a[t.key]=new h(i,t);break;default:return new Error("Wrong symbol type!")}return a[t.key]}var r=this;this.diagram&&this.diagram.clean();var i=new o(t,e);this.diagram=i;var a={};!function t(e,o,a){var s=n(e);return r.start===e?i.startWith(s):o&&a&&!o.pathOk&&(o instanceof h?(a.yes===e&&o.yes(s),a.no===e&&o.no(s)):o.then(s)),s.pathOk?s:(s instanceof h?(e.yes&&t(e.yes,s,e),e.no&&t(e.no,s,e)):e.next&&t(e.next,s,e),s)}(this.start),i.render()},clean:function(){this.diagram.clean()}},i=[],a=0,p=1,f=t.length;f>p;p++)if("\n"===t[p]&&"\\"!==t[p-1]){var m=t.substring(a,p);a=p+1,i.push(m.replace(/\\\n/g,"\n"))}a<t.length&&i.push(t.substr(a));for(var g=1,v=i.length;v>g;){var b=i[g];b.indexOf(": ")<0&&b.indexOf("(")<0&&b.indexOf(")")<0&&b.indexOf("->")<0&&b.indexOf("=>")<0?(i[g-1]+="\n"+b,i.splice(g,1),v--):g++}for(;i.length>0;){var y=i.splice(0,1)[0];if(y.indexOf("=>")>=0){var x,w=y.split("=>"),_={key:w[0],symbolType:w[1],text:null,link:null,target:null,flowstate:null};if(_.symbolType.indexOf(": ")>=0&&(x=_.symbolType.split(": "),_.symbolType=x[0],_.text=x[1]),_.text&&_.text.indexOf(":>")>=0?(x=_.text.split(":>"),_.text=x[0],_.link=x[1]):_.symbolType.indexOf(":>")>=0&&(x=_.symbolType.split(":>"),_.symbolType=x[0],_.link=x[1]),_.symbolType.indexOf("\n")>=0&&(_.symbolType=_.symbolType.split("\n")[0]),_.link){var k=_.link.indexOf("[")+1,C=_.link.indexOf("]");k>=0&&C>=0&&(_.target=_.link.substring(k,C),_.link=_.link.substring(0,k-1))}if(_.text&&_.text.indexOf("|")>=0){var S=_.text.split("|");_.text=S[0],_.flowstate=S[1].trim()}r.symbols[_.key]=_}else if(y.indexOf("->")>=0)for(var D=y.split("->"),T=0,E=D.length;E>T;T++){var $=D[T],M=e($),L=n($),B=null;if(L.indexOf(",")>=0){var A=L.split(",");L=A[0],B=A[1].trim()}if(r.start||(r.start=M),E>T+1){var I=D[T+1];M[L]=e(I),M["direction_"+L]=B,B=null}}}return r}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:0!==r&&1/0!=r&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);n>i;i++)if(i in e&&e[i]===t)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var r=n;arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:0!==r&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r))));for(var i=r>=0?Math.min(r,n-1):n-Math.abs(r);i>=0;i--)if(i in e&&e[i]===t)return i;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var f={},m={x:0,y:0,"line-width":3,"line-length":50,"text-margin":10,"font-size":14,"font-color":"black","line-color":"black","element-color":"black",fill:"white","yes-text":"yes","no-text":"no","arrow-end":"block",class:"flowchart",symbols:{start:{},end:{},condition:{},inputoutput:{},operation:{},subroutine:{}}},g={defaults:t,inherits:e};return o.prototype.handle=function(t){this.symbols.indexOf(t)<=-1&&this.symbols.push(t);var e=this;return t instanceof h?(t.yes=function(n){return t.yes_symbol=n,t.no_symbol&&(t.pathOk=!0),e.handle(n)},t.no=function(n){return t.no_symbol=n,t.yes_symbol&&(t.pathOk=!0),e.handle(n)}):t.then=function(n){return t.next=n,t.pathOk=!0,e.handle(n)},t},o.prototype.startWith=function(t){return this.start=t,this.handle(t)},o.prototype.render=function(){var t,e=0,n=0,r=0,i=0,o=0,a=0;for(r=0,i=this.symbols.length;i>r;r++)t=this.symbols[r],t.width>e&&(e=t.width),t.height>n&&(n=t.height);for(r=0,i=this.symbols.length;i>r;r++)t=this.symbols[r],t.shiftX(this.options.x+(e-t.width)/2+this.options["line-width"]),t.shiftY(this.options.y+(n-t.height)/2+this.options["line-width"]);for(this.start.render(),r=0,i=this.symbols.length;i>r;r++)t=this.symbols[r],t.renderLines();for(o=this.maxXFromLine,r=0,i=this.symbols.length;i>r;r++){t=this.symbols[r];var s=t.getX()+t.width,l=t.getY()+t.height;s>o&&(o=s),l>a&&(a=l)}this.paper.setSize(o+this.options["line-width"],a+this.options["line-width"])},o.prototype.clean=function(){if(this.paper){var t=this.paper.canvas;t.parentNode.removeChild(t)}},a.prototype.getAttr=function(t){if(this.chart){var e,n=this.chart.options?this.chart.options[t]:void 0,r=this.chart.options.symbols?this.chart.options.symbols[this.symbolType][t]:void 0;return this.chart.options.flowstate&&this.chart.options.flowstate[this.flowstate]&&(e=this.chart.options.flowstate[this.flowstate][t]),e||r||n}},a.prototype.initialize=function(){this.group.transform("t"+this.getAttr("line-width")+","+this.getAttr("line-width")),this.width=this.group.getBBox().width,this.height=this.group.getBBox().height},a.prototype.getCenter=function(){return{x:this.getX()+this.width/2,y:this.getY()+this.height/2}},a.prototype.getX=function(){return this.group.getBBox().x},a.prototype.getY=function(){return this.group.getBBox().y},a.prototype.shiftX=function(t){this.group.transform("t"+(this.getX()+t)+","+this.getY())},a.prototype.setX=function(t){this.group.transform("t"+t+","+this.getY())},a.prototype.shiftY=function(t){this.group.transform("t"+this.getX()+","+(this.getY()+t))},a.prototype.setY=function(t){this.group.transform("t"+this.getX()+","+t)},a.prototype.getTop=function(){var t=this.getY(),e=this.getX()+this.width/2;return{x:e,y:t}},a.prototype.getBottom=function(){var t=this.getY()+this.height,e=this.getX()+this.width/2;return{x:e,y:t}},a.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX();return{x:e,y:t}},a.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX()+this.group.getBBox().width;return{x:e,y:t}},a.prototype.render=function(){if(this.next){var t=this.getAttr("line-length");if("right"===this.next_direction){var e=this.getRight();if(this.next.getLeft(),!this.next.isPositioned){this.next.setY(e.y-this.next.height/2),this.next.shiftX(this.group.getBBox().x+this.width+t);var n=this;!function e(){for(var r,i=!1,o=0,a=n.chart.symbols.length;a>o;o++){r=n.chart.symbols[o];var s=Math.abs(r.getCenter().x-n.next.getCenter().x);if(r.getCenter().y>n.next.getCenter().y&&s<=n.next.width/2){i=!0;break}}i&&(n.next.setX(r.getX()+r.width+t),e())}(),this.next.isPositioned=!0,this.next.render()}}else{var r=this.getBottom();this.next.getTop(),this.next.isPositioned||(this.next.shiftY(this.getY()+this.height+t),this.next.setX(r.x-this.next.width/2),this.next.isPositioned=!0,this.next.render())}}},a.prototype.renderLines=function(){this.next&&(this.next_direction?this.drawLineTo(this.next,"",this.next_direction):this.drawLineTo(this.next))},a.prototype.drawLineTo=function(t,e,n){this.connectedTo.indexOf(t)<0&&this.connectedTo.push(t);var o,a=this.getCenter().x,s=this.getCenter().y,l=(this.getTop(),this.getRight()),c=this.getBottom(),u=this.getLeft(),d=t.getCenter().x,h=t.getCenter().y,p=t.getTop(),f=t.getRight(),m=(t.getBottom(),t.getLeft()),g=a===d,v=s===h,b=h>s,y=s>h,x=a>d,w=d>a,_=0,k=this.getAttr("line-length"),C=this.getAttr("line-width");if(n&&"bottom"!==n||!g||!b)if(n&&"right"!==n||!v||!w)if(n&&"left"!==n||!v||!x)if(n&&"right"!==n||!g||!y)if(n&&"right"!==n||!g||!b)if(n&&"bottom"!==n||!x)if(n&&"bottom"!==n||!w)if(n&&"right"===n&&x)o=r(this.chart,l,[{x:l.x+k/2,y:l.y},{x:l.x+k/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.rightStart=!0,t.topEnd=!0,_=l.x+k/2;else if(n&&"right"===n&&w)o=r(this.chart,l,[{x:p.x,y:l.y},{x:p.x,y:p.y}],e),this.rightStart=!0,t.topEnd=!0,_=l.x+k/2;else if(n&&"bottom"===n&&g&&y)o=r(this.chart,c,[{x:c.x,y:c.y+k/2},{x:l.x+k/2,y:c.y+k/2},{x:l.x+k/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.bottomStart=!0,t.topEnd=!0,_=c.x+k/2;else if("left"===n&&g&&y){var S=u.x-k/2;m.x<u.x&&(S=m.x-k/2),o=r(this.chart,u,[{x:S,y:u.y},{x:S,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.leftStart=!0,t.topEnd=!0,_=u.x}else"left"===n&&(o=r(this.chart,u,[{x:p.x+(u.x-p.x)/2,y:u.y},{x:p.x+(u.x-p.x)/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.leftStart=!0,t.topEnd=!0,_=u.x);else o=r(this.chart,c,[{x:c.x,y:c.y+k/2},{x:c.x+(c.x-p.x)/2,y:c.y+k/2},{x:c.x+(c.x-p.x)/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.bottomStart=!0,t.topEnd=!0,_=c.x+(c.x-p.x)/2;else o=this.leftEnd&&y?r(this.chart,c,[{x:c.x,y:c.y+k/2},{x:c.x+(c.x-p.x)/2,y:c.y+k/2},{x:c.x+(c.x-p.x)/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e):r(this.chart,c,[{x:c.x,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.bottomStart=!0,t.topEnd=!0,_=c.x+(c.x-p.x)/2;else o=r(this.chart,l,[{x:l.x+k/2,y:l.y},{x:l.x+k/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.rightStart=!0,t.topEnd=!0,_=l.x+k/2;else o=r(this.chart,l,[{x:l.x+k/2,y:l.y},{x:l.x+k/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.rightStart=!0,t.topEnd=!0,_=l.x+k/2;else o=r(this.chart,u,f,e),this.leftStart=!0,t.rightEnd=!0,_=f.x;else o=r(this.chart,l,m,e),this.rightStart=!0,t.leftEnd=!0,_=m.x;else o=r(this.chart,c,p,e),this.bottomStart=!0,t.topEnd=!0,_=c.x;if(o){for(var D=0,T=this.chart.lines.length;T>D;D++)for(var E,$=this.chart.lines[D],M=$.attr("path"),L=o.attr("path"),B=0,A=M.length-1;A>B;B++){var I=[];I.push(["M",M[B][1],M[B][2]]),I.push(["L",M[B+1][1],M[B+1][2]]);for(var N=I[0][1],P=I[0][2],F=I[1][1],O=I[1][2],R=0,z=L.length-1;z>R;R++){var j=[];j.push(["M",L[R][1],L[R][2]]),j.push(["L",L[R+1][1],L[R+1][2]]);var q=j[0][1],H=j[0][2],W=j[1][1],U=j[1][2],V=i(N,P,F,O,q,H,W,U);if(V.onLine1&&V.onLine2){var X;H===U?q>W?(X=["L",V.x+2*C,H],L.splice(R+1,0,X),X=["C",V.x+2*C,H,V.x,H-4*C,V.x-2*C,H],L.splice(R+2,0,X),o.attr("path",L)):(X=["L",V.x-2*C,H],L.splice(R+1,0,X),X=["C",V.x-2*C,H,V.x,H-4*C,V.x+2*C,H],L.splice(R+2,0,X),o.attr("path",L)):H>U?(X=["L",q,V.y+2*C],L.splice(R+1,0,X),X=["C",q,V.y+2*C,q+4*C,V.y,q,V.y-2*C],
L.splice(R+2,0,X),o.attr("path",L)):(X=["L",q,V.y-2*C],L.splice(R+1,0,X),X=["C",q,V.y-2*C,q+4*C,V.y,q,V.y+2*C],L.splice(R+2,0,X),o.attr("path",L)),R+=2,E+=2}}}this.chart.lines.push(o)}(!this.chart.maxXFromLine||this.chart.maxXFromLine&&_>this.chart.maxXFromLine)&&(this.chart.maxXFromLine=_)},g.inherits(s,a),g.inherits(l,a),g.inherits(c,a),g.inherits(u,a),g.inherits(d,a),d.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX()+this.textMargin;return{x:e,y:t}},d.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX()+this.group.getBBox().width-this.textMargin;return{x:e,y:t}},g.inherits(h,a),h.prototype.render=function(){this.yes_direction&&(this[this.yes_direction+"_symbol"]=this.yes_symbol),this.no_direction&&(this[this.no_direction+"_symbol"]=this.no_symbol);var t=this.getAttr("line-length");if(this.bottom_symbol){var e=this.getBottom();this.bottom_symbol.getTop(),this.bottom_symbol.isPositioned||(this.bottom_symbol.shiftY(this.getY()+this.height+t),this.bottom_symbol.setX(e.x-this.bottom_symbol.width/2),this.bottom_symbol.isPositioned=!0,this.bottom_symbol.render())}if(this.right_symbol){var n=this.getRight();if(this.right_symbol.getLeft(),!this.right_symbol.isPositioned){this.right_symbol.setY(n.y-this.right_symbol.height/2),this.right_symbol.shiftX(this.group.getBBox().x+this.width+t);var r=this;!function e(){for(var n,i=!1,o=0,a=r.chart.symbols.length;a>o;o++){n=r.chart.symbols[o];var s=Math.abs(n.getCenter().x-r.right_symbol.getCenter().x);if(n.getCenter().y>r.right_symbol.getCenter().y&&s<=r.right_symbol.width/2){i=!0;break}}i&&(r.right_symbol.setX(n.getX()+n.width+t),e())}(),this.right_symbol.isPositioned=!0,this.right_symbol.render()}}},h.prototype.renderLines=function(){this.yes_symbol&&this.drawLineTo(this.yes_symbol,this.getAttr("yes-text"),this.yes_direction),this.no_symbol&&this.drawLineTo(this.no_symbol,this.getAttr("no-text"),this.no_direction)},f.parse=p,f}),define("flowChart",["jquery","Raphael","flow_diagram"],function(t,e,n){return function(t,e){var r;r=n.parse(t),r.drawSVG(e)}}),define("sequenceChart",[],function(){"use strict";return function(t){require(["jquery","Raphael","underscore","sequence_diagram"],function(e,n,r,i){t.sequenceDiagram({theme:"simple"})})}}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("Clipboard",[],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){var r=t("matches-selector");e.exports=function(t,e,n){for(var i=n?t:t.parentNode;i&&i!==document;){if(r(i,e))return i;i=i.parentNode}}},{"matches-selector":5}],2:[function(t,e,n){function r(t,e,n,r,o){var a=i.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}function i(t,e,n,r){return function(n){n.delegateTarget=o(n.target,e,!0),n.delegateTarget&&r.call(t,n)}}var o=t("closest");e.exports=r},{closest:1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},{}],4:[function(t,e,n){function r(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!s.string(e))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(t))return i(t,e,n);if(s.nodeList(t))return o(t,e,n);if(s.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function o(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return l(document.body,t,e,n)}var s=t("./is"),l=t("delegate");e.exports=r},{"./is":3,delegate:2}],5:[function(t,e,n){function r(t,e){if(o)return o.call(t,e);for(var n=t.parentNode.querySelectorAll(e),r=0;r<n.length;++r)if(n[r]==t)return!0;return!1}var i=Element.prototype,o=i.matchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;e.exports=r},{}],6:[function(t,e,n){function r(t){var e;if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName)t.focus(),t.setSelectionRange(0,t.value.length),e=t.value;else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r),e=n.toString()}return e}e.exports=r},{}],7:[function(t,e,n){function r(){}r.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function r(){i.off(t,r),e.apply(n,arguments)}var i=this;return r._=e,this.on(t,r,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,a=r.length;o<a;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}},e.exports=r},{}],8:[function(e,n,r){!function(i,o){if("function"==typeof t&&t.amd)t(["module","select"],o);else if("undefined"!=typeof r)o(n,e("select"));else{var a={exports:{}};o(a,i.select),i.clipboardAction=a.exports}}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(e),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(){function t(e){r(this,t),this.resolveOptions(e),this.initSelection()}return t.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""},t.prototype.initSelection=function(){this.text?this.selectFake():this.target&&this.selectTarget()},t.prototype.selectFake=function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,i.default)(this.fakeElem),this.copyText()},t.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},t.prototype.selectTarget=function(){this.selectedText=(0,i.default)(this.target),this.copyText()},t.prototype.copyText=function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)},t.prototype.handleResult=function(t){t?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},t.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},t.prototype.destroy=function(){this.removeFake()},a(t,[{key:"action",set:function(){var t=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=s})},{select:6}],9:[function(e,n,r){!function(i,o){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],o);else if("undefined"!=typeof r)o(n,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var a={exports:{}};o(a,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=a.exports}}(this,function(t,e,n,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var c=i(e),u=i(n),d=i(r),h=function(t){function e(n,r){o(this,e);var i=a(this,t.call(this));return i.resolveOptions(r),i.listenClick(n),i}return s(e,t),e.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText},e.prototype.listenClick=function(t){var e=this;this.listener=(0,d.default)(t,"click",function(t){return e.onClick(t)})},e.prototype.onClick=function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c.default({action:this.action(e),target:this.target(e),text:this.text(e),trigger:e,emitter:this})},e.prototype.defaultAction=function(t){return l("action",t)},e.prototype.defaultTarget=function(t){var e=l("target",t);if(e)return document.querySelector(e)},e.prototype.defaultText=function(t){return l("text",t)},e.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},e}(u.default);t.exports=h})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)}),function(t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else{if("function"==typeof define&&define.amd)return define("codemirror/lib/codemirror",[],t);this.CodeMirror=t()}}(function(){"use strict";function t(n,r){if(!(this instanceof t))return new t(n,r);this.options=r=r||{},oi(yo,r,!1),f(r);var i=r.value;"string"==typeof i&&(i=new Ho(i,r.mode)),this.doc=i;var o=this.display=new e(n,i);o.wrapper.CodeMirror=this,u(this),l(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),r.autofocus&&!Zi&&fe(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new Qr},zi&&ji<11&&setTimeout(ai(pe,this,!0),20),ve(this),xi();var a=this;Zt(this,function(){a.curOp.forceUpdate=!0,yr(a,i),r.autofocus&&!Zi||fi()==o.input?setTimeout(ai(ze,a),20):je(a);for(var t in xo)xo.hasOwnProperty(t)&&xo[t](a,r[t],wo);for(var e=0;e<So.length;++e)So[e](a)})}function e(t,e){var n=this,r=n.input=ui("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");qi?r.style.width="1000px":r.setAttribute("wrap","off"),Yi&&(r.style.border="1px solid black"),r.setAttribute("autocorrect","off"),r.setAttribute("autocapitalize","off"),r.setAttribute("spellcheck","false"),n.inputDiv=ui("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=ui("div",[ui("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=ui("div",[ui("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=ui("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=ui("div",null,"CodeMirror-gutter-filler"),n.lineDiv=ui("div",null,"CodeMirror-code"),n.selectionDiv=ui("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=ui("div",null,"CodeMirror-cursors"),n.measure=ui("div",null,"CodeMirror-measure"),n.lineMeasure=ui("div",null,"CodeMirror-measure"),n.lineSpace=ui("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=ui("div",[ui("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=ui("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=ui("div",null,null,"position: absolute; height: "+ta+"px; width: 1px;"),n.gutters=ui("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=ui("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=ui("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),zi&&ji<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),Yi&&(r.style.width="0px"),qi||(n.scroller.draggable=!0),Xi&&(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"),zi&&ji<8&&(n.scrollbarH.style.minHeight=n.scrollbarV.style.minWidth="18px"),t.appendChild?t.appendChild(n.wrapper):t(n.wrapper),n.viewFrom=n.viewTo=e.first,n.view=[],n.externalMeasured=null,n.viewOffset=0,n.lastSizeC=0,n.updateLineNumbers=null,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput="",n.alignWidgets=!1,n.pollingFast=!1,n.poll=new Qr,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null}function n(e){e.doc.mode=t.getMode(e.options,e.doc.modeOption),r(e)}function r(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,yt(t,100),t.state.modeGen++,t.curOp&&re(t)}function i(t){t.options.lineWrapping?(vi(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth=""):(gi(t.display.wrapper,"CodeMirror-wrap"),p(t)),a(t),re(t),Pt(t),setTimeout(function(){v(t)},100)}function o(t){var e=Xt(t.display),n=t.options.lineWrapping,r=n&&Math.max(5,t.display.scroller.clientWidth/Kt(t.display)-3);return function(i){if(Vn(t.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*e:o+e}}function a(t){var e=t.doc,n=o(t);e.iter(function(t){var e=n(t);e!=t.height&&kr(t,e)})}function s(t){var e=Mo[t.options.keyMap],n=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:"")}function l(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Pt(t)}function c(t){u(t),re(t),setTimeout(function(){y(t)},20)}function u(t){var e=t.display.gutters,n=t.options.gutters;di(e);for(var r=0;r<n.length;++r){var i=n[r],o=e.appendChild(ui("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&(t.display.lineGutter=o,o.style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=r?"":"none",d(t)}function d(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px",t.display.scrollbarH.style.left=t.options.fixedGutter?e+"px":0}function h(t){if(0==t.height)return 0;for(var e,n=t.text.length,r=t;e=Rn(r);){var i=e.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=t;e=zn(r);){var i=e.find(0,!0);n-=r.text.length-i.from.ch,r=i.to.line,n+=r.text.length-i.to.ch}return n}function p(t){var e=t.display,n=t.doc;e.maxLine=xr(n,n.first),e.maxLineLength=h(e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var n=h(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}function f(t){var e=ni(t.gutters,"CodeMirror-linenumbers");e==-1&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function m(t){return t.display.scroller.clientHeight-t.display.wrapper.clientHeight<ta-3}function g(t){var e=t.display.scroller;return{clientHeight:e.clientHeight,barHeight:t.display.scrollbarV.clientHeight,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth,hScrollbarTakesSpace:m(t),barWidth:t.display.scrollbarH.clientWidth,docHeight:Math.round(t.doc.height+Ct(t.display))}}function v(t,e){e||(e=g(t));var n=t.display,r=_i(n.measure),i=e.docHeight+ta,o=e.scrollWidth>e.clientWidth;o&&e.scrollWidth<=e.clientWidth+1&&r>0&&!e.hScrollbarTakesSpace&&(o=!1);var a=i>e.clientHeight;if(a?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=o?r+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,i-e.clientHeight+(e.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),o?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=a?r+"px":"0",n.scrollbarH.firstChild.style.width=e.scrollWidth-e.clientWidth+(e.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),o&&a?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=r+"px"):n.scrollbarFiller.style.display="",o&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r+"px",n.gutterFiller.style.width=n.gutters.offsetWidth+"px"):n.gutterFiller.style.display="",!t.state.checkedOverlayScrollbar&&e.clientHeight>0){if(0===r){var s=Qi&&!Ki?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=s;var l=function(e){Wr(e)!=n.scrollbarV&&Wr(e)!=n.scrollbarH&&Qt(t,we)(e)};Yo(n.scrollbarV,"mousedown",l),Yo(n.scrollbarH,"mousedown",l)}t.state.checkedOverlayScrollbar=!0}}function b(t,e,n){var r=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;r=Math.floor(r-kt(t));var i=n&&null!=n.bottom?n.bottom:r+t.wrapper.clientHeight,o=Sr(e,r),a=Sr(e,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;if(s<o)return{from:s,to:Sr(e,Dr(xr(e,s))+t.wrapper.clientHeight)};if(Math.min(l,e.lastLine())>=a)return{from:Sr(e,Dr(xr(e,l))-t.wrapper.clientHeight),to:l}}return{from:o,to:Math.max(a,o+1)}}function y(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=_(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){t.options.fixedGutter&&n[a].gutter&&(n[a].gutter.style.left=o);var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=r+i+"px")}}function x(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=w(t.options,e.first+e.size-1),r=t.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(ui("div",[ui("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a),r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",d(t),!0}return!1}function w(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function _(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function k(t,e,n){for(var r,i=t.display.viewFrom,o=t.display.viewTo,a=b(t.display,t.doc,e),s=!0;;s=!1){var l=t.display.scroller.clientWidth;if(!C(t,a,n))break;r=!0,t.display.maxLineChanged&&!t.options.lineWrapping&&S(t);var c=g(t);if(mt(t),D(t,c),v(t,c),qi&&t.options.lineWrapping&&T(t,c),qi&&c.scrollWidth>c.clientWidth&&c.scrollWidth<c.clientWidth+1&&!m(t)&&v(t),s&&t.options.lineWrapping&&l!=t.display.scroller.clientWidth)n=!0;else if(n=!1,e&&null!=e.top&&(e={top:Math.min(c.docHeight-ta-c.clientHeight,e.top)}),a=b(t.display,t.doc,e),a.from>=t.display.viewFrom&&a.to<=t.display.viewTo)break}return t.display.updateLineNumbers=null,r&&(Vr(t,"update",t),t.display.viewFrom==i&&t.display.viewTo==o||Vr(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo)),r}function C(t,e,n){var r=t.display,i=t.doc;if(!r.wrapper.offsetWidth)return void oe(t);if(!(!n&&e.from>=r.viewFrom&&e.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&0==ce(t))){x(t)&&oe(t);var o=M(t),a=i.first+i.size,s=Math.max(e.from-t.options.viewportMargin,i.first),l=Math.min(a,e.to+t.options.viewportMargin);r.viewFrom<s&&s-r.viewFrom<20&&(s=Math.max(i.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(a,r.viewTo)),io&&(s=Wn(t.doc,s),l=Un(t.doc,l));var c=s!=r.viewFrom||l!=r.viewTo||r.lastSizeC!=r.wrapper.clientHeight;le(t,s,l),r.viewOffset=Dr(xr(t.doc,r.viewFrom)),t.display.mover.style.top=r.viewOffset+"px";var u=ce(t);if(c||0!=u||n){var d=fi();return u>4&&(r.lineDiv.style.display="none"),L(t,r.updateLineNumbers,o),u>4&&(r.lineDiv.style.display=""),d&&fi()!=d&&d.offsetHeight&&d.focus(),di(r.cursorDiv),di(r.selectionDiv),c&&(r.lastSizeC=r.wrapper.clientHeight,yt(t,400)),E(t),!0}}}function S(t){var e=t.display,n=$t(t,e.maxLine,e.maxLine.text.length).left;e.maxLineChanged=!1;var r=Math.max(0,n+3),i=Math.max(0,e.sizer.offsetLeft+r+ta-e.scroller.clientWidth);e.sizer.style.minWidth=r+"px",i<t.doc.scrollLeft&&Me(t,Math.min(e.scroller.scrollLeft,i),!0)}function D(t,e){t.display.sizer.style.minHeight=t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=Math.max(e.docHeight,e.clientHeight-ta)+"px"}function T(t,e){t.display.sizer.offsetWidth+t.display.gutters.offsetWidth<t.display.scroller.clientWidth-1&&(t.display.sizer.style.minHeight=t.display.heightForcer.style.top="0px",t.display.gutters.style.height=e.docHeight+"px")}function E(t){for(var e=t.display,n=e.lineDiv.offsetTop,r=0;r<e.view.length;r++){var i,o=e.view[r];if(!o.hidden){if(zi&&ji<8){var a=o.node.offsetTop+o.node.offsetHeight;i=a-n,n=a}else{var s=o.node.getBoundingClientRect();i=s.bottom-s.top}var l=o.line.height-i;if(i<2&&(i=Xt(e)),(l>.001||l<-.001)&&(kr(o.line,i),$(o.line),o.rest))for(var c=0;c<o.rest.length;c++)$(o.rest[c])}}}function $(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.offsetHeight}function M(t){for(var e=t.display,n={},r={},i=e.gutters.firstChild,o=0;i;i=i.nextSibling,++o)n[t.options.gutters[o]]=i.offsetLeft,r[t.options.gutters[o]]=i.offsetWidth;return{fixedPos:_(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:e.wrapper.clientWidth}}function L(t,e,n){function r(e){var n=e.nextSibling;return qi&&Qi&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var i=t.display,o=t.options.lineNumbers,a=i.lineDiv,s=a.firstChild,l=i.view,c=i.viewFrom,u=0;u<l.length;u++){var d=l[u];if(d.hidden);else if(d.node){for(;s!=d.node;)s=r(s);var h=o&&null!=e&&e<=c&&d.lineNumber;d.changes&&(ni(d.changes,"gutter")>-1&&(h=!1),B(t,d,c,n)),h&&(di(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(w(t.options,c)))),s=d.node.nextSibling}else{var p=z(t,d,c,n);a.insertBefore(p,s)}c+=d.size}for(;s;)s=r(s)}function B(t,e,n,r){for(var i=0;i<e.changes.length;i++){var o=e.changes[i];"text"==o?P(t,e):"gutter"==o?O(t,e,n,r):"class"==o?F(e):"widget"==o&&R(e,r)}e.changes=null}function A(t){return t.node==t.text&&(t.node=ui("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),zi&&ji<8&&(t.node.style.zIndex=2)),t.node}function I(t){var e=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),t.background)e?t.background.className=e:(t.background.parentNode.removeChild(t.background),t.background=null);else if(e){var n=A(t);t.background=n.insertBefore(ui("div",null,e),n.firstChild)}}function N(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):sr(t,e)}function P(t,e){var n=e.text.className,r=N(t,e);e.text==e.node&&(e.node=r.pre),e.text.parentNode.replaceChild(r.pre,e.text),e.text=r.pre,r.bgClass!=e.bgClass||r.textClass!=e.textClass?(e.bgClass=r.bgClass,e.textClass=r.textClass,F(e)):n&&(e.text.className=n)}function F(t){I(t),t.line.wrapClass?A(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var e=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=e||""}function O(t,e,n,r){e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null);var i=e.line.gutterMarkers;if(t.options.lineNumbers||i){var o=A(e),a=e.gutter=o.insertBefore(ui("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),e.text);if(!t.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(e.lineNumber=a.appendChild(ui("div",w(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<t.options.gutters.length;++s){var l=t.options.gutters[s],c=i.hasOwnProperty(l)&&i[l];c&&a.appendChild(ui("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[l]+"px; width: "+r.gutterWidth[l]+"px"))}}}function R(t,e){t.alignable&&(t.alignable=null);for(var n,r=t.node.firstChild;r;r=n){var n=r.nextSibling;"CodeMirror-linewidget"==r.className&&t.node.removeChild(r)}j(t,e)}function z(t,e,n,r){var i=N(t,e);return e.text=e.node=i.pre,i.bgClass&&(e.bgClass=i.bgClass),i.textClass&&(e.textClass=i.textClass),F(e),O(t,e,n,r),j(e,r),e.node}function j(t,e){if(q(t.line,t,e,!0),t.rest)for(var n=0;n<t.rest.length;n++)q(t.rest[n],t,e,!1)}function q(t,e,n,r){if(t.widgets)for(var i=A(e),o=0,a=t.widgets;o<a.length;++o){var s=a[o],l=ui("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(l.ignoreEvents=!0),H(s,l,e,n),r&&s.above?i.insertBefore(l,e.gutter||e.text):i.appendChild(l),Vr(s,"redraw")}}function H(t,e,n,r){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var i=r.wrapperWidth;e.style.left=r.fixedPos+"px",t.coverGutter||(i-=r.gutterTotalWidth,e.style.paddingLeft=r.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-r.gutterTotalWidth+"px"))}function W(t){return oo(t.line,t.ch)}function U(t,e){return ao(t,e)<0?e:t}function V(t,e){return ao(t,e)<0?t:e}function X(t,e){this.ranges=t,this.primIndex=e}function K(t,e){this.anchor=t,this.head=e}function G(t,e){var n=t[e];t.sort(function(t,e){return ao(t.from(),e.from())}),e=ni(t,n);for(var r=1;r<t.length;r++){var i=t[r],o=t[r-1];if(ao(o.to(),i.from())>=0){var a=V(o.from(),i.from()),s=U(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;r<=e&&--e,t.splice(--r,2,new K(l?s:a,l?a:s))}}return new X(t,e)}function Y(t,e){return new X([new K(t,e||t)],0)}function Z(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function Q(t,e){if(e.line<t.first)return oo(t.first,0);var n=t.first+t.size-1;return e.line>n?oo(n,xr(t,n).text.length):J(e,xr(t,e.line).text.length)}function J(t,e){var n=t.ch;return null==n||n>e?oo(t.line,e):n<0?oo(t.line,0):t}function tt(t,e){return e>=t.first&&e<t.first+t.size}function et(t,e){for(var n=[],r=0;r<e.length;r++)n[r]=Q(t,e[r]);return n}function nt(t,e,n,r){if(t.cm&&t.cm.display.shift||t.extend){var i=e.anchor;if(r){var o=ao(n,i)<0;o!=ao(r,i)<0?(i=n,n=r):o!=ao(n,r)<0&&(n=r)}return new K(i,n)}return new K(r||n,n)}function rt(t,e,n,r){ct(t,new X([nt(t,t.sel.primary(),e,n)],0),r)}function it(t,e,n){for(var r=[],i=0;i<t.sel.ranges.length;i++)r[i]=nt(t,t.sel.ranges[i],e[i],null);var o=G(r,t.sel.primIndex);ct(t,o,n)}function ot(t,e,n,r){var i=t.sel.ranges.slice(0);i[e]=n,ct(t,G(i,t.sel.primIndex),r)}function at(t,e,n,r){ct(t,Y(e,n),r)}function st(t,e){var n={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new K(Q(t,e[n].anchor),Q(t,e[n].head))}};return Qo(t,"beforeSelectionChange",t,n),t.cm&&Qo(t.cm,"beforeSelectionChange",t.cm,n),n.ranges!=e.ranges?G(n.ranges,n.ranges.length-1):e}function lt(t,e,n){var r=t.history.done,i=ei(r);i&&i.ranges?(r[r.length-1]=e,ut(t,e,n)):ct(t,e,n)}function ct(t,e,n){ut(t,e,n),Ir(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function ut(t,e,n){(Yr(t,"beforeSelectionChange")||t.cm&&Yr(t.cm,"beforeSelectionChange"))&&(e=st(t,e));var r=n&&n.bias||(ao(e.primary().head,t.sel.primary().head)<0?-1:1);dt(t,pt(t,e,r,!0)),n&&n.scroll===!1||!t.cm||ln(t.cm)}function dt(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,Gr(t.cm)),Vr(t,"cursorActivity",t))}function ht(t){dt(t,pt(t,t.sel,null,!1),na)}function pt(t,e,n,r){for(var i,o=0;o<e.ranges.length;o++){var a=e.ranges[o],s=ft(t,a.anchor,n,r),l=ft(t,a.head,n,r);(i||s!=a.anchor||l!=a.head)&&(i||(i=e.ranges.slice(0,o)),i[o]=new K(s,l))}return i?G(i,e.primIndex):e}function ft(t,e,n,r){var i=!1,o=e,a=n||1;t.cantEdit=!1;t:for(;;){var s=xr(t,o.line);if(s.markedSpans)for(var l=0;l<s.markedSpans.length;++l){var c=s.markedSpans[l],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(r&&(Qo(u,"beforeCursorEnter"),u.explicitlyCleared)){if(s.markedSpans){--l;continue}break}if(!u.atomic)continue;var d=u.find(a<0?-1:1);if(0==ao(d,o)&&(d.ch+=a,d.ch<0?d=d.line>t.first?Q(t,oo(d.line-1)):null:d.ch>s.text.length&&(d=d.line<t.first+t.size-1?oo(d.line+1,0):null),!d)){if(i)return r?(t.cantEdit=!0,oo(t.first,0)):ft(t,e,n,!0);i=!0,d=e,a=-a}o=d;continue t}}return o}}function mt(t){for(var e=t.display,n=t.doc,r=document.createDocumentFragment(),i=document.createDocumentFragment(),o=0;o<n.sel.ranges.length;o++){var a=n.sel.ranges[o],s=a.empty();(s||t.options.showCursorWhenSelecting)&&gt(t,a,r),s||vt(t,a,i)}if(t.options.moveInputWithCursor){var l=qt(t,n.sel.primary().head,"div"),c=e.wrapper.getBoundingClientRect(),u=e.lineDiv.getBoundingClientRect(),d=Math.max(0,Math.min(e.wrapper.clientHeight-10,l.top+u.top-c.top)),h=Math.max(0,Math.min(e.wrapper.clientWidth-10,l.left+u.left-c.left));e.inputDiv.style.top=d+"px",e.inputDiv.style.left=h+"px";
}hi(e.cursorDiv,r),hi(e.selectionDiv,i)}function gt(t,e,n){var r=qt(t,e.head,"div",null,null,!t.options.singleCursorHeightPerLine),i=n.appendChild(ui("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",r.other){var o=n.appendChild(ui("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function vt(t,e,n){function r(t,e,n,r){e<0&&(e=0),e=Math.round(e),r=Math.round(r),s.appendChild(ui("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==n?u-t:n)+"px; height: "+(r-e)+"px"))}function i(e,n,i){function o(n,r){return jt(t,oo(e,n),"div",d,r)}var s,l,d=xr(a,e),h=d.text.length;return Si(Tr(d),n||0,null==i?h:i,function(t,e,a){var d,p,f,m=o(t,"left");if(t==e)d=m,p=f=m.left;else{if(d=o(e-1,"right"),"rtl"==a){var g=m;m=d,d=g}p=m.left,f=d.right}null==n&&0==t&&(p=c),d.top-m.top>3&&(r(p,m.top,null,m.bottom),p=c,m.bottom<d.top&&r(p,m.bottom,null,d.top)),null==i&&e==h&&(f=u),(!s||m.top<s.top||m.top==s.top&&m.left<s.left)&&(s=m),(!l||d.bottom>l.bottom||d.bottom==l.bottom&&d.right>l.right)&&(l=d),p<c+1&&(p=c),r(p,d.top,f-p,d.bottom)}),{start:s,end:l}}var o=t.display,a=t.doc,s=document.createDocumentFragment(),l=St(t.display),c=l.left,u=o.lineSpace.offsetWidth-l.right,d=e.from(),h=e.to();if(d.line==h.line)i(d.line,d.ch,h.ch);else{var p=xr(a,d.line),f=xr(a,h.line),m=qn(p)==qn(f),g=i(d.line,d.ch,m?p.text.length+1:null).end,v=i(h.line,m?0:null,h.ch).start;m&&(g.top<v.top-2?(r(g.right,g.top,null,g.bottom),r(c,v.top,v.left,v.bottom)):r(g.right,g.top,v.left-g.right,g.bottom)),g.bottom<v.top&&r(c,g.bottom,null,v.top)}n.appendChild(s)}function bt(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function yt(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,ai(xt,t))}function xt(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,r=To(e.mode,_t(t,e.frontier));Zt(t,function(){e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),function(i){if(e.frontier>=t.display.viewFrom){var o=i.styles,a=rr(t,i,r,!0);i.styles=a.styles;var s=i.styleClasses,l=a.classes;l?i.styleClasses=l:s&&(i.styleClasses=null);for(var c=!o||o.length!=i.styles.length||s!=l&&(!s||!l||s.bgClass!=l.bgClass||s.textClass!=l.textClass),u=0;!c&&u<o.length;++u)c=o[u]!=i.styles[u];c&&ie(t,e.frontier,"text"),i.stateAfter=To(e.mode,r)}else or(t,i.text,r),i.stateAfter=e.frontier%5==0?To(e.mode,r):null;if(++e.frontier,+new Date>n)return yt(t,t.options.workDelay),!0})})}}function wt(t,e,n){for(var r,i,o=t.doc,a=n?-1:e-(t.doc.mode.innerMode?1e3:100),s=e;s>a;--s){if(s<=o.first)return o.first;var l=xr(o,s-1);if(l.stateAfter&&(!n||s<=o.frontier))return s;var c=oa(l.text,null,t.options.tabSize);(null==i||r>c)&&(i=s-1,r=c)}return i}function _t(t,e,n){var r=t.doc,i=t.display;if(!r.mode.startState)return!0;var o=wt(t,e,n),a=o>r.first&&xr(r,o-1).stateAfter;return a=a?To(r.mode,a):Eo(r.mode),r.iter(o,e,function(n){or(t,n.text,a);var s=o==e-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;n.stateAfter=s?To(r.mode,a):null,++o}),n&&(r.frontier=o),a}function kt(t){return t.lineSpace.offsetTop}function Ct(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function St(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=hi(t.measure,ui("pre","x")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(t.cachedPaddingH=r),r}function Dt(t,e,n){var r=t.options.lineWrapping,i=r&&t.display.scroller.clientWidth;if(!e.measure.heights||r&&e.measure.width!=i){var o=e.measure.heights=[];if(r){e.measure.width=i;for(var a=e.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];Math.abs(l.bottom-c.bottom)>2&&o.push((l.bottom+c.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Tt(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var r=0;r<t.rest.length;r++)if(t.rest[r]==e)return{map:t.measure.maps[r],cache:t.measure.caches[r]};for(var r=0;r<t.rest.length;r++)if(Cr(t.rest[r])>n)return{map:t.measure.maps[r],cache:t.measure.caches[r],before:!0}}function Et(t,e){e=qn(e);var n=Cr(e),r=t.display.externalMeasured=new ee(t.doc,e,n);r.lineN=n;var i=r.built=sr(t,r);return r.text=i.pre,hi(t.display.lineMeasure,i.pre),r}function $t(t,e,n,r){return Bt(t,Lt(t,e),n,r)}function Mt(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[ae(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function Lt(t,e){var n=Cr(e),r=Mt(t,n);r&&!r.text?r=null:r&&r.changes&&B(t,r,n,M(t)),r||(r=Et(t,e));var i=Tt(r,e,n);return{line:e,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Bt(t,e,n,r,i){e.before&&(n=-1);var o,a=n+(r||"");return e.cache.hasOwnProperty(a)?o=e.cache[a]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(Dt(t,e.view,e.rect),e.hasHeights=!0),o=At(t,e,n,r),o.bogus||(e.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function At(t,e,n,r){for(var i,o,a,s,l=e.map,c=0;c<l.length;c+=3){var u=l[c],d=l[c+1];if(n<u?(o=0,a=1,s="left"):n<d?(o=n-u,a=o+1):(c==l.length-3||n==d&&l[c+3]>n)&&(a=d-u,o=a-1,n>=d&&(s="right")),null!=o){if(i=l[c+2],u==d&&r==(i.insertLeft?"left":"right")&&(s=r),"left"==r&&0==o)for(;c&&l[c-2]==l[c-3]&&l[c-1].insertLeft;)i=l[(c-=3)+2],s="left";if("right"==r&&o==d-u)for(;c<l.length-3&&l[c+3]==l[c+4]&&!l[c+5].insertLeft;)i=l[(c+=3)+2],s="right";break}}var h;if(3==i.nodeType){for(;o&&ci(e.line.text.charAt(u+o));)--o;for(;u+a<d&&ci(e.line.text.charAt(u+a));)++a;if(zi&&ji<9&&0==o&&a==d-u)h=i.parentNode.getBoundingClientRect();else if(zi&&t.options.lineWrapping){var p=la(i,o,a).getClientRects();h=p.length?p["right"==r?p.length-1:0]:uo}else h=la(i,o,a).getBoundingClientRect()||uo}else{o>0&&(s=r="right");var p;h=t.options.lineWrapping&&(p=i.getClientRects()).length>1?p["right"==r?p.length-1:0]:i.getBoundingClientRect()}if(zi&&ji<9&&!o&&(!h||!h.left&&!h.right)){var f=i.parentNode.getClientRects()[0];h=f?{left:f.left,right:f.left+Kt(t.display),top:f.top,bottom:f.bottom}:uo}for(var m=h.top-e.rect.top,g=h.bottom-e.rect.top,v=(m+g)/2,b=e.view.measure.heights,c=0;c<b.length-1&&!(v<b[c]);c++);var y=c?b[c-1]:0,x=b[c],w={left:("right"==s?h.right:h.left)-e.rect.left,right:("left"==s?h.left:h.right)-e.rect.left,top:y,bottom:x};return h.left||h.right||(w.bogus=!0),t.options.singleCursorHeightPerLine||(w.rtop=m,w.rbottom=g),w}function It(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Nt(t){t.display.externalMeasure=null,di(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)It(t.display.view[e])}function Pt(t){Nt(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Ft(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ot(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Rt(t,e,n,r){if(e.widgets)for(var i=0;i<e.widgets.length;++i)if(e.widgets[i].above){var o=Gn(e.widgets[i]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=Dr(e);if("local"==r?a+=kt(t.display):a-=t.display.viewOffset,"page"==r||"window"==r){var s=t.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:Ot());var l=s.left+("window"==r?0:Ft());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function zt(t,e,n){if("div"==n)return e;var r=e.left,i=e.top;if("page"==n)r-=Ft(),i-=Ot();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=t.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function jt(t,e,n,r,i){return r||(r=xr(t.doc,e.line)),Rt(t,r,$t(t,r,e.ch,i),n)}function qt(t,e,n,r,i,o){function a(e,a){var s=Bt(t,i,e,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Rt(t,r,s,n)}function s(t,e){var n=l[e],r=n.level%2;return t==Di(n)&&e&&n.level<l[e-1].level?(n=l[--e],t=Ti(n)-(n.level%2?0:1),r=!0):t==Ti(n)&&e<l.length-1&&n.level<l[e+1].level&&(n=l[++e],t=Di(n)-n.level%2,r=!1),r&&t==n.to&&t>n.from?a(t-1):a(t,r)}r=r||xr(t.doc,e.line),i||(i=Lt(t,r));var l=Tr(r),c=e.ch;if(!l)return a(c);var u=Ai(l,c),d=s(c,u);return null!=wa&&(d.other=s(c,wa)),d}function Ht(t,e){var n=0,e=Q(t.doc,e);t.options.lineWrapping||(n=Kt(t.display)*e.ch);var r=xr(t.doc,e.line),i=Dr(r)+kt(t.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Wt(t,e,n,r){var i=oo(t,e);return i.xRel=r,n&&(i.outside=!0),i}function Ut(t,e,n){var r=t.doc;if(n+=t.display.viewOffset,n<0)return Wt(r.first,0,!0,-1);var i=Sr(r,n),o=r.first+r.size-1;if(i>o)return Wt(r.first+r.size-1,xr(r,o).text.length,!0,1);e<0&&(e=0);for(var a=xr(r,i);;){var s=Vt(t,a,i,e,n),l=zn(a),c=l&&l.find(0,!0);if(!l||!(s.ch>c.from.ch||s.ch==c.from.ch&&s.xRel>0))return s;i=Cr(a=c.to.line)}}function Vt(t,e,n,r,i){function o(r){var i=qt(t,oo(n,r),"line",e,c);return s=!0,a>i.bottom?i.left-l:a<i.top?i.left+l:(s=!1,i.left)}var a=i-Dr(e),s=!1,l=2*t.display.wrapper.clientWidth,c=Lt(t,e),u=Tr(e),d=e.text.length,h=Ei(e),p=$i(e),f=o(h),m=s,g=o(p),v=s;if(r>g)return Wt(n,p,v,1);for(;;){if(u?p==h||p==Ni(e,h,1):p-h<=1){for(var b=r<f||r-f<=g-r?h:p,y=r-(b==h?f:g);ci(e.text.charAt(b));)++b;var x=Wt(n,b,b==h?m:v,y<-1?-1:y>1?1:0);return x}var w=Math.ceil(d/2),_=h+w;if(u){_=h;for(var k=0;k<w;++k)_=Ni(e,_,1)}var C=o(_);C>r?(p=_,g=C,(v=s)&&(g+=1e3),d=w):(h=_,f=C,m=s,d-=w)}}function Xt(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==so){so=ui("pre");for(var e=0;e<49;++e)so.appendChild(document.createTextNode("x")),so.appendChild(ui("br"));so.appendChild(document.createTextNode("x"))}hi(t.measure,so);var n=so.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),di(t.measure),n||1}function Kt(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=ui("span","xxxxxxxxxx"),n=ui("pre",[e]);hi(t.measure,n);var r=e.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(t.cachedCharWidth=i),i||10}function Gt(t){t.curOp={viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++ho},Jo++||(Vo=[])}function Yt(t){var e=t.curOp,n=t.doc,r=t.display;if(t.curOp=null,e.updateMaxLine&&p(t),e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping){var i=k(t,{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate);t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)}if(!i&&e.selectionChanged&&mt(t),i||e.startHeight==t.doc.height||v(t),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&r.scroller.scrollTop!=e.scrollTop){var o=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,e.scrollTop));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=o}if(null!=e.scrollLeft&&r.scroller.scrollLeft!=e.scrollLeft){var a=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,e.scrollLeft));r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=a,y(t)}if(e.scrollToPos){var s=rn(t,Q(t.doc,e.scrollToPos.from),Q(t.doc,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&nn(t,s)}e.selectionChanged&&bt(t),t.state.focused&&e.updateInput&&pe(t,e.typing);var l=e.maybeHiddenMarkers,c=e.maybeUnhiddenMarkers;if(l)for(var u=0;u<l.length;++u)l[u].lines.length||Qo(l[u],"hide");if(c)for(var u=0;u<c.length;++u)c[u].lines.length&&Qo(c[u],"unhide");var d;if(--Jo||(d=Vo,Vo=null),e.changeObjs&&Qo(t,"changes",t,e.changeObjs),d)for(var u=0;u<d.length;++u)d[u]();if(e.cursorActivityHandlers)for(var u=0;u<e.cursorActivityHandlers.length;u++)e.cursorActivityHandlers[u](t)}function Zt(t,e){if(t.curOp)return e();Gt(t);try{return e()}finally{Yt(t)}}function Qt(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Gt(t);try{return e.apply(t,arguments)}finally{Yt(t)}}}function Jt(t){return function(){if(this.curOp)return t.apply(this,arguments);Gt(this);try{return t.apply(this,arguments)}finally{Yt(this)}}}function te(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Gt(e);try{return t.apply(this,arguments)}finally{Yt(e)}}}function ee(t,e,n){this.line=e,this.rest=Hn(e),this.size=this.rest?Cr(ei(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Vn(t,e)}function ne(t,e,n){for(var r,i=[],o=e;o<n;o=r){var a=new ee(t.doc,xr(t.doc,o),o);r=o+a.size,i.push(a)}return i}function re(t,e,n,r){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),r||(r=0);var i=t.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>e)&&(i.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=i.viewTo)io&&Wn(t.doc,e)<i.viewTo&&oe(t);else if(n<=i.viewFrom)io&&Un(t.doc,n+r)>i.viewFrom?oe(t):(i.viewFrom+=r,i.viewTo+=r);else if(e<=i.viewFrom&&n>=i.viewTo)oe(t);else if(e<=i.viewFrom){var o=se(t,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):oe(t)}else if(n>=i.viewTo){var o=se(t,e,e,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):oe(t)}else{var a=se(t,e,e,-1),s=se(t,n,n+r,1);a&&s?(i.view=i.view.slice(0,a.index).concat(ne(t,a.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=r):oe(t)}var l=i.externalMeasured;l&&(n<l.lineN?l.lineN+=r:e<l.lineN+l.size&&(i.externalMeasured=null))}function ie(t,e,n){t.curOp.viewChanged=!0;var r=t.display,i=t.display.externalMeasured;if(i&&e>=i.lineN&&e<i.lineN+i.size&&(r.externalMeasured=null),!(e<r.viewFrom||e>=r.viewTo)){var o=r.view[ae(t,e)];if(null!=o.node){var a=o.changes||(o.changes=[]);ni(a,n)==-1&&a.push(n)}}}function oe(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function ae(t,e){if(e>=t.display.viewTo)return null;if(e-=t.display.viewFrom,e<0)return null;for(var n=t.display.view,r=0;r<n.length;r++)if(e-=n[r].size,e<0)return r}function se(t,e,n,r){var i,o=ae(t,e),a=t.display.view;if(!io||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var s=0,l=t.display.viewFrom;s<o;s++)l+=a[s].size;if(l!=e){if(r>0){if(o==a.length-1)return null;i=l+a[o].size-e,o++}else i=l-e;e+=i,n+=i}for(;Wn(t.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function le(t,e,n){var r=t.display,i=r.view;0==i.length||e>=r.viewTo||n<=r.viewFrom?(r.view=ne(t,e,n),r.viewFrom=e):(r.viewFrom>e?r.view=ne(t,e,r.viewFrom).concat(r.view):r.viewFrom<e&&(r.view=r.view.slice(ae(t,e))),r.viewFrom=e,r.viewTo<n?r.view=r.view.concat(ne(t,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,ae(t,n)))),r.viewTo=n}function ce(t){for(var e=t.display.view,n=0,r=0;r<e.length;r++){var i=e[r];i.hidden||i.node&&!i.changes||++n}return n}function ue(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){he(t),t.state.focused&&ue(t)})}function de(t){function e(){var r=he(t);r||n?(t.display.pollingFast=!1,ue(t)):(n=!0,t.display.poll.set(60,e))}var n=!1;t.display.pollingFast=!0,t.display.poll.set(20,e)}function he(t){var e=t.display.input,n=t.display.prevInput,r=t.doc;if(!t.state.focused||ba(e)&&!n||ge(t)||t.options.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var i=e.value;if(i==n&&!t.somethingSelected())return!1;if(zi&&ji>=9&&t.display.inputHasSelection===i)return pe(t),!1;var o=!t.curOp;o&&Gt(t),t.display.shift=!1,8203!=i.charCodeAt(0)||r.sel!=t.display.selForContextMenu||n||(n="​");for(var a=0,s=Math.min(n.length,i.length);a<s&&n.charCodeAt(a)==i.charCodeAt(a);)++a;for(var l=i.slice(a),c=va(l),u=t.state.pasteIncoming&&c.length>1&&r.sel.ranges.length==c.length,d=r.sel.ranges.length-1;d>=0;d--){var h=r.sel.ranges[d],p=h.from(),f=h.to();a<n.length?p=oo(p.line,p.ch-(n.length-a)):t.state.overwrite&&h.empty()&&!t.state.pasteIncoming&&(f=oo(f.line,Math.min(xr(r,f.line).text.length,f.ch+ei(c).length)));var m=t.curOp.updateInput,g={from:p,to:f,text:u?[c[d]]:c,origin:t.state.pasteIncoming?"paste":t.state.cutIncoming?"cut":"+input"};if(Ge(t.doc,g),Vr(t,"inputRead",t,g),l&&!t.state.pasteIncoming&&t.options.electricChars&&t.options.smartIndent&&h.head.ch<100&&(!d||r.sel.ranges[d-1].head.line!=h.head.line)){var v=t.getModeAt(h.head);if(v.electricChars){for(var b=0;b<v.electricChars.length;b++)if(l.indexOf(v.electricChars.charAt(b))>-1){un(t,h.head.line,"smart");break}}else if(v.electricInput){var y=bo(g);v.electricInput.test(xr(r,y.line).text.slice(0,y.ch))&&un(t,h.head.line,"smart")}}}return ln(t),t.curOp.updateInput=m,t.curOp.typing=!0,i.length>1e3||i.indexOf("\n")>-1?e.value=t.display.prevInput="":t.display.prevInput=i,o&&Yt(t),t.state.pasteIncoming=t.state.cutIncoming=!1,!0}function pe(t,e){var n,r,i=t.doc;if(t.somethingSelected()){t.display.prevInput="";var o=i.sel.primary();n=ya&&(o.to().line-o.from().line>100||(r=t.getSelection()).length>1e3);var a=n?"-":r||t.getSelection();t.display.input.value=a,t.state.focused&&sa(t.display.input),zi&&ji>=9&&(t.display.inputHasSelection=a)}else e||(t.display.prevInput=t.display.input.value="",zi&&ji>=9&&(t.display.inputHasSelection=null));t.display.inaccurateSelection=n}function fe(t){"nocursor"==t.options.readOnly||Zi&&fi()==t.display.input||t.display.input.focus()}function me(t){t.state.focused||(fe(t),ze(t))}function ge(t){return t.options.readOnly||t.doc.cantEdit}function ve(t){function e(){t.state.focused&&setTimeout(ai(fe,t),0)}function n(e){Kr(t,e)||Go(e)}function r(e){if(t.somethingSelected())i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,i.input.value=t.getSelection(),sa(i.input));else{for(var n="",r=[],o=0;o<t.doc.sel.ranges.length;o++){var a=t.doc.sel.ranges[o].head.line,s={anchor:oo(a,0),head:oo(a+1,0)};r.push(s),n+=t.getRange(s.anchor,s.head)}"cut"==e.type?t.setSelections(r,null,na):(i.prevInput="",i.input.value=n,sa(i.input))}"cut"==e.type&&(t.state.cutIncoming=!0)}var i=t.display;Yo(i.scroller,"mousedown",Qt(t,we)),zi&&ji<11?Yo(i.scroller,"dblclick",Qt(t,function(e){if(!Kr(t,e)){var n=xe(t,e);if(n&&!De(t,e)&&!ye(t.display,e)){Xo(e);var r=mn(t,n);rt(t.doc,r.anchor,r.head)}}})):Yo(i.scroller,"dblclick",function(e){Kr(t,e)||Xo(e)}),Yo(i.lineSpace,"selectstart",function(t){ye(i,t)||Xo(t)}),no||Yo(i.scroller,"contextmenu",function(e){qe(t,e)}),Yo(i.scroller,"scroll",function(){i.scroller.clientHeight&&($e(t,i.scroller.scrollTop),Me(t,i.scroller.scrollLeft,!0),Qo(t,"scroll",t))}),Yo(i.scrollbarV,"scroll",function(){i.scroller.clientHeight&&$e(t,i.scrollbarV.scrollTop)}),Yo(i.scrollbarH,"scroll",function(){i.scroller.clientHeight&&Me(t,i.scrollbarH.scrollLeft)}),Yo(i.scroller,"mousewheel",function(e){Le(t,e)}),Yo(i.scroller,"DOMMouseScroll",function(e){Le(t,e)}),Yo(i.scrollbarH,"mousedown",e),Yo(i.scrollbarV,"mousedown",e),Yo(i.wrapper,"scroll",function(){i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),Yo(i.input,"keyup",Qt(t,Oe)),Yo(i.input,"input",function(){zi&&ji>=9&&t.display.inputHasSelection&&(t.display.inputHasSelection=null),de(t)}),Yo(i.input,"keydown",Qt(t,Pe)),Yo(i.input,"keypress",Qt(t,Re)),Yo(i.input,"focus",ai(ze,t)),Yo(i.input,"blur",ai(je,t)),t.options.dragDrop&&(Yo(i.scroller,"dragstart",function(e){Ee(t,e)}),Yo(i.scroller,"dragenter",n),Yo(i.scroller,"dragover",n),Yo(i.scroller,"drop",Qt(t,Te))),Yo(i.scroller,"paste",function(e){ye(i,e)||(t.state.pasteIncoming=!0,fe(t),de(t))}),Yo(i.input,"paste",function(){if(qi&&!t.state.fakedLastChar&&!(new Date-t.state.lastMiddleDown<200)){var e=i.input.selectionStart,n=i.input.selectionEnd;i.input.value+="$",i.input.selectionEnd=n,i.input.selectionStart=e,t.state.fakedLastChar=!0}t.state.pasteIncoming=!0,de(t)}),Yo(i.input,"cut",r),Yo(i.input,"copy",r),Xi&&Yo(i.sizer,"mouseup",function(){fi()==i.input&&i.input.blur(),fe(t)})}function be(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,t.setSize()}function ye(t,e){for(var n=Wr(e);n!=t.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==t.sizer&&n!=t.mover)return!0}function xe(t,e,n,r){var i=t.display;if(!n){var o=Wr(e);if(o==i.scrollbarH||o==i.scrollbarV||o==i.scrollbarFiller||o==i.gutterFiller)return null}var a,s,l=i.lineSpace.getBoundingClientRect();try{a=e.clientX-l.left,s=e.clientY-l.top}catch(t){return null}var c,u=Ut(t,a,s);if(r&&1==u.xRel&&(c=xr(t.doc,u.line).text).length==u.ch){var d=oa(c,c.length,t.options.tabSize)-c.length;u=oo(u.line,Math.max(0,Math.round((a-St(t.display).left)/Kt(t.display))-d))}return u}function we(t){if(!Kr(this,t)){var e=this,n=e.display;if(n.shift=t.shiftKey,ye(n,t))return void(qi||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100)));if(!De(e,t)){var r=xe(e,t);switch(window.focus(),Ur(t)){case 1:r?_e(e,t,r):Wr(t)==n.scroller&&Xo(t);break;case 2:qi&&(e.state.lastMiddleDown=+new Date),r&&rt(e.doc,r),setTimeout(ai(fe,e),20),Xo(t);break;case 3:no&&qe(e,t)}}}}function _e(t,e,n){setTimeout(ai(me,t),0);var r,i=+new Date;co&&co.time>i-400&&0==ao(co.pos,n)?r="triple":lo&&lo.time>i-400&&0==ao(lo.pos,n)?(r="double",co={time:i,pos:n}):(r="single",lo={time:i,pos:n});var o=t.doc.sel,a=Qi?e.metaKey:e.ctrlKey;t.options.dragDrop&&ga&&!ge(t)&&"single"==r&&o.contains(n)>-1&&o.somethingSelected()?ke(t,e,n,a):Ce(t,e,n,r,a)}function ke(t,e,n,r){var i=t.display,o=Qt(t,function(a){qi&&(i.scroller.draggable=!1),t.state.draggingText=!1,Zo(document,"mouseup",o),Zo(i.scroller,"drop",o),Math.abs(e.clientX-a.clientX)+Math.abs(e.clientY-a.clientY)<10&&(Xo(a),r||rt(t.doc,n),fe(t),zi&&9==ji&&setTimeout(function(){document.body.focus(),fe(t)},20))});qi&&(i.scroller.draggable=!0),t.state.draggingText=o,i.scroller.dragDrop&&i.scroller.dragDrop(),Yo(document,"mouseup",o),Yo(i.scroller,"drop",o)}function Ce(t,e,n,r,i){function o(e){if(0!=ao(m,e))if(m=e,"rect"==r){for(var i=[],o=t.options.tabSize,a=oa(xr(c,n.line).text,n.ch,o),s=oa(xr(c,e.line).text,e.ch,o),l=Math.min(a,s),p=Math.max(a,s),f=Math.min(n.line,e.line),g=Math.min(t.lastLine(),Math.max(n.line,e.line));f<=g;f++){var v=xr(c,f).text,b=Jr(v,l,o);l==p?i.push(new K(oo(f,b),oo(f,b))):v.length>b&&i.push(new K(oo(f,b),oo(f,Jr(v,p,o))))}i.length||i.push(new K(n,n)),ct(c,G(h.ranges.slice(0,d).concat(i),d),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var y=u,x=y.anchor,w=e;if("single"!=r){if("double"==r)var _=mn(t,e);else var _=new K(oo(e.line,0),Q(c,oo(e.line+1,0)));ao(_.anchor,x)>0?(w=_.head,x=V(y.from(),_.anchor)):(w=_.anchor,x=U(y.to(),_.head))}var i=h.ranges.slice(0);i[d]=new K(Q(c,x),w),ct(c,G(i,d),ra)}}function a(e){var n=++v,i=xe(t,e,!0,"rect"==r);if(i)if(0!=ao(i,m)){me(t),o(i);var s=b(l,c);(i.line>=s.to||i.line<s.from)&&setTimeout(Qt(t,function(){v==n&&a(e)}),150)}else{var u=e.clientY<g.top?-20:e.clientY>g.bottom?20:0;u&&setTimeout(Qt(t,function(){v==n&&(l.scroller.scrollTop+=u,a(e))}),50)}}function s(e){v=1/0,Xo(e),fe(t),Zo(document,"mousemove",y),Zo(document,"mouseup",x),c.history.lastSelOrigin=null}var l=t.display,c=t.doc;Xo(e);var u,d,h=c.sel;if(i&&!e.shiftKey?(d=c.sel.contains(n),u=d>-1?c.sel.ranges[d]:new K(n,n)):u=c.sel.primary(),e.altKey)r="rect",i||(u=new K(n,n)),n=xe(t,e,!0,!0),d=-1;else if("double"==r){var p=mn(t,n);u=t.display.shift||c.extend?nt(c,u,p.anchor,p.head):p}else if("triple"==r){var f=new K(oo(n.line,0),Q(c,oo(n.line+1,0)));u=t.display.shift||c.extend?nt(c,u,f.anchor,f.head):f}else u=nt(c,u,n);i?d>-1?ot(c,d,u,ra):(d=c.sel.ranges.length,ct(c,G(c.sel.ranges.concat([u]),d),{scroll:!1,origin:"*mouse"})):(d=0,ct(c,new X([u],0),ra),h=c.sel);var m=n,g=l.wrapper.getBoundingClientRect(),v=0,y=Qt(t,function(t){Ur(t)?a(t):s(t)}),x=Qt(t,s);Yo(document,"mousemove",y),Yo(document,"mouseup",x)}function Se(t,e,n,r,i){try{var o=e.clientX,a=e.clientY}catch(t){return!1}if(o>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;r&&Xo(e);var s=t.display,l=s.lineDiv.getBoundingClientRect();if(a>l.bottom||!Yr(t,n))return Hr(e);a-=l.top-s.viewOffset;for(var c=0;c<t.options.gutters.length;++c){var u=s.gutters.childNodes[c];if(u&&u.getBoundingClientRect().right>=o){var d=Sr(t.doc,a),h=t.options.gutters[c];return i(t,n,t,d,h,e),Hr(e)}}}function De(t,e){return Se(t,e,"gutterClick",!0,Vr)}function Te(t){var e=this;if(!Kr(e,t)&&!ye(e.display,t)){Xo(t),zi&&(po=+new Date);var n=xe(e,t,!0),r=t.dataTransfer.files;if(n&&!ge(e))if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,s=function(t,r){var s=new FileReader;s.onload=Qt(e,function(){if(o[r]=s.result,++a==i){n=Q(e.doc,n);var t={from:n,to:n,text:va(o.join("\n")),origin:"paste"};Ge(e.doc,t),lt(e.doc,Y(n,bo(t)))}}),s.readAsText(t)},l=0;l<i;++l)s(r[l],l);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout(ai(fe,e),20);try{var o=t.dataTransfer.getData("Text");if(o){if(e.state.draggingText&&!(Qi?t.metaKey:t.ctrlKey))var c=e.listSelections();if(ut(e.doc,Y(n,n)),c)for(var l=0;l<c.length;++l)en(e.doc,"",c[l].anchor,c[l].head,"drag");e.replaceSelection(o,"around","paste"),fe(e)}}catch(t){}}}}function Ee(t,e){if(zi&&(!t.state.draggingText||+new Date-po<100))return void Go(e);if(!Kr(t,e)&&!ye(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.setDragImage&&!Vi)){var n=ui("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Ui&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),Ui&&n.parentNode.removeChild(n)}}function $e(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,Fi||k(t,{top:e}),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),Fi&&k(t),yt(t,100))}function Me(t,e,n){(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,y(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}function Le(t,e){var n=e.wheelDeltaX,r=e.wheelDeltaY;null==n&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(n=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta);var i=t.display,o=i.scroller;if(n&&o.scrollWidth>o.clientWidth||r&&o.scrollHeight>o.clientHeight){if(r&&Qi&&qi)t:for(var a=e.target,s=i.view;a!=o;a=a.parentNode)for(var l=0;l<s.length;l++)if(s[l].node==a){t.display.currentWheelTarget=a;break t}if(n&&!Fi&&!Ui&&null!=mo)return r&&$e(t,Math.max(0,Math.min(o.scrollTop+r*mo,o.scrollHeight-o.clientHeight))),Me(t,Math.max(0,Math.min(o.scrollLeft+n*mo,o.scrollWidth-o.clientWidth))),Xo(e),void(i.wheelStartX=null);if(r&&null!=mo){var c=r*mo,u=t.doc.scrollTop,d=u+i.wrapper.clientHeight;c<0?u=Math.max(0,u+c-50):d=Math.min(t.doc.height,d+c+50),k(t,{top:u,bottom:d})}fo<20&&(null==i.wheelStartX?(i.wheelStartX=o.scrollLeft,i.wheelStartY=o.scrollTop,i.wheelDX=n,i.wheelDY=r,setTimeout(function(){if(null!=i.wheelStartX){var t=o.scrollLeft-i.wheelStartX,e=o.scrollTop-i.wheelStartY,n=e&&i.wheelDY&&e/i.wheelDY||t&&i.wheelDX&&t/i.wheelDX;i.wheelStartX=i.wheelStartY=null,n&&(mo=(mo*fo+n)/(fo+1),++fo)}},200)):(i.wheelDX+=n,i.wheelDY+=r))}}function Be(t,e,n){if("string"==typeof e&&(e=$o[e],!e))return!1;t.display.pollingFast&&he(t)&&(t.display.pollingFast=!1);var r=t.display.shift,i=!1;try{ge(t)&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),i=e(t)!=ea}finally{t.display.shift=r,t.state.suppressEdits=!1}return i}function Ae(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function Ie(t,e){var n=vn(t.options.keyMap),r=n.auto;clearTimeout(go),r&&!Bo(e)&&(go=setTimeout(function(){vn(t.options.keyMap)==n&&(t.options.keyMap=r.call?r.call(null,t):r,s(t))},50));var i=Ao(e,!0),o=!1;if(!i)return!1;var a=Ae(t);return o=e.shiftKey?Lo("Shift-"+i,a,function(e){return Be(t,e,!0)})||Lo(i,a,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return Be(t,e)}):Lo(i,a,function(e){return Be(t,e)}),o&&(Xo(e),bt(t),Vr(t,"keyHandled",t,i,e)),o}function Ne(t,e,n){var r=Lo("'"+n+"'",Ae(t),function(e){return Be(t,e,!0)});return r&&(Xo(e),bt(t),Vr(t,"keyHandled",t,"'"+n+"'",e)),r}function Pe(t){var e=this;if(me(e),!Kr(e,t)){zi&&ji<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var r=Ie(e,t);Ui&&(vo=r?n:null,!r&&88==n&&!ya&&(Qi?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||Fe(e)}}function Fe(t){function e(t){18!=t.keyCode&&t.altKey||(gi(n,"CodeMirror-crosshair"),Zo(document,"keyup",e),Zo(document,"mouseover",e))}var n=t.display.lineDiv;vi(n,"CodeMirror-crosshair"),Yo(document,"keyup",e),Yo(document,"mouseover",e)}function Oe(t){Kr(this,t)||16==t.keyCode&&(this.doc.sel.shift=!1)}function Re(t){var e=this;if(!(Kr(e,t)||t.ctrlKey||Qi&&t.metaKey)){var n=t.keyCode,r=t.charCode;if(Ui&&n==vo)return vo=null,void Xo(t);if(!(Ui&&(!t.which||t.which<10)||Xi)||!Ie(e,t)){var i=String.fromCharCode(null==r?n:r);Ne(e,t,i)||(zi&&ji>=9&&(e.display.inputHasSelection=null),de(e))}}}function ze(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(Qo(t,"focus",t),t.state.focused=!0,vi(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(pe(t),qi&&setTimeout(ai(pe,t,!0),0))),ue(t),bt(t))}function je(t){t.state.focused&&(Qo(t,"blur",t),t.state.focused=!1,gi(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150)}function qe(t,e){function n(){if(null!=i.input.selectionStart){var e=t.somethingSelected(),n=i.input.value="​"+(e?i.input.value:"");i.prevInput=e?"":"​",i.input.selectionStart=1,i.input.selectionEnd=n.length,i.selForContextMenu=t.doc.sel}}function r(){if(i.inputDiv.style.position="relative",i.input.style.cssText=l,zi&&ji<9&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=a),ue(t),null!=i.input.selectionStart){(!zi||zi&&ji<9)&&n();var e=0,r=function(){i.selForContextMenu==t.doc.sel&&0==i.input.selectionStart?Qt(t,$o.selectAll)(t):e++<10?i.detectingSelectAll=setTimeout(r,500):pe(t)};i.detectingSelectAll=setTimeout(r,200)}}if(!Kr(t,e,"contextmenu")){var i=t.display;if(!ye(i,e)&&!He(t,e)){var o=xe(t,e),a=i.scroller.scrollTop;if(o&&!Ui){var s=t.options.resetSelectionOnContextMenu;s&&t.doc.sel.contains(o)==-1&&Qt(t,ct)(t.doc,Y(o),na);var l=i.input.style.cssText;if(i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(zi?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",fe(t),pe(t),t.somethingSelected()||(i.input.value=i.prevInput=" "),i.selForContextMenu=t.doc.sel,clearTimeout(i.detectingSelectAll),zi&&ji>=9&&n(),no){Go(e);var c=function(){Zo(window,"mouseup",c),setTimeout(r,20)};Yo(window,"mouseup",c)}else setTimeout(r,50)}}}}function He(t,e){return!!Yr(t,"gutterContextMenu")&&Se(t,e,"gutterContextMenu",!1,Qo)}function We(t,e){if(ao(t,e.from)<0)return t;if(ao(t,e.to)<=0)return bo(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=bo(e).ch-e.to.ch),oo(n,r)}function Ue(t,e){for(var n=[],r=0;r<t.sel.ranges.length;r++){
var i=t.sel.ranges[r];n.push(new K(We(i.anchor,e),We(i.head,e)))}return G(n,t.sel.primIndex)}function Ve(t,e,n){return t.line==e.line?oo(n.line,t.ch-e.ch+n.ch):oo(n.line+(t.line-e.line),t.ch)}function Xe(t,e,n){for(var r=[],i=oo(t.first,0),o=i,a=0;a<e.length;a++){var s=e[a],l=Ve(s.from,i,o),c=Ve(bo(s),i,o);if(i=s.to,o=c,"around"==n){var u=t.sel.ranges[a],d=ao(u.head,u.anchor)<0;r[a]=new K(d?c:l,d?l:c)}else r[a]=new K(l,l)}return new X(r,t.sel.primIndex)}function Ke(t,e,n){var r={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(e,n,r,i){e&&(this.from=Q(t,e)),n&&(this.to=Q(t,n)),r&&(this.text=r),void 0!==i&&(this.origin=i)}),Qo(t,"beforeChange",t,r),t.cm&&Qo(t.cm,"beforeChange",t.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Ge(t,e,n){if(t.cm){if(!t.cm.curOp)return Qt(t.cm,Ge)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(Yr(t,"beforeChange")||t.cm&&Yr(t.cm,"beforeChange"))||(e=Ke(t,e,!0))){var r=ro&&!n&&Bn(t,e.from,e.to);if(r)for(var i=r.length-1;i>=0;--i)Ye(t,{from:r[i].from,to:r[i].to,text:i?[""]:e.text});else Ye(t,e)}}function Ye(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ao(e.from,e.to)){var n=Ue(t,e);Br(t,e,n,t.cm?t.cm.curOp.id:NaN),Je(t,e,n,$n(t,e));var r=[];br(t,function(t,n){n||ni(r,t.history)!=-1||(qr(t.history,e),r.push(t.history)),Je(t,e,null,$n(t,e))})}}function Ze(t,e,n){if(!t.cm||!t.cm.state.suppressEdits){for(var r,i=t.history,o=t.sel,a="undo"==e?i.done:i.undone,s="undo"==e?i.undone:i.done,l=0;l<a.length&&(r=a[l],n?!r.ranges||r.equals(t.sel):r.ranges);l++);if(l!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;r=a.pop(),r.ranges;){if(Nr(r,s),n&&!r.equals(t.sel))return void ct(t,r,{clearRedo:!1});o=r}var c=[];Nr(o,s),s.push({changes:c,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var u=Yr(t,"beforeChange")||t.cm&&Yr(t.cm,"beforeChange"),l=r.changes.length-1;l>=0;--l){var d=r.changes[l];if(d.origin=e,u&&!Ke(t,d,!1))return void(a.length=0);c.push($r(t,d));var h=l?Ue(t,d,null):ei(a);Je(t,d,h,Ln(t,d)),!l&&t.cm&&t.cm.scrollIntoView(d);var p=[];br(t,function(t,e){e||ni(p,t.history)!=-1||(qr(t.history,d),p.push(t.history)),Je(t,d,null,Ln(t,d))})}}}}function Qe(t,e){if(0!=e&&(t.first+=e,t.sel=new X(ri(t.sel.ranges,function(t){return new K(oo(t.anchor.line+e,t.anchor.ch),oo(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){re(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,r=n.viewFrom;r<n.viewTo;r++)ie(t.cm,r,"gutter")}}function Je(t,e,n,r){if(t.cm&&!t.cm.curOp)return Qt(t.cm,Je)(t,e,n,r);if(e.to.line<t.first)return void Qe(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);Qe(t,i),e={from:oo(t.first,0),to:oo(e.to.line+i,e.to.ch),text:[ei(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:oo(o,xr(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=wr(t,e.from,e.to),n||(n=Ue(t,e,null)),t.cm?tn(t.cm,e,r):mr(t,e,r),ut(t,n,na)}}function tn(t,e,n){var r=t.doc,i=t.display,a=e.from,s=e.to,l=!1,c=a.line;t.options.lineWrapping||(c=Cr(qn(xr(r,a.line))),r.iter(c,s.line+1,function(t){if(t==i.maxLine)return l=!0,!0})),r.sel.contains(e.from,e.to)>-1&&Gr(t),mr(r,e,n,o(t)),t.options.lineWrapping||(r.iter(c,a.line+e.text.length,function(t){var e=h(t);e>i.maxLineLength&&(i.maxLine=t,i.maxLineLength=e,i.maxLineChanged=!0,l=!1)}),l&&(t.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,a.line),yt(t,400);var u=e.text.length-(s.line-a.line)-1;a.line!=s.line||1!=e.text.length||fr(t.doc,e)?re(t,a.line,s.line+1,u):ie(t,a.line,"text");var d=Yr(t,"changes"),p=Yr(t,"change");if(p||d){var f={from:a,to:s,text:e.text,removed:e.removed,origin:e.origin};p&&Vr(t,"change",t,f),d&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(f)}t.display.selForContextMenu=null}function en(t,e,n,r,i){if(r||(r=n),ao(r,n)<0){var o=r;r=n,n=o}"string"==typeof e&&(e=va(e)),Ge(t,{from:n,to:r,text:e,origin:i})}function nn(t,e){var n=t.display,r=n.sizer.getBoundingClientRect(),i=null;if(e.top+r.top<0?i=!0:e.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!Gi){var o=ui("div","​",null,"position: absolute; top: "+(e.top-n.viewOffset-kt(t.display))+"px; height: "+(e.bottom-e.top+ta)+"px; left: "+e.left+"px; width: 2px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(i),t.display.lineSpace.removeChild(o)}}function rn(t,e,n,r){for(null==r&&(r=0);;){var i=!1,o=qt(t,e),a=n&&n!=e?qt(t,n):o,s=an(t,Math.min(o.left,a.left),Math.min(o.top,a.top)-r,Math.max(o.left,a.left),Math.max(o.bottom,a.bottom)+r),l=t.doc.scrollTop,c=t.doc.scrollLeft;if(null!=s.scrollTop&&($e(t,s.scrollTop),Math.abs(t.doc.scrollTop-l)>1&&(i=!0)),null!=s.scrollLeft&&(Me(t,s.scrollLeft),Math.abs(t.doc.scrollLeft-c)>1&&(i=!0)),!i)return o}}function on(t,e,n,r,i){var o=an(t,e,n,r,i);null!=o.scrollTop&&$e(t,o.scrollTop),null!=o.scrollLeft&&Me(t,o.scrollLeft)}function an(t,e,n,r,i){var o=t.display,a=Xt(t.display);n<0&&(n=0);var s=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:o.scroller.scrollTop,l=o.scroller.clientHeight-ta,c={},u=t.doc.height+Ct(o),d=n<a,h=i>u-a;if(n<s)c.scrollTop=d?0:n;else if(i>s+l){var p=Math.min(n,(h?u:i)-l);p!=s&&(c.scrollTop=p)}var f=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:o.scroller.scrollLeft,m=o.scroller.clientWidth-ta;e+=o.gutters.offsetWidth,r+=o.gutters.offsetWidth;var g=o.gutters.offsetWidth,v=e<g+10;return e<f+g||v?(v&&(e=0),c.scrollLeft=Math.max(0,e-10-g)):r>m+f-3&&(c.scrollLeft=r+10-m),c}function sn(t,e,n){null==e&&null==n||cn(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=n&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+n)}function ln(t){cn(t);var e=t.getCursor(),n=e,r=e;t.options.lineWrapping||(n=e.ch?oo(e.line,e.ch-1):e,r=oo(e.line,e.ch+1)),t.curOp.scrollToPos={from:n,to:r,margin:t.options.cursorScrollMargin,isCursor:!0}}function cn(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var n=Ht(t,e.from),r=Ht(t,e.to),i=an(t,Math.min(n.left,r.left),Math.min(n.top,r.top)-e.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+e.margin);t.scrollTo(i.scrollLeft,i.scrollTop)}}function un(t,e,n,r){var i,o=t.doc;null==n&&(n="add"),"smart"==n&&(t.doc.mode.indent?i=_t(t,e):n="prev");var a=t.options.tabSize,s=xr(o,e),l=oa(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var c,u=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&(c=t.doc.mode.indent(i,s.text.slice(u.length),s.text),c==ea)){if(!r)return;n="prev"}}else c=0,n="not";"prev"==n?c=e>o.first?oa(xr(o,e-1).text,null,a):0:"add"==n?c=l+t.options.indentUnit:"subtract"==n?c=l-t.options.indentUnit:"number"==typeof n&&(c=l+n),c=Math.max(0,c);var d="",h=0;if(t.options.indentWithTabs)for(var p=Math.floor(c/a);p;--p)h+=a,d+="\t";if(h<c&&(d+=ti(c-h)),d!=u)en(t.doc,d,oo(e,0),oo(e,u.length),"+input");else for(var p=0;p<o.sel.ranges.length;p++){var f=o.sel.ranges[p];if(f.head.line==e&&f.head.ch<u.length){var h=oo(e,u.length);ot(o,p,new K(h,h));break}}s.stateAfter=null}function dn(t,e,n,r){var i=e,o=e;return"number"==typeof e?o=xr(t,Z(t,e)):i=Cr(e),null==i?null:(r(o,i)&&t.cm&&ie(t.cm,i,n),o)}function hn(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=e(n[i]);r.length&&ao(o.from,ei(r).to)<=0;){var a=r.pop();if(ao(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Zt(t,function(){for(var e=r.length-1;e>=0;e--)en(t.doc,"",r[e].from,r[e].to,"+delete");ln(t)})}function pn(t,e,n,r,i){function o(){var e=s+n;return e<t.first||e>=t.first+t.size?d=!1:(s=e,u=xr(t,e))}function a(t){var e=(i?Ni:Pi)(u,l,n,!0);if(null==e){if(t||!o())return d=!1;l=i?(n<0?$i:Ei)(u):n<0?u.text.length:0}else l=e;return!0}var s=e.line,l=e.ch,c=n,u=xr(t,s),d=!0;if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var h=null,p="group"==r,f=t.cm&&t.cm.getHelper(e,"wordChars"),m=!0;!(n<0)||a(!m);m=!1){var g=u.text.charAt(l)||"\n",v=si(g,f)?"w":p&&"\n"==g?"n":!p||/\s/.test(g)?null:"p";if(!p||m||v||(v="s"),h&&h!=v){n<0&&(n=1,a());break}if(v&&(h=v),n>0&&!a(!m))break}var b=ft(t,oo(s,l),c,!0);return d||(b.hitSide=!0),b}function fn(t,e,n,r){var i,o=t.doc,a=e.left;if("page"==r){var s=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);i=e.top+n*(s-(n<0?1.5:.5)*Xt(t.display))}else"line"==r&&(i=n>0?e.bottom+3:e.top-3);for(;;){var l=Ut(t,a,i);if(!l.outside)break;if(n<0?i<=0:i>=o.height){l.hitSide=!0;break}i+=5*n}return l}function mn(t,e){var n=t.doc,r=xr(n,e.line).text,i=e.ch,o=e.ch;if(r){var a=t.getHelper(e,"wordChars");(e.xRel<0||o==r.length)&&i?--i:++o;for(var s=r.charAt(i),l=si(s,a)?function(t){return si(t,a)}:/\s/.test(s)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!si(t)};i>0&&l(r.charAt(i-1));)--i;for(;o<r.length&&l(r.charAt(o));)++o}return new K(oo(e.line,i),oo(e.line,o))}function gn(e,n,r,i){t.defaults[e]=n,r&&(xo[e]=i?function(t,e,n){n!=wo&&r(t,e,n)}:r)}function vn(t){return"string"==typeof t?Mo[t]:t}function bn(t,e,n,r,i){if(r&&r.shared)return yn(t,e,n,r,i);if(t.cm&&!t.cm.curOp)return Qt(t.cm,bn)(t,e,n,r,i);var o=new No(t,i),a=ao(e,n);if(r&&oi(r,o,!1),a>0||0==a&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=ui("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(o.widgetNode.ignoreEvents=!0),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(jn(t,e.line,e,n,o)||e.line!=n.line&&jn(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");io=!0}o.addToHistory&&Br(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var s,l=e.line,c=t.cm;if(t.iter(l,n.line+1,function(t){c&&o.collapsed&&!c.options.lineWrapping&&qn(t)==c.display.maxLine&&(s=!0),o.collapsed&&l!=e.line&&kr(t,0),Dn(t,new kn(o,l==e.line?e.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&t.iter(e.line,n.line+1,function(e){Vn(t,e)&&kr(e,0)}),o.clearOnEnter&&Yo(o,"beforeCursorEnter",function(){o.clear()}),o.readOnly&&(ro=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++Po,o.atomic=!0),c){if(s&&(c.curOp.updateMaxLine=!0),o.collapsed)re(c,e.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle)for(var u=e.line;u<=n.line;u++)ie(c,u,"text");o.atomic&&ht(c.doc),Vr(c,"markerAdded",c,o)}return o}function yn(t,e,n,r,i){r=oi(r),r.shared=!1;var o=[bn(t,e,n,r,i)],a=o[0],s=r.widgetNode;return br(t,function(t){s&&(r.widgetNode=s.cloneNode(!0)),o.push(bn(t,Q(t,e),Q(t,n),r,i));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;a=ei(o)}),new Fo(o,a)}function xn(t){return t.findMarks(oo(t.first,0),t.clipPos(oo(t.lastLine())),function(t){return t.parent})}function wn(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.find(),o=t.clipPos(i.from),a=t.clipPos(i.to);if(ao(o,a)){var s=bn(t,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function _n(t){for(var e=0;e<t.length;e++){var n=t[e],r=[n.primary.doc];br(n.primary.doc,function(t){r.push(t)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];ni(r,o.doc)==-1&&(o.parent=null,n.markers.splice(i--,1))}}}function kn(t,e,n){this.marker=t,this.from=e,this.to=n}function Cn(t,e){if(t)for(var n=0;n<t.length;++n){var r=t[n];if(r.marker==e)return r}}function Sn(t,e){for(var n,r=0;r<t.length;++r)t[r]!=e&&(n||(n=[])).push(t[r]);return n}function Dn(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Tn(t,e,n){if(t)for(var r,i=0;i<t.length;++i){var o=t[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e);if(s||o.from==e&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=e:o.to>e);(r||(r=[])).push(new kn(a,o.from,l?null:o.to))}}return r}function En(t,e,n){if(t)for(var r,i=0;i<t.length;++i){var o=t[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=e:o.to>e);if(s||o.from==e&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e);(r||(r=[])).push(new kn(a,l?null:o.from-e,null==o.to?null:o.to-e))}}return r}function $n(t,e){var n=tt(t,e.from.line)&&xr(t,e.from.line).markedSpans,r=tt(t,e.to.line)&&xr(t,e.to.line).markedSpans;if(!n&&!r)return null;var i=e.from.ch,o=e.to.ch,a=0==ao(e.from,e.to),s=Tn(n,i,a),l=En(r,o,a),c=1==e.text.length,u=ei(e.text).length+(c?i:0);if(s)for(var d=0;d<s.length;++d){var h=s[d];if(null==h.to){var p=Cn(l,h.marker);p?c&&(h.to=null==p.to?null:p.to+u):h.to=i}}if(l)for(var d=0;d<l.length;++d){var h=l[d];if(null!=h.to&&(h.to+=u),null==h.from){var p=Cn(s,h.marker);p||(h.from=u,c&&(s||(s=[])).push(h))}else h.from+=u,c&&(s||(s=[])).push(h)}s&&(s=Mn(s)),l&&l!=s&&(l=Mn(l));var f=[s];if(!c){var m,g=e.text.length-2;if(g>0&&s)for(var d=0;d<s.length;++d)null==s[d].to&&(m||(m=[])).push(new kn(s[d].marker,null,null));for(var d=0;d<g;++d)f.push(m);f.push(l)}return f}function Mn(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&t.splice(e--,1)}return t.length?t:null}function Ln(t,e){var n=Or(t,e),r=$n(t,e);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)t:for(var s=0;s<a.length;++s){for(var l=a[s],c=0;c<o.length;++c)if(o[c].marker==l.marker)continue t;o.push(l)}else a&&(n[i]=a)}return n}function Bn(t,e,n){var r=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||r&&ni(r,n)!=-1||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:e,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var c=i[l];if(!(ao(c.to,s.from)<0||ao(c.from,s.to)>0)){var u=[l,1],d=ao(c.from,s.from),h=ao(c.to,s.to);(d<0||!a.inclusiveLeft&&!d)&&u.push({from:c.from,to:s.from}),(h>0||!a.inclusiveRight&&!h)&&u.push({from:s.to,to:c.to}),i.splice.apply(i,u),l+=u.length-1}}return i}function An(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function In(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Nn(t){return t.inclusiveLeft?-1:0}function Pn(t){return t.inclusiveRight?1:0}function Fn(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var r=t.find(),i=e.find(),o=ao(r.from,i.from)||Nn(t)-Nn(e);if(o)return-o;var a=ao(r.to,i.to)||Pn(t)-Pn(e);return a?a:e.id-t.id}function On(t,e){var n,r=io&&t.markedSpans;if(r)for(var i,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&null==(e?i.from:i.to)&&(!n||Fn(n,i.marker)<0)&&(n=i.marker);return n}function Rn(t){return On(t,!0)}function zn(t){return On(t,!1)}function jn(t,e,n,r,i){var o=xr(t,e),a=io&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var c=l.marker.find(0),u=ao(c.from,n)||Nn(l.marker)-Nn(i),d=ao(c.to,r)||Pn(l.marker)-Pn(i);if(!(u>=0&&d<=0||u<=0&&d>=0)&&(u<=0&&(ao(c.to,n)>0||l.marker.inclusiveRight&&i.inclusiveLeft)||u>=0&&(ao(c.from,r)<0||l.marker.inclusiveLeft&&i.inclusiveRight)))return!0}}}function qn(t){for(var e;e=Rn(t);)t=e.find(-1,!0).line;return t}function Hn(t){for(var e,n;e=zn(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}function Wn(t,e){var n=xr(t,e),r=qn(n);return n==r?e:Cr(r)}function Un(t,e){if(e>t.lastLine())return e;var n,r=xr(t,e);if(!Vn(t,r))return e;for(;n=zn(r);)r=n.find(1,!0).line;return Cr(r)+1}function Vn(t,e){var n=io&&e.markedSpans;if(n)for(var r,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Xn(t,e,r))return!0}}function Xn(t,e,n){if(null==n.to){var r=n.marker.find(1,!0);return Xn(t,r.line,Cn(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var i,o=0;o<e.markedSpans.length;++o)if(i=e.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Xn(t,e,i))return!0}function Kn(t,e,n){Dr(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&sn(t,null,n)}function Gn(t){if(null!=t.height)return t.height;if(!pi(document.body,t.node)){var e="position: relative;";t.coverGutter&&(e+="margin-left: -"+t.cm.getGutterElement().offsetWidth+"px;"),hi(t.cm.display.measure,ui("div",[t.node],null,e))}return t.height=t.node.offsetHeight}function Yn(t,e,n,r){var i=new Oo(t,n,r);return i.noHScroll&&(t.display.alignWidgets=!0),dn(t.doc,e,"widget",function(e){var n=e.widgets||(e.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=e,!Vn(t.doc,e)){var r=Dr(e)<t.doc.scrollTop;kr(e,e.height+Gn(i)),r&&sn(t,null,i.height),t.curOp.forceUpdate=!0}return!0}),i}function Zn(t,e,n,r){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),An(t),In(t,n);var i=r?r(t):1;i!=t.height&&kr(t,i)}function Qn(t){t.parent=null,An(t)}function Jn(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==e[r]?e[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[r])||(e[r]+=" "+n[2])}return t}function tr(e,n){if(e.blankLine)return e.blankLine(n);if(e.innerMode){var r=t.innerMode(e,n);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function er(t,e,n){for(var r=0;r<10;r++){var i=t.token(e,n);if(e.pos>e.start)return i}throw new Error("Mode "+t.name+" failed to advance stream.")}function nr(e,n,r,i,o,a,s){var l=r.flattenSpans;null==l&&(l=e.options.flattenSpans);var c,u=0,d=null,h=new Io(n,e.options.tabSize);for(""==n&&Jn(tr(r,i),a);!h.eol();){if(h.pos>e.options.maxHighlightLength?(l=!1,s&&or(e,n,i,h.pos),h.pos=n.length,c=null):c=Jn(er(r,h,i),a),e.options.addModeClass){var p=t.innerMode(r,i).mode.name;p&&(c="m-"+(c?p+" "+c:p))}l&&d==c||(u<h.start&&o(h.start,d),u=h.start,d=c),h.start=h.pos}for(;u<h.pos;){var f=Math.min(h.pos,u+5e4);o(f,d),u=f}}function rr(t,e,n,r){var i=[t.state.modeGen],o={};nr(t,e.text,t.doc.mode,n,function(t,e){i.push(t,e)},o,r);for(var a=0;a<t.state.overlays.length;++a){var s=t.state.overlays[a],l=1,c=0;nr(t,e.text,s.mode,!0,function(t,e){for(var n=l;c<t;){var r=i[l];r>t&&i.splice(l,1,t,i[l+1],r),l+=2,c=Math.min(t,r)}if(e)if(s.opaque)i.splice(n,l-n,t,"cm-overlay "+e),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"cm-overlay "+e}},o)}return{styles:i,classes:o.bgClass||o.textClass?o:null}}function ir(t,e){if(!e.styles||e.styles[0]!=t.state.modeGen){var n=rr(t,e,e.stateAfter=_t(t,Cr(e)));e.styles=n.styles,n.classes?e.styleClasses=n.classes:e.styleClasses&&(e.styleClasses=null)}return e.styles}function or(t,e,n,r){var i=t.doc.mode,o=new Io(e,t.options.tabSize);for(o.start=o.pos=r||0,""==e&&tr(i,n);!o.eol()&&o.pos<=t.options.maxHighlightLength;)er(i,o,n),o.start=o.pos}function ar(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?jo:zo;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function sr(t,e){var n=ui("span",null,null,qi?"padding-right: .1px":null),r={pre:ui("pre",[n]),content:n,col:0,pos:0,cm:t};e.measure={};for(var i=0;i<=(e.rest?e.rest.length:0);i++){var o,a=i?e.rest[i-1]:e.line;r.pos=0,r.addToken=cr,(zi||qi)&&t.getOption("lineWrapping")&&(r.addToken=ur(r.addToken)),Ci(t.display.measure)&&(o=Tr(a))&&(r.addToken=dr(r.addToken,o)),r.map=[],pr(a,r,ir(t,a)),a.styleClasses&&(a.styleClasses.bgClass&&(r.bgClass=bi(a.styleClasses.bgClass,r.bgClass||"")),a.styleClasses.textClass&&(r.textClass=bi(a.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(ki(t.display.measure))),0==i?(e.measure.map=r.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(r.map),(e.measure.caches||(e.measure.caches=[])).push({}))}return Qo(t,"renderLine",t,e.line,r.pre),r.pre.className&&(r.textClass=bi(r.pre.className,r.textClass||"")),r}function lr(t){var e=ui("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e}function cr(t,e,n,r,i,o){if(e){var a=t.cm.options.specialChars,s=!1;if(a.test(e))for(var l=document.createDocumentFragment(),c=0;;){a.lastIndex=c;var u=a.exec(e),d=u?u.index-c:e.length-c;if(d){var h=document.createTextNode(e.slice(c,c+d));zi&&ji<9?l.appendChild(ui("span",[h])):l.appendChild(h),t.map.push(t.pos,t.pos+d,h),t.col+=d,t.pos+=d}if(!u)break;if(c+=d+1,"\t"==u[0]){var p=t.cm.options.tabSize,f=p-t.col%p,h=l.appendChild(ui("span",ti(f),"cm-tab"));t.col+=f}else{var h=t.cm.options.specialCharPlaceholder(u[0]);zi&&ji<9?l.appendChild(ui("span",[h])):l.appendChild(h),t.col+=1}t.map.push(t.pos,t.pos+1,h),t.pos++}else{t.col+=e.length;var l=document.createTextNode(e);t.map.push(t.pos,t.pos+e.length,l),zi&&ji<9&&(s=!0),t.pos+=e.length}if(n||r||i||s){var m=n||"";r&&(m+=r),i&&(m+=i);var g=ui("span",[l],m);return o&&(g.title=o),t.content.appendChild(g)}t.content.appendChild(l)}}function ur(t){function e(t){for(var e=" ",n=0;n<t.length-2;++n)e+=n%2?" ":" ";return e+=" "}return function(n,r,i,o,a,s){t(n,r.replace(/ {3,}/g,e),i,o,a,s)}}function dr(t,e){return function(n,r,i,o,a,s){i=i?i+" cm-force-border":"cm-force-border";for(var l=n.pos,c=l+r.length;;){for(var u=0;u<e.length;u++){var d=e[u];if(d.to>l&&d.from<=l)break}if(d.to>=c)return t(n,r,i,o,a,s);t(n,r.slice(0,d.to-l),i,o,null,s),o=null,r=r.slice(d.to-l),l=d.to}}}function hr(t,e,n,r){var i=!r&&n.widgetNode;i&&(t.map.push(t.pos,t.pos+e,i),t.content.appendChild(i)),t.pos+=e}function pr(t,e,n){var r=t.markedSpans,i=t.text,o=0;if(r)for(var a,s,l,c,u,d,h=i.length,p=0,f=1,m="",g=0;;){if(g==p){s=l=c=u="",d=null,g=1/0;for(var v=[],b=0;b<r.length;++b){var y=r[b],x=y.marker;y.from<=p&&(null==y.to||y.to>p)?(null!=y.to&&g>y.to&&(g=y.to,l=""),x.className&&(s+=" "+x.className),x.startStyle&&y.from==p&&(c+=" "+x.startStyle),x.endStyle&&y.to==g&&(l+=" "+x.endStyle),x.title&&!u&&(u=x.title),x.collapsed&&(!d||Fn(d.marker,x)<0)&&(d=y)):y.from>p&&g>y.from&&(g=y.from),"bookmark"==x.type&&y.from==p&&x.widgetNode&&v.push(x)}if(d&&(d.from||0)==p&&(hr(e,(null==d.to?h+1:d.to)-p,d.marker,null==d.from),null==d.to))return;if(!d&&v.length)for(var b=0;b<v.length;++b)hr(e,0,v[b])}if(p>=h)break;for(var w=Math.min(h,g);;){if(m){var _=p+m.length;if(!d){var k=_>w?m.slice(0,w-p):m;e.addToken(e,k,a?a+s:s,c,p+k.length==g?l:"",u)}if(_>=w){m=m.slice(w-p),p=w;break}p=_,c=""}m=i.slice(o,o=n[f++]),a=ar(n[f++],e.cm.options)}}else for(var f=1;f<n.length;f+=2)e.addToken(e,i.slice(o,o=n[f]),ar(n[f+1],e.cm.options))}function fr(t,e){return 0==e.from.ch&&0==e.to.ch&&""==ei(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function mr(t,e,n,r){function i(t){return n?n[t]:null}function o(t,n,i){Zn(t,n,i,r),Vr(t,"change",t,e)}var a=e.from,s=e.to,l=e.text,c=xr(t,a.line),u=xr(t,s.line),d=ei(l),h=i(l.length-1),p=s.line-a.line;if(fr(t,e)){for(var f=0,m=[];f<l.length-1;++f)m.push(new Ro(l[f],i(f),r));o(u,u.text,h),p&&t.remove(a.line,p),m.length&&t.insert(a.line,m)}else if(c==u)if(1==l.length)o(c,c.text.slice(0,a.ch)+d+c.text.slice(s.ch),h);else{for(var m=[],f=1;f<l.length-1;++f)m.push(new Ro(l[f],i(f),r));m.push(new Ro(d+c.text.slice(s.ch),h,r)),o(c,c.text.slice(0,a.ch)+l[0],i(0)),t.insert(a.line+1,m)}else if(1==l.length)o(c,c.text.slice(0,a.ch)+l[0]+u.text.slice(s.ch),i(0)),t.remove(a.line+1,p);else{o(c,c.text.slice(0,a.ch)+l[0],i(0)),o(u,d+u.text.slice(s.ch),h);for(var f=1,m=[];f<l.length-1;++f)m.push(new Ro(l[f],i(f),r));p>1&&t.remove(a.line+1,p-1),t.insert(a.line+1,m)}Vr(t,"change",t,e)}function gr(t){this.lines=t,this.parent=null;for(var e=0,n=0;e<t.length;++e)t[e].parent=this,n+=t[e].height;this.height=n}function vr(t){this.children=t;for(var e=0,n=0,r=0;r<t.length;++r){var i=t[r];e+=i.chunkSize(),n+=i.height,i.parent=this}this.size=e,this.height=n,this.parent=null}function br(t,e,n){function r(t,i,o){if(t.linked)for(var a=0;a<t.linked.length;++a){var s=t.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;n&&!l||(e(s.doc,l),r(s.doc,t,l))}}}r(t,null,!0)}function yr(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,a(t),n(t),t.options.lineWrapping||p(t),t.options.mode=e.modeOption,re(t)}function xr(t,e){if(e-=t.first,e<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(e<o){n=i;break}e-=o}return n.lines[e]}function wr(t,e,n){var r=[],i=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;i==n.line&&(o=o.slice(0,n.ch)),i==e.line&&(o=o.slice(e.ch)),r.push(o),++i}),r}function _r(t,e,n){var r=[];return t.iter(e,n,function(t){r.push(t.text)}),r}function kr(t,e){var n=e-t.height;if(n)for(var r=t;r;r=r.parent)r.height+=n}function Cr(t){if(null==t.parent)return null;for(var e=t.parent,n=ni(e.lines,t),r=e.parent;r;e=r,r=r.parent)for(var i=0;r.children[i]!=e;++i)n+=r.children[i].chunkSize();return n+e.first}function Sr(t,e){var n=t.first;t:do{for(var r=0;r<t.children.length;++r){var i=t.children[r],o=i.height;if(e<o){t=i;continue t}e-=o,n+=i.chunkSize()}return n}while(!t.lines);for(var r=0;r<t.lines.length;++r){var a=t.lines[r],s=a.height;if(e<s)break;e-=s}return n+r}function Dr(t){t=qn(t);for(var e=0,n=t.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==t)break;e+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(var r=0;r<o.children.length;++r){var a=o.children[r];if(a==n)break;e+=a.height}return e}function Tr(t){var e=t.order;return null==e&&(e=t.order=_a(t.text)),e}function Er(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function $r(t,e){var n={from:W(e.from),to:bo(e),text:wr(t,e.from,e.to)};return Pr(t,n,e.from.line,e.to.line+1),br(t,function(t){Pr(t,n,e.from.line,e.to.line+1)},!0),n}function Mr(t){for(;t.length;){var e=ei(t);if(!e.ranges)break;t.pop()}}function Lr(t,e){return e?(Mr(t.done),ei(t.done)):t.done.length&&!ei(t.done).ranges?ei(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),ei(t.done)):void 0}function Br(t,e,n,r){var i=t.history;i.undone.length=0;var o,a=+new Date;if((i.lastOp==r||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&i.lastModTime>a-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(o=Lr(i,i.lastOp==r))){var s=ei(o.changes);0==ao(e.from,e.to)&&0==ao(e.from,s.to)?s.to=bo(e):o.changes.push($r(t,e))}else{var l=ei(i.done);for(l&&l.ranges||Nr(t.sel,i.done),o={changes:[$r(t,e)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=a,i.lastOp=r,i.lastOrigin=i.lastSelOrigin=e.origin,s||Qo(t,"historyAdded")}function Ar(t,e,n,r){var i=e.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function Ir(t,e,n,r){var i=t.history,o=r&&r.origin;n==i.lastOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Ar(t,o,ei(i.done),e))?i.done[i.done.length-1]=e:Nr(e,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastOp=n,r&&r.clearRedo!==!1&&Mr(i.undone)}function Nr(t,e){var n=ei(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Pr(t,e,n,r){var i=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,r),function(n){n.markedSpans&&((i||(i=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function Fr(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Or(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var r=0,i=[];r<e.text.length;++r)i.push(Fr(n[r]));return i}function Rr(t,e,n){for(var r=0,i=[];r<t.length;++r){var o=t[r];if(o.ranges)i.push(n?X.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];i.push({changes:s});for(var l=0;l<a.length;++l){var c,u=a[l];if(s.push({from:u.from,to:u.to,text:u.text}),e)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&ni(e,Number(c[1]))>-1&&(ei(s)[d]=u[d],delete u[d])}}}return i}function zr(t,e,n,r){n<t.line?t.line+=r:e<t.line&&(t.line=e,t.ch=0)}function jr(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i],a=!0;if(o.ranges){o.copied||(o=t[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)zr(o.ranges[s].anchor,e,n,r),zr(o.ranges[s].head,e,n,r)}else{for(var s=0;s<o.changes.length;++s){var l=o.changes[s];if(n<l.from.line)l.from=oo(l.from.line+r,l.from.ch),l.to=oo(l.to.line+r,l.to.ch);else if(e<=l.to.line){a=!1;break}}a||(t.splice(0,i+1),i=0)}}}function qr(t,e){var n=e.from.line,r=e.to.line,i=e.text.length-(r-n)-1;jr(t.done,n,r,i),jr(t.undone,n,r,i)}function Hr(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Wr(t){return t.target||t.srcElement}function Ur(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),Qi&&t.ctrlKey&&1==e&&(e=3),e}function Vr(t,e){function n(t){return function(){t.apply(null,i)}}var r=t._handlers&&t._handlers[e];if(r){var i=Array.prototype.slice.call(arguments,2);Vo||(++Jo,Vo=[],setTimeout(Xr,0));for(var o=0;o<r.length;++o)Vo.push(n(r[o]))}}function Xr(){--Jo;var t=Vo;Vo=null;for(var e=0;e<t.length;++e)t[e]()}function Kr(t,e,n){return Qo(t,n||e.type,t,e),Hr(e)||e.codemirrorIgnore}function Gr(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),r=0;r<e.length;++r)ni(n,e[r])==-1&&n.push(e[r])}function Yr(t,e){var n=t._handlers&&t._handlers[e];return n&&n.length>0}function Zr(t){t.prototype.on=function(t,e){Yo(this,t,e)},t.prototype.off=function(t,e){Zo(this,t,e)}}function Qr(){this.id=null}function Jr(t,e,n){for(var r=0,i=0;;){var o=t.indexOf("\t",r);o==-1&&(o=t.length);var a=o-r;if(o==t.length||i+a>=e)return r+Math.min(a,e-i);if(i+=o-r,i+=n-i%n,r=o+1,i>=e)return r}}function ti(t){for(;aa.length<=t;)aa.push(ei(aa)+" ");return aa[t]}function ei(t){return t[t.length-1]}function ni(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}function ri(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r],r);return n}function ii(t,e){var n;if(Object.create)n=Object.create(t);else{var r=function(){};r.prototype=t,n=new r}return e&&oi(e,n),n}function oi(t,e,n){e||(e={});for(var r in t)!t.hasOwnProperty(r)||n===!1&&e.hasOwnProperty(r)||(e[r]=t[r]);return e}function ai(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function si(t,e){return e?!!(e.source.indexOf("\\w")>-1&&ua(t))||e.test(t):ua(t)}function li(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function ci(t){return t.charCodeAt(0)>=768&&da.test(t)}function ui(t,e,n,r){var i=document.createElement(t);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof e)i.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function di(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function hi(t,e){return di(t).appendChild(e)}function pi(t,e){if(t.contains)return t.contains(e);for(;e=e.parentNode;)if(e==t)return!0}function fi(){return document.activeElement}function mi(t){return new RegExp("\\b"+t+"\\b\\s*")}function gi(t,e){var n=mi(e);n.test(t.className)&&(t.className=t.className.replace(n,""))}function vi(t,e){mi(e).test(t.className)||(t.className+=" "+e)}function bi(t,e){for(var n=t.split(" "),r=0;r<n.length;r++)n[r]&&!mi(n[r]).test(e)&&(e+=" "+n[r]);return e}function yi(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),n=0;n<e.length;n++){var r=e[n].CodeMirror;r&&t(r)}}function xi(){ma||(wi(),ma=!0)}function wi(){var t;Yo(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,ha=null,yi(be)},100))}),Yo(window,"blur",function(){yi(je)})}function _i(t){if(null!=ha)return ha;var e=ui("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return hi(t,e),e.offsetWidth&&(ha=e.offsetHeight-e.clientHeight),ha||0}function ki(t){if(null==pa){var e=ui("span","​");hi(t,ui("span",[e,document.createTextNode("x")])),
0!=t.firstChild.offsetHeight&&(pa=e.offsetWidth<=1&&e.offsetHeight>2&&!(zi&&ji<8))}return pa?ui("span","​"):ui("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Ci(t){if(null!=fa)return fa;var e=hi(t,document.createTextNode("AخA")),n=la(e,0,1).getBoundingClientRect();if(n.left==n.right)return!1;var r=la(e,1,2).getBoundingClientRect();return fa=r.right-n.right<3}function Si(t,e,n,r){if(!t)return r(e,n,"ltr");for(var i=!1,o=0;o<t.length;++o){var a=t[o];(a.from<n&&a.to>e||e==n&&a.to==e)&&(r(Math.max(a.from,e),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(e,n,"ltr")}function Di(t){return t.level%2?t.to:t.from}function Ti(t){return t.level%2?t.from:t.to}function Ei(t){var e=Tr(t);return e?Di(e[0]):0}function $i(t){var e=Tr(t);return e?Ti(ei(e)):t.text.length}function Mi(t,e){var n=xr(t.doc,e),r=qn(n);r!=n&&(e=Cr(r));var i=Tr(r),o=i?i[0].level%2?$i(r):Ei(r):0;return oo(e,o)}function Li(t,e){for(var n,r=xr(t.doc,e);n=zn(r);)r=n.find(1,!0).line,e=null;var i=Tr(r),o=i?i[0].level%2?Ei(r):$i(r):r.text.length;return oo(null==e?Cr(r):e,o)}function Bi(t,e,n){var r=t[0].level;return e==r||n!=r&&e<n}function Ai(t,e){wa=null;for(var n,r=0;r<t.length;++r){var i=t[r];if(i.from<e&&i.to>e)return r;if(i.from==e||i.to==e){if(null!=n)return Bi(t,i.level,t[n].level)?(i.from!=i.to&&(wa=n),r):(i.from!=i.to&&(wa=r),n);n=r}}return n}function Ii(t,e,n,r){if(!r)return e+n;do e+=n;while(e>0&&ci(t.text.charAt(e)));return e}function Ni(t,e,n,r){var i=Tr(t);if(!i)return Pi(t,e,n,r);for(var o=Ai(i,e),a=i[o],s=Ii(t,e,a.level%2?-n:n,r);;){if(s>a.from&&s<a.to)return s;if(s==a.from||s==a.to)return Ai(i,s)==o?s:(a=i[o+=n],n>0==a.level%2?a.to:a.from);if(a=i[o+=n],!a)return null;s=n>0==a.level%2?Ii(t,a.to,-1,r):Ii(t,a.from,1,r)}}function Pi(t,e,n,r){var i=e+n;if(r)for(;i>0&&ci(t.text.charAt(i));)i+=n;return i<0||i>t.text.length?null:i}var Fi=/gecko\/\d/i.test(navigator.userAgent),Oi=/MSIE \d/.test(navigator.userAgent),Ri=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),zi=Oi||Ri,ji=zi&&(Oi?document.documentMode||6:Ri[1]),qi=/WebKit\//.test(navigator.userAgent),Hi=qi&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Wi=/Chrome\//.test(navigator.userAgent),Ui=/Opera\//.test(navigator.userAgent),Vi=/Apple Computer/.test(navigator.vendor),Xi=/KHTML\//.test(navigator.userAgent),Ki=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Gi=/PhantomJS/.test(navigator.userAgent),Yi=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Zi=Yi||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Qi=Yi||/Mac/.test(navigator.platform),Ji=/win/i.test(navigator.platform),to=Ui&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);to&&(to=Number(to[1])),to&&to>=15&&(Ui=!1,qi=!0);var eo=Qi&&(Hi||Ui&&(null==to||to<12.11)),no=Fi||zi&&ji>=9,ro=!1,io=!1,oo=t.Pos=function(t,e){return this instanceof oo?(this.line=t,void(this.ch=e)):new oo(t,e)},ao=t.cmpPos=function(t,e){return t.line-e.line||t.ch-e.ch};X.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],r=t.ranges[e];if(0!=ao(n.anchor,r.anchor)||0!=ao(n.head,r.head))return!1}return!0},deepCopy:function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new K(W(this.ranges[e].anchor),W(this.ranges[e].head));return new X(t,this.primIndex)},somethingSelected:function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},contains:function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ao(e,r.from())>=0&&ao(t,r.to())<=0)return n}return-1}},K.prototype={from:function(){return V(this.anchor,this.head)},to:function(){return U(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var so,lo,co,uo={left:0,right:0,top:0,bottom:0},ho=0,po=0,fo=0,mo=null;zi?mo=-.53:Fi?mo=15:Wi?mo=-.7:Vi&&(mo=-1/3);var go,vo=null,bo=t.changeEnd=function(t){return t.text?oo(t.from.line+t.text.length-1,ei(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};t.prototype={constructor:t,focus:function(){window.focus(),fe(this),de(this)},setOption:function(t,e){var n=this.options,r=n[t];n[t]==e&&"mode"!=t||(n[t]=e,xo.hasOwnProperty(t)&&Qt(this,xo[t])(this,e,r))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||"string"!=typeof e[n]&&e[n].name==t)return e.splice(n,1),!0},addOverlay:Jt(function(e,n){var r=e.token?e:t.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:e,opaque:n&&n.opaque}),this.state.modeGen++,re(this)}),removeOverlay:Jt(function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var r=e[n].modeSpec;if(r==t||"string"==typeof t&&r.name==t)return e.splice(n,1),this.state.modeGen++,void re(this)}}),indentLine:Jt(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),tt(this.doc,t)&&un(this,t,e,n)}),indentSelection:Jt(function(t){for(var e=this.doc.sel.ranges,n=-1,r=0;r<e.length;r++){var i=e[r];if(i.empty())i.head.line>n&&(un(this,i.head.line,t,!0),n=i.head.line,r==this.doc.sel.primIndex&&ln(this));else{var o=Math.max(n,i.from().line),a=i.to();n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=o;s<n;++s)un(this,s,t)}}}),getTokenAt:function(t,e){var n=this.doc;t=Q(n,t);for(var r=_t(this,t.line,e),i=this.doc.mode,o=xr(n,t.line),a=new Io(o.text,this.options.tabSize);a.pos<t.ch&&!a.eol();){a.start=a.pos;var s=er(i,a,r)}return{start:a.start,end:a.pos,string:a.current(),type:s||null,state:r}},getTokenTypeAt:function(t){t=Q(this.doc,t);var e,n=ir(this,xr(this.doc,t.line)),r=0,i=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){e=n[2*a+2];break}r=a+1}}var s=e?e.indexOf("cm-overlay "):-1;return s<0?e:0==s?null:e.slice(0,s-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var n=[];if(!Do.hasOwnProperty(e))return Do;var r=Do[e],i=this.getModeAt(t);if("string"==typeof i[e])r[i[e]]&&n.push(r[i[e]]);else if(i[e])for(var o=0;o<i[e].length;o++){var a=r[i[e][o]];a&&n.push(a)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var o=0;o<r._global.length;o++){var s=r._global[o];s.pred(i,this)&&ni(n,s.val)==-1&&n.push(s.val)}return n},getStateAfter:function(t,e){var n=this.doc;return t=Z(n,null==t?n.first+n.size-1:t),_t(this,t+1,e)},cursorCoords:function(t,e){var n,r=this.doc.sel.primary();return n=null==t?r.head:"object"==typeof t?Q(this.doc,t):t?r.from():r.to(),qt(this,n,e||"page")},charCoords:function(t,e){return jt(this,Q(this.doc,t),e||"page")},coordsChar:function(t,e){return t=zt(this,t,e||"page"),Ut(this,t.left,t.top)},lineAtHeight:function(t,e){return t=zt(this,{top:t,left:0},e||"page").top,Sr(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var n=!1,r=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>r&&(t=r,n=!0);var i=xr(this.doc,t);return Rt(this,i,{top:0,left:0},e||"page").top+(n?this.doc.height-Dr(i):0)},defaultTextHeight:function(){return Xt(this.display)},defaultCharWidth:function(){return Kt(this.display)},setGutterMarker:Jt(function(t,e,n){return dn(this.doc,t,"gutter",function(t){var r=t.gutterMarkers||(t.gutterMarkers={});return r[e]=n,!n&&li(r)&&(t.gutterMarkers=null),!0})}),clearGutter:Jt(function(t){var e=this,n=e.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&(n.gutterMarkers[t]=null,ie(e,r,"gutter"),li(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineWidget:Jt(function(t,e,n){return Yn(this,t,e,n)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!tt(this.doc,t))return null;var e=t;if(t=xr(this.doc,t),!t)return null}else{var e=Cr(t);if(null==e)return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,r,i){var o=this.display;t=qt(this,Q(this.doc,t));var a=t.bottom,s=t.left;if(e.style.position="absolute",o.sizer.appendChild(e),"over"==r)a=t.top;else if("above"==r||"near"==r){var l=Math.max(o.wrapper.clientHeight,this.doc.height),c=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?a=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(a=t.bottom),s+e.offsetWidth>c&&(s=c-e.offsetWidth)}e.style.top=a+"px",e.style.left=e.style.right="","right"==i?(s=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=s+"px"),n&&on(this,s,a,s+e.offsetWidth,a+e.offsetHeight)},triggerOnKeyDown:Jt(Pe),triggerOnKeyPress:Jt(Re),triggerOnKeyUp:Jt(Oe),execCommand:function(t){if($o.hasOwnProperty(t))return $o[t](this)},findPosH:function(t,e,n,r){var i=1;e<0&&(i=-1,e=-e);for(var o=0,a=Q(this.doc,t);o<e&&(a=pn(this.doc,a,i,n,r),!a.hitSide);++o);return a},moveH:Jt(function(t,e){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?pn(n.doc,r.head,t,e,n.options.rtlMoveVisually):t<0?r.from():r.to()},ia)}),deleteH:Jt(function(t,e){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):hn(this,function(n){var i=pn(r,n.head,t,e,!1);return t<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(t,e,n,r){var i=1,o=r;e<0&&(i=-1,e=-e);for(var a=0,s=Q(this.doc,t);a<e;++a){var l=qt(this,s,"div");if(null==o?o=l.left:l.left=o,s=fn(this,l,i,n),s.hitSide)break}return s},moveV:Jt(function(t,e){var n=this,r=this.doc,i=[],o=!n.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return t<0?a.from():a.to();var s=qt(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=fn(n,s,t,e);return"page"==e&&a==r.sel.primary()&&sn(n,null,jt(n,l,"div").top-s.top),l},ia),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?vi(this.display.cursorDiv,"CodeMirror-overwrite"):gi(this.display.cursorDiv,"CodeMirror-overwrite"),Qo(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return fi()==this.display.input},scrollTo:Jt(function(t,e){null==t&&null==e||cn(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)}),getScrollInfo:function(){var t=this.display.scroller,e=ta;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-e,width:t.scrollWidth-e,clientHeight:t.clientHeight-e,clientWidth:t.clientWidth-e}},scrollIntoView:Jt(function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:oo(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)cn(this),this.curOp.scrollToPos=t;else{var n=an(this,Math.min(t.from.left,t.to.left),Math.min(t.from.top,t.to.top)-t.margin,Math.max(t.from.right,t.to.right),Math.max(t.from.bottom,t.to.bottom)+t.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:Jt(function(t,e){function n(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}var r=this;null!=t&&(r.display.wrapper.style.width=n(t)),null!=e&&(r.display.wrapper.style.height=n(e)),r.options.lineWrapping&&Nt(this);var i=r.display.viewFrom;r.doc.iter(i,r.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){ie(r,i,"widget");break}++i}),r.curOp.forceUpdate=!0,Qo(r,"refresh",this)}),operation:function(t){return Zt(this,t)},refresh:Jt(function(){var t=this.display.cachedTextHeight;re(this),this.curOp.forceUpdate=!0,Pt(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),d(this),(null==t||Math.abs(t-Xt(this.display))>.5)&&a(this),Qo(this,"refresh",this)}),swapDoc:Jt(function(t){var e=this.doc;return e.cm=null,yr(this,t),Pt(this),pe(this),this.scrollTo(t.scrollLeft,t.scrollTop),Vr(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Zr(t);var yo=t.defaults={},xo=t.optionHandlers={},wo=t.Init={toString:function(){return"CodeMirror.Init"}};gn("value","",function(t,e){t.setValue(e)},!0),gn("mode",null,function(t,e){t.doc.modeOption=e,n(t)},!0),gn("indentUnit",2,n,!0),gn("indentWithTabs",!1),gn("smartIndent",!0),gn("tabSize",4,function(t){r(t),Pt(t),re(t)},!0),gn("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),t.refresh()},!0),gn("specialCharPlaceholder",lr,function(t){t.refresh()},!0),gn("electricChars",!0),gn("rtlMoveVisually",!Ji),gn("wholeLineUpdateBefore",!0),gn("theme","default",function(t){l(t),c(t)},!0),gn("keyMap","default",s),gn("extraKeys",null),gn("lineWrapping",!1,i,!0),gn("gutters",[],function(t){f(t.options),c(t)},!0),gn("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?_(t.display)+"px":"0",t.refresh()},!0),gn("coverGutterNextToScrollbar",!1,v,!0),gn("lineNumbers",!1,function(t){f(t.options),c(t)},!0),gn("firstLineNumber",1,c,!0),gn("lineNumberFormatter",function(t){return t},c,!0),gn("showCursorWhenSelecting",!1,mt,!0),gn("resetSelectionOnContextMenu",!0),gn("readOnly",!1,function(t,e){"nocursor"==e?(je(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||pe(t))}),gn("disableInput",!1,function(t,e){e||pe(t)},!0),gn("dragDrop",!0),gn("cursorBlinkRate",530),gn("cursorScrollMargin",0),gn("cursorHeight",1,mt,!0),gn("singleCursorHeightPerLine",!0,mt,!0),gn("workTime",100),gn("workDelay",100),gn("flattenSpans",!0,r,!0),gn("addModeClass",!1,r,!0),gn("pollInterval",100),gn("undoDepth",200,function(t,e){t.doc.history.undoDepth=e}),gn("historyEventDelay",1250),gn("viewportMargin",10,function(t){t.refresh()},!0),gn("maxHighlightLength",1e4,r,!0),gn("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),gn("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),gn("autofocus",null);var _o=t.modes={},ko=t.mimeModes={};t.defineMode=function(e,n){if(t.defaults.mode||"null"==e||(t.defaults.mode=e),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}_o[e]=n},t.defineMIME=function(t,e){ko[t]=e},t.resolveMode=function(e){if("string"==typeof e&&ko.hasOwnProperty(e))e=ko[e];else if(e&&"string"==typeof e.name&&ko.hasOwnProperty(e.name)){var n=ko[e.name];"string"==typeof n&&(n={name:n}),e=ii(n,e),e.name=n.name}else if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return t.resolveMode("application/xml");return"string"==typeof e?{name:e}:e||{name:"null"}},t.getMode=function(e,n){var n=t.resolveMode(n),r=_o[n.name];if(!r)return t.getMode(e,"text/plain");var i=r(e,n);if(Co.hasOwnProperty(n.name)){var o=Co[n.name];for(var a in o)o.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=o[a])}if(i.name=n.name,n.helperType&&(i.helperType=n.helperType),n.modeProps)for(var a in n.modeProps)i[a]=n.modeProps[a];return i},t.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),t.defineMIME("text/plain","null");var Co=t.modeExtensions={};t.extendMode=function(t,e){var n=Co.hasOwnProperty(t)?Co[t]:Co[t]={};oi(e,n)},t.defineExtension=function(e,n){t.prototype[e]=n},t.defineDocExtension=function(t,e){Ho.prototype[t]=e},t.defineOption=gn;var So=[];t.defineInitHook=function(t){So.push(t)};var Do=t.helpers={};t.registerHelper=function(e,n,r){Do.hasOwnProperty(e)||(Do[e]=t[e]={_global:[]}),Do[e][n]=r},t.registerGlobalHelper=function(e,n,r,i){t.registerHelper(e,n,i),Do[e]._global.push({pred:r,val:i})};var To=t.copyState=function(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},Eo=t.startState=function(t,e,n){return!t.startState||t.startState(e,n)};t.innerMode=function(t,e){for(;t.innerMode;){var n=t.innerMode(e);if(!n||n.mode==t)break;e=n.state,t=n.mode}return n||{mode:t,state:e}};var $o=t.commands={selectAll:function(t){t.setSelection(oo(t.firstLine(),0),oo(t.lastLine()),na)},singleSelection:function(t){t.setSelection(t.getCursor("anchor"),t.getCursor("head"),na)},killLine:function(t){hn(t,function(e){if(e.empty()){var n=xr(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:oo(e.head.line+1,0)}:{from:e.head,to:oo(e.head.line,n)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){hn(t,function(e){return{from:oo(e.from().line,0),to:Q(t.doc,oo(e.to().line+1,0))}})},delLineLeft:function(t){hn(t,function(t){return{from:oo(t.from().line,0),to:t.from()}})},undo:function(t){t.undo()},redo:function(t){t.redo()},undoSelection:function(t){t.undoSelection()},redoSelection:function(t){t.redoSelection()},goDocStart:function(t){t.extendSelection(oo(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(oo(t.lastLine()))},goLineStart:function(t){t.extendSelectionsBy(function(e){return Mi(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){t.extendSelectionsBy(function(e){var n=Mi(t,e.head.line),r=t.getLineHandle(n.line),i=Tr(r);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=e.head.line==n.line&&e.head.ch<=o&&e.head.ch;return oo(n.line,a?0:o)}return n},{origin:"+move",bias:1})},goLineEnd:function(t){t.extendSelectionsBy(function(e){return Li(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")},ia)},goLineLeft:function(t){t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")},ia)},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),r=t.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=oa(t.getLine(o.line),o.ch,r);e.push(new Array(r-a%r+1).join(" "))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){Zt(t,function(){for(var e=t.listSelections(),n=[],r=0;r<e.length;r++){var i=e[r].head,o=xr(t.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new oo(i.line,i.ch-1)),i.ch>0)i=new oo(i.line,i.ch+1),t.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),oo(i.line,i.ch-2),i,"+transpose");else if(i.line>t.doc.first){var a=xr(t.doc,i.line-1).text;a&&t.replaceRange(o.charAt(0)+"\n"+a.charAt(a.length-1),oo(i.line-1,a.length-1),oo(i.line,1),"+transpose")}n.push(new K(i,i))}t.setSelections(n)})},newlineAndIndent:function(t){Zt(t,function(){for(var e=t.listSelections().length,n=0;n<e;n++){var r=t.listSelections()[n];t.replaceRange("\n",r.anchor,r.head,"+input"),t.indentLine(r.from().line+1,null,!0),ln(t)}})},toggleOverwrite:function(t){t.toggleOverwrite()}},Mo=t.keyMap={};Mo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Mo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Mo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},Mo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Mo.default=Qi?Mo.macDefault:Mo.pcDefault;var Lo=t.lookupKey=function(t,e,n){function r(e){e=vn(e);var i=e[t];if(i===!1)return"stop";if(null!=i&&n(i))return!0;if(e.nofallthrough)return"stop";var o=e.fallthrough;if(null==o)return!1;if("[object Array]"!=Object.prototype.toString.call(o))return r(o);for(var a=0;a<o.length;++a){var s=r(o[a]);if(s)return s}return!1}for(var i=0;i<e.length;++i){var o=r(e[i]);if(o)return"stop"!=o}},Bo=t.isModifierKey=function(t){var e=xa[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e},Ao=t.keyName=function(t,e){if(Ui&&34==t.keyCode&&t.char)return!1;var n=xa[t.keyCode];return null!=n&&!t.altGraphKey&&(t.altKey&&(n="Alt-"+n),(eo?t.metaKey:t.ctrlKey)&&(n="Ctrl-"+n),(eo?t.ctrlKey:t.metaKey)&&(n="Cmd-"+n),!e&&t.shiftKey&&(n="Shift-"+n),n)};t.fromTextArea=function(e,n){function r(){e.value=l.getValue()}if(n||(n={}),n.value=e.value,!n.tabindex&&e.tabindex&&(n.tabindex=e.tabindex),!n.placeholder&&e.placeholder&&(n.placeholder=e.placeholder),null==n.autofocus){var i=fi();n.autofocus=i==e||null!=e.getAttribute("autofocus")&&i==document.body}if(e.form&&(Yo(e.form,"submit",r),!n.leaveSubmitMethodAlone)){var o=e.form,a=o.submit;try{var s=o.submit=function(){r(),o.submit=a,o.submit(),o.submit=s}}catch(t){}}e.style.display="none";var l=t(function(t){e.parentNode.insertBefore(t,e.nextSibling)},n);return l.save=r,l.getTextArea=function(){return e},l.toTextArea=function(){r(),e.parentNode.removeChild(l.getWrapperElement()),e.style.display="",e.form&&(Zo(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=a))},l};var Io=t.StringStream=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Io.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t)var n=e==t;else var n=e&&(t.test?t.test(e):t(e));if(n)return++this.pos,e},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=oa(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?oa(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return oa(this.string,null,this.tabSize)-(this.lineStart?oa(this.string,this.lineStart,this.tabSize):0)},match:function(t,e,n){if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&e!==!1&&(this.pos+=r[0].length),r)}var i=function(t){return n?t.toLowerCase():t},o=this.string.substr(this.pos,t.length);if(i(o)==i(t))return e!==!1&&(this.pos+=t.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}}};var No=t.TextMarker=function(t,e){this.lines=[],this.type=e,this.doc=t};Zr(No),No.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Gt(t),Yr(this,"clear")){var n=this.find();n&&Vr(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Cn(a.markedSpans,this);t&&!this.collapsed?ie(t,Cr(a),"text"):t&&(null!=s.to&&(i=Cr(a)),null!=s.from&&(r=Cr(a))),a.markedSpans=Sn(a.markedSpans,s),null==s.from&&this.collapsed&&!Vn(this.doc,a)&&t&&kr(a,Xt(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var o=0;o<this.lines.length;++o){var l=qn(this.lines[o]),c=h(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=r&&t&&this.collapsed&&re(t,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&ht(t.doc)),t&&Vr(t,"markerCleared",t,this),e&&Yt(t),this.parent&&this.parent.clear()}},No.prototype.find=function(t,e){null==t&&"bookmark"==this.type&&(t=1);for(var n,r,i=0;i<this.lines.length;++i){var o=this.lines[i],a=Cn(o.markedSpans,this);if(null!=a.from&&(n=oo(e?o:Cr(o),a.from),t==-1))return n;if(null!=a.to&&(r=oo(e?o:Cr(o),a.to),1==t))return r}return n&&{from:n,to:r}},No.prototype.changed=function(){var t=this.find(-1,!0),e=this,n=this.doc.cm;t&&n&&Zt(n,function(){var r=t.line,i=Cr(t.line),o=Mt(n,i);if(o&&(It(o),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!Vn(e.doc,r)&&null!=e.height){var a=e.height;e.height=null;var s=Gn(e)-a;s&&kr(r,r.height+s)}})},No.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&ni(e.maybeHiddenMarkers,this)!=-1||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},No.prototype.detachLine=function(t){if(this.lines.splice(ni(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}};var Po=0,Fo=t.SharedTextMarker=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};Zr(Fo),Fo.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();Vr(this,"clear")}},Fo.prototype.find=function(t,e){return this.primary.find(t,e)};var Oo=t.LineWidget=function(t,e,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=t,this.node=e};Zr(Oo),Oo.prototype.clear=function(){var t=this.cm,e=this.line.widgets,n=this.line,r=Cr(n);if(null!=r&&e){for(var i=0;i<e.length;++i)e[i]==this&&e.splice(i--,1);e.length||(n.widgets=null);var o=Gn(this);Zt(t,function(){Kn(t,n,-o),ie(t,r,"widget"),kr(n,Math.max(0,n.height-o))})}},Oo.prototype.changed=function(){var t=this.height,e=this.cm,n=this.line;this.height=null;var r=Gn(this)-t;r&&Zt(e,function(){e.curOp.forceUpdate=!0,Kn(e,n,r),kr(n,n.height+r)})};var Ro=t.Line=function(t,e,n){this.text=t,In(this,e),this.height=n?n(this):1};Zr(Ro),Ro.prototype.lineNo=function(){return Cr(this)};var zo={},jo={};gr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,r=t+e;n<r;++n){var i=this.lines[n];this.height-=i.height,Qn(i),Vr(i,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var r=0;r<e.length;++r)e[r].parent=this},iterN:function(t,e,n){for(var r=t+e;t<r;++t)if(n(this.lines[t]))return!0}},vr.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(t<i){var o=Math.min(e,i-t),a=r.height;if(r.removeInner(t,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(e-=o))break;t=0}else t-=i}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof gr))){var s=[];this.collapse(s),this.children=[new gr(s)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<=o){if(i.insertInner(t,e,n),i.lines&&i.lines.length>50){for(;i.lines.length>50;){var a=i.lines.splice(i.lines.length-25,25),s=new gr(a);i.height-=s.height,this.children.splice(r+1,0,s),s.parent=this}this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new vr(e);if(t.parent){t.size-=n.size,t.height-=n.height;var r=ni(t.parent.children,t);t.parent.children.splice(r+1,0,n)}else{var i=new vr(t.children);i.parent=t,t.children=[i,n],t=i}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<o){var a=Math.min(e,o-t);if(i.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=o}}};var qo=0,Ho=t.Doc=function(t,e,n){if(!(this instanceof Ho))return new Ho(t,e,n);null==n&&(n=0),vr.call(this,[new gr([new Ro("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=oo(n,0);this.sel=Y(r),this.history=new Er(null),this.id=++qo,this.modeOption=e,"string"==typeof t&&(t=va(t)),mr(this,{from:r,to:r,text:t}),ct(this,Y(r),na)};Ho.prototype=ii(vr.prototype,{constructor:Ho,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,r=0;r<e.length;++r)n+=e[r].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=_r(this,this.first,this.first+this.size);return t===!1?e:e.join(t||"\n")},setValue:te(function(t){var e=oo(this.first,0),n=this.first+this.size-1;Ge(this,{from:e,
to:oo(n,xr(this,n).text.length),text:va(t),origin:"setValue"},!0),ct(this,Y(e))}),replaceRange:function(t,e,n,r){e=Q(this,e),n=n?Q(this,n):e,en(this,t,e,n,r)},getRange:function(t,e,n){var r=wr(this,Q(this,t),Q(this,e));return n===!1?r:r.join(n||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(tt(this,t))return xr(this,t)},getLineNumber:function(t){return Cr(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=xr(this,t)),qn(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return Q(this,t)},getCursor:function(t){var e,n=this.sel.primary();return e=null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||"to"==t||t===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:te(function(t,e,n){at(this,Q(this,"number"==typeof t?oo(t,e||0):t),null,n)}),setSelection:te(function(t,e,n){at(this,Q(this,t),Q(this,e||t),n)}),extendSelection:te(function(t,e,n){rt(this,Q(this,t),e&&Q(this,e),n)}),extendSelections:te(function(t,e){it(this,et(this,t,e))}),extendSelectionsBy:te(function(t,e){it(this,ri(this.sel.ranges,t),e)}),setSelections:te(function(t,e,n){if(t.length){for(var r=0,i=[];r<t.length;r++)i[r]=new K(Q(this,t[r].anchor),Q(this,t[r].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),ct(this,G(i,e),n)}}),addSelection:te(function(t,e,n){var r=this.sel.ranges.slice(0);r.push(new K(Q(this,t),Q(this,e||t))),ct(this,G(r,r.length-1),n)}),getSelection:function(t){for(var e,n=this.sel.ranges,r=0;r<n.length;r++){var i=wr(this,n[r].from(),n[r].to());e=e?e.concat(i):i}return t===!1?e:e.join(t||"\n")},getSelections:function(t){for(var e=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=wr(this,n[r].from(),n[r].to());t!==!1&&(i=i.join(t||"\n")),e[r]=i}return e},replaceSelection:function(t,e,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=t;this.replaceSelections(r,e,n||"+input")},replaceSelections:te(function(t,e,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:va(t[o]),origin:n}}for(var s=e&&"end"!=e&&Xe(this,r,e),o=r.length-1;o>=0;o--)Ge(this,r[o]);s?lt(this,s):this.cm&&ln(this.cm)}),undo:te(function(){Ze(this,"undo")}),redo:te(function(){Ze(this,"redo")}),undoSelection:te(function(){Ze(this,"undo",!0)}),redoSelection:te(function(){Ze(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,r=0;r<t.done.length;r++)t.done[r].ranges||++e;for(var r=0;r<t.undone.length;r++)t.undone[r].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new Er(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Rr(this.history.done),undone:Rr(this.history.undone)}},setHistory:function(t){var e=this.history=new Er(this.history.maxGeneration);e.done=Rr(t.done.slice(0),null,!0),e.undone=Rr(t.undone.slice(0),null,!0)},addLineClass:te(function(t,e,n){return dn(this,t,"class",function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"wrapClass";if(t[r]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(t[r]))return!1;t[r]+=" "+n}else t[r]=n;return!0})}),removeLineClass:te(function(t,e,n){return dn(this,t,"class",function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"wrapClass",i=t[r];if(!i)return!1;if(null==n)t[r]=null;else{var o=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!o)return!1;var a=o.index+o[0].length;t[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),markText:function(t,e,n){return bn(this,Q(this,t),Q(this,e),n,"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared};return t=Q(this,t),bn(this,t,t,n,"bookmark")},findMarksAt:function(t){t=Q(this,t);var e=[],n=xr(this,t.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},findMarks:function(t,e,n){t=Q(this,t),e=Q(this,e);var r=[],i=t.line;return this.iter(t.line,e.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];i==t.line&&t.ch>l.to||null==l.from&&i!=t.line||i==e.line&&l.from>e.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&t.push(n[r].marker)}),t},posFromIndex:function(t){var e,n=this.first;return this.iter(function(r){var i=r.text.length+1;return i>t?(e=t,!0):(t-=i,void++n)}),Q(this,oo(n,e))},indexFromPos:function(t){t=Q(this,t);var e=t.ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new Ho(_r(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var r=new Ho(_r(this,e,n),t.mode||this.modeOption,e);return t.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:t.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],wn(r,xn(this)),r},unlinkDoc:function(e){if(e instanceof t&&(e=e.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=this.linked[n];if(r.doc==e){this.linked.splice(n,1),e.unlinkDoc(this),_n(xn(this));break}}if(e.history==this.history){var i=[e.id];br(e,function(t){i.push(t.id)},!0),e.history=new Er(null),e.history.done=Rr(this.history.done,i),e.history.undone=Rr(this.history.undone,i)}},iterLinkedDocs:function(t){br(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Ho.prototype.eachLine=Ho.prototype.iter;var Wo="iter insert remove copy getEditor".split(" ");for(var Uo in Ho.prototype)Ho.prototype.hasOwnProperty(Uo)&&ni(Wo,Uo)<0&&(t.prototype[Uo]=function(t){return function(){return t.apply(this.doc,arguments)}}(Ho.prototype[Uo]));Zr(Ho);var Vo,Xo=t.e_preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},Ko=t.e_stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},Go=t.e_stop=function(t){Xo(t),Ko(t)},Yo=t.on=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var r=t._handlers||(t._handlers={}),i=r[e]||(r[e]=[]);i.push(n)}},Zo=t.off=function(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var r=t._handlers&&t._handlers[e];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}},Qo=t.signal=function(t,e){var n=t._handlers&&t._handlers[e];if(n)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)},Jo=0,ta=30,ea=t.Pass={toString:function(){return"CodeMirror.Pass"}},na={scroll:!1},ra={origin:"*mouse"},ia={origin:"+move"};Qr.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var oa=t.countColumn=function(t,e,n,r,i){null==e&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));for(var o=r||0,a=i||0;;){var s=t.indexOf("\t",o);if(s<0||s>=e)return a+(e-o);a+=s-o,a+=n-a%n,o=s+1}},aa=[""],sa=function(t){t.select()};Yi?sa=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:zi&&(sa=function(t){try{t.select()}catch(t){}}),[].indexOf&&(ni=function(t,e){return t.indexOf(e)}),[].map&&(ri=function(t,e){return t.map(e)});var la,ca=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ua=t.isWordChar=function(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||ca.test(t))},da=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;la=document.createRange?function(t,e,n){var r=document.createRange();return r.setEnd(t,n),r.setStart(t,e),r}:function(t,e,n){var r=document.body.createTextRange();return r.moveToElementText(t.parentNode),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",e),r},zi&&ji<11&&(fi=function(){try{return document.activeElement}catch(t){return document.body}});var ha,pa,fa,ma=!1,ga=function(){if(zi&&ji<9)return!1;var t=ui("div");return"draggable"in t||"dragDrop"in t}(),va=t.splitLines=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],r=t.length;e<=r;){var i=t.indexOf("\n",e);i==-1&&(i=t.length);var o=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),a=o.indexOf("\r");a!=-1?(n.push(o.slice(0,a)),e+=a+1):(n.push(o),e=i+1)}return n}:function(t){return t.split(/\r\n?|\n/)},ba=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},ya=function(){var t=ui("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),xa={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};t.keyNames=xa,function(){for(var t=0;t<10;t++)xa[t+48]=xa[t+96]=String(t);for(var t=65;t<=90;t++)xa[t]=String.fromCharCode(t);for(var t=1;t<=12;t++)xa[t+111]=xa[t+63235]="F"+t}();var wa,_a=function(){function t(t){return t<=247?n.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1773?r.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L"}function e(t,e,n){this.level=t,this.from=e,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,c="L";return function(n){if(!i.test(n))return!1;for(var r,u=n.length,d=[],h=0;h<u;++h)d.push(r=t(n.charCodeAt(h)));for(var h=0,p=c;h<u;++h){var r=d[h];"m"==r?d[h]=p:p=r}for(var h=0,f=c;h<u;++h){var r=d[h];"1"==r&&"r"==f?d[h]="n":a.test(r)&&(f=r,"r"==r&&(d[h]="R"))}for(var h=1,p=d[0];h<u-1;++h){var r=d[h];"+"==r&&"1"==p&&"1"==d[h+1]?d[h]="1":","!=r||p!=d[h+1]||"1"!=p&&"n"!=p||(d[h]=p),p=r}for(var h=0;h<u;++h){var r=d[h];if(","==r)d[h]="N";else if("%"==r){for(var m=h+1;m<u&&"%"==d[m];++m);for(var g=h&&"!"==d[h-1]||m<u&&"1"==d[m]?"1":"N",v=h;v<m;++v)d[v]=g;h=m-1}}for(var h=0,f=c;h<u;++h){var r=d[h];"L"==f&&"1"==r?d[h]="L":a.test(r)&&(f=r)}for(var h=0;h<u;++h)if(o.test(d[h])){for(var m=h+1;m<u&&o.test(d[m]);++m);for(var b="L"==(h?d[h-1]:c),y="L"==(m<u?d[m]:c),g=b||y?"L":"R",v=h;v<m;++v)d[v]=g;h=m-1}for(var x,w=[],h=0;h<u;)if(s.test(d[h])){var _=h;for(++h;h<u&&s.test(d[h]);++h);w.push(new e(0,_,h))}else{var k=h,C=w.length;for(++h;h<u&&"L"!=d[h];++h);for(var v=k;v<h;)if(l.test(d[v])){k<v&&w.splice(C,0,new e(1,k,v));var S=v;for(++v;v<h&&l.test(d[v]);++v);w.splice(C,0,new e(2,S,v)),k=v}else++v;k<h&&w.splice(C,0,new e(1,k,h))}return 1==w[0].level&&(x=n.match(/^\s+/))&&(w[0].from=x[0].length,w.unshift(new e(0,0,x[0].length))),1==ei(w).level&&(x=n.match(/\s+$/))&&(ei(w).to-=x[0].length,w.push(new e(0,u-x[0].length,u))),w[0].level!=ei(w).level&&w.push(new e(w[0].level,u,u)),w}}();return t.version="4.3.0",t}),define("codemirror",["codemirror/lib/codemirror"],function(t){return t}),define("autoSave",["jquery"],function(t){"use strict";var e,n,r,i;return n=void 0,i=void 0,r=void 0,e=function(){},e.prototype.bind=function(e,i){var o,a,s,l;o=t("#editorStatus"),n=e,this.form=i,r=this,t("[name=title]").on("input",function(){""!==t.trim(t(this).val())&&r.change(),window.localStorage&&localStorage.setItem("autoSaveTitle_"+location.pathname+location.search,t(this).val())}),t("[name=tags]").on("change",function(){""!==t.trim(t(this).val())&&r.change()}),a=t("#license"),a.length&&a.on("change",function(){return r.change()}),l=t(".reasons"),l.length&&l.on("click",function(){return r.change()}),s=t("input[name=noticeAnswerers]"),s.length&&s.on("change",function(){return r.change()}),n.change?n.change(function(){""!==t.trim(n.getVal())&&r.change(),window.localStorage&&window.localStorage.setItem("autoSaveContent_"+location.pathname+location.search,n.getVal())}):n.on("change",function(){""!==t.trim(n.getValue())&&r.change(),window.localStorage&&window.localStorage.setItem("autoSaveContent_"+location.pathname+location.search,n.getValue())}),t("#dropIt").unbind(),t("#dropIt").click(function(){t.post("/api/draft/"+t("#draftId").val()+"/delete",function(e){0===e.status?(o.html("已舍弃"),t("#draftId").val(""),window.localStorage&&localStorage.removeItem("autoSaveContent_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTitle_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTag_"+location.pathname)):o.html("舍弃失败"),t("#dropIt").addClass("hidden")})})},e.prototype.change=function(){var e;e=t("#editorStatus"),e.html("保存中...").removeClass("hidden"),t("#dropIt").addClass("hidden"),clearTimeout(i),i=setTimeout(function(){r.save()},4e3)},e.prototype.save=function(){var e,n,r;e=t("#editorStatus"),n=this,t("#answerIt, #publishIt").attr("disabled")||(r=new n.form,t.post("/api/"+r.type+"/draft/save",r,function(n){0===n.status?(e.html("已保存草稿"),t("#dropIt").data("id",n.data).removeClass("hidden"),t("#draftId").val(n.data),window.localStorage&&(window.localStorage.removeItem("autoSaveContent_"+location.pathname+location.search),window.localStorage.removeItem("autoSaveTitle_"+location.pathname+location.search))):e.html("保存失败"),t("#publishIt, #answerIt").removeAttr("disabled")}))},new e}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/python/python",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t){return new RegExp("^(("+t.join(")|(")+"))\\b")}function n(t){return t.scopes[t.scopes.length-1]}var r=e(["and","or","not","is","in"]),i=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],o=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],a={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},s={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};t.registerHelper("hintWords","python",i.concat(o)),t.defineMode("python",function(l,c){function u(t,e){if(t.sol()&&"py"==n(e).type){var r=n(e).offset;if(t.eatSpace()){var i=t.indentation();return i>r?p(t,e,"py"):i<r&&f(t,e)&&(e.errorToken=!0),null}var o=d(t,e);return r>0&&f(t,e)&&(o+=" "+g),o}return d(t,e)}function d(t,e){if(t.eatSpace())return null;var n=t.peek();if("#"==n)return t.skipToEnd(),"comment";if(t.match(/^[0-9\.]/,!1)){var i=!1;if(t.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(i=!0),t.match(/^\d+\.\d*/)&&(i=!0),t.match(/^\.\d+/)&&(i=!0),i)return t.eat(/J/i),"number";var o=!1;if(t.match(/^0x[0-9a-f]+/i)&&(o=!0),t.match(/^0b[01]+/i)&&(o=!0),t.match(/^0o[0-7]+/i)&&(o=!0),t.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(t.eat(/J/i),o=!0),t.match(/^0(?![\dx])/i)&&(o=!0),o)return t.eat(/L/i),"number"}return t.match(D)?(e.tokenize=h(t.current()),e.tokenize(t,e)):t.match(w)||t.match(x)?null:t.match(y)||t.match(v)||t.match(r)?"operator":t.match(b)?null:t.match(T)?"keyword":t.match(E)?"builtin":t.match(/^(self|cls)\b/)?"variable-2":t.match(_)?"def"==e.lastToken||"class"==e.lastToken?"def":"variable":(t.next(),g)}function h(t){function e(e,i){for(;!e.eol();)if(e.eatWhile(/[^'"\\]/),e.eat("\\")){if(e.next(),n&&e.eol())return r}else{if(e.match(t))return i.tokenize=u,r;e.eat(/['"]/)}if(n){if(c.singleLineStringErrors)return g;i.tokenize=u}return r}for(;"rub".indexOf(t.charAt(0).toLowerCase())>=0;)t=t.substr(1);var n=1==t.length,r="string";return e.isString=!0,e}function p(t,e,r){var i=0,o=null;if("py"==r)for(;"py"!=n(e).type;)e.scopes.pop();i=n(e).offset+~~("py"==r?l.indentUnit:k),"py"==r||t.match(/^(\s|#.*)*$/,!1)||(o=t.column()+1),e.scopes.push({offset:i,type:r,align:o})}function f(t,e){for(var r=t.indentation();n(e).offset>r;){if("py"!=n(e).type)return!0;e.scopes.pop()}return n(e).offset!=r}function m(t,e){var r=e.tokenize(t,e),i=t.current();if("."==i)return r=t.match(_,!1)?null:g,null==r&&"meta"==e.lastStyle&&(r="meta"),r;if("@"==i)return t.match(_,!1)?"meta":g;"variable"!=r&&"builtin"!=r||"meta"!=e.lastStyle||(r="meta"),"pass"!=i&&"return"!=i||(e.dedent+=1),"lambda"==i&&(e.lambda=!0),":"!=i||e.lambda||"py"!=n(e).type||p(t,e,"py");var o=1==i.length?"[({".indexOf(i):-1;if(o!=-1&&p(t,e,"])}".slice(o,o+1)),o="])}".indexOf(i),o!=-1){if(n(e).type!=i)return g;e.scopes.pop()}return e.dedent>0&&t.eol()&&"py"==n(e).type&&(e.scopes.length>1&&e.scopes.pop(),e.dedent-=1),r}var g="error",v=c.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),b=c.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),y=c.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),x=c.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),w=c.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),_=c.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),k=c.hangingIndent||l.indentUnit,C=i,S=o;if(void 0!=c.extra_keywords&&(C=C.concat(c.extra_keywords)),void 0!=c.extra_builtins&&(S=S.concat(c.extra_builtins)),c.version&&3==parseInt(c.version,10)){C=C.concat(s.keywords),S=S.concat(s.builtins);var D=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{C=C.concat(a.keywords),S=S.concat(a.builtins);var D=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var T=e(C),E=e(S),$={startState:function(t){return{tokenize:u,scopes:[{offset:t||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda:!1,dedent:0}},token:function(t,e){var n=e.errorToken;n&&(e.errorToken=!1);var r=m(t,e);e.lastStyle=r;var i=t.current();return i&&r&&(e.lastToken=i),t.eol()&&e.lambda&&(e.lambda=!1),n?r+" "+g:r},indent:function(e,r){if(e.tokenize!=u)return e.tokenize.isString?t.Pass:0;var i=n(e),o=r&&r.charAt(0)==i.type;return null!=i.align?i.align-(o?1:0):o&&e.scopes.length>1?e.scopes[e.scopes.length-2].offset:i.offset},lineComment:"#",fold:"indent"};return $}),t.defineMIME("text/x-python","python");var l=function(t){return t.split(" ")};t.defineMIME("text/x-cython",{name:"python",extra_keywords:l("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/ruby/ruby",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("ruby",function(t){function e(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=!0;return e}function n(t,e,n){return n.tokenize.push(t),t(e,n)}function r(t,e){if(c=null,t.sol()&&t.match("=begin")&&t.eol())return e.tokenize.push(l),"comment";if(t.eatSpace())return null;var r,i=t.next();if("`"==i||"'"==i||'"'==i)return n(a(i,"string",'"'==i||"`"==i),t,e);if("/"!=i||t.eol()||" "==t.peek()){if("%"==i){var o="string",u=!0;t.eat("s")?o="atom":t.eat(/[WQ]/)?o="string":t.eat(/[r]/)?o="string-2":t.eat(/[wxq]/)&&(o="string",u=!1);var d=t.eat(/[^\w\s]/);return d?(p.propertyIsEnumerable(d)&&(d=p[d]),n(a(d,o,u,!0),t,e)):"operator"}if("#"==i)return t.skipToEnd(),"comment";if("<"==i&&(r=t.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return n(s(r[1]),t,e);if("0"==i)return t.eat("x")?t.eatWhile(/[\da-fA-F]/):t.eat("b")?t.eatWhile(/[01]/):t.eatWhile(/[0-7]/),"number";if(/\d/.test(i))return t.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==i){for(;t.match(/^\\[CM]-/););return t.eat("\\")?t.eatWhile(/\w/):t.next(),"string"}return":"==i?t.eat("'")?n(a("'","atom",!1),t,e):t.eat('"')?n(a('"',"atom",!0),t,e):t.eat(/[\<\>]/)?(t.eat(/[\<\>]/),"atom"):t.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":t.eat(/[a-zA-Z$@_]/)?(t.eatWhile(/[\w]/),t.eat(/[\?\!\=]/),"atom"):"operator":"@"==i&&t.match(/^@?[a-zA-Z_]/)?(t.eat("@"),t.eatWhile(/[\w]/),"variable-2"):"$"==i?(t.eat(/[a-zA-Z_]/)?t.eatWhile(/[\w]/):t.eat(/\d/)?t.eat(/\d/):t.next(),"variable-3"):/[a-zA-Z_]/.test(i)?(t.eatWhile(/[\w]/),t.eat(/[\?\!]/),t.eat(":")?"atom":"ident"):"|"!=i||!e.varList&&"{"!=e.lastTok&&"do"!=e.lastTok?/[\(\)\[\]{}\\;]/.test(i)?(c=i,null):"-"==i&&t.eat(">")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(i)?(t.eatWhile(/[=+\-\/*:\.^%<>~|]/),"operator"):null:(c="|",null)}return t.eat("=")?"operator":n(a(i,"string-2",!0),t,e)}function i(){var t=1;return function(e,n){if("}"==e.peek()){if(t--,0==t)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](e,n)}else"{"==e.peek()&&t++;return r(e,n)}}function o(){var t=!1;return function(e,n){return t?(n.tokenize.pop(),n.tokenize[n.tokenize.length-1](e,n)):(t=!0,r(e,n))}}function a(t,e,n,r){return function(a,s){var l,c=!1;for("read-quoted-paused"===s.context.type&&(s.context=s.context.prev,a.eat("}"));null!=(l=a.next());){if(l==t&&(r||!c)){s.tokenize.pop();break}if(n&&"#"==l&&!c){if(a.eat("{")){"}"==t&&(s.context={prev:s.context,type:"read-quoted-paused"}),s.tokenize.push(i());break}if(/[@\$]/.test(a.peek())){s.tokenize.push(o());break}}c=!c&&"\\"==l}return e}}function s(t){return function(e,n){return e.match(t)?n.tokenize.pop():e.skipToEnd(),"string"}}function l(t,e){return t.sol()&&t.match("=end")&&t.eol()&&e.tokenize.pop(),t.skipToEnd(),"comment"}var c,u=e(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),d=e(["def","class","case","for","while","module","then","catch","loop","proc","begin"]),h=e(["end","until"]),p={"[":"]","{":"}","(":")"};return{startState:function(){return{tokenize:[r],indented:0,context:{type:"top",indented:-t.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(t,e){t.sol()&&(e.indented=t.indentation());var n,r=e.tokenize[e.tokenize.length-1](t,e);if("ident"==r){var i=t.current();r=u.propertyIsEnumerable(t.current())?"keyword":/^[A-Z]/.test(i)?"tag":"def"==e.lastTok||"class"==e.lastTok||e.varList?"def":"variable",d.propertyIsEnumerable(i)?n="indent":h.propertyIsEnumerable(i)?n="dedent":"if"!=i&&"unless"!=i||t.column()!=t.indentation()?"do"==i&&e.context.indented<e.indented&&(n="indent"):n="indent"}return(c||r&&"comment"!=r)&&(e.lastTok=i||c||r),"|"==c&&(e.varList=!e.varList),"indent"==n||/[\(\[\{]/.test(c)?e.context={prev:e.context,type:c||r,indented:e.indented}:("dedent"==n||/[\)\]\}]/.test(c))&&e.context.prev&&(e.context=e.context.prev),t.eol()&&(e.continuedLine="\\"==c||"operator"==r),r},indent:function(e,n){if(e.tokenize[e.tokenize.length-1]!=r)return 0;var i=n&&n.charAt(0),o=e.context,a=o.type==p[i]||"keyword"==o.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(n);return o.indented+(a?0:t.indentUnit)+(e.continuedLine?t.indentUnit:0)},electricChars:"}de",lineComment:"#"}}),t.defineMIME("text/x-ruby","ruby")}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/xml/xml",["codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("xml",function(e,n){function r(t,e){function n(n){return e.tokenize=n,n(t,e)}var r=t.next();if("<"==r)return t.eat("!")?t.eat("[")?t.match("CDATA[")?n(a("atom","]]>")):null:t.match("--")?n(a("comment","-->")):t.match("DOCTYPE",!0,!0)?(t.eatWhile(/[\w\._\-]/),n(s(1))):null:t.eat("?")?(t.eatWhile(/[\w\._\-]/),e.tokenize=a("meta","?>"),"meta"):(k=t.eat("/")?"closeTag":"openTag",e.tokenize=i,"tag bracket");if("&"==r){var o;return o=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";"),o?"atom":"error"}return t.eatWhile(/[^&<]/),null}function i(t,e){var n=t.next();if(">"==n||"/"==n&&t.eat(">"))return e.tokenize=r,k=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return k="equals",null;if("<"==n){e.tokenize=r,e.state=d,e.tagName=e.tagStart=null;var i=e.tokenize(t,e);return i?i+" tag error":"tag error"}return/[\'\"]/.test(n)?(e.tokenize=o(n),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function o(t){var e=function(e,n){for(;!e.eol();)if(e.next()==t){n.tokenize=i;break}return"string"};return e.isInAttribute=!0,e}function a(t,e){return function(n,i){for(;!n.eol();){if(n.match(e)){i.tokenize=r;break}n.next()}return t}}function s(t){return function(e,n){for(var i;null!=(i=e.next());){if("<"==i)return n.tokenize=s(t+1),n.tokenize(e,n);if(">"==i){if(1==t){n.tokenize=r;break}return n.tokenize=s(t-1),n.tokenize(e,n)}}return"meta"}}function l(t,e,n){this.prev=t.context,this.tagName=e,this.indent=t.indented,this.startOfLine=n,(S.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=!0)}function c(t){t.context&&(t.context=t.context.prev)}function u(t,e){for(var n;;){if(!t.context)return;if(n=t.context.tagName,!S.contextGrabbers.hasOwnProperty(n)||!S.contextGrabbers[n].hasOwnProperty(e))return;c(t)}}function d(t,e,n){return"openTag"==t?(n.tagStart=e.column(),h):"closeTag"==t?p:d}function h(t,e,n){return"word"==t?(n.tagName=e.current(),C="tag",g):(C="error",h)}function p(t,e,n){if("word"==t){var r=e.current();return n.context&&n.context.tagName!=r&&S.implicitlyClosed.hasOwnProperty(n.context.tagName)&&c(n),n.context&&n.context.tagName==r?(C="tag",f):(C="tag error",m)}return C="error",m}function f(t,e,n){return"endTag"!=t?(C="error",f):(c(n),d)}function m(t,e,n){return C="error",f(t,e,n)}function g(t,e,n){if("word"==t)return C="attribute",v;if("endTag"==t||"selfcloseTag"==t){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==t||S.autoSelfClosers.hasOwnProperty(r)?u(n,r):(u(n,r),n.context=new l(n,r,i==n.indented)),d}return C="error",g}function v(t,e,n){return"equals"==t?b:(S.allowMissing||(C="error"),g(t,e,n))}function b(t,e,n){return"string"==t?y:"word"==t&&S.allowUnquoted?(C="string",g):(C="error",g(t,e,n))}function y(t,e,n){return"string"==t?y:g(t,e,n)}var x=e.indentUnit,w=n.multilineTagIndentFactor||1,_=n.multilineTagIndentPastTag;null==_&&(_=!0);var k,C,S=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},D=n.alignCDATA;return{startState:function(){return{tokenize:r,state:d,indented:0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.indented=t.indentation()),t.eatSpace())return null;k=null;var n=e.tokenize(t,e);return(n||k)&&"comment"!=n&&(C=null,e.state=e.state(k||n,t,e),C&&(n="error"==C?n+" error":C)),n},indent:function(e,n,o){var a=e.context;if(e.tokenize.isInAttribute)return e.tagStart==e.indented?e.stringStartCol+1:e.indented+x;if(a&&a.noIndent)return t.Pass;if(e.tokenize!=i&&e.tokenize!=r)return o?o.match(/^(\s*)/)[0].length:0;if(e.tagName)return _?e.tagStart+e.tagName.length+2:e.tagStart+x*w;if(D&&/<!\[CDATA\[/.test(n))return 0;var s=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(s&&s[1])for(;a;){if(a.tagName==s[2]){a=a.prev;break}if(!S.implicitlyClosed.hasOwnProperty(a.tagName))break;a=a.prev}else if(s)for(;a;){
var l=S.contextGrabbers[a.tagName];if(!l||!l.hasOwnProperty(s[2]))break;a=a.prev}for(;a&&!a.startOfLine;)a=a.prev;return a?a.indent+x:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:n.htmlMode?"html":"xml",helperType:n.htmlMode?"html":"xml"}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/javascript/javascript",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("javascript",function(e,n){function r(t){for(var e,n=!1,r=!1;null!=(e=t.next());){if(!n){if("/"==e&&!r)return;"["==e?r=!0:r&&"]"==e&&(r=!1)}n=!n&&"\\"==e}}function i(t,e,n){return ft=t,mt=n,e}function o(t,e){var n=t.next();if('"'==n||"'"==n)return e.tokenize=a(n),e.tokenize(t,e);if("."==n&&t.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if("."==n&&t.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return i(n);if("="==n&&t.eat(">"))return i("=>","operator");if("0"==n&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(n))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if("/"==n)return t.eat("*")?(e.tokenize=s,s(t,e)):t.eat("/")?(t.skipToEnd(),i("comment","comment")):"operator"==e.lastType||"keyword c"==e.lastType||"sof"==e.lastType||/^[\[{}\(,;:]$/.test(e.lastType)?(r(t),t.eatWhile(/[gimy]/),i("regexp","string-2")):(t.eatWhile(_t),i("operator","operator",t.current()));if("`"==n)return e.tokenize=l,l(t,e);if("#"==n)return t.skipToEnd(),i("error","error");if(_t.test(n))return t.eatWhile(_t),i("operator","operator",t.current());t.eatWhile(/[\w\$_]/);var o=t.current(),c=wt.propertyIsEnumerable(o)&&wt[o];return c&&"."!=e.lastType?i(c.type,c.style,o):i("variable","variable",o)}function a(t){return function(e,n){var r,a=!1;if(bt&&"@"==e.peek()&&e.match(kt))return n.tokenize=o,i("jsonld-keyword","meta");for(;null!=(r=e.next())&&(r!=t||a);)a=!a&&"\\"==r;return a||(n.tokenize=o),i("string","string")}}function s(t,e){for(var n,r=!1;n=t.next();){if("/"==n&&r){e.tokenize=o;break}r="*"==n}return i("comment","comment")}function l(t,e){for(var n,r=!1;null!=(n=t.next());){if(!r&&("`"==n||"$"==n&&t.eat("{"))){e.tokenize=o;break}r=!r&&"\\"==n}return i("quasi","string-2",t.current())}function c(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var n=t.string.indexOf("=>",t.start);if(!(n<0)){for(var r=0,i=!1,o=n-1;o>=0;--o){var a=t.string.charAt(o),s=Ct.indexOf(a);if(s>=0&&s<3){if(!r){++o;break}if(0==--r)break}else if(s>=3&&s<6)++r;else if(/[$\w]/.test(a))i=!0;else if(i&&!r){++o;break}}i&&!r&&(e.fatArrowAt=o)}}function u(t,e,n,r,i,o){this.indented=t,this.column=e,this.type=n,this.prev=i,this.info=o,null!=r&&(this.align=r)}function d(t,e){for(var n=t.localVars;n;n=n.next)if(n.name==e)return!0;for(var r=t.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==e)return!0}function h(t,e,n,r,i){var o=t.cc;for(Dt.state=t,Dt.stream=i,Dt.marked=null,Dt.cc=o,Dt.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){var a=o.length?o.pop():yt?_:w;if(a(n,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return Dt.marked?Dt.marked:"variable"==n&&d(t,r)?"variable-2":e}}}function p(){for(var t=arguments.length-1;t>=0;t--)Dt.cc.push(arguments[t])}function f(){return p.apply(null,arguments),!0}function m(t){function e(e){for(var n=e;n;n=n.next)if(n.name==t)return!0;return!1}var r=Dt.state;if(r.context){if(Dt.marked="def",e(r.localVars))return;r.localVars={name:t,next:r.localVars}}else{if(e(r.globalVars))return;n.globalVars&&(r.globalVars={name:t,next:r.globalVars})}}function g(){Dt.state.context={prev:Dt.state.context,vars:Dt.state.localVars},Dt.state.localVars=Tt}function v(){Dt.state.localVars=Dt.state.context.vars,Dt.state.context=Dt.state.context.prev}function b(t,e){var n=function(){var n=Dt.state,r=n.indented;"stat"==n.lexical.type&&(r=n.lexical.indented),n.lexical=new u(r,Dt.stream.column(),t,null,n.lexical,e)};return n.lex=!0,n}function y(){var t=Dt.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function x(t){function e(n){return n==t?f():";"==t?p():f(e)}return e}function w(t,e){return"var"==t?f(b("vardef",e.length),H,x(";"),y):"keyword a"==t?f(b("form"),_,w,y):"keyword b"==t?f(b("form"),w,y):"{"==t?f(b("}"),z,y):";"==t?f():"if"==t?("else"==Dt.state.lexical.info&&Dt.state.cc[Dt.state.cc.length-1]==y&&Dt.state.cc.pop()(),f(b("form"),_,w,y,K)):"function"==t?f(tt):"for"==t?f(b("form"),G,w,y):"variable"==t?f(b("stat"),A):"switch"==t?f(b("form"),_,b("}","switch"),x("{"),z,y,y):"case"==t?f(_,x(":")):"default"==t?f(x(":")):"catch"==t?f(b("form"),g,x("("),et,x(")"),w,y,v):"module"==t?f(b("form"),g,at,v,y):"class"==t?f(b("form"),nt,y):"export"==t?f(b("form"),st,y):"import"==t?f(b("form"),lt,y):p(b("stat"),_,x(";"),y)}function _(t){return C(t,!1)}function k(t){return C(t,!0)}function C(t,e){if(Dt.state.fatArrowAt==Dt.stream.start){var n=e?B:L;if("("==t)return f(g,b(")"),O(W,")"),y,x("=>"),n,v);if("variable"==t)return p(g,W,x("=>"),n,v)}var r=e?E:T;return St.hasOwnProperty(t)?f(r):"function"==t?f(tt,r):"keyword c"==t?f(e?D:S):"("==t?f(b(")"),S,pt,x(")"),y,r):"operator"==t||"spread"==t?f(e?k:_):"["==t?f(b("]"),dt,y,r):"{"==t?R(N,"}",null,r):"quasi"==t?p($,r):f()}function S(t){return t.match(/[;\}\)\],]/)?p():p(_)}function D(t){return t.match(/[;\}\)\],]/)?p():p(k)}function T(t,e){return","==t?f(_):E(t,e,!1)}function E(t,e,n){var r=0==n?T:E,i=0==n?_:k;return"=>"==e?f(g,n?B:L,v):"operator"==t?/\+\+|--/.test(e)?f(r):"?"==e?f(_,x(":"),i):f(i):"quasi"==t?p($,r):";"!=t?"("==t?R(k,")","call",r):"."==t?f(I,r):"["==t?f(b("]"),S,x("]"),y,r):void 0:void 0}function $(t,e){return"quasi"!=t?p():"${"!=e.slice(e.length-2)?f($):f(_,M)}function M(t){if("}"==t)return Dt.marked="string-2",Dt.state.tokenize=l,f($)}function L(t){return c(Dt.stream,Dt.state),p("{"==t?w:_)}function B(t){return c(Dt.stream,Dt.state),p("{"==t?w:k)}function A(t){return":"==t?f(y,w):p(T,x(";"),y)}function I(t){if("variable"==t)return Dt.marked="property",f()}function N(t,e){return"variable"==t||"keyword"==Dt.style?(Dt.marked="property",f("get"==e||"set"==e?P:F)):"number"==t||"string"==t?(Dt.marked=bt?"property":Dt.style+" property",f(F)):"jsonld-keyword"==t?f(F):"["==t?f(_,x("]"),F):void 0}function P(t){return"variable"!=t?p(F):(Dt.marked="property",f(tt))}function F(t){return":"==t?f(k):"("==t?p(tt):void 0}function O(t,e){function n(r){if(","==r){var i=Dt.state.lexical;return"call"==i.info&&(i.pos=(i.pos||0)+1),f(t,n)}return r==e?f():f(x(e))}return function(r){return r==e?f():p(t,n)}}function R(t,e,n){for(var r=3;r<arguments.length;r++)Dt.cc.push(arguments[r]);return f(b(e,n),O(t,e),y)}function z(t){return"}"==t?f():p(w,z)}function j(t){if(xt&&":"==t)return f(q)}function q(t){if("variable"==t)return Dt.marked="variable-3",f()}function H(){return p(W,j,V,X)}function W(t,e){return"variable"==t?(m(e),f()):"["==t?R(W,"]"):"{"==t?R(U,"}"):void 0}function U(t,e){return"variable"!=t||Dt.stream.match(/^\s*:/,!1)?("variable"==t&&(Dt.marked="property"),f(x(":"),W,V)):(m(e),f(V))}function V(t,e){if("="==e)return f(k)}function X(t){if(","==t)return f(H)}function K(t,e){if("keyword b"==t&&"else"==e)return f(b("form","else"),w,y)}function G(t){if("("==t)return f(b(")"),Y,x(")"),y)}function Y(t){return"var"==t?f(H,x(";"),Q):";"==t?f(Q):"variable"==t?f(Z):p(_,x(";"),Q)}function Z(t,e){return"in"==e||"of"==e?(Dt.marked="keyword",f(_)):f(T,Q)}function Q(t,e){return";"==t?f(J):"in"==e||"of"==e?(Dt.marked="keyword",f(_)):p(_,x(";"),J)}function J(t){")"!=t&&f(_)}function tt(t,e){return"*"==e?(Dt.marked="keyword",f(tt)):"variable"==t?(m(e),f(tt)):"("==t?f(g,b(")"),O(et,")"),y,w,v):void 0}function et(t){return"spread"==t?f(et):p(W,j)}function nt(t,e){if("variable"==t)return m(e),f(rt)}function rt(t,e){return"extends"==e?f(_,rt):"{"==t?f(b("}"),it,y):void 0}function it(t,e){return"variable"==t||"keyword"==Dt.style?(Dt.marked="property","get"==e||"set"==e?f(ot,tt,it):f(tt,it)):"*"==e?(Dt.marked="keyword",f(it)):";"==t?f(it):"}"==t?f():void 0}function ot(t){return"variable"!=t?p():(Dt.marked="property",f())}function at(t,e){return"string"==t?f(w):"variable"==t?(m(e),f(ut)):void 0}function st(t,e){return"*"==e?(Dt.marked="keyword",f(ut,x(";"))):"default"==e?(Dt.marked="keyword",f(_,x(";"))):p(w)}function lt(t){return"string"==t?f():p(ct,ut)}function ct(t,e){return"{"==t?R(ct,"}"):("variable"==t&&m(e),f())}function ut(t,e){if("from"==e)return Dt.marked="keyword",f(_)}function dt(t){return"]"==t?f():p(k,ht)}function ht(t){return"for"==t?p(pt,x("]")):","==t?f(O(k,"]")):p(O(k,"]"))}function pt(t){return"for"==t?f(G,pt):"if"==t?f(_,pt):void 0}var ft,mt,gt=e.indentUnit,vt=n.statementIndent,bt=n.jsonld,yt=n.json||bt,xt=n.typescript,wt=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),n=t("keyword b"),r=t("keyword c"),i=t("operator"),o={type:"atom",style:"atom"},a={if:t("if"),while:e,with:e,else:n,do:n,try:n,finally:n,return:r,break:r,continue:r,new:r,delete:r,throw:r,debugger:r,var:t("var"),const:t("var"),let:t("var"),function:t("function"),catch:t("catch"),for:t("for"),switch:t("switch"),case:t("case"),default:t("default"),in:i,typeof:i,instanceof:i,true:o,false:o,null:o,undefined:o,NaN:o,Infinity:o,this:t("this"),module:t("module"),class:t("class"),super:t("atom"),yield:r,export:t("export"),import:t("import"),extends:r};if(xt){var s={type:"variable",style:"variable-3"},l={interface:t("interface"),extends:t("extends"),constructor:t("constructor"),public:t("public"),private:t("private"),protected:t("protected"),static:t("static"),string:s,number:s,bool:s,any:s};for(var c in l)a[c]=l[c]}return a}(),_t=/[+\-*&%=<>!?|~^]/,kt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ct="([{}])",St={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},Dt={state:null,column:null,marked:null,cc:null},Tt={name:"this",next:{name:"arguments"}};return y.lex=!0,{startState:function(t){var e={tokenize:o,lastType:"sof",cc:[],lexical:new u((t||0)-gt,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:0};return n.globalVars&&"object"==typeof n.globalVars&&(e.globalVars=n.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),c(t,e)),e.tokenize!=s&&t.eatSpace())return null;var n=e.tokenize(t,e);return"comment"==ft?n:(e.lastType="operator"!=ft||"++"!=mt&&"--"!=mt?ft:"incdec",h(e,n,ft,mt,t))},indent:function(e,r){if(e.tokenize==s)return t.Pass;if(e.tokenize!=o)return 0;var i=r&&r.charAt(0),a=e.lexical;if(!/^\s*else\b/.test(r))for(var l=e.cc.length-1;l>=0;--l){var c=e.cc[l];if(c==y)a=a.prev;else if(c!=K)break}"stat"==a.type&&"}"==i&&(a=a.prev),vt&&")"==a.type&&"stat"==a.prev.type&&(a=a.prev);var u=a.type,d=i==u;return"vardef"==u?a.indented+("operator"==e.lastType||","==e.lastType?a.info+1:0):"form"==u&&"{"==i?a.indented:"form"==u?a.indented+gt:"stat"==u?a.indented+("operator"==e.lastType||","==e.lastType?vt||gt:0):"switch"!=a.info||d||0==n.doubleIndentSwitch?a.align?a.column+(d?0:1):a.indented+(d?0:gt):a.indented+(/^(?:case|default)\b/.test(r)?gt:2*gt)},electricChars:":{}",blockCommentStart:yt?null:"/*",blockCommentEnd:yt?null:"*/",lineComment:yt?null:"//",fold:"brace",helperType:yt?"json":"javascript",jsonldMode:bt,jsonMode:yt}}),t.registerHelper("wordChars","javascript",/[\\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/css/css",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=!0;return e}function n(t,e){for(var n,r=!1;null!=(n=t.next());){if(r&&"/"==n){e.tokenize=null;break}r="*"==n}return["comment","comment"]}function r(t,e){return t.skipTo("-->")?(t.match("-->"),e.tokenize=null):t.skipToEnd(),["comment","comment"]}t.defineMode("css",function(e,n){function r(t,e){return p=e,t}function i(t,e){var n=t.next();if(g[n]){var i=g[n](t,e);if(i!==!1)return i}return"@"==n?(t.eatWhile(/[\w\\\-]/),r("def",t.current())):"="==n||("~"==n||"|"==n)&&t.eat("=")?r(null,"compare"):'"'==n||"'"==n?(e.tokenize=o(n),e.tokenize(t,e)):"#"==n?(t.eatWhile(/[\w\\\-]/),r("atom","hash")):"!"==n?(t.match(/^\s*\w*/),r("keyword","important")):/\d/.test(n)||"."==n&&t.eat(/\d/)?(t.eatWhile(/[\w.%]/),r("number","unit")):"-"!==n?/[,+>*\/]/.test(n)?r(null,"select-op"):"."==n&&t.match(/^-?[_a-z][_a-z0-9-]*/i)?r("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?r(null,n):"u"==n&&t.match("rl(")?(t.backUp(1),e.tokenize=a,r("property","word")):/[\w\\\-]/.test(n)?(t.eatWhile(/[\w\\\-]/),r("property","word")):r(null,null):/[\d.]/.test(t.peek())?(t.eatWhile(/[\w.%]/),r("number","unit")):t.match(/^\w+-/)?r("meta","meta"):void 0}function o(t){return function(e,n){for(var i,o=!1;null!=(i=e.next());){if(i==t&&!o){")"==t&&e.backUp(1);break}o=!o&&"\\"==i}return(i==t||!o&&")"!=t)&&(n.tokenize=null),r("string","string")}}function a(t,e){return t.next(),t.match(/\s*[\"\')]/,!1)?e.tokenize=null:e.tokenize=o(")"),r(null,"(")}function s(t,e,n){this.type=t,this.indent=e,this.prev=n}function l(t,e,n){return t.context=new s(n,e.indentation()+m,t.context),n}function c(t){return t.context=t.context.prev,t.context.type}function u(t,e,n){return S[n.context.type](t,e,n)}function d(t,e,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return u(t,e,n)}function h(t){var e=t.current().toLowerCase();f=_.hasOwnProperty(e)?"atom":w.hasOwnProperty(e)?"keyword":"variable"}n.propertyKeywords||(n=t.resolveMode("text/css"));var p,f,m=e.indentUnit,g=n.tokenHooks,v=n.mediaTypes||{},b=n.mediaFeatures||{},y=n.propertyKeywords||{},x=n.nonStandardPropertyKeywords||{},w=n.colorKeywords||{},_=n.valueKeywords||{},k=n.fontProperties||{},C=n.allowNested,S={};return S.top=function(t,e,n){if("{"==t)return l(n,e,"block");if("}"==t&&n.context.prev)return c(n);if("@media"==t)return l(n,e,"media");if("@font-face"==t)return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(t))return"keyframes";if(t&&"@"==t.charAt(0))return l(n,e,"at");if("hash"==t)f="builtin";else if("word"==t)f="tag";else{if("variable-definition"==t)return"maybeprop";if("interpolation"==t)return l(n,e,"interpolation");if(":"==t)return"pseudo";if(C&&"("==t)return l(n,e,"parens")}return n.context.type},S.block=function(t,e,n){if("word"==t){var r=e.current().toLowerCase();return y.hasOwnProperty(r)?(f="property","maybeprop"):x.hasOwnProperty(r)?(f="string-2","maybeprop"):C?(f=e.match(/^\s*:/,!1)?"property":"tag","block"):(f+=" error","maybeprop")}return"meta"==t?"block":C||"hash"!=t&&"qualifier"!=t?S.top(t,e,n):(f="error","block")},S.maybeprop=function(t,e,n){return":"==t?l(n,e,"prop"):u(t,e,n)},S.prop=function(t,e,n){if(";"==t)return c(n);if("{"==t&&C)return l(n,e,"propBlock");if("}"==t||"{"==t)return d(t,e,n);if("("==t)return l(n,e,"parens");if("hash"!=t||/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e.current())){if("word"==t)h(e);else if("interpolation"==t)return l(n,e,"interpolation")}else f+=" error";return"prop"},S.propBlock=function(t,e,n){return"}"==t?c(n):"word"==t?(f="property","maybeprop"):n.context.type},S.parens=function(t,e,n){return"{"==t||"}"==t?d(t,e,n):")"==t?c(n):"("==t?l(n,e,"parens"):("word"==t&&h(e),"parens")},S.pseudo=function(t,e,n){return"word"==t?(f="variable-3",n.context.type):u(t,e,n)},S.media=function(t,e,n){if("("==t)return l(n,e,"media_parens");if("}"==t)return d(t,e,n);if("{"==t)return c(n)&&l(n,e,C?"block":"top");if("word"==t){var r=e.current().toLowerCase();f="only"==r||"not"==r||"and"==r?"keyword":v.hasOwnProperty(r)?"attribute":b.hasOwnProperty(r)?"property":"error"}return n.context.type},S.media_parens=function(t,e,n){return")"==t?c(n):"{"==t||"}"==t?d(t,e,n,2):S.media(t,e,n)},S.font_face_before=function(t,e,n){return"{"==t?l(n,e,"font_face"):u(t,e,n)},S.font_face=function(t,e,n){return"}"==t?c(n):"word"==t?(f=k.hasOwnProperty(e.current().toLowerCase())?"property":"error","maybeprop"):"font_face"},S.keyframes=function(t,e,n){return"word"==t?(f="variable","keyframes"):"{"==t?l(n,e,"top"):u(t,e,n)},S.at=function(t,e,n){return";"==t?c(n):"{"==t||"}"==t?d(t,e,n):("word"==t?f="tag":"hash"==t&&(f="builtin"),"at")},S.interpolation=function(t,e,n){return"}"==t?c(n):"{"==t||";"==t?d(t,e,n):("variable"!=t&&(f="error"),"interpolation")},{startState:function(t){return{tokenize:null,state:"top",context:new s("top",t||0,null)}},token:function(t,e){if(!e.tokenize&&t.eatSpace())return null;var n=(e.tokenize||i)(t,e);return n&&"object"==typeof n&&(p=n[1],n=n[0]),f=n,e.state=S[e.state](p,t,e),f},indent:function(t,e){var n=t.context,r=e&&e.charAt(0),i=n.indent;return"prop"!=n.type||"}"!=r&&")"!=r||(n=n.prev),!n.prev||("}"!=r||"block"!=n.type&&"top"!=n.type&&"interpolation"!=n.type&&"font_face"!=n.type)&&(")"!=r||"parens"!=n.type&&"media_parens"!=n.type)&&("{"!=r||"at"!=n.type&&"media"!=n.type)||(i=n.indent-m,n=n.prev),i},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=e(i),a=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],s=e(a),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],c=e(l),u=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],u=e(u),d=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],h=e(d),p=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],f=e(p),m=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],g=e(m),v=i.concat(a).concat(l).concat(u).concat(d).concat(p);t.registerHelper("hintWords","css",v),t.defineMIME("text/css",{mediaTypes:o,mediaFeatures:s,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:h,valueKeywords:f,fontProperties:g,tokenHooks:{
"<":function(t,e){return!!t.match("!--")&&(e.tokenize=r,r(t,e))},"/":function(t,e){return!!t.eat("*")&&(e.tokenize=n,n(t,e))}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:s,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:h,valueKeywords:f,fontProperties:g,allowNested:!0,tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=n,n(t,e)):["operator","operator"]},":":function(t){return!!t.match(/\s*\{/)&&[null,"{"]},$:function(t){return t.match(/^[\w-]+/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(t){return!!t.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:s,propertyKeywords:c,nonStandardPropertyKeywords:u,colorKeywords:h,valueKeywords:f,fontProperties:g,allowNested:!0,tokenHooks:{"/":function(t,e){return t.eat("/")?(t.skipToEnd(),["comment","comment"]):t.eat("*")?(e.tokenize=n,n(t,e)):["operator","operator"]},"@":function(t){return!t.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(t.eatWhile(/[\w\\\-]/),t.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define("codemirror/mode/htmlmixed/htmlmixed",["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("htmlmixed",function(e,n){function r(t,e){var n=e.htmlState.tagName,r=s.token(t,e.htmlState);if("script"==n&&/\btag\b/.test(r)&&">"==t.current()){var i=t.string.slice(Math.max(0,t.pos-100),t.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);i=i?i[1]:"",i&&/[\"\']/.test(i.charAt(0))&&(i=i.slice(1,i.length-1));for(var u=0;u<c.length;++u){var d=c[u];if("string"==typeof d.matches?i==d.matches:d.matches.test(i)){d.mode&&(e.token=o,e.localMode=d.mode,e.localState=d.mode.startState&&d.mode.startState(s.indent(e.htmlState,"")));break}}}else"style"==n&&/\btag\b/.test(r)&&">"==t.current()&&(e.token=a,e.localMode=l,e.localState=l.startState(s.indent(e.htmlState,"")));return r}function i(t,e,n){var r,i=t.current(),o=i.search(e);return o>-1?t.backUp(i.length-o):(r=i.match(/<\/?$/))&&(t.backUp(i.length),t.match(e,!1)||t.match(i)),n}function o(t,e){return t.match(/^<\/\s*script\s*>/i,!1)?(e.token=r,e.localState=e.localMode=null,r(t,e)):i(t,/<\/\s*script\s*>/,e.localMode.token(t,e.localState))}function a(t,e){return t.match(/^<\/\s*style\s*>/i,!1)?(e.token=r,e.localState=e.localMode=null,r(t,e)):i(t,/<\/\s*style\s*>/,l.token(t,e.localState))}var s=t.getMode(e,{name:"xml",htmlMode:!0,multilineTagIndentFactor:n.multilineTagIndentFactor,multilineTagIndentPastTag:n.multilineTagIndentPastTag}),l=t.getMode(e,"css"),c=[],u=n&&n.scriptTypes;if(c.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:t.getMode(e,"javascript")}),u)for(var d=0;d<u.length;++d){var h=u[d];c.push({matches:h.matches,mode:h.mode&&t.getMode(e,h.mode)})}return c.push({matches:/./,mode:t.getMode(e,"text/plain")}),{startState:function(){var t=s.startState();return{token:r,localMode:null,localState:null,htmlState:t}},copyState:function(e){if(e.localState)var n=t.copyState(e.localMode,e.localState);return{token:e.token,localMode:e.localMode,localState:n,htmlState:t.copyState(s,e.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(e,n){return!e.localMode||/^\s*<\//.test(n)?s.indent(e.htmlState,n):e.localMode.indent?e.localMode.indent(e.localState,n):t.Pass},innerMode:function(t){return{state:t.localState||t.htmlState,mode:t.localMode||s}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/clike/clike",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t){for(var e={},n=t.split(" "),r=0;r<n.length;++r)e[n[r]]=!0;return e}function n(t,e){if(!e.startOfLine)return!1;for(;;){if(!t.skipTo("\\")){t.skipToEnd(),e.tokenize=null;break}if(t.next(),t.eol()){e.tokenize=n;break}}return"meta"}function r(t,e){if(t.backUp(1),t.match(/(R|u8R|uR|UR|LR)/)){var n=t.match(/"([^\s\\()]{0,16})\(/);return!!n&&(e.cpp11RawStringDelim=n[1],e.tokenize=o,o(t,e))}return t.match(/(u8|u|U|L)/)?!!t.match(/["']/,!1)&&"string":(t.next(),!1)}function i(t,e){for(var n;null!=(n=t.next());)if('"'==n&&!t.eat('"')){e.tokenize=null;break}return"string"}function o(t,e){var n=e.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),r=t.match(new RegExp(".*?\\)"+n+'"'));return r?e.tokenize=null:t.skipToEnd(),"string"}function a(e,n){function r(t){if(t)for(var e in t)t.hasOwnProperty(e)&&i.push(e)}"string"==typeof e&&(e=[e]);var i=[];r(n.keywords),r(n.builtin),r(n.atoms),i.length&&(n.helperType=e[0],t.registerHelper("hintWords",e[0],i));for(var o=0;o<e.length;++o)t.defineMIME(e[o],n)}t.defineMode("clike",function(e,n){function r(t,e){var n=t.next();if(v[n]){var r=v[n](t,e);if(r!==!1)return r}if('"'==n||"'"==n)return e.tokenize=i(n),e.tokenize(t,e);if(/[\[\]{}\(\),;\:\.]/.test(n))return c=n,null;if(/\d/.test(n))return t.eatWhile(/[\w\.]/),"number";if("/"==n){if(t.eat("*"))return e.tokenize=o,o(t,e);if(t.eat("/"))return t.skipToEnd(),"comment"}if(y.test(n))return t.eatWhile(y),"operator";t.eatWhile(/[\w\$_]/);var a=t.current();return p.propertyIsEnumerable(a)?(m.propertyIsEnumerable(a)&&(c="newstatement"),"keyword"):f.propertyIsEnumerable(a)?(m.propertyIsEnumerable(a)&&(c="newstatement"),"builtin"):g.propertyIsEnumerable(a)?"atom":"variable"}function i(t){return function(e,n){for(var r,i=!1,o=!1;null!=(r=e.next());){if(r==t&&!i){o=!0;break}i=!i&&"\\"==r}return(o||!i&&!b)&&(n.tokenize=null),"string"}}function o(t,e){for(var n,r=!1;n=t.next();){if("/"==n&&r){e.tokenize=null;break}r="*"==n}return"comment"}function a(t,e,n,r,i){this.indented=t,this.column=e,this.type=n,this.align=r,this.prev=i}function s(t,e,n){var r=t.indented;return t.context&&"statement"==t.context.type&&(r=t.context.indented),t.context=new a(r,e,n,null,t.context)}function l(t){var e=t.context.type;return")"!=e&&"]"!=e&&"}"!=e||(t.indented=t.context.indented),t.context=t.context.prev}var c,u=e.indentUnit,d=n.statementIndentUnit||u,h=n.dontAlignCalls,p=n.keywords||{},f=n.builtin||{},m=n.blockKeywords||{},g=n.atoms||{},v=n.hooks||{},b=n.multiLineStrings,y=/[+\-*&%=<>!?|\/]/;return{startState:function(t){return{tokenize:null,context:new a((t||0)-u,0,"top",!1),indented:0,startOfLine:!0}},token:function(t,e){var n=e.context;if(t.sol()&&(null==n.align&&(n.align=!1),e.indented=t.indentation(),e.startOfLine=!0),t.eatSpace())return null;c=null;var i=(e.tokenize||r)(t,e);if("comment"==i||"meta"==i)return i;if(null==n.align&&(n.align=!0),";"!=c&&":"!=c&&","!=c||"statement"!=n.type)if("{"==c)s(e,t.column(),"}");else if("["==c)s(e,t.column(),"]");else if("("==c)s(e,t.column(),")");else if("}"==c){for(;"statement"==n.type;)n=l(e);for("}"==n.type&&(n=l(e));"statement"==n.type;)n=l(e)}else c==n.type?l(e):(("}"==n.type||"top"==n.type)&&";"!=c||"statement"==n.type&&"newstatement"==c)&&s(e,t.column(),"statement");else l(e);return e.startOfLine=!1,i},indent:function(e,n){if(e.tokenize!=r&&null!=e.tokenize)return t.Pass;var i=e.context,o=n&&n.charAt(0);"statement"==i.type&&"}"==o&&(i=i.prev);var a=o==i.type;return"statement"==i.type?i.indented+("{"==o?0:d):!i.align||h&&")"==i.type?")"!=i.type||a?i.indented+(a?0:u):i.indented+d:i.column+(a?0:1)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var s="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";a(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:e(s),blockKeywords:e("case do else for if switch while struct"),atoms:e("null"),hooks:{"#":n},modeProps:{fold:["brace","include"]}}),a(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:e(s+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),blockKeywords:e("catch class do else finally for if struct switch try while"),atoms:e("true false null"),hooks:{"#":n,u:r,U:r,L:r,R:r},modeProps:{fold:["brace","include"]}}),a("text/x-java",{name:"clike",keywords:e("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:e("catch class do else finally for if switch try while"),atoms:e("true false null"),hooks:{"@":function(t){return t.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),a("text/x-csharp",{name:"clike",keywords:e("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:e("catch class do else finally for foreach if struct switch try while"),builtin:e("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:e("true false null"),hooks:{"@":function(t,e){return t.eat('"')?(e.tokenize=i,i(t,e)):(t.eatWhile(/[\w\$_]/),"meta")}}}),a("text/x-scala",{name:"clike",keywords:e("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:e("catch class do else finally for forSome if match switch try while"),atoms:e("true false null"),hooks:{"@":function(t){return t.eatWhile(/[\w\$_]/),"meta"}}}),a(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:e("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadowconst attribute uniform varying break continue discard return for while do if else struct in out inout"),blockKeywords:e("for while do if else struct"),builtin:e("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smootstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:e("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragColor gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),hooks:{"#":n},modeProps:{fold:["brace","include"]}})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define("codemirror/mode/php/php",["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],t):t(CodeMirror)}(function(t){"use strict";function e(t){for(var e={},n=t.split(" "),r=0;r<n.length;++r)e[n[r]]=!0;return e}function n(t){return function(e,n){return e.match(t)?n.tokenize=null:e.skipToEnd(),"string"}}function r(t){return 0==t.length?i:function(e,n){for(var o=t[0],a=0;a<o.length;a++)if(e.match(o[a][0]))return n.tokenize=r(t.slice(1)),o[a][1];return n.tokenize=i,"string"}}function i(t,e){var n,i=!1,o=!1;if('"'==t.current())return"string";if(t.match("${",!1)||t.match("{$",!1))return e.tokenize=null,"string";if(t.match(/\$[a-zA-Z_][a-zA-Z0-9_]*/))return t.match("[",!1)&&(e.tokenize=r([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]])),t.match(/\-\>\w/,!1)&&(e.tokenize=r([[["->",null]],[[/[\w]+/,"variable"]]])),"variable-2";for(;!t.eol()&&!t.match("{$",!1)&&(!t.match(/(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1)||i);){if(n=t.next(),!i&&'"'==n){o=!0;break}i=!i&&"\\"==n}return o&&(e.tokenize=null,e.phpEncapsStack.pop()),"string"}var o="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",a="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",s="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once";t.registerHelper("hintWords","php",[o,a,s].join(" ").split(" ")),t.registerHelper("wordChars","php",/[\\w$]/);var l={name:"clike",helperType:"php",keywords:e(o),blockKeywords:e("catch do else elseif for foreach if switch try while finally"),atoms:e(a),builtin:e(s),multiLineStrings:!0,hooks:{$:function(t){return t.eatWhile(/[\w\$_]/),"variable-2"},"<":function(t,e){return!!t.match(/<</)&&(t.eatWhile(/[\w\.]/),e.tokenize=n(t.current().slice(3)),e.tokenize(t,e))},"#":function(t){for(;!t.eol()&&!t.match("?>",!1);)t.next();return"comment"},"/":function(t){if(t.eat("/")){for(;!t.eol()&&!t.match("?>",!1);)t.next();return"comment"}return!1},'"':function(t,e){return e.phpEncapsStack||(e.phpEncapsStack=[]),e.phpEncapsStack.push(0),e.tokenize=i,e.tokenize(t,e)},"{":function(t,e){return e.phpEncapsStack&&e.phpEncapsStack.length>0&&e.phpEncapsStack[e.phpEncapsStack.length-1]++,!1},"}":function(t,e){return e.phpEncapsStack&&e.phpEncapsStack.length>0&&0==--e.phpEncapsStack[e.phpEncapsStack.length-1]&&(e.tokenize=i),!1}}};t.defineMode("php",function(e,n){function r(t,e){var n=e.curMode==o;if(t.sol()&&e.pending&&'"'!=e.pending&&"'"!=e.pending&&(e.pending=null),n)return n&&null==e.php.tokenize&&t.match("?>")?(e.curMode=i,e.curState=e.html,"meta"):o.token(t,e.curState);if(t.match(/^<\?\w*/))return e.curMode=o,e.curState=e.php,"meta";if('"'==e.pending||"'"==e.pending){for(;!t.eol()&&t.next()!=e.pending;);var r="string"}else if(e.pending&&t.pos<e.pending.end){t.pos=e.pending.end;var r=e.pending.style}else var r=i.token(t,e.curState);e.pending&&(e.pending=null);var a,s=t.current(),l=s.search(/<\?/);return l!=-1&&("string"==r&&(a=s.match(/[\'\"]$/))&&!/\?>/.test(s)?e.pending=a[0]:e.pending={end:t.pos,style:r},t.backUp(s.length-l)),r}var i=t.getMode(e,"text/html"),o=t.getMode(e,l);return{startState:function(){var e=t.startState(i),r=t.startState(o);return{html:e,php:r,curMode:n.startOpen?o:i,curState:n.startOpen?r:e,pending:null}},copyState:function(e){var n,r=e.html,a=t.copyState(i,r),s=e.php,l=t.copyState(o,s);return n=e.curMode==i?a:l,{html:a,php:l,curMode:e.curMode,curState:n,pending:e.pending}},token:r,indent:function(t,e){return t.curMode!=o&&/^\s*<\//.test(e)||t.curMode==o&&/^\?>/.test(e)?i.indent(t.html,e):t.curMode.indent(t.curState,e)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(t){return{state:t.curState,mode:t.curMode}}}},"htmlmixed","clike"),t.defineMIME("application/x-httpd-php","php"),t.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),t.defineMIME("text/x-php",l)}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/go/go",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("go",function(t){function e(t,e){var i=t.next();if('"'==i||"'"==i||"`"==i)return e.tokenize=n(i),e.tokenize(t,e);if(/[\d\.]/.test(i))return"."==i?t.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==i?t.match(/^[xX][0-9a-fA-F]+/)||t.match(/^0[0-7]+/):t.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if(/[\[\]{}\(\),;\:\.]/.test(i))return s=i,null;if("/"==i){if(t.eat("*"))return e.tokenize=r,r(t,e);if(t.eat("/"))return t.skipToEnd(),"comment"}if(d.test(i))return t.eatWhile(d),"operator";t.eatWhile(/[\w\$_]/);var o=t.current();return c.propertyIsEnumerable(o)?("case"!=o&&"default"!=o||(s="case"),"keyword"):u.propertyIsEnumerable(o)?"atom":"variable"}function n(t){return function(n,r){for(var i,o=!1,a=!1;null!=(i=n.next());){if(i==t&&!o){a=!0;break}o=!o&&"\\"==i}return(a||!o&&"`"!=t)&&(r.tokenize=e),"string"}}function r(t,n){for(var r,i=!1;r=t.next();){if("/"==r&&i){n.tokenize=e;break}i="*"==r}return"comment"}function i(t,e,n,r,i){this.indented=t,this.column=e,this.type=n,this.align=r,this.prev=i}function o(t,e,n){return t.context=new i(t.indented,e,n,null,t.context)}function a(t){var e=t.context.type;return")"!=e&&"]"!=e&&"}"!=e||(t.indented=t.context.indented),t.context=t.context.prev}var s,l=t.indentUnit,c={break:!0,case:!0,chan:!0,const:!0,continue:!0,default:!0,defer:!0,else:!0,fallthrough:!0,for:!0,func:!0,go:!0,goto:!0,if:!0,import:!0,interface:!0,map:!0,package:!0,range:!0,return:!0,select:!0,struct:!0,switch:!0,type:!0,var:!0,bool:!0,byte:!0,complex64:!0,complex128:!0,float32:!0,float64:!0,int8:!0,int16:!0,int32:!0,int64:!0,string:!0,uint8:!0,uint16:!0,uint32:!0,uint64:!0,int:!0,uint:!0,uintptr:!0},u={true:!0,false:!0,iota:!0,nil:!0,append:!0,cap:!0,close:!0,complex:!0,copy:!0,imag:!0,len:!0,make:!0,new:!0,panic:!0,print:!0,println:!0,real:!0,recover:!0},d=/[+\-*&^%:=<>!|\/]/;return{startState:function(t){return{tokenize:null,context:new i((t||0)-l,0,"top",!1),indented:0,startOfLine:!0}},token:function(t,n){var r=n.context;if(t.sol()&&(null==r.align&&(r.align=!1),n.indented=t.indentation(),n.startOfLine=!0,"case"==r.type&&(r.type="}")),t.eatSpace())return null;s=null;var i=(n.tokenize||e)(t,n);return"comment"==i?i:(null==r.align&&(r.align=!0),"{"==s?o(n,t.column(),"}"):"["==s?o(n,t.column(),"]"):"("==s?o(n,t.column(),")"):"case"==s?r.type="case":"}"==s&&"}"==r.type?r=a(n):s==r.type&&a(n),n.startOfLine=!1,i)},indent:function(t,n){if(t.tokenize!=e&&null!=t.tokenize)return 0;var r=t.context,i=n&&n.charAt(0);if("case"==r.type&&/^(?:case|default)\b/.test(n))return t.context.type="}",r.indented;var o=i==r.type;return r.align?r.column+(o?0:1):r.indented+(o?0:l)},electricChars:"{}):",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),t.defineMIME("text/x-go","go")}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror",require("../xml/xml"))):"function"==typeof define&&define.amd?define("codemirror/mode/markdown/markdown",["codemirror","codemirror/mode/xml/xml"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("markdown",function(e,n){function r(t,e,n){return e.f=e.inline=n,n(t,e)}function i(t,e,n){return e.f=e.block=n,n(t,e)}function o(t){return t.linkTitle=!1,t.em=!1,t.strong=!1,t.quote=0,y||t.f!=s||(t.f=d,t.block=a),t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.thisLineHasContent=!1,null}function a(t,e){var o=t.sol(),a=e.list!==!1;e.list!==!1&&e.indentationDiff>=0?(e.indentationDiff<4&&(e.indentation-=e.indentationDiff),e.list=null):e.list!==!1&&e.indentation>0?(e.list=null,e.listDepth=Math.floor(e.indentation/4)):e.list!==!1&&(e.list=!1,e.listDepth=0);var s=null;if(e.indentationDiff>=4)return e.indentation-=4,t.skipToEnd(),S;if(t.eatSpace())return null;if(s=t.match(H))return e.header=s[0].length<=6?s[0].length:6,n.highlightFormatting&&(e.formatting="header"),e.f=e.inline,c(e);if(e.prevLineHasContent&&(s=t.match(W)))return e.header="="==s[0].charAt(0)?1:2,n.highlightFormatting&&(e.formatting="header"),e.f=e.inline,c(e);if(t.eat(">"))return e.indentation++,e.quote=o?1:e.quote+1,n.highlightFormatting&&(e.formatting="quote"),t.eatSpace(),c(e);if("["===t.peek())return r(t,e,m);if(t.match(R,!0))return M;if((!e.prevLineHasContent||a)&&(t.match(z,!1)||t.match(j,!1))){var u=null;return t.match(z,!0)?u="ul":(t.match(j,!0),u="ol"),e.indentation+=4,e.list=!0,e.listDepth++,n.taskLists&&t.match(q,!1)&&(e.taskList=!0),e.f=e.inline,n.highlightFormatting&&(e.formatting=["list","list-"+u]),c(e)}return n.fencedCodeBlocks&&t.match(/^```([\w+#]*)/,!0)?(e.localMode=_(RegExp.$1),e.localMode&&(e.localState=e.localMode.startState()),i(t,e,l),n.highlightFormatting&&(e.formatting="code-block"),e.code=!0,c(e)):r(t,e,e.inline)}function s(t,e){var n=x.token(t,e.htmlState);return(y&&null===e.htmlState.tagStart&&!e.htmlState.context||e.md_inside&&t.current().indexOf(">")>-1)&&(e.f=d,e.block=a,e.htmlState=null),n}function l(t,e){if(t.sol()&&t.match(/^```/,!0)){e.localMode=e.localState=null,e.f=d,e.block=a,n.highlightFormatting&&(e.formatting="code-block"),e.code=!0;var r=c(e);return e.code=!1,r}return e.localMode?e.localMode.token(t,e.localState):(t.skipToEnd(),S)}function c(t){var e=[];if(t.formatting){e.push(B),"string"==typeof t.formatting&&(t.formatting=[t.formatting]);for(var r=0;r<t.formatting.length;r++)e.push(B+"-"+t.formatting[r]),"header"===t.formatting[r]&&e.push(B+"-"+t.formatting[r]+"-"+t.header),"quote"===t.formatting[r]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=t.quote?e.push(B+"-"+t.formatting[r]+"-"+t.quote):e.push("error"))}if(t.taskOpen)return e.push("meta"),e.length?e.join(" "):null;if(t.taskClosed)return e.push("property"),e.length?e.join(" "):null;if(t.linkHref)return e.push(P),e.length?e.join(" "):null;if(t.strong&&e.push(O),
t.em&&e.push(F),t.linkText&&e.push(N),t.code&&e.push(S),t.header&&(e.push(C),e.push(C+"-"+t.header)),t.quote&&(e.push(D),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=t.quote?e.push(D+"-"+t.quote):e.push(D+"-"+n.maxBlockquoteDepth)),t.list!==!1){var i=(t.listDepth-1)%3;i?1===i?e.push(E):e.push($):e.push(T)}return t.trailingSpaceNewLine?e.push("trailing-space-new-line"):t.trailingSpace&&e.push("trailing-space-"+(t.trailingSpace%2?"a":"b")),e.length?e.join(" "):null}function u(t,e){if(t.match(U,!0))return c(e)}function d(e,r){var o=r.text(e,r);if("undefined"!=typeof o)return o;if(r.list)return r.list=null,c(r);if(r.taskList){var a="x"!==e.match(q,!0)[1];return a?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,c(r)}if(r.taskOpen=!1,r.taskClosed=!1,r.header&&e.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),c(r);var l=e.sol(),u=e.next();if(r.escape)return r.escape=!1,c(r);if(r.linkTitle){r.linkTitle=!1;var d=u;"("===u&&(d=")"),d=(d+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var f="^\\s*(?:[^"+d+"\\\\]+|\\\\\\\\|\\\\.)"+d;if(e.match(new RegExp(f),!0))return P}if("`"===u){var m=r.formatting;n.highlightFormatting&&(r.formatting="code");var g=c(r),v=e.pos;e.eatWhile("`");var b=1+e.pos-v;return r.code?b===k?(r.code=!1,g):(r.formatting=m,c(r)):(k=b,r.code=!0,c(r))}if(r.code)return c(r);if("!"===u&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return e.match(/\[[^\]]*\]/),r.inline=r.f=p,L;if("["===u&&e.match(/.*\](\(| ?\[)/,!1))return r.linkText=!0,n.highlightFormatting&&(r.formatting="link"),c(r);if("]"===u&&r.linkText){n.highlightFormatting&&(r.formatting="link");var y=c(r);return r.linkText=!1,r.inline=r.f=p,y}if("<"===u&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=h,n.highlightFormatting&&(r.formatting="link");var y=c(r);return y?y+=" ":y="",y+A}if("<"===u&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=h,n.highlightFormatting&&(r.formatting="link");var y=c(r);return y?y+=" ":y="",y+I}if("<"===u&&e.match(/^\w/,!1)){if(e.string.indexOf(">")!=-1){var w=e.string.substring(1,e.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(w)&&(r.md_inside=!0)}return e.backUp(1),r.htmlState=t.startState(x),i(e,r,s)}if("<"===u&&e.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var _=!1;if(!n.underscoresBreakWords&&"_"===u&&"_"!==e.peek()&&e.match(/(\w)/,!1)){var C=e.pos-2;if(C>=0){var S=e.string.charAt(C);"_"!==S&&S.match(/(\w)/,!1)&&(_=!0)}}if("*"===u||"_"===u&&!_)if(l&&" "===e.peek());else{if(r.strong===u&&e.eat(u)){n.highlightFormatting&&(r.formatting="strong");var g=c(r);return r.strong=!1,g}if(!r.strong&&e.eat(u))return r.strong=u,n.highlightFormatting&&(r.formatting="strong"),c(r);if(r.em===u){n.highlightFormatting&&(r.formatting="em");var g=c(r);return r.em=!1,g}if(!r.em)return r.em=u,n.highlightFormatting&&(r.formatting="em"),c(r)}else if(" "===u&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return c(r);e.backUp(1)}return" "===u&&(e.match(/ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),c(r)}function h(t,e){var r=t.next();if(">"===r){e.f=e.inline=d,n.highlightFormatting&&(e.formatting="link");var i=c(e);return i?i+=" ":i="",i+A}return t.match(/^[^>]+/,!0),A}function p(t,e){if(t.eatSpace())return null;var r=t.next();return"("===r||"["===r?(e.f=e.inline=f("("===r?")":"]"),n.highlightFormatting&&(e.formatting="link-string"),e.linkHref=!0,c(e)):"error"}function f(t){return function(e,r){var i=e.next();if(i===t){r.f=r.inline=d,n.highlightFormatting&&(r.formatting="link-string");var o=c(r);return r.linkHref=!1,o}return e.match(b(t),!0)&&e.backUp(1),r.linkHref=!0,c(r)}}function m(t,e){return t.match(/^[^\]]*\]:/,!1)?(e.f=g,t.next(),n.highlightFormatting&&(e.formatting="link"),e.linkText=!0,c(e)):r(t,e,d)}function g(t,e){if(t.match(/^\]:/,!0)){e.f=e.inline=v,n.highlightFormatting&&(e.formatting="link");var r=c(e);return e.linkText=!1,r}return t.match(/^[^\]]+/,!0),N}function v(t,e){return t.eatSpace()?null:(t.match(/^[^\s]+/,!0),void 0===t.peek()?e.linkTitle=!0:t.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),e.f=e.inline=d,P)}function b(t){return V[t]||(t=(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),V[t]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+t+")")),V[t]}var y=t.modes.hasOwnProperty("xml"),x=t.getMode(e,y?{name:"xml",htmlMode:!0}:"text/plain"),w={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},_=function(){var n,r,i={},o={},a=[];for(var s in t.modes)t.modes.propertyIsEnumerable(s)&&a.push(s);for(n=0;n<a.length;n++)i[a[n]]=a[n];var l=[];for(var s in t.mimeModes)t.mimeModes.propertyIsEnumerable(s)&&l.push({mime:s,mode:t.mimeModes[s]});for(n=0;n<l.length;n++)r=l[n].mime,o[r]=l[n].mime;for(var c in w)(w[c]in i||w[c]in o)&&(i[c]=w[c]);return function(n){return i[n]?t.getMode(e,i[n]):null}}();void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.underscoresBreakWords&&(n.underscoresBreakWords=!0),void 0===n.fencedCodeBlocks&&(n.fencedCodeBlocks=!1),void 0===n.taskLists&&(n.taskLists=!1);var k=0,C="header",S="comment",D="quote",T="variable-2",E="variable-3",$="keyword",M="hr",L="tag",B="formatting",A="link",I="link",N="link",P="string",F="em",O="strong",R=/^([*\-=_])(?:\s*\1){2,}\s*$/,z=/^[*\-+]\s+/,j=/^[0-9]+\.\s+/,q=/^\[(x| )\](?=\s)/,H=/^#+/,W=/^(?:\={1,}|-{1,})$/,U=/^[^#!\[\]*_\\<>` "'(]+/,V=[],X={startState:function(){return{f:a,prevLineHasContent:!1,thisLineHasContent:!1,block:a,htmlState:null,indentation:0,inline:d,text:u,escape:!1,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1}},copyState:function(e){return{f:e.f,prevLineHasContent:e.prevLineHasContent,thisLineHasContent:e.thisLineHasContent,block:e.block,htmlState:e.htmlState&&t.copyState(x,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?t.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,escape:!1,formatting:!1,linkTitle:e.linkTitle,em:e.em,strong:e.strong,header:e.header,taskList:e.taskList,list:e.list,listDepth:e.listDepth,quote:e.quote,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside}},token:function(t,e){if(e.formatting=!1,t.sol()){var n=t.match(/^\s*$/,!0)||e.header;if(e.header=0,n)return e.prevLineHasContent=!1,o(e);e.prevLineHasContent=e.thisLineHasContent,e.thisLineHasContent=!0,e.escape=!1,e.taskList=!1,e.code=!1,e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.f=e.block;var r=t.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=4*Math.floor((r-e.indentation)/4);i>4&&(i=4);var a=e.indentation+i;if(e.indentationDiff=a-e.indentation,e.indentation=a,r>0)return null}var s=e.f(t,e);return t.start==t.pos?this.token(t,e):s},innerMode:function(t){return t.block==s?{state:t.htmlState,mode:x}:t.localState?{state:t.localState,mode:t.localMode}:{state:t,mode:X}},blankLine:o,getType:c,fold:"markdown"};return X},"xml"),t.defineMIME("text/x-markdown","markdown")}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/mode/shell/shell",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";t.defineMode("shell",function(){function t(t,e){for(var n=e.split(" "),r=0;r<n.length;r++)i[n[r]]=t}function e(t,e){if(t.eatSpace())return null;var a=t.sol(),s=t.next();if("\\"===s)return t.next(),null;if("'"===s||'"'===s||"`"===s)return e.tokens.unshift(n(s)),r(t,e);if("#"===s)return a&&t.eat("!")?(t.skipToEnd(),"meta"):(t.skipToEnd(),"comment");if("$"===s)return e.tokens.unshift(o),r(t,e);if("+"===s||"="===s)return"operator";if("-"===s)return t.eat("-"),t.eatWhile(/\w/),"attribute";if(/\d/.test(s)&&(t.eatWhile(/\d/),t.eol()||!/\w/.test(t.peek())))return"number";t.eatWhile(/[\w-]/);var l=t.current();return"="===t.peek()&&/\w+/.test(l)?"def":i.hasOwnProperty(l)?i[l]:null}function n(t){return function(e,n){for(var r,i=!1,a=!1;null!=(r=e.next());){if(r===t&&!a){i=!0;break}if("$"===r&&!a&&"'"!==t){a=!0,e.backUp(1),n.tokens.unshift(o);break}a=!a&&"\\"===r}return!i&&a||n.tokens.shift(),"`"===t||")"===t?"quote":"string"}}function r(t,n){return(n.tokens[0]||e)(t,n)}var i={};t("atom","true false"),t("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function"),t("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo tee telnet top touch vi vim wall wc wget who write yes zsh");var o=function(t,e){e.tokens.length>1&&t.eat("$");var i=t.next(),o=/\w/;return"{"===i&&(o=/[^}]/),"("===i?(e.tokens[0]=n(")"),r(t,e)):(/\d/.test(i)||(t.eatWhile(o),t.eat("}")),e.tokens.shift(),"def")};return{startState:function(){return{tokens:[]}},token:function(t,e){return r(t,e)}}}),t.defineMIME("text/x-sh","shell")}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/selection/active-line",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t){for(var e=0;e<t.state.activeLines.length;e++)t.removeLineClass(t.state.activeLines[e],"wrap",o),t.removeLineClass(t.state.activeLines[e],"background",a)}function n(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function r(t,r){for(var i=[],s=0;s<r.length;s++){var l=r[s];if(l.empty()){var c=t.getLineHandleVisualStart(l.head.line);i[i.length-1]!=c&&i.push(c)}}n(t.state.activeLines,i)||t.operation(function(){e(t);for(var n=0;n<i.length;n++)t.addLineClass(i[n],"wrap",o),t.addLineClass(i[n],"background",a);t.state.activeLines=i})}function i(t,e){r(t,e.ranges)}var o="CodeMirror-activeline",a="CodeMirror-activeline-background";t.defineOption("styleActiveLine",!1,function(n,o,a){var s=a&&a!=t.Init;o&&!s?(n.state.activeLines=[],r(n,n.listSelections()),n.on("beforeSelectionChange",i)):!o&&s&&(n.off("beforeSelectionChange",i),e(n),delete n.state.activeLines)})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define("codemirror/addon/edit/matchbrackets",["../../lib/codemirror"],t):t(CodeMirror)}(function(t){function e(t,e,r,i){var o=t.getLineHandle(e.line),l=e.ch-1,c=l>=0&&s[o.text.charAt(l)]||s[o.text.charAt(++l)];if(!c)return null;var u=">"==c.charAt(1)?1:-1;if(r&&u>0!=(l==e.ch))return null;var d=t.getTokenTypeAt(a(e.line,l+1)),h=n(t,a(e.line,l+(u>0?1:0)),u,d||null,i);return null==h?null:{from:a(e.line,l),to:h&&h.pos,match:h&&h.ch==c.charAt(0),forward:u>0}}function n(t,e,n,r,i){for(var o=i&&i.maxScanLineLength||1e4,l=i&&i.maxScanLines||1e3,c=[],u=i&&i.bracketRegex?i.bracketRegex:/[(){}[\]]/,d=n>0?Math.min(e.line+l,t.lastLine()+1):Math.max(t.firstLine()-1,e.line-l),h=e.line;h!=d;h+=n){var p=t.getLine(h);if(p){var f=n>0?0:p.length-1,m=n>0?p.length:-1;if(!(p.length>o))for(h==e.line&&(f=e.ch-(n<0?1:0));f!=m;f+=n){var g=p.charAt(f);if(u.test(g)&&(void 0===r||t.getTokenTypeAt(a(h,f+1))==r)){var v=s[g];if(">"==v.charAt(1)==n>0)c.push(g);else{if(!c.length)return{pos:a(h,f),ch:g};c.pop()}}}}}return h-n!=(n>0?t.lastLine():t.firstLine())&&null}function r(t,n,r){for(var i=t.state.matchBrackets.maxHighlightLineLength||1e3,s=[],l=t.listSelections(),c=0;c<l.length;c++){var u=l[c].empty()&&e(t,l[c].head,!1,r);if(u&&t.getLine(u.from.line).length<=i){var d=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(t.markText(u.from,a(u.from.line,u.from.ch+1),{className:d})),u.to&&t.getLine(u.to.line).length<=i&&s.push(t.markText(u.to,a(u.to.line,u.to.ch+1),{className:d}))}}if(s.length){o&&t.state.focused&&t.display.input.focus();var h=function(){t.operation(function(){for(var t=0;t<s.length;t++)s[t].clear()})};if(!n)return h;setTimeout(h,800)}}function i(t){t.operation(function(){l&&(l(),l=null),l=r(t,!1,t.state.matchBrackets)})}var o=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),a=t.Pos,s={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},l=null;t.defineOption("matchBrackets",!1,function(e,n,r){r&&r!=t.Init&&e.off("cursorActivity",i),n&&(e.state.matchBrackets="object"==typeof n?n:{},e.on("cursorActivity",i))}),t.defineExtension("matchBrackets",function(){r(this,!0)}),t.defineExtension("findMatchingBracket",function(t,n,r){return e(this,t,n,r)}),t.defineExtension("scanForBracket",function(t,e,r,i){return n(this,t,e,r,i)})}),define("NoteWidget",["main","codemirror","autoSave","codemirror/mode/python/python","codemirror/mode/ruby/ruby","codemirror/mode/php/php","codemirror/mode/css/css","codemirror/mode/clike/clike","codemirror/mode/htmlmixed/htmlmixed","codemirror/mode/go/go","codemirror/mode/markdown/markdown","codemirror/mode/shell/shell","codemirror/mode/javascript/javascript","codemirror/addon/selection/active-line","codemirror/addon/edit/matchbrackets"],function(t,e,n){var r,i;return r=function(){var t,r,i,o;r='<div id="noteWidget" class="noteWidget hidden hidden-xs">\n    <div class="noteWidget-header clearfix">\n        <h2 class="h4 pull-left">记笔记</h2>\n        <ul class="list-inline pull-right mb0">\n            <li id="noteWidgetMinimize"><span class="icon-minimize"></span></li><li id="noteWidgetZoom"><span class="icon-zoom"></span></li><li id="noteWidgetClose"><span class="icon-close"></span></li>\n        </ul>\n    </div>\n    <form method="POST" action="/api/notes/add" role="form">\n        <div class="form-group">\n            <label for="title" class="sr-only">标题</label>\n            <input type="hidden" value="" id="draftId">\n            <input type="text" name="title" data-error="" autocomplete="off" class="form-control" placeholder="笔记描述" value="">\n        </div>\n        <div class="editor-config clearfix">\n            <select name="lang" class="form-control pull-left input-sm">\n                <optgroup label="文本语法">\n                    <option value="text" data-mode="text">纯文本</option>\n                    <option value="markdown" data-mode="markdown">Markdown</option>\n                    <option value="javascript" data-mode="javascript">Javascript</option>\n                    <option value="css" data-mode="css">CSS</option>\n                    <option value="html5" data-mode="htmlmixed">HTML</option>\n                    <option value="php" data-mode="php">PHP</option>\n                    <option value="python" data-mode="python">Python</option>\n                    <option value="ruby" data-mode="ruby">Ruby</option>\n                    <option value="go" data-mode="go">Go</option>\n                    <option value="c" data-mode="clike">C/C++</option>\n                    <option value="java" data-mode="java">Java</option>\n                    <option value="bash" data-mode="shell">Shell/Bash</option>\n                </optgroup>\n            </select>\n            <div class="pull-right hidden-xs">\n                <select name="indentWithTabs" class="form-control inline-block input-sm">\n                    <optgroup label="缩进模式">\n                        <option value="false">空格缩进</option>\n                        <option value="true">Tabs 缩进</option>\n                    </optgroup>\n                </select>\n                <select name="tabSize" class="form-control inline-block input-sm">\n                    <optgroup label="缩进大小">\n                        <option value="2">2</option>\n                        <option value="4" selected="">4</option>\n                    </optgroup>\n                </select>\n                <select name="lineWrap" class="form-control inline-block input-sm">\n                    <optgroup label="换行方式">\n                        <option value="true">自动换行</option>\n                        <option value="false">不换行</option>\n                    </optgroup>\n                </select>\n            </div>\n        </div>\n        <textarea id="codeMirror" class="form-control" style="display: none;"></textarea>\n        <div class="mt20 clearfix">\n            <div class="pull-right">\n                <span class="text-muted hidden" id="editorStatus">已保存</span>\n                <a id="dropIt" href="javascript:void(0);" class="mr10 hidden">[舍弃]</a>\n                <button data-type="note" id="publishIt2" class="btn btn-default ml10" data-id="" data-do="add" data-url="" data-text="保存私密笔记" data-name="">保存私密笔记</button>\n                <button data-type="note" id="publishIt" class="btn btn-primary ml10" data-id="" data-do="add" data-url="" data-text="保存公开笔记" data-name="">保存公开笔记</button>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>',this.content=$(r),$("body").append(this.content),this.option=i={mode:$("#noteWidget [name=lang] option:selected").data("mode"),indentUnit:$("#noteWidget [name=tabSize]").val(),tabSize:$("#noteWidget [name=tabSize]").val(),lineWrapping:"true"===$("#noteWidget [name=lineWrap]").val(),indentWithTabs:"true"===$("#noteWidget [name=indentWithTabs]").val()},t=e.fromTextArea($("#codeMirror")[0],{lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,mode:i.mode,indentUnit:i.indentUnit,tabSize:i.tabSize,lineWrapping:i.lineWrapping,indentWithTabs:i.indentWithTabs}),e.on($("#noteWidget [name=lang]")[0],"change",function(){var e;return e=$(this).find("option:selected").data("mode"),t.setOption("mode",e)}),$("#noteWidget [name=tabSize]").change(function(){var e;return e=$(this).val(),t.setOption("indentUnit",e),t.setOption("tabSize",e)}),$("#noteWidget [name=lineWrap]").change(function(){var e;return e="true"===$(this).val(),t.setOption("lineWrapping",e)}),$("#noteWidget [name=indentWithTabs]").change(function(){var e;return e="true"===$(this).val(),t.setOption("indentWithTabs",e)}),n.bind(t,function(){return this.do="saveNote",this.type="note",this.title=$("#noteWidget [name=title]").val(),this.text=t.getValue(),this.id=$("#draftId").val(),this.noteId=$("#publishIt").data("id"),this.language=$("#noteWidget [name=lang]").val(),this.language=$("#noteWidget [name=lang]").val()}),o=function(e,n){var r,i,o;return r=e,r.text("加载中").attr("disabled","disabled"),o={title:r.parents("form").find("input[name=title]").val(),text:t.getValue(),isPrivate:$("#isEditPrivate").val()||n,language:r.parents("form").find("[name=lang]").val()},i="/api/notes/add",$.post(i,o,function(t){0===t.status?location.href=t.data.url:r.text(r.data("text")).removeAttr("disabled")},"json")},$(".noteWidget form").submit(function(t){return t.preventDefault(),o($("#publishIt"),0),!1}),$("#publishIt2").click(function(t){return t.preventDefault(),o($(this),1)}),$("#noteWidgetMinimize").click(function(){return $("#noteWidget").toggleClass("minimize")}),$("#noteWidgetZoom").click(function(){var e;return $("#noteWidget").toggleClass("zoom"),$("#noteWidget").removeClass("minimize"),$("#noteWidget").hasClass("zoom")?(e=$(window).height()-215,t.setSize("100%",e)):t.setSize("100%",240),t.refresh()}),$("#noteWidgetClose").click(function(){return $("#noteWidget").removeClass("zoom minimize"),$("#noteWidget").addClass("hidden")}),this.codemirror=t},r.prototype.init=function(t,e){var n,r,i,o;$("#noteWidget").removeClass("hidden"),i=[],$("#noteWidget [name=lang] option").each(function(){return i.push($(this).attr("value"))}),r={javascript:/^(js|coffeescript)$/i,markdown:/^md$/i,c:/^(|cs|cpp|oc|objective-c)$/i,php:/^php[1-6]$/i,html5:/^(xml|html|html5|xhtml)$/i};for(n in r)e.match(r[n])&&(e=n);return i.indexOf(e)!==-1?o=$("#noteWidget [name=lang] option[value="+e+"]").data("mode"):(e="text",o="text"),$("#noteWidget [name=lang]").val(e),this.codemirror.setOption("mode",o),this.codemirror.setValue(t)},i=new r,$("body").on("click",".saveToNote",function(){var t,e,n,r,o;return $("#saveToNote").remove(),n=window.getSelection().toString()?window.getSelection().toString():$(this).prev().attr("data-clipboard-text"),n?i.init(n,"text"):(e=$(this).parents("pre"),t=e.find("code"),r=t.text(),o=t.attr("class")?t.attr("class"):e.attr("class").replace("hljs ",""),i.init(r,o))}),t.hasOwnProperty("notePortal")&&"on"===t.notePortal&&$(".fmt").mouseup(function(t){var e,n;if($("#saveToNote").length&&$("#saveToNote").remove(),n=window.getSelection(),n.toString()&&$(n.focusNode).parents(".fmt").length)return e=$('<button id="saveToNote" class="hidden-xs btn btn-xs widget-saveToNote saveToNote" style="color: #FFF; left: '+(t.pageX-65)+"px; top:"+(t.pageY-40)+'px">放进笔记</button>'),$("body").append(e)}),r}),define("emojiList",[],function(){return["+1","-1","100","1234","8ball","a","ab","abc","abcd","accept","aerial_tramway","airplane","alarm_clock","alien","ambulance","anchor","angel","anger","angry","anguished","ant","apple","aquarius","aries","arrow_backward","arrow_double_down","arrow_double_up","arrow_down","arrow_down_small","arrow_forward","arrow_heading_down","arrow_heading_up","arrow_left","arrow_lower_left","arrow_lower_right","arrow_right","arrow_right_hook","arrow_up","arrow_up_down","arrow_up_small","arrow_upper_left","arrow_upper_right","arrows_clockwise","arrows_counterclockwise","art","articulated_lorry","astonished","atm","b","baby","baby_bottle","baby_chick","baby_symbol","back","baggage_claim","balloon","ballot_box_with_check","bamboo","banana","bangbang","bank","bar_chart","barber","baseball","basketball","bath","bathtub","battery","bear","bee","beer","beers","beetle","beginner","bell","bento","bicyclist","bike","bikini","bird","birthday","black_circle","black_joker","black_medium_small_square","black_medium_square","black_nib","black_small_square","black_square","black_square_button","blossom","blowfish","blue_book","blue_car","blue_heart","blush","boar","boat","bomb","book","bookmark","bookmark_tabs","books","boom","boot","bouquet","bow","bowling","bowtie","boy","bread","bride_with_veil","bridge_at_night","briefcase","broken_heart","bug","bulb","bullettrain_front","bullettrain_side","bus","busstop","bust_in_silhouette","busts_in_silhouette","cactus","cake","calendar","calling","camel","camera","cancer","candy","capital_abcd","capricorn","car","card_index","carousel_horse","cat","cat2","cd","chart","chart_with_downwards_trend","chart_with_upwards_trend","checkered_flag","cherries","cherry_blossom","chestnut","chicken","children_crossing","chocolate_bar","christmas_tree","church","cinema","circus_tent","city_sunrise","city_sunset","cl","clap","clapper","clipboard","clock1","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","closed_book","closed_lock_with_key","closed_umbrella","cloud","clubs","cn","cocktail","coffee","cold_sweat","collision","computer","confetti_ball","confounded","confused","congratulations","construction","construction_worker","convenience_store","cookie","cool","cop","copyright","corn","couple","couple_with_heart","couplekiss","cow","cow2","credit_card","crescent_moon","crocodile","crossed_flags","crown","cry","crying_cat_face","crystal_ball","cupid","curly_loop","currency_exchange","curry","custard","customs","cyclone","dancer","dancers","dango","dart","dash","date","de","deciduous_tree","department_store","diamond_shape_with_a_dot_inside","diamonds","disappointed","disappointed_relieved","dizzy","dizzy_face","do_not_litter","dog","dog2","dollar","dolls","dolphin","donut","door","doughnut","dragon","dragon_face","dress","dromedary_camel","droplet","dvd","e-mail","ear","ear_of_rice","earth_africa","earth_americas","earth_asia","egg","eggplant","eight","eight_pointed_black_star","eight_spoked_asterisk","electric_plug","elephant","email","end","envelope","es","euro","european_castle","european_post_office","evergreen_tree","exclamation","expressionless","eyeglasses","eyes","facepunch","factory","fallen_leaf","family","fast_forward","fax","fearful","feelsgood","feet","ferris_wheel","file_folder","finnadie","fire","fire_engine","fireworks","first_quarter_moon","first_quarter_moon_with_face","fish","fish_cake","fishing_pole_and_fish","fist","five","flags","flashlight","floppy_disk","flower_playing_cards","flushed","foggy","football","fork_and_knife","fountain","four","four_leaf_clover","fr","free","fried_shrimp","fries","frog","frowning","fu","fuelpump","full_moon","full_moon_with_face","game_die","gb","gem","gemini","ghost","gift","gift_heart","girl","globe_with_meridians","goat","goberserk","godmode","golf","grapes","green_apple","green_book","green_heart","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","guitar","gun","haircut","hamburger","hammer","hamster","hand","handbag","hankey","hash","hatched_chick","hatching_chick","headphones","hear_no_evil","heart","heart_decoration","heart_eyes","heart_eyes_cat","heartbeat","heartpulse","hearts","heavy_check_mark","heavy_division_sign","heavy_dollar_sign","heavy_exclamation_mark","heavy_minus_sign","heavy_multiplication_x","heavy_plus_sign","helicopter","herb","hibiscus","high_brightness","high_heel","hocho","honey_pot","honeybee","horse","horse_racing","hospital","hotel","hotsprings","hourglass","hourglass_flowing_sand","house","house_with_garden","hurtrealbad","hushed","ice_cream","icecream","id","ideograph_advantage","imp","inbox_tray","incoming_envelope","information_desk_person","information_source","innocent","interrobang","iphone","it","izakaya_lantern","jack_o_lantern","japan","japanese_castle","japanese_goblin","japanese_ogre","jeans","joy","joy_cat","jp","key","keycap_ten","kimono","kiss","kissing","kissing_cat","kissing_closed_eyes","kissing_face","kissing_heart","kissing_smiling_eyes","koala","koko","kr","large_blue_circle","large_blue_diamond","large_orange_diamond","last_quarter_moon","last_quarter_moon_with_face","laughing","leaves","ledger","left_luggage","left_right_arrow","leftwards_arrow_with_hook","lemon","leo","leopard","libra","light_rail","link","lips","lipstick","lock","lock_with_ink_pen","lollipop","loop","loudspeaker","love_hotel","love_letter","low_brightness","m","mag","mag_right","mahjong","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","man","man_with_gua_pi_mao","man_with_turban","mans_shoe","maple_leaf","mask","massage","meat_on_bone","mega","melon","memo","mens","metal","metro","microphone","microscope","milky_way","minibus","minidisc","mobile_phone_off","money_with_wings","moneybag","monkey","monkey_face","monorail","mortar_board","mount_fuji","mountain_bicyclist","mountain_cableway","mountain_railway","mouse","mouse2","movie_camera","moyai","muscle","mushroom","musical_keyboard","musical_note","musical_score","mute","nail_care","name_badge","neckbeard","necktie","negative_squared_cross_mark","neutral_face","new","new_moon","new_moon_with_face","newspaper","ng","nine","no_bell","no_bicycles","no_entry","no_entry_sign","no_good","no_mobile_phones","no_mouth","no_pedestrians","no_smoking","non-potable_water","nose","notebook","notebook_with_decorative_cover","notes","nut_and_bolt","o","o2","ocean","octocat","octopus","oden","office","ok","ok_hand","ok_woman","older_man","older_woman","on","oncoming_automobile","oncoming_bus","oncoming_police_car","oncoming_taxi","one","open_file_folder","open_hands","open_mouth","ophiuchus","orange_book","outbox_tray","ox","package","page_facing_up","page_with_curl","pager","palm_tree","panda_face","paperclip","parking","part_alternation_mark","partly_sunny","passport_control","paw_prints","peach","pear","pencil","pencil2","penguin","pensive","performing_arts","persevere","person_frowning","person_with_blond_hair","person_with_pouting_face","phone","pig","pig2","pig_nose","pill","pineapple","pisces","pizza","plus1","point_down","point_left","point_right","point_up","point_up_2","police_car","poodle","poop","post_office","postal_horn","postbox","potable_water","pouch","poultry_leg","pound","pouting_cat","pray","princess","punch","purple_heart","purse","pushpin","put_litter_in_its_place","question","rabbit","rabbit2","racehorse","radio","radio_button","rage","rage1","rage2","rage3","rage4","railway_car","rainbow","raised_hand","raised_hands","raising_hand","ram","ramen","rat","recycle","red_car","red_circle","registered","relaxed","relieved","repeat","repeat_one","restroom","revolving_hearts","rewind","ribbon","rice","rice_ball","rice_cracker","rice_scene","ring","rocket","roller_coaster","rooster","rose","rotating_light","round_pushpin","rowboat","ru","rugby_football","runner","running","running_shirt_with_sash","sa","sagittarius","sailboat","sake","sandal","santa","satellite","satisfied","saxophone","school","school_satchel","scissors","scorpius","scream","scream_cat","scroll","seat","secret","see_no_evil","seedling","seven","shaved_ice","sheep","shell","ship","shipit","shirt","shit","shoe","shower","signal_strength","six","six_pointed_star","ski","skull","sleeping","sleepy","slot_machine","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","smile","smile_cat","smiley","smiley_cat","smiling_imp","smirk","smirk_cat","smoking","snail","snake","snowboarder","snowflake","snowman","sob","soccer","soon","sos","sound","space_invader","spades","spaghetti","sparkle","sparkler","sparkles","sparkling_heart","speak_no_evil","speaker","speech_balloon","speedboat","squirrel","star","star2","stars","station","statue_of_liberty","steam_locomotive","stew","straight_ruler","strawberry","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","sun_with_face","sunflower","sunglasses","sunny","sunrise","sunrise_over_mountains","surfer","sushi","suspect","suspension_railway","sweat","sweat_drops","sweat_smile","sweet_potato","swimmer","symbols","syringe","tada","tanabata_tree","tangerine","taurus","taxi","tea","telephone","telephone_receiver","telescope","tennis","tent","thought_balloon","three","thumbsdown","thumbsup","ticket","tiger","tiger2","tired_face","tm","toilet","tokyo_tower","tomato","tongue","top","tophat","tractor","traffic_light","train","train2","tram","triangular_flag_on_post","triangular_ruler","trident","triumph","trolleybus","trollface","trophy","tropical_drink","tropical_fish","truck","trumpet","tshirt","tulip","turtle","tv","twisted_rightwards_arrows","two","two_hearts","two_men_holding_hands","two_women_holding_hands","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7981","u7a7a","uk","umbrella","unamused","underage","unlock","up","us","v","vertical_traffic_light","vhs","vibration_mode","video_camera","video_game","violin","virgo","volcano","vs","walking","waning_crescent_moon","waning_gibbous_moon","warning","watch","water_buffalo","watermelon","wave","wavy_dash","waxing_crescent_moon","waxing_gibbous_moon","wc","weary","wedding","whale","whale2","wheelchair","white_check_mark","white_circle","white_flower","white_large_square","white_medium_small_square","white_medium_square","white_small_square","white_square_button","wind_chime","wine_glass","wink","wolf","woman","womans_clothes","womans_hat","womens","worried","wrench","x","yellow_heart","yen","yum","zap","zero","zzz"]}),define("highLight",["main","highlightjs","math","flowChart","sequenceChart","Clipboard","NoteWidget","emojiList","jquery_hoverIntent"],function(t,e,n,r,i,o,a,s){"use strict";return function(a){var l,c,u,d,h,p;h=function(e){var n;if(n=e.attr("class").trim().replace(/emoji[ \-]/g,""),s.indexOf(n)!==-1)return e.after('<img src="'+t.staticUrl+"/global/img/emojis/"+n+'.png" class="emoji" alt="'+n+'" title="'+n+'" />'),e.remove()},u=/((?:0\u20E3|1\u20E3|2\u20E3|3\u20E3|4\u20E3|5\u20E3|6\u20E3|7\u20E3|8\u20E3|9\u20E3|#\u20E3|\*\u20E3|\uD83C(?:\uDDE6\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF2|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFD|\uDDFF)|\uDDE7\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFC|\uDDFE|\uDDFF)|\uDDE8\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDE9\uD83C(?:\uDDEA|\uDDEC|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDFF)|\uDDEA\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDED|\uDDF7|\uDDF8|\uDDF9|\uDDFA)|\uDDEB\uD83C(?:\uDDEE|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDF7)|\uDDEC\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF1|\uDDF2|\uDDF3|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFE)|\uDDED\uD83C(?:\uDDF0|\uDDF2|\uDDF3|\uDDF7|\uDDF9|\uDDFA)|\uDDEE\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9)|\uDDEF\uD83C(?:\uDDEA|\uDDF2|\uDDF4|\uDDF5)|\uDDF0\uD83C(?:\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDF2|\uDDF3|\uDDF5|\uDDF7|\uDDFC|\uDDFE|\uDDFF)|\uDDF1\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDEE|\uDDF0|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFE)|\uDDF2\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDF3\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFF)|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C(?:\uDDE6|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF7|\uDDF8|\uDDF9|\uDDFC|\uDDFE)|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C(?:\uDDEA|\uDDF4|\uDDF8|\uDDFA|\uDDFC)|\uDDF8\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDE9|\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFD|\uDDFE|\uDDFF)|\uDDF9\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF9|\uDDFB|\uDDFC|\uDDFF)|\uDDFA\uD83C(?:\uDDE6|\uDDEC|\uDDF2|\uDDF8|\uDDFE|\uDDFF)|\uDDFB\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDEE|\uDDF3|\uDDFA)|\uDDFC\uD83C(?:\uDDEB|\uDDF8)|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C(?:\uDDEA|\uDDF9)|\uDDFF\uD83C(?:\uDDE6|\uDDF2|\uDDFC)))|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2694\u2696\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD79\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED0\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3]|\uD83E[\uDD10-\uDD18\uDD80-\uDD84\uDDC0])/g,
a?(a.find("h1, h2, h3, strong").each(function(){return $(this).html($(this).html().replace(u,'<span style="font-weight:normal;">$1</span>'))}),a.find("span.emoji").each(function(){return h($(this))})):($("h1, h2, h3, strong").each(function(){return $(this).html($(this).html().replace(u,'<span style="font-weight:normal;">$1</span>'))}),$("span.emoji").each(function(){return h($(this))})),p=function(t){var e,n,r,i;return e=document,i=t.get(0),e.body.createTextRange?(n=e.body.createTextRange(),n.moveToElementText(i),n.select()):window.getSelection?(r=window.getSelection(),n=e.createRange(),n.selectNodeContents(i),r.removeAllRanges(),r.addRange(n)):void 0},c=function(t){var e,n,r,i;i='\n      <div class="widget-codetool" style="display:none;">\n      <div class="widget-codetool--inner">\n      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="全选"></span>\n      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top"  data-clipboard-text="" title="复制"></span>\n      <span type="button" class="saveToNote code-tool" data-toggle="tooltip" data-placement="top" title="放进笔记"></span>\n      </div>\n      </div>\n      ',r=$(i),t.before(r),$('[data-toggle="tooltip"]').tooltip({container:"body"}),n=r.find(".copyCode"),e=t.children("code"),t.hoverIntent({interval:50,over:function(){r.show()},out:function(){r.is(":hover")||r.hide()}}),r.hoverIntent({interval:50,over:function(){},out:function(){t.is(":hover")||r.hide()}}),r.find(".selectCode").click(function(){return p(e)}),n.attr("data-clipboard-text",e.text());var a=new o(".copyCode");a.on("success",function(t){$(".copyCode").attr("data-original-title","复制"),$(t.trigger).attr("data-original-title","已复制").tooltip("show"),t.clearSelection()}),a.on("error",function(t){$(t.trigger).prev().trigger("click"),$(".copyCode").attr("data-original-title","复制"),$(t.trigger).attr("data-original-title","按 ⌘+c 复制").tooltip("show")})},d=function(t){var n,o,s,l,u,d,h,p,f,m,g,v;g=t,d={actionscript:/^as[1-3]$/i,cmake:/^(make|makefile)$/i,cs:/^csharp$/i,css:/^css[1-3]$/i,javascript:/^js$/i,markdown:/^md$/i,objectivec:/^(oc|objective-c)$/i,php:/^php[1-6]$/i,sql:/^mysql$/i,xml:/^(html|html5|xhtml)$/i,flow:/^flow$/i,sequence:/^sequence$/i},l=void 0,u=e.listLanguages(),s=void 0,n=void 0,f=!1,2===g.children("code").length?(n=g.children("code").first().text(),g.children("code").first().remove(),s=g.children("code").addClass(n)):(s=g.children("code"),1===s.text().split("\n").length&&s.css({"word-break":"break-word","white-space":"initial"}),n=s.attr("class")),n&&(o=n.split(/\s+/),o.indexOf("nohighlight")!==-1&&(f=!0),o.forEach(function(t){var e,n;if(n=t.toLowerCase(),u.indexOf(n)!==-1)l=n;else for(e in d)n.match(d[e])&&(l=e)})),l?"flow"===l?(p=$(".flowChart").length,s.parent().after('<div id="flowDiagram'+p+'" class="flowChart"></div>'),r(s.text(),"flowDiagram"+p),s.parent().remove()):"sequence"===l?(a=s.parent(),v=s.text(),p=$(".sequenceChart").length,a.replaceWith('<div id="sequenceDiagram'+p+'" class="sequenceChart">'+v+"</div>"),i($("#sequenceDiagram"+p))):(m=e.highlight(l,s.text(),!0),s.html(m.value)):f||(h=g.html(),h.length<1e4&&e.highlightBlock(g[0])),c(g)},"undefined"!=typeof e&&(a?(l=a.text().indexOf("$$"),l!==-1&&n(a),a.find("pre").each(function(){d($(this))})):(l=!1,$(".fmt").each(function(){$(this).text().indexOf("$$")!==-1&&(l=!0)}),l&&n(),$(".fmt pre").each(function(){d($(this))})))}}),define("statusToggle",[],function(){"use strict";return function(t){t.data("toggle","false"),t.data("toggle")&&(t.on("active",function(e,n){t.data("toggle","true"),n.call(this)}),t.on("unactive",function(e,n){t.data("toggle","true"),n.call(this)}))}}),function(t){var e,n={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},r='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',i=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],o=t(r).data("autosize",!0)[0];o.style.lineHeight="99px","99px"===t(o).css("lineHeight")&&i.push("lineHeight"),o.style.lineHeight="",t.fn.autosize=function(r){return this.length?(r=t.extend({},n,r||{}),o.parentNode!==document.body&&t(document.body).append(o),this.each(function(){function n(){var e,n=!!window.getComputedStyle&&window.getComputedStyle(h,null);n?(e=h.getBoundingClientRect().width,0!==e&&"number"==typeof e||(e=parseInt(n.width,10)),t.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(t,r){e-=parseInt(n[r],10)})):e=p.width(),o.style.width=Math.max(e,0)+"px"}function a(){var a={};if(e=h,o.className=r.className,o.id=r.id,c=parseInt(p.css("maxHeight"),10),t.each(i,function(t,e){a[e]=p.css(e)}),t(o).css(a).attr("wrap",p.attr("wrap")),n(),window.chrome){var s=h.style.width;h.style.width="0px";h.offsetWidth;h.style.width=s}}function s(){var t,i;e!==h?a():n(),!h.value&&r.placeholder?o.value=(p.attr("placeholder")||"")+r.append:o.value=h.value+r.append,o.style.overflowY=h.style.overflowY,i=parseInt(h.style.height,10),o.scrollTop=0,o.scrollTop=9e4,t=o.scrollTop,c&&t>c?(h.style.overflowY="scroll",t=c):(h.style.overflowY="hidden",t<u&&(t=u)),t+=f,t-=28,i!==t&&(h.style.height=t+"px",m&&r.callback.call(h,h),p.trigger("autosize.resized"))}function l(){clearTimeout(d),d=setTimeout(function(){var t=p.width();t!==v&&(v=t,s())},parseInt(r.resizeDelay,10))}var c,u,d,h=this,p=t(h),f=0,m=t.isFunction(r.callback),g={height:h.style.height,overflow:h.style.overflow,overflowY:h.style.overflowY,wordWrap:h.style.wordWrap,resize:h.style.resize},v=p.width();p.css("resize");p.data("autosize")||(p.data("autosize",!0),"border-box"!==p.css("box-sizing")&&"border-box"!==p.css("-moz-box-sizing")&&"border-box"!==p.css("-webkit-box-sizing")||(f=p.outerHeight()-p.height()),u=Math.max(parseInt(p.css("minHeight"),10)-f||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"onpropertychange"in h?"oninput"in h?p.on("input.autosize keyup.autosize",s):p.on("propertychange.autosize",function(){"value"===event.propertyName&&s()}):p.on("input.autosize",s),r.resizeDelay!==!1&&t(window).on("resize.autosize",l),p.on("autosize.resize",s),p.on("autosize.resizeIncludeStyle",function(){e=null,s()}),p.on("autosize.destroy",function(){e=null,clearTimeout(d),t(window).off("resize",l),p.off("autosize").off(".autosize").css(g).removeData("autosize")}),s())})):this}}(jQuery||$),define("jquery_autosize",["jquery"],function(t){return function(){var e;return e||t.$.fn.autosize}}(this)),function(){!function(t){return"function"==typeof define&&define.amd?define("atwho",["jquery"],t):t(window.jQuery)}(function(t){var e,n,r,i,o,a,s,l,c=[].slice;r=function(){function e(e){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=t(e),this.iframe=null,this.setIframe(),this.listen()}return e.prototype.setIframe=function(t){return t?(this.window=t.contentWindow,this.document=t.contentDocument||this.window.document,this.iframe=t):(this.document=document,this.window=window,this.iframe=null)},e.prototype.controller=function(t){var e,n,r,i;if(this.alias_maps[t])n=this.controllers[this.alias_maps[t]];else{i=this.controllers;for(r in i)if(e=i[r],r===t){n=e;break}}return n?n:this.controllers[this.current_flag]},e.prototype.set_context_for=function(t){return this.current_flag=t,this},e.prototype.reg=function(t,e){var n,r;return n=(r=this.controllers)[t]||(r[t]=new i(this,t)),e.alias&&(this.alias_maps[e.alias]=t),n.init(e),this},e.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(t){return function(e){return t.on_keyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.on_keydown(e)}}(this)).on("scroll.atwhoInner",function(t){return function(e){var n;return null!=(n=t.controller())?n.view.hide(e):void 0}}(this)).on("blur.atwhoInner",function(t){return function(e){var n;if(n=t.controller())return n.view.hide(e,n.get_opt("display_timeout"))}}(this)).on("click.atwhoInner",function(t){return function(e){var n;return null!=(n=t.controller())?n.view.hide(e):void 0}}(this))},e.prototype.shutdown=function(){var t,e,n;n=this.controllers;for(e in n)t=n[e],t.destroy(),delete this.controllers[e];return this.$inputor.off(".atwhoInner")},e.prototype.dispatch=function(){return t.map(this.controllers,function(t){return function(e){var n;return(n=e.get_opt("delay"))?(clearTimeout(t.delayedCallback),t.delayedCallback=setTimeout(function(){if(e.look_up())return t.set_context_for(e.at)},n)):e.look_up()?t.set_context_for(e.at):void 0}}(this))},e.prototype.on_keyup=function(e){var n;switch(e.keyCode){case a.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case a.DOWN:case a.UP:case a.CTRL:t.noop();break;case a.P:case a.N:e.ctrlKey||this.dispatch();break;default:this.dispatch()}},e.prototype.on_keydown=function(e){var n,r;if(n=null!=(r=this.controller())?r.view:void 0,n&&n.visible())switch(e.keyCode){case a.ESC:e.preventDefault(),n.hide(e);break;case a.UP:e.preventDefault(),n.prev();break;case a.DOWN:e.preventDefault(),n.next();break;case a.P:if(!e.ctrlKey)return;e.preventDefault(),n.prev();break;case a.N:if(!e.ctrlKey)return;e.preventDefault(),n.next();break;case a.TAB:case a.ENTER:if(!n.visible())return;e.preventDefault(),n.choose(e);break;default:t.noop()}},e}(),i=function(){function n(n,r){this.app=n,this.at=r,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,e.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new s(this),this.view=new l(this)}return n.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},n.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho.default,e),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},n.prototype.call_default=function(){var e,n,r;r=arguments[0],e=2<=arguments.length?c.call(arguments,1):[];try{return o[r].apply(this,e)}catch(e){return n=e,t.error(""+n+" Or maybe At.js doesn't have function "+r)}},n.prototype.trigger=function(t,e){var n,r;return null==e&&(e=[]),e.push(this),n=this.get_opt("alias"),r=n?""+t+"-"+n+".atwho":""+t+".atwho",this.$inputor.trigger(r,e)},n.prototype.callbacks=function(t){return this.get_opt("callbacks")[t]||o[t]},n.prototype.get_opt=function(t,e){var n;try{return this.setting[t]}catch(t){return n=t,null}},n.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},n.prototype.catch_query=function(){var t,e,n,r,i,o;return e=this.content(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),o=e.slice(0,t),r=this.callbacks("matcher").call(this,this.at,o,this.get_opt("start_with_space")),"string"==typeof r&&r.length<=this.get_opt("max_len",20)?(i=t-r.length,n=i+r.length,this.pos=i,r={text:r,head_pos:i,end_pos:n},this.trigger("matched",[this.at,r.text])):(r=null,this.view.hide()),this.query=r},n.prototype.rect=function(){var t,e;if(t=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return"true"===this.$inputor.attr("contentEditable")&&(t=this.cur_rect||(this.cur_rect=t)||t),e=this.app.document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+e}},n.prototype.reset_rect=function(){if("true"===this.$inputor.attr("contentEditable"))return this.cur_rect=null},n.prototype.mark_range=function(){if("true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection))return this.ie8_range=this.app.document.selection.createRange()},n.prototype.insert_content_for=function(e){var n,r,i;return r=e.data("value"),i=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!i?r:(n=t.extend({},e.data("item-data"),{"atwho-data-value":r,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,i,n))},n.prototype.insert=function(e,n){var r,i,o,a,s,l,c,u,d;return r=this.$inputor,d=this.callbacks("inserting_wrapper").call(this,r,e,this.get_opt("suffix")),r.is("textarea, input")?(l=r.val(),c=l.slice(0,Math.max(this.query.head_pos-this.at.length,0)),u=""+c+d+l.slice(this.query.end_pos||0),r.val(u),r.caret("pos",c.length+d.length,{iframe:this.app.iframe})):(a=this.range)?(o=a.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,a.setStart(a.endContainer,Math.max(o,0)),a.setEnd(a.endContainer,a.endOffset),a.deleteContents(),i=t(d,this.app.document)[0],a.insertNode(i),a.setEndAfter(i),a.collapse(!1),s=this.app.window.getSelection(),s.removeAllRanges(),s.addRange(a)):(a=this.ie8_range)&&(a.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),a.pasteHTML(d),a.collapse(!1),a.select()),r.is(":focus")||r.focus(),r.change()},n.prototype.render_view=function(t){var e;return e=this.get_opt("search_key"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.get_opt("limit")))},n.prototype.look_up=function(){var e,n;if(e=this.catch_query())return n=function(t){return t&&t.length>0?this.render_view(t):this.view.hide()},this.model.query(e.text,t.proxy(n,this)),e},n}(),s=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var n,r,i;return n=this.fetch(),r=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,t,n,r)||[],i=this.context.callbacks("remote_filter"),n.length>0||!i&&0===n.length?e(n):i.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,t||[]))},e.prototype.load=function(t){if(!this.saved()&&t)return this._load(t)},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}(),l=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return e.prototype.init=function(){var t;return t=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+t})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bind_event=function(){var e;return e=this.$el.find("ul"),e.on("mouseenter.atwho-view","li",function(n){return e.find(".cur").removeClass("cur"),t(n.currentTarget).addClass("cur")}).on("click",function(t){return function(e){return t.choose(e),e.preventDefault()}}(this))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(t){var e,n;if((e=this.$el.find(".cur")).length&&(n=this.context.insert_content_for(e),this.context.insert(this.context.callbacks("before_insert").call(this.context,n,e),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.get_opt("hide_without_suffix"))return this.stop_showing=!0},e.prototype.reposition=function(e){var n,r;return e.bottom+this.$el.height()-t(window).scrollTop()>t(window).height()&&(e.bottom=e.top-this.$el.height()),n={left:e.left,top:e.bottom},null!=(r=this.context.callbacks("before_reposition"))&&r.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},e.prototype.next=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.next(),e.length||(e=this.$el.find("li:first")),e.addClass("cur")},e.prototype.prev=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.prev(),e.length||(e=this.$el.find("li:last")),e.addClass("cur")},e.prototype.show=function(){var t;return this.stop_showing?void(this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var n;if(this.visible())return isNaN(e)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[t])):(n=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(n,e))},e.prototype.render=function(e){var n,r,i,o,a,s,l;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find("ul").empty(),r=this.$el.find("ul"),a=this.context.get_opt("tpl"),s=0,l=e.length;s<l;s++)i=e[s],i=t.extend({},i,{"atwho-at":this.context.at}),o=this.context.callbacks("tpl_eval").call(this.context,a,i),n=t(this.context.callbacks("highlighter").call(this.context,o,this.context.query.text)),n.data("item-data",i),r.append(n);return this.show(),this.context.get_opt("highlight_first")?r.find("li:first").addClass("cur"):void 0},e}(),a={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},o={before_save:function(e){var n,r,i,o;if(!t.isArray(e))return e;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],t.isPlainObject(n)?o.push(n):o.push({name:n});return o},matcher:function(t,e,n){var r,i;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),i=new RegExp(t+"([A-Za-z0-9_+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),r=i.exec(e),r?r[2]||r[1]:null},filter:function(t,e,n){var r,i,o,a;for(a=[],i=0,o=e.length;i<o;i++)r=e[i],~r[n].toLowerCase().indexOf(t.toLowerCase())&&a.push(r);return a},remote_filter:null,sorter:function(t,e,n){var r,i,o,a;if(!t)return e;for(a=[],i=0,o=e.length;i<o;i++)r=e[i],r.atwho_order=r[n].toLowerCase().indexOf(t.toLowerCase()),r.atwho_order>-1&&a.push(r);return a.sort(function(t,e){return t.atwho_order-e.atwho_order})},tpl_eval:function(t,e){var n;try{return t.replace(/\$\{([^\}]*)\}/g,function(t,n,r){return e[n]})}catch(t){return n=t,""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*(\\w*?)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(n,function(t,e,n,r){return"> "+e+"<strong>"+n+"</strong>"+r+" <"})):t},before_insert:function(t,e){return t},inserting_wrapper:function(t,e,n){var r,i;return r=""===n?n:n||" ",t.is("textarea, input")?""+e+r:"true"===t.attr("contentEditable")?(r=""===n?n:n||"&nbsp;",/firefox/i.test(navigator.userAgent)?i="<span>"+e+r+"</span>":(n="<span contenteditable='false'>"+r+"<span>",i="<span contenteditable='false'>"+e+n+"</span>"),this.app.document.selection&&(i="<span contenteditable='true'>"+e+"</span>"),i):void 0}},n={load:function(t,e){var n;if(n=this.controller(t))return n.model.load(e)},setIframe:function(t){return this.setIframe(t),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},e=t("<div id='atwho-container'></div>"),t.fn.atwho=function(i){var o,a;return a=arguments,t("body").append(e),o=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var e,s;return(s=(e=t(this)).data("atwho"))||e.data("atwho",s=new r(this)),"object"!=typeof i&&i?n[i]&&s?o=n[i].apply(s,Array.prototype.slice.call(a,1)):t.error("Method "+i+" does not exist on jQuery.caret"):s.reg(i.at,i)}),o||this},t.fn.atwho.default={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:o,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),function(){!function(t){return"function"==typeof define&&define.amd?define("caret",["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e,n,r,i,o,a,s,l,c,u,d;return u="caret",e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(){return this.domInputor},e.prototype.getIEPosition=function(){return t.noop()},e.prototype.getPosition=function(){return t.noop()},e.prototype.getOldIEPos=function(){var t,e;return e=s.selection.createRange(),t=s.body.createTextRange(),t.moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?(t=n.cloneRange(),t.selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):s.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return t=s.selection.createRange().duplicate(),t.moveStart("character",-1),e=t.getBoundingClientRect(),{height:e.bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,n,r,i;if(c.getSelection&&(r=this.range())){if(r.endOffset-1<0)return null;e=r.cloneRange(),e.setStart(r.endContainer,r.endOffset-1),e.setEnd(r.endContainer,r.endOffset),i=e.getBoundingClientRect(),n={height:i.height,left:i.left+i.width,top:i.top},e.detach()}else s.selection&&(n=this.getOldIEOffset());return n&&!l&&(n.top+=t(c).scrollTop(),n.left+=t(c).scrollLeft()),n},e.prototype.range=function(){var t;if(c.getSelection)return t=c.getSelection(),t.rangeCount>0?t.getRangeAt(0):null},e}(),n=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,n,r,i,o,a;return e=this.domInputor,o=s.selection.createRange(),i=0,o&&o.parentElement()===e&&(r=e.value.replace(/\r\n/g,"\n"),n=r.length,a=e.createTextRange(),a.moveToBookmark(o.getBookmark()),t=e.createTextRange(),t.collapse(!1),i=a.compareEndPoints("StartToEnd",t)>-1?n:-a.moveStart("character",-n)),i},e.prototype.getPos=function(){return s.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,n;return e=this.domInputor,s.selection?(n=e.createTextRange(),n.move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e,n,r,i;return n=this.domInputor.createTextRange(),t||(t=this.getPos()),n.move("character",t),r=n.boundingLeft,i=n.boundingTop,e=n.boundingHeight,{left:r,top:i,height:e}},e.prototype.getOffset=function(e){var n,r,i;return n=this.$inputor,s.selection?(r=this.getIEOffset(e),r.top+=t(c).scrollTop()+n.scrollTop(),r.left+=t(c).scrollLeft()+n.scrollLeft(),r):(r=n.offset(),i=this.getPosition(e),r={left:r.left+i.left-n.scrollLeft(),top:r.top+i.top-n.scrollTop(),height:i.height})},e.prototype.getPosition=function(t){var e,n,i,o,a,s,l;return e=this.$inputor,o=function(t){return t.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===t&&(t=this.getPos()),l=e.val().slice(0,t),i=e.val().slice(t),a="<span style='position: relative; display: inline;'>"+o(l)+"</span>",a+="<span id='caret' style='position: relative; display: inline;'>|</span>",a+="<span style='position: relative; display: inline;'>"+o(i)+"</span>",s=new r(e),n=s.create(a).rect()},e.prototype.getIEPosition=function(t){var e,n,r,i,o;return r=this.getIEOffset(t),n=this.$inputor.offset(),i=r.left-n.left,o=r.top-n.top,e=r.height,{left:i,top:o,height:e}},e}(),r=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,function(t,r){return e[r]=n.$inputor.css(r)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return t=this.$mirror.find("#caret"),e=t.position(),n={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),i={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},a={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return s.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(e){var n,r;return r=this.getOffset(e),l&&(n=t(l).offset(),r.top+=n.top,r.left+=n.left),r}},s=null,c=null,l=null,d=function(t){var e;return(e=null!=t?t.iframe:void 0)?(l=e,c=e.contentWindow,s=e.contentDocument||c.document):(l=void 0,c=window,s=document)},o=function(t){var e;s=t[0].ownerDocument,c=s.defaultView||s.parentWindow;try{return l=c.frameElement}catch(t){e=t}},t.fn.caret=function(r,o,s){var l;return a[r]?(t.isPlainObject(o)?(d(o),o=void 0):d(s),l=i.contentEditable(this)?new e(this):new n(this),a[r].apply(l,[o])):t.error("Method "+r+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=i,t.fn.caret.apis=a})}.call(this),define("comment",["sfModal","jquery_tmpl","main","highLight","likeHate","statusToggle","jquery_autosize","atwho","caret"],function(t,e,n,r){var i,o;return i=function(t){var e;return t+="",e={101:"question",102:"answer",119:"article",116:"activity",133:"note",121:"news"},e[t.slice(0,3)]},o='<div class="widget-comments__item hover-show ${pos}" id="${id}"><div class="votes widget-vote"><button class="like {{if isLiked}}active{{/if}} hover-show-obj" data-id="${id}" type="button" {{if isLiked}}data-do="like/cancel" {{else}}data-do="like" {{/if}} data-type="comment"></button><span class="count">{{if votes!=0 }}+${votes}{{else}}&nbsp;{{/if}}</span>    </div><div class="comment-content wordbreak">  {{if replyUser}}<span>回复 <a href="${replyUser.url}">${replyUser.name}</a>：</span>{{/if}}        <div class="content fmt">{{html parsedText }} </div><textarea name="text" rows="1" id="commentText-${id}" class="editTextarea mono form-control mb10 hidden">${originalText}</textarea><p class="comment-meta">            <a href="/c/${id}" class="text-muted"></a><a href="${user.url}" class="commentUser" data-userid="${user.id}" data-username="${user.name}" data-userslug="${user.slug}" data-useravatar="${user.avatarUrl}"><strong>${user.name}</strong></a> &middot; <span class="createdDate">${createdDate}</span>{{if canEdit}} <span class="pull-right editBtns hidden"><button class="btn btn-link btn-xs cancel" type="button">取消</button><button class="btn btn-primary btn-xs edit ml10" type="button">保存</button></span> {{/if}}<span class="pull-right commentTools hover-show-obj"> {{if !isSelf}}<a href="#" class="commentReply mr5" data-userid="${user.id}" data-id="${id}" data-username="${user.name}"><span class="flipx glyphicon glyphicon-share-alt" aria-hidden="true"></span></a>{{/if}}{{if canEdit}}<a href="javascript:void(0);" class="commentEdit ml10" data-id="${id}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a>{{/if}}{{if canDelete}}<a href="javascript:void(0);" class="commentDel ml10" data-id="${id}" data-username="${user.name}"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a>{{/if}}{{if !isSelf}}<a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-action=\'report\' data-action-text=\'举报\' data-module="comment" data-id="${id}" data-typetext="评论" data-placement="top" title="举报"><span class="glyphicon glyphicon-flag" aria-hidden="true"></span></a>{{/if}}</span></p></div></div>',$(".widget-comments__form form.clearfix").submit(function(){return!1}),{init:function(t){var e,r,i,o,a,s;t.removeClass("hidden"),r=$(".comment-helper",t),i=r.parent(),o=$(".toggle-comment-helper",t),o.click(function(){$(".comment-helper",t).length?r.toggle():i.append(r)}),s=r.data("rank"),s<15&&r.show(),e=$("#activate"),e.length>0&&$(".widget-comments__form textarea",t).focus(function(){e.modal("show")}),a=!1,$(".widget-comments__form textarea",t).atwho({at:"@",callbacks:{remote_filter:function(e,n){var r,i,o,s;if(e||a){if(e)return $.getJSON("/api/users/search",{q:e},function(t){t.status||n(t.data)})}else{if(a=!0,o=t.data("id")+"",s=[],o.match(/^10[12]/))return $.getJSON("/api/users/search",{objectId:$("#questionTitle").data("id")},function(t){var e;t.status||(e=!0,s=t.data,$(".comment-meta").each(function(){var t,e,n;t=$(this).find(".commentUser"),e={id:t.data("userid"),name:t.data("username"),slug:t.data("userslug"),url:"/u/"+t.data("userslug"),avatarUrl:t.data("useravatar")},n=!1,s.forEach(function(t){t.slug===e.slug&&(n=!0)}),n||s.push(e)}),n(s))});if(0===o.indexOf("119"))return r=$(".post-topheader__info"),i={id:r.data("userid"),name:r.data("username"),slug:r.data("userslug"),url:"/u/"+r.data("userslug"),avatarUrl:r.data("useravatar")},s.push(i),$(".comment-meta").each(function(){var t,e,n;t=$(this).find(".commentUser"),e={id:t.data("userid"),name:t.data("username"),slug:t.data("userslug"),url:"/u/"+t.data("userslug"),avatarUrl:t.data("useravatar")},n=!1,s.forEach(function(t){t.slug===e.slug&&(n=!0)}),n||s.push(e)}),n(s)}},tpl_eval:function(t,e){return'<li data-value="@'+e.name+"["+e.slug+']">'+(e.avatarUrl?'<img class="avatar-24 mr10" src="'+e.avatarUrl+'" />':"")+e.name+" &nbsp; <small>@"+e.slug+"</small></li>"}}}).on("keydown",function(t){var e;if(e=$(this).parents(".widget-comments__form").find("button[type=submit]"),(t.ctrlKey||t.metaKey)&&13===t.keyCode&&!e.attr("disabled"))return e.click(),!1}).autosize().css("height","35px"),$(".commentLogin").click(function(){n.login()})},get:function(t,e,n,a,s){var l,c,u;return l=this,c=[],u=n,$(".ajax-error",e).remove(),u&&e.hasClass("show")?void e.removeClass("show").hide():(e.prepend('<span class="load-text text-muted">加载中<br /></span>'),void $.get("/api/"+i(t)+"/"+t+"/comments",function(n){var i,u,d,h;if($(".load-text",e).remove(),$(".widget-comments__item",e).remove(),0===n.status){if(null===n.data)return;n.data.total>0&&(u=$(".showMoreComments[data-target='#comment-"+t+"']"),u.next(".widget-comments__form").removeClass("hidden"),u.remove(),$("[data-target='#comment-"+t+"']").text(n.data.total+" 评论")),$.each(n.data.rows,function(t,e){e.userId&&(e.isSelf=e.userId===$("#SFUserId").attr("value"),e.pos=e.id===a?"high":"",e.parsedText=e.parsedText.replace(/^[\r\n]/g,""),e.parsedText.indexOf("<p></p>")!==-1&&(e.parsedText=e.parsedText.replace(/<[\/a-z]+>/g,""),e.parsedText="<p>"+e.parsedText+"</p>"),c.push(e),e.index=t+1)}),e.prepend($.tmpl(o,c)),r(e),a&&a.length&&(d=$("#"+a.join(", #")),d.length&&($("body").scrollTop(d.eq(0).offset().top-20),d.addClass("comment-warning"),window.setTimeout(function(){return d.removeClass("comment-warning")},5e3))),e.on("click",".commentEdit",function(){return l.edit({id:$(this).data("id"),content:$(this).parents(".comment-content")}),!1}),e.on("click",".commentDel",function(){return l.delete({id:$(this).data("id"),commentId:t,username:$(this).data("username")}),!1}),e.on("click",".commentReply",function(){return l.reply({userId:$(this).data("userid"),username:$(this).data("username"),commentId:$(this).data("id"),form:$(this).parents(".widget-comments__item").siblings(".widget-comments__form")}),!1}),e.find(".like").likeHate("",function(t){this.parents(".widget-vote").find(".count").text(parseInt(t.data)?"+"+t.data:"")}),h=new RegExp(window.location.host,"ig"),i=void 0,e.find("a").each(function(){i=$(this),!h.test(i.attr("href"))&&/^http/.test(i.attr("href"))&&i.attr("target","_blank")}),0===n.data.rows.length&&(/^101/.test(t)||/^102/.test(t))&&$("#commentText-"+t).focus(),
s&&s()}}))},set:function(e){var n;$(".ajax-error",e.form.parent()).remove(),e.form.before('<p class="load-text text-muted">加载中</p>'),e.trigger.attr("disabled","disabled"),n=e.trigger.data("id"),$.post("/api/"+i(n)+"/"+n+"/comments/add",{text:e.textarea.val(),reply:e.reply||""},function(n){var r,i;$(".load-text",e.form.parent()).remove(),e.trigger.removeAttr("disabled"),0===n.status?(r=n.data.comment,e.textarea.val("").attr("style","height:35px"),e.form.removeData("reply").find(".reply").remove(),r.isSelf=r.userId===$("#SFUserId").attr("value"),r.canDelete=!0,r.canEdit=!0,$("[data-target='#comment-"+e.textarea.data("id")+"']").text(n.data.total+" 评论"),r.index=n.data.total,e.form.before($.tmpl(o,r))):n.data[1]&&"form"!==n.data[0]&&(i=Object.keys(n.data[1])[0],t({hideClose:!0,hideDone:!0,content:n.data[1][i]}))})},reply:function(t){var e,n;n=t.userId,e=t.form,$(".reply",e).remove(),e.removeData("reply"),e.siblings(".reply").remove(),e.data("reply",n).prepend('<div class="reply col-sm-12 mb5"><span>回复：'+t.username+'</span> <a href="" class="removeReply">[&times;]</a></div>'),e.find("textarea").focus(),$(".reply .removeReply",e).click(function(){return $(this).parent().remove(),e.removeData("reply"),!1})},delete:function(e){var n,r;n=this,r=e.commentId,t({title:"删除评论",content:"确认删除来自「"+e.username+"」的评论吗？",closeText:"取消",doneClass:"btn-danger",doneText:"删除",doneFn:function(){$(this).text("加载中").attr("disabled","disabled"),$.post("/api/comment/"+e.id+"/delete",function(e){0===e.status&&($("[data-target='#comment-"+r+"']").text(e.data+" 评论"),n.get(r,$("#comment-"+r),!1),t("hide"))})}})},edit:function(t){var e,n,r,i,o,a,s,l,c;n=t.content,c=t.id,l=n.find(".content").height(),a=n.find(".content").addClass("hidden"),i=n.find(".editBtns").removeClass("hidden"),e=i.find(".cancel"),r=i.find(".edit"),o=n.find(".commentEdit").addClass("hidden"),s=n.find(".editTextarea").css("height",l).removeClass("hidden").autosize().focus(),n.find(".commentTools").addClass("hidden"),s.on("keydown",function(t){return(t.ctrlKey||t.metaKey)&&13===t.keyCode?($(this).siblings(".comment-meta").find("button.edit").click(),!1):27===t.keyCode?($(this).siblings(".comment-meta").find("button.cancel").click(),!1):9===t.keyCode?($(this).siblings(".comment-meta").find("button.edit").focus(),!1):void 0}),e.click(function(){return s.addClass("hidden"),i.addClass("hidden"),a.removeClass("hidden"),o.removeClass("hidden"),n.find(".commentTools").removeClass("hidden"),n.find(".editTextarea").removeClass("error"),n.find(".error--msg").remove(),!1}).on("keydown",function(t){if(9===t.keyCode)return $(this).parent().siblings(".commentDel").focus(),n.find(".commentTools").removeClass("hidden"),!1}),r.click(function(){$.post("/api/comment/"+c+"/edit",{text:s.val()},function(t){0===t.status&&(a.html(t.data.parsedText),n.find(".createdDate").text(t.data.createdDate),e.click(),n.find(".commentTools").removeClass("hidden"))})}).on("keydown",function(t){if(9===t.keyCode)return $(this).siblings("button.cancel").focus(),!1})}}}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("sf_share",e):"object"==typeof exports?exports.WidgetShare=e():t.WidgetShare=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";var r=n(4);t.exports=r},function(t,e){"use strict";function n(){}function r(t,e){var n;return this.element=document.querySelector(t),this.el={head:document.getElementsByTagName("head")[0],body:document.getElementsByTagName("body")[0]},this.config={enabled_networks:0,protocol:-1===["http","https"].indexOf(window.location.href.split(":")[0])?"https://":"//",url:$(t).parent().data("url")||location.href,text:this.data(this.element,"text"),caption:null,title:this.data(this.element,"text")?this.data(this.element,"text"):(n=document.querySelector('meta[property="og:title"]')||document.querySelector('meta[name="twitter:title"]'))?n.getAttribute("content"):(n=document.querySelector("title"))?n.innerText:void 0,image:this.data(this.element,"image")||"http://s.segmentfault.com/img/sf-114.png",pic:this.data(this.element,"pic")||"http://static.segmentfault.com/global/img/touch-icon.png",description:(n=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?n.getAttribute("content"):"",networks:{weibo:{enabled:!0,url:null,title:null,text:null,caption:null,description:null,image:null,pic:null,appkey:"1742025894"},wechart:{enabled:!0,url:null},renren:{enabled:!0,url:null,title:null,text:null,description:null,image:null,comment:null},tqq:{enabled:!0,url:null,appkey:"",title:null,text:null,image:null},douban:{enabled:!0,url:null,href:null,appkey:null,text:null,title:null,caption:null,description:null,image:null,comment:null},google_plus:{enabled:!1,url:null},twitter:{enabled:!0,url:null,text:null,description:null},facebook:{enabled:!0,load_sdk:!0,url:null,app_id:null,title:null,caption:null,description:null,image:null},pinterest:{enabled:!1,url:null,image:null,description:null},email:{enabled:!1,title:null,description:null}}},this.setup(t,e),this}"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var t,e,n;return n=function(t){return function(n){var r,i;r=e.className.split(/\s+/),i=r.indexOf(n),t(r,i,n),e.className=r.join(" ")}},e=this,t={add:n(function(t,e,n){~e||t.push(n)}),remove:n(function(t,e){~e&&t.splice(e,1)}),toggle:n(function(t,e,n){~e?t.splice(e,1):t.push(n)}),contains:function(t){return!!~e.className.split(/\s+/).indexOf(t)},item:function(t){return e.className.split(/\s+/)[t]||null}},Object.defineProperty(t,"length",{get:function(){return e.className.split(/\s+/).length}}),t}});var i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n.prototype.extend=function(t,e,n){var r,i;for(i in e)r=void 0!==t[i],r&&"object"==typeof e[i]?this.extend(t[i],e[i],n):(n||!r)&&(t[i]=e[i])},n.prototype.hide=function(t){return t.style.display="none"},n.prototype.show=function(t){return t.style.display="block"},n.prototype.has_class=function(t,e){return t.classList.contains(e)},n.prototype.add_class=function(t,e){return t.classList.add(e)},n.prototype.remove_class=function(t,e){return t.classList.remove(e)},n.prototype.is_encoded=function(t){return t?(t=t.replace(/\%/g,""),decodeURIComponent(t)!==t):void 0},n.prototype.encode=function(t){return this.is_encoded(t)?t:encodeURIComponent(t)},n.prototype.data=function(t,e){return t?t.getAttribute("data-"+e):void 0},n.prototype.popover=function(t){var e=document.createElement("div");e.innerHTML='<div class="share-modal"> <div class="share-modal-content"> <p class="share-modal-title">打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p> <button type="button" class="share-modal-close">×</button> <div id="shareQrcode"></div> </div> </div>',document.body.appendChild(e),$("#shareQrcode").qrcode({width:300,height:300,text:t});var n=document.getElementsByClassName("share-modal")[0],r=document.getElementsByClassName("share-modal-close")[0];r.onclick=function(){n.parentNode.removeChild(n),r.onclick=null}},n.prototype.popup=function(t,e){var n,r,i,o;return null==e&&(e={}),r={width:500,height:350},r.top=screen.height/2-r.height/2,r.left=screen.width/2-r.width/2,i=function(){var t;t=[];for(n in e)o=e[n],t.push(n+"="+this.encode(o));return t}.call(this).join("&"),i&&(i="?"+i),window.open(t+i,"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=550,height=500")},o(r,n),r.prototype.setup=function(t,e){var n,r,i,o,a;for(i=document.querySelectorAll(t),this.extend(this.config,e,!0),this.set_global_configuration(),this.normalize_network_configuration(),n=o=0,a=i.length;a>o;n=++o)r=i[n],this.setup_instance(t,n);this.config.callback()},r.prototype.setup_instance=function(t,e){var n,r,i,o,a,s,l;for(n=document.querySelectorAll(t)[e],this.hide(n),this.add_class(n,"sharer-"+e),this.inject_html(n),this.show(n),i=n.getElementsByTagName("li"),l=this,s=[],e=o=0,a=i.length;a>o;e=++o)r=i[e],s.push(r.addEventListener("click",function(){return l.event_network(n,this)}));return s},r.prototype.event_network=function(t,e){var n;return n=e.getAttribute("data-network"),this["network_"+n]()},r.prototype.public=function(t){var e,n,r,i,o,a,s;for(a=document.querySelectorAll(this.element),s=[],n=i=0,o=a.length;o>i;n=++i)r=a[n],e=r.getElementsByClassName("social")[0],s.push(this["event_"+t](e));return s},r.prototype.network_facebook=function(){return this.config.networks.facebook.load_sdk?window.FB?FB.ui({method:"feed",name:this.config.networks.facebook.title,link:this.config.networks.facebook.url,picture:this.config.networks.facebook.image,caption:this.config.networks.facebook.caption,description:this.config.networks.facebook.description}):console.error("The Facebook JS SDK hasn't loaded yet."):this.popup("https://www.facebook.com/sharer/sharer.php",{u:this.config.networks.facebook.url})},r.prototype.network_twitter=function(){return this.popup("https://twitter.com/intent/tweet",{text:this.config.networks.twitter.text,url:this.config.networks.twitter.url+"?utm_source=Twitter&utm_medium=shareLink&utm_campaign=socialShare"})},r.prototype.network_google_plus=function(){return this.popup("https://plus.google.com/share",{url:this.config.networks.google_plus.url})},r.prototype.network_pinterest=function(){return this.popup("https://www.pinterest.com/pin/create/button",{url:this.config.networks.pinterest.url,media:this.config.networks.pinterest.image,description:this.config.networks.pinterest.description})},r.prototype.network_email=function(){return this.popup("mailto:",{subject:this.config.networks.email.title,body:this.config.networks.email.description})},r.prototype.network_weibo=function(){var t="";return t=-1!==this.config.networks.weibo.url.indexOf("?")?this.config.networks.weibo.url+"&utm_source=Weibo&utm_medium=shareLink&utm_campaign=socialShare":this.config.networks.weibo.url+"?utm_source=Weibo&utm_medium=shareLink&utm_campaign=socialShare",this.popup("http://service.weibo.com/share/share.php",{title:this.config.networks.weibo.title.replace(/"/g,"%2522"),url:t,pic:this.config.networks.weibo.image,appkey:this.config.networks.weibo.appkey,searchPic:"false"})},r.prototype.network_wechart=function(){return this.popover(this.config.networks.wechart.url+"?utm_source=Wechat&utm_medium=shareLink&utm_campaign=socialShare")},r.prototype.network_renren=function(){return this.popup("http://widget.renren.com/dialog/share",{resourceUrl:this.config.networks.renren.image,pic:this.config.networks.renren.image,srcUrl:this.config.networks.renren.url+"?utm_source=Renren&utm_medium=shareLink&utm_campaign=socialShare",title:this.config.networks.renren.title,description:this.config.networks.renren.description,comment:this.config.networks.renren.comment||""})},r.prototype.network_tqq=function(){return this.popup("http://share.v.t.qq.com/index.php",{c:"share",a:"index",url:this.config.networks.tqq.url+"?utm_source=Tqq&utm_medium=shareLink&utm_campaign=socialShare",title:this.config.networks.tqq.title,appkey:this.config.networks.tqq.appkey,pic:this.config.networks.tqq.image})},r.prototype.network_douban=function(){return this.popup("http://www.douban.com/share/service",{href:this.config.networks.douban.url+"?utm_source=Douban&utm_medium=shareLink&utm_campaign=socialShare",name:this.config.networks.douban.title,image:this.config.networks.douban.image,text:this.config.networks.douban.description,comment:this.config.networks.douban.comment||""})},r.prototype.inject_html=function(t){t.innerHTML='<ul class="sn-inline"><li data-network="weibo"><a href="javascript:void(0);" class="entypo-weibo icon-sn-weibo share-1" data-toggle="tooltip" data-placement="top" title="分享至新浪微博">新浪微博</a></li><li data-network="wechart"><a href="javascript:void(0);" class="entypo-wechart icon-sn-weixin share-2" data-toggle="tooltip" data-placement="top" title="分享至微信">微信</a></li><li data-network="twitter"><a href="javascript:void(0);" class="entypo-twitter icon-sn-twitter share-3" data-toggle="tooltip" data-placement="top" title="分享至 Twitter">Twitter</a></li><li data-network="facebook"><a href="javascript:void(0);" class="entypo-facebook icon-sn-facebook share-4" data-toggle="tooltip" data-placement="top" title="分享至 Facebook">Facebook</a></li></ul>'},r.prototype.hook=function(t,e,n){var r,i;r=this.config.networks[e][t],"function"==typeof r&&(i=r.call(this.config.networks[e],n),void 0!==i&&(i=this.normalize_filter_config_updates(i),this.extend(this.config.networks[e],i,!0),this.normalize_network_configuration()))},r.prototype.set_global_configuration=function(){var t,e,n,r,i,o;for(n in r)n||(this.config[n]=r[n]);i=this.config.networks,o=[];for(e in i){r=i[e];for(n in r)null==this.config.networks[e][n]&&(this.config.networks[e][n]=this.config[n]);this.config.networks[e].enabled?(t="block",this.config.enabled_networks+=1):t="none",o.push(this.config.networks[e].display=t)}return o},r.prototype.normalize_network_configuration=function(){return this.config.networks.facebook.app_id||(this.config.networks.facebook.load_sdk=!1),this.is_encoded(this.config.networks.twitter.description)||(this.config.networks.twitter.description=encodeURIComponent(this.config.networks.twitter.description)),"number"==typeof this.config.networks.facebook.app_id?this.config.networks.facebook.app_id=this.config.networks.facebook.app_id.toString():void 0},r.prototype.normalize_filter_config_updates=function(t){return this.config.networks.facebook.app_id!==t.app_id&&(console.warn("You are unable to change the Facebook app_id after the button has been initialized. Please update your Facebook filters accordingly."),delete t.app_id),this.config.networks.facebook.load_sdk!==t.load_sdk&&(console.warn("You are unable to change the Facebook load_sdk option after the button has been initialized. Please update your Facebook filters accordingly."),delete t.app_id),t},t.exports=r},function(t,e){"use strict";function n(t,e){this.setup(t,e)}n.prototype={constructor:n,setup:function(t,e){this.initAttr(t,e),this.initDom()},initAttr:function(t,e){this.element=$(t),this.options=$.extend({url:this.element.data("url"),shorturl:this.element.data("shorturl"),widgetScript:this.element.data("widgetscript")},e)},initDom:function(){var t=this.options.url,e=this.options.shorturl,n=this.options.widgetScript,r='<div class="form-group mt5 mb10">            <label style="font-size:13px; font-weight:normal;">永久链接</label>            <div class="input-group shareUrl">                <input type="text" class="form-control input-sm" readonly="readonly" data-url="{{url}}" data-shorturl="{{shorturl}}" value="{{url}}">                <span class="input-group-btn">                    <button class="btn btn-default btn-sm" style="box-shadow: none;" type="button" data-share-target="shorturl">缩短</button>                    <button class="btn btn-default btn-sm copy copyUrl" style="box-shadow: none;" type="button" data-toggle="tooltip" data-placement="top" data-clipboard-text="">复制</button>                </span>            </div>        </div>'.replace(/{{url}}/g,t).replace(/{{shorturl}}/g,e);n&&(r+='<div class="form-group mb10">            <label style="font-size:13px; font-weight:normal;">嵌入其他网站</label>            <div class="input-group shareWidgetScript">                <input type="text" class="form-control input-sm" readonly="readonly" value="">                <span class="input-group-btn">                    <button class="btn btn-default btn-sm copy copyWidgetScript" style="box-shadow: none;" type="button" data-toggle="tooltip" data-placement="top" data-clipboard-text="">复制</button>                </span>            </div>            <p class="help-block mb0" style="color: #999;">将以上代码粘贴到其它支持嵌入 &lt;script&gt; 标签的网站</p>        </div>');var i=this.element.find(".icon-sn-dotted");i.popover({html:!0,placement:"top",trigger:"manual",container:"body",content:r}),i.click(function(){$(this).popover("toggle")}),$("body").on("click",function(t){$(t.target).parents(".popover").length||t.target===i[0]||i.popover("hide")}),i.on("shown.bs.popover",function(){"undefined"===e&&$('[data-share-target="shorturl"]').hide(),$(".shareUrl, .shareWidgetScript").on("mouseenter",function(t){$(this).find("input").select()}),$(".shareWidgetScript input").val(n),$(".shareWidgetScript .copyUrl").data("clipboard-text",n),$(".shareUrl .copyWidgetScript").data("clipboard-text",t),$(".shareUrl [data-share-target]").click(function(n){var r=$(".shareUrl input");r.val()===t?(r.val(e),$(this).text("还原")):(r.val(t),$(this).text("缩短"))}),$('[data-toggle="tooltip"]').tooltip();var r=$(".copy");r.mouseout(function(){r.attr("title",""),r.attr("data-original-title","")}),r.click(function(t){try{$(this).parents(".input-group").find("input").select(),document.execCommand("copy"),$(this).attr("title","已复制").attr("data-original-title","已复制").tooltip("show")}catch(t){$(this).attr("title","无法复制!").attr("data-original-title","无法复制!").tooltip("show")}})})},destroy:function(){this.element.off().remove()}},t.exports=n},function(t,e,n){"use strict";function r(t,e,n){this.setup(t,e,n)}var i=n(3),o=n(2);r.prototype={constructor:r,setup:function(t,e,n){return this.initAttr(t,e),n?(this.initDom(),this.initShareMore(),void this.initNetwork()):void this.initNetwork(t)},initAttr:function(t,e){this.element=$(t),this.options=$.extend({url:this.element.data("url"),shorturl:this.element.data("shorturl"),title:this.element.data("title"),text:this.element.data("text"),image:this.element.data("image"),widgetScript:this.element.data("widgetscript")},e)},initDom:function(){var t=this.options.url,e=this.options.shorturl,n=this.options.widgetScript,r='<div style="margin-bottom:10px;">分享扩散：</div><div class="widget-share-network"></div><a type="button" class="btn btn-sm shareMore btn-sn-more" data-toggle="popover" data-placement="top" data-url="{{url}}" data-shorturl="{{shorturl}}"><span class="icon-sn-dotted"></span><strong class="visible-xs-inline">•••</strong></a>'.replace(/{{url}}/g,t).replace(/{{shorturl}}/g,e);this.element.html(r),this.element.find(".shareMore").data("widgetscript",n)},initShareMore:function(){this.more=new i(".shareMore")},initNetwork:function(t){this.network=new o(t||".widget-share-network",{image:this.options.image,title:this.options.title,text:this.options.text,callback:function(){$((t||".widget-share-network")+" .sn-inline a").tooltip()},networks:this.options.networks||{}})},destroy:function(){this.element.empty(),this.switchUrl&&this.switchUrl.destroy(),this.network.destroy()}},t.exports=r}])}),define("specialUrl",["jquery","jquery_tmpl"],function(t){var e,n,r,i,o,a,s,l,c,u;return c=function(e,n){var r,i;r=t(".v_"+e),i=r.after(t.tmpl(l,n)).next(".video-prev"),i.click(function(){i.hide(),i.after(t.tmpl(s,n)).next(".video-body").find(".hide-video").click(function(){i.show(),t(this).parent().remove()})}),r.remove()},i=0,o=[{reg:/^https?:\/\/jsfiddle\.net\/([_a-z0-9-\/,]+)$/i,fn:function(e){e.indexOf("embedded")<0&&(e+=/\/$/.test(e)?"embedded":"/embedded"),e="https://jsfiddle.net/"+e,t('<iframe style="width: 100%; height: 300px" src="'+e+'" allowfullscreen="allowfullscreen" frameborder="0"></iframe>').insertAfter(this)}},{reg:/^https?:\/\/gist\.github\.com\/([_a-z0-9-\/]+)$/i,fn:function(e){var n,r,o,a,s,l,c;c="https://gist.github.com/"+e+".json?callback=special_"+i,o=t('<iframe id="special-gist'+e+'" style="width: 100%;" src="about:blank" frameborder="0"></iframe>').insertAfter(this),s=o[0],a=s.contentWindow?s.contentWindow.document:s.contentDocument?s.contentDocument:s.document,l=a.createElement("script"),r=t(a),n=t("body",r),o.ready(function(){o.height(r.height())}),s.contentWindow["special_"+i]=function(t){n.append(t.div).css({padding:0,margin:0}),r.find("head").append('<link rel="stylesheet" href="'+t.stylesheet+'" />'),r.find("head").append("<style>html{background:#fff;}.gist .gist-file .gist-data{background:none;}                .gist .gist-file .gist-meta{background:#eee;text-shadow:none;}.gist .gist-file .gist-meta a{color:#017e66}                </style>"),setTimeout(function(){o.height(r.height())},5e3)},l.type="text/javascript",l.src=c,a.body.appendChild(l),i++}},{reg:/^https?:\/\/runjs\.cn\/detail\/([_0-9a-z-]+)$/i,fn:function(e){var n,r,i,o,a,s,l;n=function(){t("body",r).css("margin",0),t(".runjs_gist",r).css("border","none"),t(".gist_content",r).css("font-size","14px")},t("#special-runjs"+e).length>0||(l="https://runjs.cn/gist/"+e+"/all",i=t('<iframe id="special-runjs'+e+'" style="width: 100%; height: 300px" src="about:blank" frameborder="0"></iframe>').insertAfter(this),o=i[0],r=o.contentWindow?o.contentWindow.document:o.contentDocument?o.contentDocument:o.document,s=r.createElement("script"),a=r||r.__proto__,a.write=function(e){t(e).appendTo(r.body)},s.type="text/javascript",s.src=l,r.body.appendChild(s),s.onreadystatechange=n,s.onload=n)}},{reg:/^https?:\/\/codepen\.io\/([_a-zA-Z0-9-\/,]+)$/i,fn:function(e){e.indexOf("embed")<0&&(e=e.replace("pen","embed")),e="https://codepen.io/"+e,t('<iframe style="width: 100%; height: 300px" src="'+e+'" allowfullscreen="allowfullscreen" frameborder="0"></iframe>').insertAfter(this)}},{reg:/^https?:\/\/segmentfault\.com\/n\/([_a-zA-Z0-9-\/,\.]+)$/i,fn:function(e){return e="https://segmentfault.com/n/"+e+"/widget",t('<iframe style="width: 100%;height: 300px;" src="'+e+'" allowfullscreen="allowfullscreen" frameborder="0"></iframe>').insertAfter(this),t(this).prev("a").remove()}}],l='<div class="video-prev vp_${id}"><div class="clearfix video-header"><img class="pull-left" src="${thumbnail}"><div class="pull-left"><h5>${title}</h5><span class="text-muted">${link}</span></div></div>',s='<div class="video-body"><embed class="player" src="${player}" type="application/x-shockwave-flash" /><br /><a href="javascript:void(0)" class="hide-video text-muted"><span class="glyphicon glyphicon-open mr5"></span>收起视频</a></div>',e=void 0,r=void 0,a=void 0,u=void 0,n=new RegExp(window.location.host,"ig"),function(){t(".fmt a").each(function(i){var a,s;e=t(this),a=e.attr("href"),!n.test(a)&&/^http/.test(a)&&e.attr("target","_blank"),t.each(o,function(t,n){a&&(r=a.match(n.reg),r&&e.after('<button class="btn btn-xs btn-default ml10 preview" data-url="'+r[1]+'" data-typeid="'+t+'">点击预览</button>'))}),"https:"!==location.protocol&&a&&a.match(/youku\.com/g)&&(s=a.match(/id_\w+/),s&&(s=s[0].slice(3),e.addClass("v_"+s+"_"+i),t.get("https://openapi.youku.com/v2/videos/show_basic.json?video_id="+s+"&client_id=8fdab46779dd5d25",function(t){c(s+"_"+i,t)}))),"https:"!==location.protocol&&a&&a.match(/tudou\.com/g)&&(/albumplay/.test(a)||/listplay/.test(a))&&(s=a.match(/http:\/\/www\.tudou\.com\/.+\/.+\/(.+)\.html/)[1],s&&(e.addClass("v_"+s+"_"+i),t.get("/api/util/video/info?app_key=269fe846bb7a17ec&format=json&itemCodes="+s,function(t){var e;t=t.data[0],e={thumbnail:t.picUrl,title:t.title,link:t.playUrl,player:t.outerPlayerUrl},c(s+"_"+i,e)})))}),t(".fmt").delegate(".preview","click",function(){o[t(this).data("typeid")].fn.call(this,t(this).data("url")),t(this).siblings("iframe").addClass("loading"),t(this).remove()}),t(".fmt img").not(".emoji").each(function(e){var n,r;r=new RegExp(window.location.origin,"i"),n=t(this).data("src"),t(this).css("cursor","pointer"),t(this).click(function(){0===t("#previewImg").length&&(t("body").addClass("isPreviewing").append('<div id="previewImg"><div class="loadingDot"><span class="glyphicon glyphicon-refresh rotate white"></span></div><div class="imgWrapper"><img></div><div class="menu"><a target="_blank" href="javascript:void(0);" class="link-orign">查看原图</a></div></div>'),r.test(n)||/^\/img\//i.test(n)?(t("#previewImg img")[0].src=t(this).attr("src")+"/view",t("#previewImg .link-orign").attr("href",t(this).attr("src")+"/view")):(t("#previewImg img")[0].src=t(this).attr("src"),t("#previewImg .link-orign").attr("href",t(this).attr("src"))),t("#previewImg img")[0].onload=function(){t("#previewImg .loadingDot").remove(),this.height>window.innerHeight&&(t("#previewImg .imgWrapper").css({lineHeight:window.innerHeight+"px"}),t("#previewImg").css("overflow-y","scroll")),this.width>window.innerWidth&&(t("#previewImg img").css("width","100%"),t("#previewImg .imgWrapper").css({lineHeight:"initial"}))},t("#previewImg").click(function(e){t(this).remove(),t("body").removeClass("isPreviewing")}))})})}}),define("hyperdown",[],function(){var t,e=[].slice;return t=function(){function t(){this.commonWhiteList="kbd|b|i|strong|em|sup|sub|br|code|del|a|hr|small",this.specialWhiteList={table:"table|tbody|thead|tfoot|tr|td|th"},this.hooks={}}var n,r,i,o,a,s,l;return l=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},o=function(t){return t.replace(/[-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},a=function(t,e,n){var r,i,s,l,c,u;if(t instanceof Array)if(e instanceof Array)for(r=i=0,l=t.length;i<l;r=++i)u=t[r],n=a(u,e[r],n);else for(s=0,c=t.length;s<c;s++)u=t[s],n=a(u,e,n);else t=o(t),n=n.replace(new RegExp(t,"g"),e);return n},i=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},s=function(t,e){var n,r,i,a,s;if(null==e&&(e=null),null!=e){for(s="",r=i=0,a=e.length-1;0<=a?i<=a:i>=a;r=0<=a?++i:--i)n=e[r],n=o(n),s+=n;return s="["+s+"]*",t.replace(new RegExp("^"+s),"").replace(new RegExp(s+"$"),"")}return t.replace(/^\s*/,"").replace(/\s*$/,"")},n=function(t){var e,n,r,i,o;if(o=[],t instanceof Array)for(r=n=0,i=t.length;n<i;r=++n)e=t[r],o.push(r);else for(r in t)o.push(r);return o},r=function(t){var e,n,r,i,o;if(i=[],t instanceof Array)for(n=0,r=t.length;n<r;n++)o=t[n],i.push(o);else for(e in t)o=t[e],i.push(o);return i},t.prototype.makeHtml=function(t){var e;return this.footnotes=[],this.definitions={},this.holders={},this.uniqid=Math.ceil(1e7*Math.random())+Math.ceil(1e7*Math.random()),this.id=0,t=this.initText(t),e=this.parse(t),e=this.makeFootnotes(e),this.call("makeHtml",e)},t.prototype.hook=function(t,e){return null==this.hooks[t]&&(this.hooks[t]=[]),this.hooks[t].push(e)},t.prototype.makeHolder=function(t){var e;return e="|\r"+this.uniqid+this.id+"\r|",this.id+=1,this.holders[e]=t,e},t.prototype.initText=function(t){return t.replace(/\t/g,"    ").replace(/\r/g,"")},t.prototype.makeFootnotes=function(t){var e,n;if(this.footnotes.length>0){for(t+='<div class="footnotes"><hr><ol>',e=1;n=this.footnotes.shift();)"string"==typeof n?n+=' <a href="#fnref-'+e+'" class="footnote-backref">&#8617;</a>':(n[n.length-1]+=' <a href="#fnref-'+e+'" class="footnote-backref">&#8617;</a>',n=n.length>1?this.parse(n.join("\n")):this.parseInline(n[0])),t+='<li id="fn-'+e+'">'+n+"</li>",e+=1;t+="</ol></div>"}return t},t.prototype.parse=function(t){var e,n,r,i,o,a,s,c,u,d,h,p,f;for(c=[],n=this.parseBlock(t,c),o="",a=0,s=n.length;a<s;a++)e=n[a],p=e[0],h=e[1],r=e[2],f=e[3],i=c.slice(h,r+1),u="parse"+l(p),i=this.call("before"+l(u),i,f),d=this[u](i,f),d=this.call("after"+l(u),d,f),o+=d;return o},t.prototype.call=function(){var t,n,r,i,o,a,s;if(a=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],s=t[0],null==this.hooks[a])return s;for(o=this.hooks[a],r=0,i=o.length;r<i;r++)n=o[r],s=n.apply(this,t),t[0]=s;return s},t.prototype.releaseHolder=function(t,e){var i;for(null==e&&(e=!0),i=0;t.indexOf("\r")>=0&&i<10;)t=a(n(this.holders),r(this.holders),t),i+=1;return e&&(this.holders={}),t},t.prototype.parseInline=function(t,n,r,o){return null==n&&(n=""),null==r&&(r=!0),null==o&&(o=!0),t=this.call("beforeParseInline",t),t=t.replace(/(^|[^\\])(`+)(.+?)\2/gm,function(t){return function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],n[1]+t.makeHolder("<code>"+i(n[3])+"</code>")}}(this)),t=t.replace(/\\(.)/g,function(t){return function(){var n,r;return r=1<=arguments.length?e.call(arguments,0):[],n=i(r[1]),n=n.replace(/\$/g,"&dollar;"),t.makeHolder(n)}}(this)),t=t.replace(/<(https?:\/\/.+)>/gi,function(t){return function(){var n,r,i;return r=1<=arguments.length?e.call(arguments,0):[],i=t.cleanUrl(r[1]),n=t.call("parseLink",r[1]),t.makeHolder('<a href="'+i+'">'+n+"</a>")}}(this)),t=t.replace(/<(\/?)([a-z0-9-]+)(\s+[^>]*)?>/gi,function(t){return function(){var r;return r=1<=arguments.length?e.call(arguments,0):[],("|"+t.commonWhiteList+"|"+n+"|").indexOf("|"+r[2].toLowerCase()+"|")>=0?t.makeHolder(r[0]):i(r[0])}}(this)),t=a(["<",">"],["&lt;","&gt;"],t),t=t.replace(/\[\^((?:[^\]]|\\\]|\\\[)+?)\]/g,function(t){return function(){var n,r;return r=1<=arguments.length?e.call(arguments,0):[],n=t.footnotes.indexOf(r[1]),n<0&&(n=t.footnotes.length+1,t.footnotes.push(t.parseInline(r[1],"",!1))),t.makeHolder('<sup id="fnref-'+n+'"><a href="#fn-'+n+'" class="footnote-ref">'+n+"</a></sup>")}}(this)),t=t.replace(/!\[((?:[^\]]|\\\]|\\\[)*?)\]\(((?:[^\)]|\\\)|\\\()+?)\)/g,function(t){return function(){var n,r,o;return r=1<=arguments.length?e.call(arguments,0):[],n=i(t.escapeBracket(r[1])),o=t.escapeBracket(r[2]),o=t.cleanUrl(o),t.makeHolder('<img src="'+o+'" alt="'+n+'" title="'+n+'">')}}(this)),t=t.replace(/!\[((?:[^\]]|\\\]|\\\[)*?)\]\[((?:[^\]]|\\\]|\\\[)+?)\]/g,function(t){return function(){var n,r,o;return r=1<=arguments.length?e.call(arguments,0):[],n=i(t.escapeBracket(r[1])),o=null!=t.definitions[r[2]]?'<img src="'+t.definitions[r[2]]+'" alt="'+n+'" title="'+n+'">':n,t.makeHolder(o)}}(this)),t=t.replace(/\[((?:[^\]]|\\\]|\\\[)+?)\]\(((?:[^\)]|\\\)|\\\()+?)\)/g,function(t){return function(){var n,r,i;return r=1<=arguments.length?e.call(arguments,0):[],n=t.parseInline(t.escapeBracket(r[1]),"",!1,!1),i=t.escapeBracket(r[2]),i=t.cleanUrl(i),t.makeHolder('<a href="'+i+'">'+n+"</a>")}}(this)),t=t.replace(/\[((?:[^\]]|\\\]|\\\[)+?)\]\[((?:[^\]]|\\\]|\\\[)+?)\]/g,function(t){return function(){var n,r,i;return r=1<=arguments.length?e.call(arguments,0):[],n=t.parseInline(t.escapeBracket(r[1]),"",!1,!1),i=null!=t.definitions[r[2]]?'<a href="'+t.definitions[r[2]]+'">'+n+"</a>":n,t.makeHolder(i)}}(this)),t=this.parseInlineCallback(t),t=t.replace(/<([_a-z0-9-\.\+]+@[^@]+\.[a-z]{2,})>/gi,'<a href="mailto:$1">$1</a>'),o&&(t=t.replace(/(^|[^"])((https?):[x80-xff_a-z0-9-\.\/%#!@\?\+=~\|\,&\(\)]+)($|[^"])/gi,function(t){return function(){var n,r;return r=1<=arguments.length?e.call(arguments,0):[],n=t.call("parseLink",r[2]),r[1]+'<a href="'+r[2]+'">'+n+"</a>"+r[4]}}(this))),t=this.call("afterParseInlineBeforeRelease",t),t=this.releaseHolder(t,r),t=this.call("afterParseInline",t)},t.prototype.parseInlineCallback=function(t){return t=t.replace(/(\*{3})((?:.|\r)+?)\1/gm,function(t){return function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],"<strong><em>"+t.parseInlineCallback(n[2])+"</em></strong>"}}(this)),t=t.replace(/(\*{2})((?:.|\r)+?)\1/gm,function(t){return function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],"<strong>"+t.parseInlineCallback(n[2])+"</strong>"}}(this)),t=t.replace(/(\*)((?:.|\r)+?)\1/gm,function(t){return function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],"<em>"+t.parseInlineCallback(n[2])+"</em>"}}(this)),t=t.replace(/(\s+|^)(_{3})((?:.|\r)+?)\2(\s+|$)/gm,function(t){return function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],n[1]+"<strong><em>"+t.parseInlineCallback(n[3])+"</em></strong>"+n[4]}}(this)),t=t.replace(/(\s+|^)(_{2})((?:.|\r)+?)\2(\s+|$)/gm,function(t){return function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],n[1]+"<strong>"+t.parseInlineCallback(n[3])+"</strong>"+n[4]}}(this)),t=t.replace(/(\s+|^)(_)((?:.|\r)+?)\2(\s+|$)/gm,function(t){return function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],n[1]+"<em>"+t.parseInlineCallback(n[3])+"</em>"+n[4]}}(this)),t=t.replace(/(~{2})((?:.|\r)+?)\1/gm,function(t){
return function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],"<del>"+t.parseInlineCallback(n[2])+"</del>"}}(this))},t.prototype.parseBlock=function(t,e){var r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,b,y,x,w,_,k,C;for(y=t.split("\n"),c=0,h=y.length;c<h;c++)m=y[c],e.push(m);for(this.blocks=[],this.current="normal",this.pos=-1,k=n(this.specialWhiteList).join("|"),a=0,u=d=0,p=e.length;d<p;u=++d)if(m=e[u],o=this.getBlock(),null!=o&&(o=o.slice(0)),v=m.match(/^(\s*)(~|`){3,}([^`~]*)$/i))this.isBlock("code")?(l=o[3][2],l?this.combineBlock().setBlock(u):this.setBlock(u).endBlock()):(l=!1,this.isBlock("list")&&(_=o[3],l=_>0&&v[1].length>=_||v[1].length>_),this.startBlock("code",u,[v[1],v[3],l]));else if(this.isBlock("code"))this.setBlock(u);else if(v=m.match(new RegExp("^\\s*<("+k+")(\\s+[^>]*)?>","i")))C=v[1].toLowerCase(),this.isBlock("html",C)||this.isBlock("pre")||this.startBlock("html",u,C);else if(v=m.match(new RegExp("</("+k+")>\\s*$","i")))C=v[1].toLowerCase(),this.isBlock("html",C)&&this.setBlock(u).endBlock();else if(this.isBlock("html"))this.setBlock(u);else switch(!0){case!!m.match(/^ {4}/):a=0,this.isBlock("pre")||this.isBlock("list")?this.setBlock(u):this.startBlock("pre",u);break;case!!(v=m.match(/^(\s*)((?:[0-9a-z]+\.)|\-|\+|\*)\s+/)):_=v[1].length,a=0,this.isBlock("list")?this.setBlock(u,_):this.startBlock("list",u,_);break;case!!(v=m.match(/^\[\^((?:[^\]]|\]|\[)+?)\]:/)):_=v[0].length-1,this.startBlock("footnote",u,[_,v[1]]);break;case!!(v=m.match(/^\s*\[((?:[^\]]|\]|\[)+?)\]:\s*(.+)$/)):this.definitions[v[1]]=this.cleanUrl(v[2]),this.startBlock("definition",u).endBlock();break;case!!m.match(/^\s*>/):this.isBlock("quote")?this.setBlock(u):this.startBlock("quote",u);break;case!!(v=m.match(/^((?:(?:(?:[ :]*\-[ :]*)+(?:\||\+))|(?:(?:\||\+)(?:[ :]*\-[ :]*)+)|(?:(?:[ :]*\-[ :]*)+(?:\||\+)(?:[ :]*\-[ :]*)+))+)$/)):if(this.isBlock("table"))o[3][0].push(o[3][2]),o[3][2]+=1,this.setBlock(u,o[3]);else{for(s=0,null==o||"normal"!==o[0]||e[o[2]].match(/^\s*$/)?this.startBlock("table",u):(s=1,this.backBlock(1,"table")),"|"===v[1][0]&&(v[1]=v[1].substring(1),"|"===v[1][v[1].length-1]&&(v[1]=v[1].substring(0,v[1].length-1))),w=v[1].split(/\+|\|/),i=[],g=0,f=w.length;g<f;g++)x=w[g],r="none",(v=x.match(/^\s*(:?)\-+(:?)\s*$/))&&(v[1]&&v[2]?r="center":v[1]?r="left":v[2]&&(r="right")),i.push(r);this.setBlock(u,[[s],i,s+1])}break;case!!(v=m.match(/^(#+)(.*)$/)):b=Math.min(v[1].length,6),this.startBlock("sh",u,b).endBlock();break;case!!(v=m.match(/^\s*((=|-){2,})\s*$/))&&null!=o&&"normal"===o[0]&&!e[o[2]].match(/^\s*$/):this.isBlock("normal")?this.backBlock(1,"mh","="===v[1][0]?1:2).setBlock(u).endBlock():this.startBlock("normal",u);break;case!!m.match(/^[-\*]{3,}\s*$/):this.startBlock("hr",u).endBlock();break;default:this.isBlock("list")?m.match(/^(\s*)/)?(a>0?this.startBlock("normal",u):this.setBlock(u),a+=1):0===a?this.setBlock(u):this.startBlock("normal",u):this.isBlock("footnote")?(v=m.match(/^(\s*)/),v[1].length>=o[3][0]?this.setBlock(u):this.startBlock("normal",u)):this.isBlock("table")?0<=m.indexOf("|")?(o[3][2]+=1,this.setBlock(u,o[3])):this.startBlock("normal",u):this.isBlock("pre")?m.match(/^\s*$/)?(a>0?this.startBlock("normal",u):this.setBlock(u),a+=1):this.startBlock("normal",u):this.isBlock("quote")?m.match(/^(\s*)/)?(a>0?this.startBlock("normal",u):this.setBlock(u),a+=1):0===a?this.setBlock(u):this.startBlock("normal",u):null==o||"normal"!==o[0]?this.startBlock("normal",u):this.setBlock(u)}return this.optimizeBlocks(this.blocks,e)},t.prototype.optimizeBlocks=function(t,e){var n,r,i,o,a,s,l,c,u,d,h,p;for(r=t.slice(0),s=e.slice(0),r=this.call("beforeOptimizeBlocks",r,s),a=0;null!=r[a];)l=!1,n=r[a],u=null!=r[a-1]?r[a-1]:null,c=null!=r[a+1]?r[a+1]:null,h=n[0],i=n[1],d=n[2],"pre"===h&&(o=s.reduce(function(t,e){return e.match(/^\s*$/)&&t},!0),o&&(n[0]=h="normal")),"normal"===h&&(p=["list","quote"],i===d&&s[i].match(/^\s*$/)&&null!=u&&null!=c&&u[0]===c[0]&&p.indexOf(u[0])>=0&&(r[a-1]=[u[0],u[1],c[2],null],r.splice(a,2),l=!0)),l||(a+=1);return this.call("afterOptimizeBlocks",r,s)},t.prototype.parseCode=function(t,e){var n,r,o,a,l;return n=e[0],o=e[1],o=s(o),r=n.length,o.match(/^[_a-z0-9-\+\#\:\.]+$/i)?(e=o.split(":"),e.length>1&&(o=e[0],a=e[1],o=s(o),a=s(a))):o=null,t=t.slice(1,-1).map(function(t){return t.replace(new RegExp("/^[ ]{"+r+"}/"),"")}),l=t.join("\n"),l.match(/^\s*$/)?"":"<pre><code"+(o?' class="'+o+'"':"")+(a?' rel="'+a+'"':"")+">"+i(l)+"</code></pre>"},t.prototype.parsePre=function(t){var e;return t=t.map(function(t){return i(t.substring(4))}),e=t.join("\n"),e.match(/^\s*$/)?"":"<pre><code>"+e+"</code></pre>"},t.prototype.parseSh=function(t,e){var n;return n=this.parseInline(s(t[0],"# ")),n.match(/^\s*$/)?"":"<h"+e+">"+n+"</h"+e+">"},t.prototype.parseMh=function(t,e){return this.parseSh(t,e)},t.prototype.parseQuote=function(t){var e;return t=t.map(function(t){return t.replace(/^\s*> ?/,"")}),e=t.join("\n"),e.match(/^\s*$/)?"":"<blockquote>"+this.parse(e)+"</blockquote>"},t.prototype.parseList=function(t){var e,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,b,y,x;for(n="",f=99999,g=[],i=r=0,l=t.length;r<l;i=++r)d=t[i],(p=d.match(/^(\s*)((?:[0-9a-z]+\.?)|\-|\+|\*)(\s+)(.*)$/))?(b=p[1].length,x=0<="+-*".indexOf(p[2])?"ul":"ol",f=Math.min(b,f),g.push([b,x,d,p[4]])):g.push(d);for(e=!1,v=99999,o=0,c=g.length;o<c;o++)m=g[o],m instanceof Array&&m[0]!==f&&(v=Math.min(v,m[0]),e=!0);for(v=e?v:f,a="",s=[],h=0,u=g.length;h<u;h++)m=g[h],m instanceof Array?(b=m[0],x=m[1],d=m[2],y=m[3],b!==f?s.push(d.replace(new RegExp("^\\s{"+v+"}"),"")):(s.length>0&&(n+="<li>"+this.parse(s.join("\n"))+"</li>"),a!==x&&(a&&(n+="</"+a+">"),n+="<"+x+">"),s=[y],a=x)):s.push(m.replace(new RegExp("^\\s{"+v+"}"),""));return s.length>0&&(n+="<li>"+this.parse(s.join("\n"))+("</li></"+a+">")),n},t.prototype.parseTable=function(t,e){var n,r,i,o,a,l,c,u,d,h,p,f,m,g,v,b,y,x,w,_;for(c=e[0],n=e[1],a=c.length>0&&c.reduce(function(t,e){return e+t})>0,l="<table>",r=!a||null,b=!1,d=u=0,f=t.length;u<f;d=++u)if(g=t[d],0<=c.indexOf(d))a&&b&&(a=!1,r=!0);else{for(g=s(g),b=!0,"|"===g[0]&&(g=g.substring(1),"|"===g[g.length-1]&&(g=g.substring(0,g.length-1))),x=g.split("|").map(function(t){return t.match(/^\s+$/)?"":s(t)}),o={},p=-1,h=0,m=x.length;h<m;h++)y=x[h],y.length>0?(p+=1,o[p]=[null!=o[p]?o[p][0]+1:1,y]):null!=o[p]?o[p][0]+=1:o[0]=[1,y];a?l+="<thead>":r&&(l+="<tbody>"),l+="<tr>";for(d in o)i=o[d],v=i[0],_=i[1],w=a?"th":"td",l+="<"+w,v>1&&(l+=' colspan="'+v+'"'),null!=n[d]&&"none"!==n[d]&&(l+=' align="'+n[d]+'"'),l+=">"+this.parseInline(_)+("</"+w+">");l+="</tr>",a?l+="</thead>":r&&(r=!1)}return null!==r&&(l+="</tbody>"),l+="</table>"},t.prototype.parseHr=function(){return"<hr>"},t.prototype.parseNormal=function(t){var e;return t=t.map(function(t){return function(e){return t.parseInline(e)}}(this)),e=s(t.join("\n")),e=e.replace(/(\n\s*){2,}/g,"</p><p>"),e=e.replace(/\n/g,"<br>"),e.match(/^\s*$/)?"":"<p>"+e+"</p>"},t.prototype.parseFootnote=function(t,e){var n,r,i;return i=e[0],r=e[1],n=this.footnotes.indexOf(r),n>=0&&(t=t.slice(0),t[0]=t[0].replace(/^\[\^((?:[^\]]|\]|\[)+?)\]:/,""),this.footnotes[n]=t),""},t.prototype.parseDefinition=function(){return""},t.prototype.parseHtml=function(t,e){return t=t.map(function(t){return function(n){return t.parseInline(n,null!=t.specialWhiteList[e]?t.specialWhiteList[e]:"")}}(this)),t.join("\n")},t.prototype.cleanUrl=function(t){var e;return(e=t.match(/^\s*((http|https|ftp|mailto):[x80-xff_a-z0-9-\.\/%#!@\?\+=~\|\,&\(\)]+)/i))&&e[1],(e=t.match(/^\s*([x80-xff_a-z0-9-\.\/%#!@\?\+=~\|\,&]+)/i))?e[1]:"#"},t.prototype.escapeBracket=function(t){return a(["\\[","\\]","\\(","\\)"],["[","]","(",")"],t)},t.prototype.startBlock=function(t,e,n){return null==n&&(n=null),this.pos+=1,this.current=t,this.blocks.push([t,e,e,n]),this},t.prototype.endBlock=function(){return this.current="normal",this},t.prototype.isBlock=function(t,e){return null==e&&(e=null),this.current===t&&(null===e||this.blocks[this.pos][3]===e)},t.prototype.getBlock=function(){return null!=this.blocks[this.pos]?this.blocks[this.pos]:null},t.prototype.setBlock=function(t,e){return null==t&&(t=null),null==e&&(e=null),null!==t&&(this.blocks[this.pos][2]=t),null!==e&&(this.blocks[this.pos][3]=e),this},t.prototype.backBlock=function(t,e,n){var r,i;return null==n&&(n=null),this.pos<0?this.startBlock(e,0,n):(i=this.blocks[this.pos][2],this.blocks[this.pos][2]=i-t,r=[e,i-t+1,i,n],this.blocks[this.pos][1]<=this.blocks[this.pos][2]?(this.pos+=1,this.blocks.push(r)):this.blocks[this.pos]=r,this.current=e,this)},t.prototype.combineBlock=function(){var t,e;return this.pos<1?this:(e=this.blocks[this.pos-1].slice(0),t=this.blocks[this.pos].slice(0),e[2]=t[2],this.blocks[this.pos-1]=e,this.current=e[0],this.blocks=this.blocks.slice(0,-1),this.pos-=1,this)},t}()}),define("pagedown_converter",["hyperdown","emojiList"],function(t,e){"use strict";function n(t){return t}function r(t){return!1}function i(){}function o(){}var a={};i.prototype={chain:function(t,e){var r=this[t];if(!r)throw new Error("unknown hook "+t);r===n?this[t]=e:this[t]=function(t){var n=Array.prototype.slice.call(arguments,0);return n[0]=r.apply(null,n),e.apply(null,n)}},set:function(t,e){if(!this[t])throw new Error("unknown hook "+t);this[t]=e},addNoop:function(t){this[t]=n},addFalse:function(t){this[t]=r}},a.HookCollection=i,o.prototype={set:function(t,e){this["s_"+t]=e},get:function(t){return this["s_"+t]}},a.Converter=new t;var s=a.Converter.hooks=new i;return s.addNoop("plainLinkText"),s.addNoop("preConversion"),s.addNoop("postNormalization"),s.addNoop("preBlockGamut"),s.addNoop("postBlockGamut"),s.addNoop("preSpanGamut"),s.addNoop("postSpanGamut"),s.addNoop("postConversion"),a.Converter.hook("beforeParseInline",function(t){return t=t.replace(/\$\$(.+?)\$\$/g,function(t){return a.Converter.makeHolder("$$"+t+"$$")})}),a.Converter.hook("afterParseInlineBeforeRelease",function(t){return t=t.replace(/:([_a-z0-9]+):/g,function(t,n){if(e.indexOf(n)!==-1){var r='<img src="'+SF.staticUrl+"/global/img/emojis/"+n+'.png" class="emoji" alt="'+n+'" title="'+n+'">';return a.Converter.makeHolder(r)}return t})}),a}),define("pagedown_sanitizer",["pagedown_converter"],function(t){"use strict";function e(t){return t.replace(/<[^>]*>?/gi,n)}function n(t){return t.match(a)||t.match(s)||t.match(l)?t:""}function r(t){if(""==t)return"";var e=/<\/?\w+[^>]*(\s|$|>)/g,n=t.toLowerCase().match(e),r=(n||[]).length;if(0==r)return t;for(var i,o,a,s="<p><img><br><li><hr><th>",l=[],c=[],u=!1,d=0;d<r;d++)if(i=n[d].replace(/<\/?(\w+).*/,"$1"),!(l[d]||s.search("<"+i+">")>-1)){if(o=n[d],a=-1,!/^<\//.test(o))for(var h=d+1;h<r;h++)if(!l[h]&&n[h]=="</"+i+">"){a=h;break}a==-1?u=c[d]=!0:l[a]=!0}if(!u)return t;var d=0;return t=t.replace(e,function(t){var e=c[d]?"":t;return d++,e})}var i,o;"object"==typeof exports&&"function"==typeof require?(i=exports,o=require("../hyperdown/hyperdown.js")):(i=t,o=i.Converter),i.getSanitizingConverter=function(){var t=o;return t.hooks.chain("postConversion",e),t.hooks.chain("postConversion",r),t};var a=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|h4|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul|table|td|tbody|th|thead|tr)>|<(br|hr)\s?\/?>)$/i,s=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,l=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;return i}),define("pagedown_extra",["pagedown_converter"],function(t){function e(t){return t.replace(/^\s+|\s+$/g,"")}function n(t){return t.replace(/\s+$/g,"")}function r(t){return t.replace(new RegExp("^(\\t|[ ]{1,4})","gm"),"")}function i(t,e){return t.indexOf(e)!=-1}function o(t,e){return t.replace(/<[^>]*>?/gi,function(t){return t.match(e)?t:""})}function a(t,e){for(var n={},r=0;r<t.length;r++)n[t[r]]=t[r];for(r=0;r<e.length;r++)n[e[r]]=e[r];var i=[];for(var o in n)n.hasOwnProperty(o)&&i.push(n[o]);return i}function s(t){return""!=t.charAt(0)&&(t=""+t),""!=t.charAt(t.length-1)&&(t+=""),t}function l(t){return""==t.charAt(0)&&(t=t.substr(1)),""==t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),t}function c(t,e){return o(u(t,e),g)}function u(t,e){var n=e.blockGamutHookCallback(t);return n=p(n),n=n.replace(/~D/g,"$$").replace(/~T/g,"~"),n=e.previousPostConversion(n)}function d(t){return t.replace(/\\\|/g,"~I").replace(/\\:/g,"~i")}function h(t){return t.replace(/~I/g,"|").replace(/~i/g,":")}function p(t){return t=t.replace(/~E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)})}function f(t){return t.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function m(t,e){var n=e;return n=n.replace(/&\#8220;/g,'"'),n=n.replace(/&\#8221;/g,'"'),n=n.replace(/&\#8216;/g,"'"),n=n.replace(/&\#8217;/g,"'"),n=n.replace(/&\#8212;/g,"---"),n=n.replace(/&\#8211;/g,"--"),n=n.replace(/&\#8230;/g,"...")}var g=new RegExp(["^(<\\/?(a|abbr|acronym|applet|area|b|basefont|","bdo|big|button|cite|code|del|dfn|em|figcaption|","font|i|iframe|img|input|ins|kbd|label|map|","mark|meter|object|param|progress|q|ruby|rp|rt|s|","samp|script|select|small|span|strike|strong|","sub|sup|textarea|time|tt|u|var|wbr)[^>]*>|","<(br)\\s?\\/?>)$"].join(""),"i");Array.indexOf||(Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1}),t.Extra=function(){this.converter=null,this.hashBlocks=[],this.footnotes={},this.usedFootnotes=[],this.attributeBlocks=!1,this.googleCodePrettify=!1,this.highlightJs=!1,this.tableClass="",this.tabWidth=4},t.Extra.init=function(e,n){var r=new t.Extra,o=[],a=[],s=[],l=["unHashExtraBlocks"];return n=n||{},n.extensions=n.extensions||["all"],i(n.extensions,"all")&&(n.extensions=["tables","fenced_code_gfm","def_list","attr_list","footnotes","smartypants","strikethrough","newlines"]),a.push("wrapHeaders"),i(n.extensions,"attr_list")&&(o.push("hashFcbAttributeBlocks"),a.push("hashHeaderAttributeBlocks"),l.push("applyAttributeBlocks"),r.attributeBlocks=!0),i(n.extensions,"fenced_code_gfm")&&(a.push("fencedCodeBlocks"),o.push("fencedCodeBlocks")),i(n.extensions,"tables")&&a.push("tables"),i(n.extensions,"def_list")&&a.push("definitionLists"),i(n.extensions,"footnotes")&&(o.push("stripFootnoteDefinitions"),a.push("doFootnotes"),l.push("printFootnotes")),i(n.extensions,"smartypants")&&l.push("runSmartyPants"),i(n.extensions,"strikethrough")&&s.push("strikethrough"),i(n.extensions,"newlines")&&s.push("newlines"),e.hooks.chain("postNormalization",function(t){return r.doTransform(o,t)+"\n"}),e.hooks.chain("preBlockGamut",function(t,e){return r.blockGamutHookCallback=e,t=d(t),t=r.doTransform(a,t)+"\n",t=h(t)}),e.hooks.chain("postSpanGamut",function(t){return r.doTransform(s,t)}),r.previousPostConversion=e.hooks.postConversion,e.hooks.chain("postConversion",function(t){return t=r.doTransform(l,t),r.hashBlocks=[],r.footnotes={},r.usedFootnotes=[],t}),"highlighter"in n&&(r.googleCodePrettify="prettify"===n.highlighter,r.highlightJs="highlight"===n.highlighter),"table_class"in n&&(r.tableClass=n.table_class),r.converter=e,r},t.Extra.prototype.doTransform=function(t,e){for(var n=0;n<t.length;n++)e=this[t[n]](e);return e},t.Extra.prototype.hashExtraBlock=function(t){return"\n<p>~X"+(this.hashBlocks.push(t)-1)+"X</p>\n"},t.Extra.prototype.hashExtraInline=function(t){return"~X"+(this.hashBlocks.push(t)-1)+"X"},t.Extra.prototype.unHashExtraBlocks=function(t){function e(){var r=!1;t=t.replace(/(?:<p>)?~X(\d+)X(?:<\/p>)?/g,function(t,e){r=!0;var i=parseInt(e,10);return n.hashBlocks[i]}),r===!0&&e()}var n=this;return e(),t},t.Extra.prototype.wrapHeaders=function(t){function e(t){return"\n"+t+"\n"}return t=t.replace(/^.+[ \t]*\n=+[ \t]*\n+/gm,e),t=t.replace(/^.+[ \t]*\n-+[ \t]*\n+/gm,e),t=t.replace(/^\#{1,6}[ \t]*.+?[ \t]*\#*\n+/gm,e)};var v="\\{[ \\t]*((?:[#.][-_:a-zA-Z0-9]+[ \\t]*)+)\\}",b=new RegExp("^(#{1,6}.*#{0,6})[ \\t]+"+v+"[ \\t]*(?:\\n|0x03)","gm"),y=new RegExp("^(.*)[ \\t]+"+v+"[ \\t]*\\n(?=[\\-|=]+\\s*(?:\\n|0x03))","gm"),x=new RegExp("^(```[ \\t]*[^{\\s]*)[ \\t]+"+v+"[ \\t]*\\n(?=([\\s\\S]*?)\\n```[ \\t]*(\\n|0x03))","gm");t.Extra.prototype.hashHeaderAttributeBlocks=function(t){function e(t,e,r){return"<p>~XX"+(n.hashBlocks.push(r)-1)+"XX</p>\n"+e+"\n"}var n=this;return t=t.replace(b,e),t=t.replace(y,e)},t.Extra.prototype.hashFcbAttributeBlocks=function(t){function e(t,e,r){return"<p>~XX"+(n.hashBlocks.push(r)-1)+"XX</p>\n"+e+"\n"}var n=this;return t.replace(x,e)},t.Extra.prototype.applyAttributeBlocks=function(t){var e=this,n=new RegExp('<p>~XX(\\d+)XX</p>[\\s]*(?:<(h[1-6]|pre)(?: +class="(\\S+)")?(>[\\s\\S]*?</\\2>))',"gm");return t=t.replace(n,function(t,n,r,i,o){if(!r)return"";for(var s=parseInt(n,10),l=e.hashBlocks[s],c=l.match(/#[^\s#.]+/g)||[],u=c[0]?' id="'+c[0].substr(1,c[0].length-1)+'"':"",d=l.match(/\.[^\s#.]+/g)||[],h=0;h<d.length;h++)d[h]=d[h].substr(1,d[h].length-1);var p="";return i&&(d=a(d,[i])),d.length>0&&(p=' class="'+d.join(" ")+'"'),"<"+r+u+p+o})},t.Extra.prototype.tables=function(t){function n(t,n,i,o,a,s){n=n.replace(/^ *[|]/m,""),i=i.replace(/^ *[|]/m,""),o=o.replace(/^ *[|]/gm,""),n=n.replace(/[|] *$/m,""),i=i.replace(/[|] *$/m,""),o=o.replace(/[|] *$/gm,""),alignspecs=i.split(/ *[|] */),align=[];for(var l=0;l<alignspecs.length;l++){var u=alignspecs[l];u.match(/^ *-+: *$/m)?align[l]=' style="text-align:right;"':u.match(/^ *:-+: *$/m)?align[l]=' style="text-align:center;"':u.match(/^ *:-+ *$/m)?align[l]=' style="text-align:left;"':align[l]=""}var d=n.split(/ *[|] */),h=d.length,p=r.tableClass?' class="'+r.tableClass+'"':"",f=["<table",p,">\n","<thead>\n","<tr>\n"].join("");for(l=0;l<h;l++){var m=c(e(d[l]),r);f+=["  <th",align[l],">",m,"</th>\n"].join("")}f+="</tr>\n</thead>\n";var g=o.split("\n");for(l=0;l<g.length;l++)if(!g[l].match(/^\s*$/)){for(var v=g[l].split(/ *[|] */),b=h-v.length,y=0;y<b;y++)v.push("");for(f+="<tr>\n",y=0;y<h;y++){var x=c(e(v[y]),r);f+=["  <td",align[y],">",x,"</td>\n"].join("")}f+="</tr>\n"}return f+="</table>\n",r.hashExtraBlock(f)}var r=this,i=new RegExp(["^","[ ]{0,3}","[|]","(.+)\\n","[ ]{0,3}","[|]([ ]*[-:]+[-| :]*)\\n","(","(?:[ ]*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm"),o=new RegExp(["^","[ ]{0,3}","(\\S.*[|].*)\\n","[ ]{0,3}","([-:]+[ ]*[|][-| :]*)\\n","(","(?:.*[|].*\\n?)*",")","(?:\\n|$)"].join(""),"gm");return t=t.replace(i,n),t=t.replace(o,n)},t.Extra.prototype.stripFootnoteDefinitions=function(t){var e=this;return t=t.replace(/\n[ ]{0,3}\[\^(.+?)\]\:[ \t]*\n?([\s\S]*?)\n{1,2}((?=\n[ ]{0,3}\S)|$)/g,function(t,n,r){return n=f(n),r+="\n",r=r.replace(/^[ ]{0,3}/g,""),e.footnotes[n]=r,"\n"})},t.Extra.prototype.doFootnotes=function(t){var e=this;if(e.isConvertingFootnote===!0)return t;var n=0;return t=t.replace(/\[\^(.+?)\]/g,function(t,r){var i=f(r),o=e.footnotes[i];if(void 0===o)return t;n++,e.usedFootnotes.push(i);var a='<a href="#fn:'+i+'" id="fnref:'+i+'" title="See footnote" class="footnote">'+n+"</a>";return e.hashExtraInline(a)})},t.Extra.prototype.printFootnotes=function(t){var e=this;if(0===e.usedFootnotes.length)return t;t+='\n\n<div class="footnotes">\n<hr>\n<ol>\n\n';for(var n=0;n<e.usedFootnotes.length;n++){var r=e.usedFootnotes[n],i=e.footnotes[r];e.isConvertingFootnote=!0;var o=c(i,e);delete e.isConvertingFootnote,t+='<li id="fn:'+r+'">'+o+' <a href="#fnref:'+r+'" title="Return to article" class="reversefootnote">&#8617;</a></li>\n\n'}return t+="</ol>\n</div>"},t.Extra.prototype.fencedCodeBlocks=function(t){function e(t){return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/~D/g,"$$"),t=t.replace(/~T/g,"~")}var n=this;return t=t.replace(/(?:^|\n)```[ \t]*(\S*)[ \t]*\n([\s\S]*?)\n```[ \t]*(?=\n)/g,function(t,r,i){var o=r,a=i,s=n.googleCodePrettify?' class="prettyprint"':"",l="";o&&(l=n.googleCodePrettify||n.highlightJs?' class="language-'+o+'"':' class="'+o+'"');var c=["<pre",s,"><code",l,">",e(a),"</code></pre>"].join("");return n.hashExtraBlock(c)})},t.Extra.prototype.educatePants=function(t){var e=this,n="",r=0;t.replace(/(?:<!--[\s\S]*?-->)|(<)([a-zA-Z1-6]+)([^\n]*?>)([\s\S]*?)(<\/\2>)/g,function(i,o,a,s,l,c,u){var d=t.substring(r,u);return n+=e.applyPants(d),e.smartyPantsLastChar=n.substring(n.length-1),r=u+i.length,o?(/code|kbd|pre|script|noscript|iframe|math|ins|del|pre/i.test(a)?e.smartyPantsLastChar=l.substring(l.length-1):l=e.educatePants(l),void(n+=o+a+s+l+c)):void(n+=i)});var i=t.substring(r);return n+=e.applyPants(i),e.smartyPantsLastChar=n.substring(n.length-1),n},t.Extra.prototype.applyPants=function(t){return t=t.replace(/---/g,"&#8212;").replace(/--/g,"&#8211;"),t=t.replace(/\.\.\./g,"&#8230;").replace(/\.\s\.\s\./g,"&#8230;"),t=t.replace(/``/g,"&#8220;").replace(/''/g,"&#8221;"),/^'$/.test(t)?/\S/.test(this.smartyPantsLastChar)?"&#8217;":"&#8216;":/^"$/.test(t)?/\S/.test(this.smartyPantsLastChar)?"&#8221;":"&#8220;":(t=t.replace(/^'(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8217;"),t=t.replace(/^"(?=[!"#\$\%'()*+,\-.\/:;<=>?\@\[\\]\^_`{|}~]\B)/,"&#8221;"),t=t.replace(/"'(?=\w)/g,"&#8220;&#8216;"),t=t.replace(/'"(?=\w)/g,"&#8216;&#8220;"),t=t.replace(/'(?=\d{2}s)/g,"&#8217;"),t=t.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)'(?=\w)/g,"$1&#8216;"),t=t.replace(/([^\s\[\{\(\-])'/g,"$1&#8217;"),t=t.replace(/'(?=\s|s\b)/g,"&#8217;"),t=t.replace(/'/g,"&#8216;"),t=t.replace(/(\s|&nbsp;|--|&[mn]dash;|&\#8211;|&\#8212;|&\#x201[34];)"(?=\w)/g,"$1&#8220;"),t=t.replace(/([^\s\[\{\(\-])"/g,"$1&#8221;"),t=t.replace(/"(?=\s)/g,"&#8221;"),t=t.replace(/"/gi,"&#8220;"))},t.Extra.prototype.runSmartyPants=function(t){return this.smartyPantsLastChar="",t=this.educatePants(t),t=t.replace(/(<([a-zA-Z1-6]+)\b([^\n>]*?)(\/)?>)/g,m)},t.Extra.prototype.definitionLists=function(t){var n=new RegExp(["(\\x02\\n?|\\n\\n)","(?:","(","(","[ ]{0,3}","((?:[ \\t]*\\S.*\\n)+)","\\n?","[ ]{0,3}:[ ]+",")","([\\s\\S]+?)","(","(?=\\0x03)","|","(?=","\\n{2,}","(?=\\S)","(?!","[ ]{0,3}","(?:\\S.*\\n)+?","\\n?","[ ]{0,3}:[ ]+",")","(?!","[ ]{0,3}:[ ]+",")",")",")",")",")"].join(""),"gm"),r=this;return t=s(t),t=t.replace(n,function(t,n,i){var o=e(r.processDefListItems(i));return o="<dl>\n"+o+"\n</dl>",n+r.hashExtraBlock(o)+"\n\n"}),l(t)},t.Extra.prototype.processDefListItems=function(t){var i=this,o=new RegExp(["(\\x02\\n?|\\n\\n+)","(","[ ]{0,3}","(?![:][ ]|[ ])","(?:\\S.*\\n)+?",")","(?=\\n?[ ]{0,3}:[ ])"].join(""),"gm"),a=new RegExp(["\\n(\\n+)?","(","[ ]{0,3}","[:][ ]+",")","([\\s\\S]+?)","(?=\\n*","(?:","\\n[ ]{0,3}[:][ ]|","<dt>|\\x03",")",")"].join(""),"gm");return t=s(t),t=t.replace(/\n{2,}(?=\\x03)/,"\n"),t=t.replace(o,function(t,n,r){for(var o=e(r).split("\n"),a="",s=0;s<o.length;s++){var l=o[s];l=c(e(l),i),a+="\n<dt>"+l+"</dt>"}return a+"\n"}),t=t.replace(a,function(t,e,o,a){return e||a.match(/\n{2,}/)?(a=Array(o.length+1).join(" ")+a,a=r(a)+"\n\n",a="\n"+u(a,i)+"\n"):(a=n(a),a=c(r(a),i)),"\n<dd>"+a+"</dd>\n"}),l(t)},t.Extra.prototype.strikethrough=function(t){return t.replace(/([\W_]|^)~T~T(?=\S)([^\r]*?\S[\*_]*)~T~T([\W_]|$)/g,"$1<del>$2</del>$3")},t.Extra.prototype.newlines=function(t){return t.replace(/(<(?:br|\/li)>)?\n/g,function(t,e){return e?t:" <br>\n"})}}),function(){var t=window.log||$.noop,e={fileError:function(t,e,n){window.alert(n)}},n=window.FileReader||window.File&&window.File.prototype.getAsBinary,r=!!window.FormData,i=window.FileReader||window.File&&window.File.prototype.getAsDataURL,o=!!document.createElement("canvas").toDataURL,a=o&&window.atob,s=!!document.createElement("canvas").mozGetAsFile,l=window.XMLHttpRequest&&window.XMLHttpRequest.prototype.sendAsBinary||window.Blob&&window.Uint8Array&&window.ProgressEvent||window.ArrayBuffer&&window.BlobBuilder,c=!!window.FormData,u=!!document.createElement("canvas").toDataURL,d=n&&l||r&&c,h=i&&(a&&l||s&&c),p=i,f=i&&o,m=function(t){return t.substring(t.indexOf(",")+1,t.length)},g=function(e,n){var i={type:n.type||"",size:n.size||n.fileSize,name:n.name||n.fileName};if(e.resizeImage&&!h&&e.allowUploadOriginalImage&&(t("WARN: Fall back to upload original un-resized image."),e.resizeImage=!1),!e.resizeImage){if(e.fileType&&e.fileType.test&&!e.fileType.test(i.name.substr(i.name.lastIndexOf(".")+1)))return t("ERROR: Invalid Filetype."),void e.fileError.call(this,i,"INVALID_FILETYPE","Invalid filetype.");if(e.fileMaxSize&&n.size>e.fileMaxSize)return t("ERROR: File exceeds size limit."),void e.fileError.call(this,i,"FILE_EXCEEDS_SIZE_LIMIT","File exceeds size limit.")}if(!e.resizeImage&&r)t("INFO: Bypass file reading, insert file object into FormData object directly."),b(e,"file",n,i);else if(window.FileReader){t("INFO: Using FileReader to do asynchronously file reading.");var o=new FileReader;o.onerror=function(n){if(n.target.error)switch(n.target.error){case 8:t("ERROR: File not found."),e.fileError.call(this,i,"FILE_NOT_FOUND","File not found.");break;case 24:t("ERROR: File not readable."),e.fileError.call(this,i,"IO_ERROR","File not readable.");break;case 18:t("ERROR: File cannot be access due to security constrant."),e.fileError.call(this,i,"SECURITY_ERROR","File cannot be access due to security constrant.");break;case 20:}},e.resizeImage?(o.onloadend=function(t){var r=t.target.result;v(e,r,i,n)},o.readAsDataURL(n)):l?(o.onloadend=function(t){var n=t.target.result;b(e,"bin",n,i)},o.readAsBinaryString(n)):e.allowDataInBase64?(o.onloadend=function(t){b(e,"base64",m(t.target.result),i)},o.readAsDataURL(n)):(t("ERROR: No available method to extract file; allowDataInBase64 not set."),e.fileError.call(this,i,"NO_BIN_SUPPORT_AND_BASE64_NOT_SET","No available method to extract file; allowDataInBase64 not set."))}else if(window.File&&window.File.prototype.getAsBinary)if(t("WARN: FileReader does not exist, UI will be blocked when reading big file."),e.resizeImage){try{var a=n.getAsDataURL()}catch(n){return t("ERROR: File not readable."),void e.fileError.call(this,i,"IO_ERROR","File not readable.")}v(e,dataurl,i,n)}else{try{var a=n.getAsBinary()}catch(n){return t("ERROR: File not readable."),void e.fileError.call(this,i,"IO_ERROR","File not readable.")}b(e,"bin",a,i)}else e.fallback?e.fallback():e.fileError.call(this,i,"NOT_SUPPORT","ERROR: No available method to extract file; this browser is not supported.")},v=function(e,n,r,i){var d=new Image;d.onerror=function(){t("ERROR: <img> failed to load, file is not a supported image format."),e.fileError.call(this,r,"FILE_NOT_IMAGE","File is not a supported image format.")},d.onload=function(){var n=document.createElement("canvas"),h=function(n){e.imageType&&"auto"!==e.imageType||("image/jpeg"===r.type?e.imageType="jpeg":e.imageType="png");var d={type:"image/"+e.imageType,name:r.name.substr(0,r.name.indexOf("."))+".resized."+e.imageType};if(s&&c){var h=n.mozGetAsFile(d.name,"image/"+e.imageType);d.size=i.size||i.fileSize,b(e,"file",h,d)}else if(a&&l){var p=window.atob(m(n.toDataURL("image/"+e.imageType)));d.size=p.length,b(e,"bin",p,d)}else e.allowDataInBase64&&o&&u?b(e,"base64",m(n.toDataURL("image/"+e.imageType)),d):(t("ERROR: No available method to extract image; allowDataInBase64 not set."),e.fileError.call(this,r,"NO_BIN_SUPPORT_AND_BASE64_NOT_SET","No available method to extract file; allowDataInBase64 not set."))};e.resizeImage(d,n,h)},d.src=n},b=function(e,n,r,i){if(c&&"file"===n){t("INFO: Using FormData to construct form.");var o=new FormData;o.append(e.name,r),e.processData=!1,e.contentType=!1,e.__beforeSend=e.beforeSend,e.beforeSend=function(t,e){if(e.data=o,e.__beforeSend)return e.__beforeSend.call(this,t,e)}}else if(l&&"bin"===n){t("INFO: Concat our own multipart/form-data data string."),i.type||(i.type="application/octet-stream"),/[^\x20-\x7E]/.test(i.name)&&(t("INFO: Filename contains non-ASCII code, do UTF8-binary string conversion."),i.name_bin=unescape(encodeURIComponent(i.name)));var a="xhrupload-"+parseInt(Math.random()*(2<<16));e.contentType="multipart/form-data; boundary="+a;var o="--"+a+'\ncontent-disposition: form-data; name="'+e.name+'"; filename="'+(i.name_bin||i.name)+'"\nContent-Type: '+i.type+"\n\n"+r+"\n\n--"+a+"--";if(window.XMLHttpRequest&&window.XMLHttpRequest.prototype.sendAsBinary)t("INFO: Pass binary string to xhr."),e.data=o;else if(window.Blob&&window.Uint8Array&&window.ProgressEvent){t("INFO: Make XH2 blob string");for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);var d=s.buffer;e.processData=!1,e.__beforeSend=e.beforeSend,e.beforeSend=function(t,e){if(e.data=d,e.__beforeSend)return e.__beforeSend.call(this,t,e)}}else{t("INFO: Convert binary string into Blob.");var h=new ArrayBuffer(o.length),s=new Uint8Array(h);$.each(o,function(t,e){s[t]=e.charCodeAt(0)});var p=new BlobBuilder;p.append(h);var d=p.getBlob();e.processData=!1,e.__beforeSend=e.beforeSend,e.beforeSend=function(t,e){if(e.data=d,e.__beforeSend)return e.__beforeSend.call(this,t,e)}}}else{if(!e.allowDataInBase64||"base64"!==n)return t("ERROR: Data is not given in processable form."),void e.fileError.call(this,i,"INTERNAL_ERROR","Data is not given in processable form.");t("INFO: Concat our own multipart/form-data data string; send the file in base64 because binary xhr is not supported."),i.type||(i.type="application/octet-stream"),e.url+="?enc=base64";var a="xhrupload-"+parseInt(Math.random()*(2<<16));e.contentType="multipart/form-data; boundary="+a,e.data="--"+a+'\ncontent-disposition: form-data; name="'+e.name+'"; filename="'+encodeURIComponent(i.name)+'.base64"\nContent-Transfer-Encoding: base64\nContent-Type: '+i.type+"\n\n"+r+"\n\n--"+a+"--"}y(e)},y=function(e){t("INFO: Sending file."),"string"==typeof e.data&&l&&(t("INFO: Using xhr.sendAsBinary."),e.___beforeSend=e.beforeSend,e.beforeSend=function(t,e){if(window.XMLHttpRequest.prototype.sendAsBinary&&(t.send=t.sendAsBinary),e.___beforeSend)return e.___beforeSend.call(this,t,e)}),$.ajax(e)};$.fn.fileUpload=function(n){return this.each(function(r,i){$(i).is("input[type=file]")&&(t("INFO: binding onchange event to a input[type=file]."),$(i).bind("change",function(){if(!this.files)return void(n.fallback&&n.fallback());if(!this.files.length)return void t("ERROR: no file selected.");this.files.length>1&&t("WARN: Multiple file upload not implemented yet, only first file will be uploaded."),n.name=$(this).attr("name");var r=this.files[0];if(n.callback){var o=function(t){n.url=n.url||t,g($.extend({},e,n),r)};n.callback(o)}else if($(i).parents("#localPic").length){var a=$(i).val();a.indexOf("\\fakepath")!==-1&&(a=a.split("\\fakepath\\")[1]),$("#fileName").val(a),$(".done-btn").click(function(){g($.extend({},e,n),r)})}else g($.extend({},e,n),this.files[0]);this.form?this.form.reset():t("WARN: Unable to reset file selection, upload won't be triggered again if user selects the same file.")})),$(i).is("form")?t("ERROR: <form> not implemented yet."):(t("INFO: binding ondrop event."),$(i).bind("dragover",function(t){return!1}).bind("drop",function(r){return r.originalEvent.dataTransfer.files?r.originalEvent.dataTransfer.files.length?(!r.originalEvent.dataTransfer.files.length>1&&t("WARN: Multiple file upload not implemented yet, only first file will be uploaded."),g($.extend({},e,n),r.originalEvent.dataTransfer.files[0]),!1):(t('ERROR: User had dropped a virual file (e.g. "My Computer")'),!1):(t("ERROR: No FileList object present; user might had dropped text."),!1)}))}),this},$.fileUploadSupported=d,$.imageUploadSupported=h,$.fileUploadAsBase64Supported=p,$.imageUploadAsBase64Supported=f}(),define("fileUpload",["jquery"],function(t){return function(){var e;return e||t.$.fn.fileUpload}}(this)),define("pagedown_editor",["jquery","pagedown_sanitizer","sfModal","pagedown_extra","fileUpload"],function(t,e,n){"use strict";function r(){}function i(t,e){e=e||"wmd-input",this.buttonBar=f.getElementById("wmd-button-bar"+t),this.preview=f.getElementById("wmd-preview"+t),this.input=f.getElementById(e+t)}function o(t,e){var n,r,i,o=this,s=[],l=0,c="none",u=function(t,e){c!=t&&(c=t,e||p()),b.isIE&&"moving"==c?i=null:r=setTimeout(h,1)},h=function(t){i=new a(e,t),r=void 0};this.setCommandMode=function(){c="command",p(),r=setTimeout(h,0);
},this.canUndo=function(){return l>1},this.canRedo=function(){return!!s[l+1]},this.undo=function(){o.canUndo()&&(n?(n.restore(),n=null):(s[l]=new a(e),s[--l].restore(),t&&t())),c="none",e.input.focus(),h()},this.redo=function(){o.canRedo()&&(s[++l].restore(),t&&t()),c="none",e.input.focus(),h()};var p=function(){var r=i||new a(e);return!!r&&("moving"==c?void(n||(n=r)):(n&&(s[l-1].text!=n.text&&(s[l++]=n),n=null),s[l++]=r,s[l+1]=null,void(t&&t())))},f=function(t){var e=!1;if((t.ctrlKey||t.metaKey)&&!t.altKey){var n=t.charCode||t.keyCode,r=String.fromCharCode(n);switch(r.toLowerCase()){case"y":o.redo(),e=!0;break;case"z":t.shiftKey?o.redo():o.undo(),e=!0}}if(e)return t.preventDefault&&t.preventDefault(),void(window.event&&(window.event.returnValue=!1))},m=function(t){if(!t.ctrlKey&&!t.metaKey){var e=t.keyCode;e>=33&&e<=40||e>=63232&&e<=63235?u("moving"):8==e||46==e||127==e?u("deleting"):13==e?u("newlines"):27==e?u("escape"):(e<16||e>20||9===e)&&91!=e&&u("typing")}},g=function(){d.addEvent(e.input,"keypress",function(t){!t.ctrlKey&&!t.metaKey||t.altKey||89!=t.keyCode&&90!=t.keyCode||t.preventDefault()});var t=function(){(b.isIE||i&&i.text!=e.input.value)&&void 0==r&&(c="paste",p(),h())};d.addEvent(e.input,"keydown",f),d.addEvent(e.input,"keydown",m),d.addEvent(e.input,"mousedown",function(){u("moving")}),e.input.onpaste=t,e.input.ondrop=t},v=function(){g(),h(!0),p()};v()}function a(t,e){var n=this,i=t.input;this.init=function(){d.isVisible(i)&&(!e&&f.activeElement&&f.activeElement!==i||(this.setInputAreaSelectionStartEnd(),this.scrollTop=i.scrollTop,(!this.text&&i.selectionStart||0===i.selectionStart)&&(this.text=i.value)))},this.setInputAreaSelection=function(){if(d.isVisible(i))if(void 0===i.selectionStart||b.isOpera){if(f.selection){if(f.activeElement&&f.activeElement!==i)return;i.focus();var t=i.createTextRange();t.moveStart("character",-i.value.length),t.moveEnd("character",-i.value.length),t.moveEnd("character",n.end),t.moveStart("character",n.start),t.select()}}else i.focus(),i.selectionStart=n.start,i.selectionEnd=n.end,i.scrollTop=n.scrollTop},this.setInputAreaSelectionStartEnd=function(){if(t.ieCachedRange||!i.selectionStart&&0!==i.selectionStart){if(f.selection){n.text=d.fixEolChars(i.value);var e=t.ieCachedRange||f.selection.createRange(),r=d.fixEolChars(e.text),o="",a=o+r+o;e.text=a;var s=d.fixEolChars(i.value);e.moveStart("character",-a.length),e.text=r,n.start=s.indexOf(o),n.end=s.lastIndexOf(o)-o.length;var l=n.text.length-d.fixEolChars(i.value).length;if(l){for(e.moveStart("character",-r.length);l--;)r+="\n",n.end+=1;e.text=r}t.ieCachedRange&&(n.scrollTop=t.ieCachedScrollTop),t.ieCachedRange=null,this.setInputAreaSelection()}}else n.start=i.selectionStart,n.end=i.selectionEnd},this.restore=function(){void 0!=n.text&&n.text!=i.value&&(i.value=n.text),this.setInputAreaSelection(),i.scrollTop=n.scrollTop},this.getChunks=function(){var t=new r;return t.before=d.fixEolChars(n.text.substring(0,n.start)),t.startTag="",t.selection=d.fixEolChars(n.text.substring(n.start,n.end)),t.endTag="",t.after=d.fixEolChars(n.text.substring(n.end)),t.scrollTop=n.scrollTop,t},this.setChunks=function(t){t.before=t.before+t.startTag,t.after=t.endTag+t.after,this.start=t.before.length,this.end=t.before.length+t.selection.length,this.text=t.before+t.selection+t.after,this.scrollTop=t.scrollTop},this.init()}function s(t,e,n){var r,i,o,a=3e3,s="delayed",l=function(t,e){d.addEvent(t,"input",e),t.onpaste=e,t.ondrop=e,d.addEvent(t,"keypress",e),d.addEvent(t,"keydown",e)},c=function(){var t=0;return window.innerHeight?t=window.pageYOffset:f.documentElement&&f.documentElement.scrollTop?t=f.documentElement.scrollTop:f.body&&(t=f.body.scrollTop),t},u=function(){if(e.preview){var n=e.input.value;if(!n||n!=o){o=n;var r=(new Date).getTime();n=t.makeHtml(n);var a=(new Date).getTime();i=a-r,k(n)}}},p=function(){if(r&&(clearTimeout(r),r=void 0),"manual"!==s){var t=0;"delayed"===s&&(t=i),t>a&&(t=a),r=setTimeout(u,t)}},m=function(t){return t.scrollHeight<=t.clientHeight?1:t.scrollTop/(t.scrollHeight-t.clientHeight)},g=function(){e.preview&&(e.preview.scrollTop=(e.preview.scrollHeight-e.preview.clientHeight)*m(e.preview))};this.refresh=function(t){t?(o="",u()):p()},this.processingTime=function(){return i};var v,y=!0,x=function(t){var n=e.preview,r=n.parentNode,i=n.nextSibling;r.removeChild(n),n.innerHTML=t,i?r.insertBefore(n,i):r.appendChild(n)},w=function(t){e.preview.innerHTML=t},_=function(t){if(v)return v(t);try{w(t),v=w}catch(e){v=x,v(t)}},k=function(t){var r=h.getTop(e.input)-c();if(e.preview&&(_(t),n()),g(),y)return void(y=!1);var i=h.getTop(e.input)-c();b.isIE?setTimeout(function(){window.scrollBy(0,i-r)},0):window.scrollBy(0,i-r)},C=function(){l(e.input,p),u(),e.preview&&(e.preview.scrollTop=0)};C()}function l(t,e,n,r,i,o,s){function l(t){if(m.focus(),t.textOp){n&&n.setCommandMode();var i=new a(e);if(!i)return;var o=i.getChunks(),s=function(){m.focus(),o&&i.setChunks(o),i.restore(),r.refresh()},l=t.textOp(o,s);l||s()}t.execute&&t.execute(n)}function c(t,n){var r="0px",i="-20px",o="-40px",a=t.getElementsByTagName("a")[0];n?(a.style.backgroundPosition=t.XShift+" "+r,t.onmouseover=function(){a.style.backgroundPosition=this.XShift+" "+o},t.onmouseout=function(){a.style.backgroundPosition=this.XShift+" "+r},b.isIE&&(t.onmousedown=function(){f.activeElement&&f.activeElement!==e.input||(e.ieCachedRange=document.selection.createRange(),e.ieCachedScrollTop=e.input.scrollTop)}),t.isHelp||(t.onclick=function(){return this.onmouseout&&this.onmouseout(),l(this),!1})):(a.style.backgroundPosition=t.XShift+" "+i,t.onmouseover=t.onmouseout=t.onclick=function(){})}function u(t){return"string"==typeof t&&(t=i[t]),function(){t.apply(i,arguments)}}function h(){var n=e.buttonBar,r=document.createElement("ul");r.id="wmd-button-row"+t,r.className="editor__menu clearfix",r=n.appendChild(r);var i=0,a=function(e,n,o,a){var s=document.createElement("li");s.className="wmd-button",s.style.left=i+"px",i+=25;var l=document.createElement("a");return l.className="editor__menu--bold",s.id=e+t,s.appendChild(l),s.title=n,s.XShift=o,a&&(s.textOp=a),c(s,!0),r.appendChild(s),s},l=function(e){var n=document.createElement("li");n.className="editor__menu--divider wmd-spacer"+e,n.id="wmd-spacer"+e+t,r.appendChild(n),i+=25};v.bold=a("wmd-bold-button",s("bold"),"0px",u("doBold")),v.italic=a("wmd-italic-button",s("italic"),"-20px",u("doItalic")),l(1),v.link=a("wmd-link-button",s("link"),"-40px",u(function(t,e){return this.doLinkOrImage(t,e,!1)})),v.quote=a("wmd-quote-button",s("quote"),"-60px",u("doBlockquote")),v.code=a("wmd-code-button",s("code"),"-80px",u("doCode")),v.image=a("wmd-image-button",s("image"),"-100px",u(function(t,e){return this.doLinkOrImage(t,e,!0)})),l(2),v.olist=a("wmd-olist-button",s("olist"),"-120px",u(function(t,e){this.doList(t,e,!0)})),v.ulist=a("wmd-ulist-button",s("ulist"),"-140px",u(function(t,e){this.doList(t,e,!1)})),v.heading=a("wmd-heading-button",s("heading"),"-160px",u("doHeading")),v.hr=a("wmd-hr-button",s("hr"),"-180px",u("doHorizontalRule")),l(3),v.undo=a("wmd-undo-button",s("undo"),"-200px",null),v.undo.execute=function(t){t&&t.undo()};var d=s(/win/.test(g.platform.toLowerCase())?"redo":"redomac");if(v.redo=a("wmd-redo-button",d,"-220px",null),v.redo.execute=function(t){t&&t.redo()},o){var h=document.createElement("li"),f=document.createElement("span");h.appendChild(f),h.className="wmd-button wmd-help-button",h.id="wmd-help-button"+t,h.XShift="-240px",h.isHelp=!0,h.style.right="0px",h.title=s("help"),h.onclick=o.handler,c(h,!0),r.appendChild(h),v.help=h}p(),l(4),v.help=a("wmd-help-button",s("help"),"-300px")}function p(){n&&(c(v.undo,n.canUndo()),c(v.redo,n.canRedo()))}var m=e.input,v={};h();var y="keydown";b.isOpera&&(y="keypress"),d.addEvent(m,y,function(t){if((t.ctrlKey||t.metaKey)&&!t.altKey&&!t.shiftKey){var e=t.charCode||t.keyCode,n=String.fromCharCode(e).toLowerCase();switch(n){case"b":t.preventDefault(),l(v.bold);break;case"i":t.preventDefault(),l(v.italic);break;case"l":t.preventDefault(),l(v.link);break;case"q":t.preventDefault(),l(v.quote);break;case"k":t.preventDefault(),l(v.code);break;case"g":t.preventDefault(),l(v.image);break;case"o":t.preventDefault(),l(v.olist);break;case"u":t.preventDefault(),l(v.ulist);break;case"h":t.preventDefault(),l(v.heading);break;case"r":t.preventDefault(),l(v.hr);break;case"y":t.preventDefault(),l(v.redo);break;case"z":t.shiftKey?(t.preventDefault(),l(v.redo)):(t.preventDefault(),l(v.undo));break;default:return}}}),d.addEvent(m,"keyup",function(t){if(t.shiftKey&&!t.ctrlKey&&!t.metaKey){var e=t.charCode||t.keyCode;if(13===e){var n={};n.textOp=u("doAutoindent"),l(n)}}}),b.isIE&&d.addEvent(m,"keydown",function(t){var e=t.keyCode;if(27===e)return!1}),this.setUndoRedoButtonStates=p}function c(t,e){this.hooks=t,this.getString=e}function u(t){return t.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(t,e,n){return e=e.replace(/\?.*$/,function(t){return t.replace(/\+/g," ")}),e=decodeURIComponent(e),e=encodeURI(e).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),e=e.replace(/\?.*$/,function(t){return t.replace(/\+/g,"%2b")}),n&&(n=n.trim?n.trim():n.replace(/^\s*/,"").replace(/\s*$/,""),n=n.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),n?e+' "'+n+'"':e})}var d={},h={},p={},f=window.document,m=window.RegExp,g=window.navigator,v={lineLength:72},b={isIE:/msie/.test(g.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(g.userAgent.toLowerCase())||/msie 5/.test(g.userAgent.toLowerCase()),isOpera:/opera/.test(g.userAgent.toLowerCase())},y={bold:"加粗 <strong> Ctrl+B",boldexample:"加粗文字",italic:"斜体 <em> Ctrl+I",italicexample:"斜体文字",link:"链接 <a> Ctrl+L",linkdescription:"链接描述",linkdialog:'<input type="text" id="editorLinkText" class="form-control text-28" placeholder="请输入链接地址">',quote:"引用 <blockquote> Ctrl+Q",quoteexample:"引用文字",code:"代码 <pre><code> Ctrl+K",codeexample:"请输入代码",image:"图片 <img> Ctrl+G",imagedescription:"图片描述",imagedialog:'<ul class="nav nav-tabs" role="tablist"><li class="active"><a href="#localPic" role="tab" data-toggle="tab">本地上传</a></li>    <li><a href="#remotePic" role="tab" data-toggle="tab">远程地址获取</a></li></ul><div class="tab-content">    <div class="tab-pane fade active in pt20 form-horizontal" id="localPic">        <span class="text-muted">图片体积不得大于 4 MB</span>        <br>        <div class="widget-upload form-group">        <input type="file" id="editorUpload" name="image" class="widget-upload__file">        <div class="col-sm-8">        <input type="text" id="fileName" class="form-control col-sm-10 widget-upload__text" placeholder="拖动图片到这里" readonly="">        </div>        <a href="javascript:void(0);" class="btn col-sm-2 btn-default">选择图片</a>        </div>    </div>    <div class="tab-pane fade pt20" id="remotePic">    <input type="url" name="img" id="remotePicUrl" class="form-control text-28" placeholder="请输入图片所在网址">    </div></div>',olist:"数字列表 <ol> Ctrl+O",ulist:"普通列表 <ul> Ctrl+U",litem:"列表项目",heading:"标题 <h1>/<h2> Ctrl+H",headingexample:"标题文字",hr:"分割线 <hr> Ctrl+R",undo:"撤销 - Ctrl+Z",redo:"重做 - Ctrl+Y",redomac:"重做 - Ctrl+Shift+Z",zen:"全屏",help:"Markdown 语法"};e.Editor=function(t,n,r){r=r||{},"function"==typeof r.handler&&(r={helpButton:r}),r.strings=r.strings||{},r.helpButton&&(r.strings.help=r.strings.help||r.helpButton.title);var a=function(t){return r.strings[t]||y[t]};n=n||"";var u=this.hooks=new e.HookCollection;u.addNoop("onPreviewRefresh"),u.addNoop("postBlockquoteCreation"),u.addFalse("insertImageDialog"),this.getConverter=function(){return t};var d,h=this;this.run=function(e){if(!d){d=new i(n,e);var p,m,g=new c(u,a),v=new s(t,d,function(){u.onPreviewRefresh()});/\?noundo/.test(f.location.href)||(p=new o(function(){v.refresh(),m&&m.setUndoRedoButtonStates()},d),this.textOperation=function(t){p.setCommandMode(),t(),h.refreshPreview()}),m=new l(n,d,p,v,g,r.helpButton,a),m.setUndoRedoButtonStates();var b=h.refreshPreview=function(){v.refresh(!0)};b()}}},r.prototype.findTags=function(t,e){var n,r=this;t&&(n=d.extendRegExp(t,"","$"),this.before=this.before.replace(n,function(t){return r.startTag=r.startTag+t,""}),n=d.extendRegExp(t,"^",""),this.selection=this.selection.replace(n,function(t){return r.startTag=r.startTag+t,""})),e&&(n=d.extendRegExp(e,"","$"),this.selection=this.selection.replace(n,function(t){return r.endTag=t+r.endTag,""}),n=d.extendRegExp(e,"^",""),this.after=this.after.replace(n,function(t){return r.endTag=t+r.endTag,""}))},r.prototype.trimWhitespace=function(t){var e,n,r=this;t?e=n="":(e=function(t){return r.before+=t,""},n=function(t){return r.after=t+r.after,""}),this.selection=this.selection.replace(/^(\s*)/,e).replace(/(\s*)$/,n)},r.prototype.skipLines=function(t,e,n){void 0===t&&(t=1),void 0===e&&(e=1),t++,e++;var r,i;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+m.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+m.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+m.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+m.$1,this.before){for(r=i="";t--;)r+="\\n?",i+="\n";n&&(r="\\n*"),this.before=this.before.replace(new m(r+"$",""),i)}if(this.after){for(r=i="";e--;)r+="\\n?",i+="\n";n&&(r="\\n*"),this.after=this.after.replace(new m(r,""),i)}},d.isVisible=function(t){return window.getComputedStyle?"none"!==window.getComputedStyle(t,null).getPropertyValue("display"):t.currentStyle?"none"!==t.currentStyle.display:void 0},d.addEvent=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n,!1)},d.removeEvent=function(t,e,n){t.detachEvent?t.detachEvent("on"+e,n):t.removeEventListener(e,n,!1)},d.fixEolChars=function(t){return t=t.replace(/\r\n/g,"\n"),t=t.replace(/\r/g,"\n")},d.extendRegExp=function(t,e,n){null!==e&&void 0!==e||(e=""),null!==n&&void 0!==n||(n="");var r,i=t.toString();return i=i.replace(/\/([gim]*)$/,function(t,e){return r=e,""}),i=i.replace(/(^\/|\/$)/g,""),i=e+i+n,new m(i,r)},h.getTop=function(t,e){var n=t.offsetTop;if(!e)for(;t=t.offsetParent;)n+=t.offsetTop;return n},h.getHeight=function(t){return t.offsetHeight||t.scrollHeight},h.getWidth=function(t){return t.offsetWidth||t.scrollWidth},h.getPageSize=function(){var t,e,n,r;self.innerHeight&&self.scrollMaxY?(t=f.body.scrollWidth,e=self.innerHeight+self.scrollMaxY):f.body.scrollHeight>f.body.offsetHeight?(t=f.body.scrollWidth,e=f.body.scrollHeight):(t=f.body.offsetWidth,e=f.body.offsetHeight),self.innerHeight?(n=self.innerWidth,r=self.innerHeight):f.documentElement&&f.documentElement.clientHeight?(n=f.documentElement.clientWidth,r=f.documentElement.clientHeight):f.body&&(n=f.body.clientWidth,r=f.body.clientHeight);var i=Math.max(t,n),o=Math.max(e,r);return[i,o,n,r]},p.createBackground=function(){var t=f.createElement("div"),e=t.style;t.className="modal-backdrop wmd-prompt-background",e.position="absolute",e.top="0",e.zIndex="1000",b.isIE?e.filter="alpha(opacity=50)":e.opacity="0.5";var n=h.getPageSize();return e.height=n[1]+"px",b.isIE?(e.left=f.documentElement.scrollLeft,e.width=f.documentElement.clientWidth):(e.left="0",e.width="100%"),f.body.appendChild(t),t},p.prompt=function(t,e,n,r){var i,o;void 0===n&&(n="");var a=function(t){var e=t.charCode||t.keyCode;27===e&&s(!0)},s=function(t){d.removeEvent(f.body,"keydown",a);var e=o.value;return t?e=null:(e=e.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(e)||(e="http://"+e)),i.parentNode.removeChild(i),r(e),!1},l=function(){i=f.createElement("div"),i.className="modal-content wmd-prompt-dialog",i.style.padding="10px;",i.style.position="fixed",i.style.width="600px",i.style.zIndex="1001";var r=f.createElement("div");r.className="modal-header",r.innerHTML='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button><h4 class="ml20">'+t+"</h4>",i.appendChild(r);var l=f.createElement("div");l.innerHTML=e,l.style.padding="5px",l.style.margin="20px",i.appendChild(l);var c=f.createElement("form"),u=c.style;c.onsubmit=function(){return s(!1)},u.padding="0",u.margin="0 0 20px",u.cssFloat="left",u.width="100%",u.textAlign="center",u.position="relative",i.appendChild(c),o=f.createElement("input"),o.className="form-control text-28",o.type="text",o.value=n,u=o.style,u.display="block",u.width="80%",u.marginLeft=u.marginRight="auto",c.appendChild(o);var p=f.createElement("input");p.className="btn btn-primary",p.type="button",p.onclick=function(){return s(!1)},p.value="确定",u=p.style,u.margin="10px",u.display="inline",u.width="7em";var m=f.createElement("input");m.className="btn btn-default",m.type="button",m.onclick=function(){return s(!0)},m.value="取消",u=m.style,u.margin="10px",u.display="inline",u.width="7em",c.appendChild(p),c.appendChild(m),d.addEvent(f.body,"keydown",a),i.style.top="50%",i.style.left="50%",i.style.display="block",b.isIE_5or6&&(i.style.position="absolute",i.style.top=f.documentElement.scrollTop+200+"px",i.style.left="50%"),f.body.appendChild(i),i.style.marginTop=-(h.getHeight(i)/2)+"px",i.style.marginLeft=-(h.getWidth(i)/2)+"px"};setTimeout(function(){l();var t=n.length;if(void 0!==o.selectionStart)o.selectionStart=0,o.selectionEnd=t;else if(o.createTextRange){var e=o.createTextRange();e.collapse(!1),e.moveStart("character",-t),e.moveEnd("character",t),e.select()}o.focus()},0)};var x=c.prototype;return x.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",x.unwrap=function(t){var e=new m("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");t.selection=t.selection.replace(e,"$1 $2")},x.wrap=function(t,e){this.unwrap(t);var n=new m("(.{1,"+e+"})( +|$\\n?)","gm"),r=this;t.selection=t.selection.replace(n,function(t,e){return new m("^"+r.prefixes,"").test(t)?t:e+"\n"}),t.selection=t.selection.replace(/\s+$/,"")},x.doBold=function(t,e){return this.doBorI(t,e,2,this.getString("boldexample"))},x.doItalic=function(t,e){return this.doBorI(t,e,1,this.getString("italicexample"))},x.doBorI=function(t,e,n,r){t.trimWhitespace(),t.selection=t.selection.replace(/\n{2,}/g,"\n");var i=/(\**$)/.exec(t.before)[0],o=/(^\**)/.exec(t.after)[0],a=Math.min(i.length,o.length);if(a>=n&&(2!=a||1!=n))t.before=t.before.replace(m("[*]{"+n+"}$",""),""),t.after=t.after.replace(m("^[*]{"+n+"}",""),"");else if(!t.selection&&o){t.after=t.after.replace(/^([*_]*)/,""),t.before=t.before.replace(/(\s?)$/,"");var s=m.$1;t.before=t.before+o+s}else{t.selection||o||(t.selection=r);var l=n<=1?"*":"**";t.before=t.before+l,t.after=l+t.after}},x.stripLinkDefs=function(t,e){return t=t.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(t,n,r,i,o){return e[n]=t.replace(/\s*$/,""),i?(e[n]=t.replace(/["(](.+?)[")]$/,""),i+o):""})},x.addLinkDef=function(t,e){var n=0,r={};t.before=this.stripLinkDefs(t.before,r),t.selection=this.stripLinkDefs(t.selection,r),t.after=this.stripLinkDefs(t.after,r);var i="",o=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,a=function(t){n++,t=t.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+n+"]:"),i+="\n"+t},s=function(t,e,i,l,c,u){return i=i.replace(o,s),r[c]?(a(r[c]),e+i+l+n+u):t};t.before=t.before.replace(o,s),e?a(e):t.selection=t.selection.replace(o,s);var l=n;return t.after=t.after.replace(o,s),t.after&&(t.after=t.after.replace(/\n*$/,"")),t.after||(t.selection=t.selection.replace(/\n*$/,"")),t.after+="\n\n"+i,l},x.doLinkOrImage=function(e,r,i){e.trimWhitespace(),e.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);if(!(e.endTag.length>1&&e.startTag.length>0)){if(e.selection=e.startTag+e.selection+e.endTag,e.startTag=e.endTag="",/\n\n/.test(e.selection))return void this.addLinkDef(e,null);var o=this,a=function(t,a){if(n("hide"),null!==t){e.selection=(" "+e.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var s=" [999]: "+u(t),l=o.addLinkDef(e,s);e.startTag=i?"![":"[",e.endTag="]["+l+"]",e.selection||(i?e.selection=a||o.getString("imagedescription"):e.selection=o.getString("linkdescription"))}r()};if(i){if(!this.hooks.insertImageDialog(a)){var s,l,c=this.getString("imagedialog");n({title:"插入图片",content:c,closeText:"取消",doneText:"插入",hidden:function(){t(".wmd-input").focus()},show:function(){t("#editorUpload").fileUpload({url:"/img/upload/image",type:"POST",dataType:"json",beforeSend:function(){var e=t("#editorUpload").val();return t("#editorUpload")[0].files[0].size>4194304?(n("图片过大，只能上传小于 4MB 的图片。"),void(t("#editorUpload")[0].files=null)):(e.indexOf("\\fakepath")!==-1&&(e=e.split("\\fakepath\\")[1]),e||e.trick(),t("#fileName").addClass("loading"),void t(".done-btn").attr("disabled","disabled"))},complete:function(){t("#fileName").removeClass("loading"),t(".done-btn").attr("disabled",!1)},success:function(t){var e=t[0],r=t[1];e?n(r):(l=r,a(l,s))}})},doneFn:function(e){e.preventDefault(),t("#remotePic").hasClass("active")&&t("#remotePicUrl").val()&&(t("#remotePicUrl").addClass("loading"),t(".done-btn").attr("disabled","disabled"),s=t("#remotePicUrl").val().match(/\/([^\/]+)$/)[1],t.post("/img/fetch/image",{src:t("#remotePicUrl").val()},function(e){t(".done-btn").attr("disabled",!1),t("#remotePicUrl").removeClass("loading");var r=e.match(/\[(\d),/)[1],i=e.match(/\[\d,"(\S*)"\]/)[1];i=i.replace(/\\/g,""),"0"!==r?n(i):(l=i,a(l,s))},"text"))}})}}else{var c=this.getString("linkdialog");n({title:"插入链接",content:c,closeText:"取消",doneText:"插入",doneFn:function(){a(t("#editorLinkText").val())},show:function(){setTimeout(function(){t("#editorLinkText").focus()},100),t("#editorLinkText").keydown(function(e){13===e.which&&(e.preventDefault(),a(t(this).val()))})},hidden:function(){t(".wmd-input").focus()}})}return!0}e.startTag=e.startTag.replace(/!?\[/,""),e.endTag="",this.addLinkDef(e,null)},x.doAutoindent=function(t,e){var n=this,r=!1;t.before=t.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),t.before=t.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),t.before=t.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),t.selection||/^[ \t]*(?:\n|$)/.test(t.after)||(t.after=t.after.replace(/^[^\n]*/,function(e){return t.selection=e,""}),r=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(t.before)&&n.doList&&n.doList(t),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(t.before)&&n.doBlockquote&&n.doBlockquote(t),/(\n|^)(\t|[ ]{4,}).*\n$/.test(t.before)&&n.doCode&&n.doCode(t),r&&(t.after=t.selection+t.after,t.selection="")},x.doBlockquote=function(t,e){t.selection=t.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(e,n,r,i){return t.before+=n,t.after=i+t.after,r}),t.before=t.before.replace(/(>[ \t]*)$/,function(e,n){return t.selection=n+t.selection,""}),t.selection=t.selection.replace(/^(\s|>)+$/,""),t.selection=t.selection||this.getString("quoteexample");var n,r="",i="";if(t.before){for(var o=t.before.replace(/\n$/,"").split("\n"),a=!1,s=0;s<o.length;s++){var l=!1;n=o[s],a=a&&n.length>0,/^>/.test(n)?(l=!0,!a&&n.length>1&&(a=!0)):l=!!/^[ \t]*$/.test(n)||a,l?r+=n+"\n":(i+=r+n,r="\n")}/(^|\n)>/.test(r)||(i+=r,r="")}t.startTag=r,t.before=i,t.after&&(t.after=t.after.replace(/^\n?/,"\n")),t.after=t.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(e){return t.endTag=e,""});var c=function(e){var n=e?"> ":"";t.startTag&&(t.startTag=t.startTag.replace(/\n((>|\s)*)\n$/,function(t,e){return"\n"+e.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"})),t.endTag&&(t.endTag=t.endTag.replace(/^\n((>|\s)*)\n/,function(t,e){return"\n"+e.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"}))};/^(?![ ]{0,3}>)/m.test(t.selection)?(this.wrap(t,v.lineLength-2),t.selection=t.selection.replace(/^/gm,"> "),c(!0),t.skipLines()):(t.selection=t.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(t),c(!1),!/^(\n|^)[ ]{0,3}>/.test(t.selection)&&t.startTag&&(t.startTag=t.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(t.selection)&&t.endTag&&(t.endTag=t.endTag.replace(/^\n{0,2}/,"\n\n"))),t.selection=this.hooks.postBlockquoteCreation(t.selection),/\n/.test(t.selection)||(t.selection=t.selection.replace(/^(> *)/,function(e,n){return t.startTag+=n,""}))},x.doCode=function(t,e){var n=/\S[ ]*$/.test(t.before),r=/^[ ]*\S/.test(t.after);if(!r&&!n||/\n/.test(t.selection)){t.before=t.before.replace(/[ ]{4}$/,function(e){return t.selection=e+t.selection,""});var i=1,o=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(t.before)&&(i=0),/^\n(\t|[ ]{4,})/.test(t.after)&&(o=0),t.skipLines(i,o),t.selection?/^[ ]{0,3}\S/m.test(t.selection)?/\n/.test(t.selection)?t.selection=t.selection.replace(/^/gm,"    "):t.before+="    ":t.selection=t.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(t.startTag="```\n",t.selection=this.getString("codeexample"),t.endTag="\n```")}else t.trimWhitespace(),t.findTags(/`/,/`/),t.startTag||t.endTag?t.endTag&&!t.startTag?(t.before+=t.endTag,t.endTag=""):t.startTag=t.endTag="":(t.startTag=t.endTag="`",t.selection||(t.selection=this.getString("codeexample")))},x.doList=function(t,e,n){var r=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,i=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,o="-",a=1,s=function(){var t;return n?(t=" "+a+". ",a++):t=" "+o+" ",t},l=function(t){return void 0===n&&(n=/^\s*\d/.test(t)),t=t.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(t){return s()})};if(t.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!t.before||/\n$/.test(t.before)||/^\n/.test(t.startTag)||(t.before+=t.startTag,t.startTag=""),t.startTag){var c=/\d+[.]/.test(t.startTag);if(t.startTag="",t.selection=t.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(t),t.skipLines(),c&&(t.after=t.after.replace(i,l)),n==c)return}var u=1;t.before=t.before.replace(r,function(t){return/^\s*([*+-])/.test(t)&&(o=m.$1),u=/[^\n]\n\n[^\n]/.test(t)?1:0,l(t)}),t.selection||(t.selection=this.getString("litem"));var d=s(),h=1;t.after=t.after.replace(i,function(t){return h=/[^\n]\n\n[^\n]/.test(t)?1:0,l(t)}),t.trimWhitespace(!0),t.skipLines(u,h,!0),t.startTag=d;var p=d.replace(/./g," ");this.wrap(t,v.lineLength-p.length),t.selection=t.selection.replace(/\n/g,"\n"+p)},x.doHeading=function(t,e){if(t.selection=t.selection.replace(/\s+/g," "),t.selection=t.selection.replace(/(^\s+|\s+$)/g,""),!t.selection)return t.startTag="## ",t.selection=this.getString("headingexample"),void(t.endTag=" ##");var n=0;t.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(t.startTag)&&(n=m.lastMatch.length),t.startTag=t.endTag="",t.findTags(null,/\s?(-+|=+)/),/=+/.test(t.endTag)&&(n=1),/-+/.test(t.endTag)&&(n=2),t.startTag=t.endTag="",t.skipLines(1,1);var r=0==n?2:n-1;if(r>0){var i=r>=2?"-":"=",o=t.selection.length;for(o>v.lineLength&&(o=v.lineLength),t.endTag="\n";o--;)t.endTag+=i}},x.doHorizontalRule=function(t,e){t.startTag="----------\n",t.selection="",t.skipLines(2,1,!0)},e}),define("tabIndent",[],function(){"use strict";var t={version:"0.1.8",config:{tab:"\t"},events:{keydown:function(e){var n=t.config.tab,r=n.length;if(9===e.keyCode){e.preventDefault();var i=this.selectionStart,o=this.selectionEnd;if(e.shiftKey===!1)if(t.isMultiLine(this)){for(var a=t.findStartIndices(this),s=a.length,l=void 0,c=void 0,u=0;s--;){var d=a[s];a[s+1]&&i!=a[s+1]&&(d=a[s+1]),d>=i&&a[s]<o&&(this.value=this.value.slice(0,a[s])+n+this.value.slice(a[s]),l=a[s],c||(c=a[s+1]?a[s+1]-1:"end"),u++)}this.selectionStart=l,this.selectionEnd="end"!==c?c+r*u:this.value.length}else this.value=this.value.slice(0,i)+n+this.value.slice(i),this.selectionStart=i+r,this.selectionEnd=o+r;else if(t.isMultiLine(this)){for(var a=t.findStartIndices(this),s=a.length,l=void 0,c=void 0,u=0;s--;){var d=a[s];a[s+1]&&i!=a[s+1]&&(d=a[s+1]),d>=i&&a[s]<o&&(this.value.substr(a[s],r)==n&&(this.value=this.value.slice(0,a[s])+this.value.slice(a[s]+r),u++),l=a[s],c||(c=a[s+1]?a[s+1]-1:"end"))}this.selectionStart=l,this.selectionEnd="end"!==c?c-u*r:this.value.length}else this.value.substr(i-r,r)==n?(this.value=this.value.substr(0,i-r)+this.value.substr(i),this.selectionStart=i-r,this.selectionEnd=o-r):"\n"==this.value.substr(i-1,1)&&this.value.substr(i,r)==n&&(this.value=this.value.substring(0,i)+this.value.substr(i+r),this.selectionStart=i,this.selectionEnd=o-r)}else if(27===e.keyCode)t.events.disable(e);else if(13===e.keyCode&&e.shiftKey===!1){for(var h=t,p=this.selectionStart,a=h.findStartIndices(this),f=a.length,m=0,g=0,v=new RegExp("^"+n.replace("\t","\\t").replace(/ /g,"\\s")+"+","g"),b="",y=null,x=0;x<f;x++){if(a[x+1]&&p>=a[x]&&p<a[x+1]){m=a[x],g=a[x+1]-1;break}m=a[f-1],g=this.value.length}if(b=this.value.slice(m,g),y=b.match(v),null!==y){e.preventDefault();var w=y[0],_=w.length,k=p-m;_>k&&(_=k,w=w.slice(0,k)),this.value=this.value.slice(0,p)+"\n"+w+this.value.slice(p),this.selectionStart=p+_+1,this.selectionEnd=this.selectionStart}}},disable:function(e){t.remove(e.target)},focus:function(){var e=t,n=this,r=setTimeout(function(){var t=(n.getAttribute("class")||"").split(" "),r=t.indexOf("tabIndent");n.addEventListener("keydown",e.events.keydown),n.style.backgroundPosition="top right",n.style.backgroundRepeat="no-repeat",r!==-1&&t.splice(r,1),t.push("tabIndent-rendered"),n.setAttribute("class",t.join(" ")),n.removeEventListener("focus",e.events.keydown)},500);n.addEventListener("blur",function t(){clearTimeout(r),n.removeEventListener("blur",t)})}},render:function(t){var e=this;"TEXTAREA"===t.nodeName&&(t.addEventListener("focus",e.events.focus),t.addEventListener("blur",function(t){e.events.disable(t)}))},renderAll:function(){for(var t=document.getElementsByTagName("textarea"),e=t.length,n=-1,r=[],i=void 0;e--;)r=(t[e].getAttribute("class")||"").split(" "),n=r.indexOf("tabIndent"),n!==-1&&(i=t[e],this.render(i)),n=-1,r=[],i=void 0},remove:function(t){if("TEXTAREA"===t.nodeName){var e=(t.getAttribute("class")||"").split(" "),n=e.indexOf("tabIndent-rendered");n!==-1&&(t.removeEventListener("keydown",this.events.keydown),t.style.backgroundImage="",e.splice(n,1),e.push("tabIndent"),t.setAttribute("class",e.length>1?e.join(" "):e[0]))}},removeAll:function(){for(var t=document.getElementsByTagName("textarea"),e=t.length,n=-1,r=[],i=void 0;e--;)r=(t[e].getAttribute("class")||"").split(" "),n=r.indexOf("tabIndent-rendered"),n!==-1&&(i=t[e],this.remove(i)),n=-1,r=[],i=void 0},isMultiLine:function(t){var e=t.value.slice(t.selectionStart,t.selectionEnd),n=new RegExp(/\n/);return!!n.test(e)},findStartIndices:function(t){for(var e=t.value,n=[],r=0;e.match(/\n/)&&e.match(/\n/).length>0;){r=n.length>0?n[n.length-1]:0;var i=e.search("\n");n.push(i+r+1),e=e.substring(i+1)}return n.unshift(0),n}};return t}),define("diff_match_patch",[],function(){function t(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var e=-1,n=1,r=0;return t.Diff,t.prototype.diff_main=function(t,e,n,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var o=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[r,t]]:[];"undefined"==typeof n&&(n=!0);var a=n,s=this.diff_commonPrefix(t,e),l=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var c=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var u=this.diff_compute_(t,e,a,o);return l&&u.unshift([r,l]),c&&u.push([r,c]),this.diff_cleanupMerge(u),u},t.prototype.diff_compute_=function(t,i,o,a){var s;if(!t)return[[n,i]];if(!i)return[[e,t]];var l=t.length>i.length?t:i,c=t.length>i.length?i:t,u=l.indexOf(c);if(u!=-1)return s=[[n,l.substring(0,u)],[r,c],[n,l.substring(u+c.length)]],t.length>i.length&&(s[0][0]=s[2][0]=e),s;if(1==c.length)return[[e,t],[n,i]];var d=this.diff_halfMatch_(t,i);if(d){var h=d[0],p=d[1],f=d[2],m=d[3],g=d[4],v=this.diff_main(h,f,o,a),b=this.diff_main(p,m,o,a);return v.concat([[r,g]],b)}return o&&t.length>100&&i.length>100?this.diff_lineMode_(t,i,a):this.diff_bisect_(t,i,a)},t.prototype.diff_lineMode_=function(t,i,o){var a=this.diff_linesToChars_(t,i);t=a.chars1,i=a.chars2;var s=a.lineArray,l=this.diff_main(t,i,!1,o);
this.diff_charsToLines_(l,s),this.diff_cleanupSemantic(l),l.push([r,""]);for(var c=0,u=0,d=0,h="",p="";c<l.length;){switch(l[c][0]){case n:d++,p+=l[c][1];break;case e:u++,h+=l[c][1];break;case r:if(u>=1&&d>=1){l.splice(c-u-d,u+d),c=c-u-d;for(var a=this.diff_main(h,p,!1,o),f=a.length-1;f>=0;f--)l.splice(c,0,a[f]);c+=a.length}d=0,u=0,h="",p=""}c++}return l.pop(),l},t.prototype.diff_bisect_=function(t,r,i){for(var o=t.length,a=r.length,s=Math.ceil((o+a)/2),l=s,c=2*s,u=new Array(c),d=new Array(c),h=0;h<c;h++)u[h]=-1,d[h]=-1;u[l+1]=0,d[l+1]=0;for(var p=o-a,f=p%2!=0,m=0,g=0,v=0,b=0,y=0;y<s&&!((new Date).getTime()>i);y++){for(var x=-y+m;x<=y-g;x+=2){var w,_=l+x;w=x==-y||x!=y&&u[_-1]<u[_+1]?u[_+1]:u[_-1]+1;for(var k=w-x;w<o&&k<a&&t.charAt(w)==r.charAt(k);)w++,k++;if(u[_]=w,w>o)g+=2;else if(k>a)m+=2;else if(f){var C=l+p-x;if(C>=0&&C<c&&d[C]!=-1){var S=o-d[C];if(w>=S)return this.diff_bisectSplit_(t,r,w,k,i)}}}for(var D=-y+v;D<=y-b;D+=2){var S,C=l+D;S=D==-y||D!=y&&d[C-1]<d[C+1]?d[C+1]:d[C-1]+1;for(var T=S-D;S<o&&T<a&&t.charAt(o-S-1)==r.charAt(a-T-1);)S++,T++;if(d[C]=S,S>o)b+=2;else if(T>a)v+=2;else if(!f){var _=l+p-D;if(_>=0&&_<c&&u[_]!=-1){var w=u[_],k=l+w-_;if(S=o-S,w>=S)return this.diff_bisectSplit_(t,r,w,k,i)}}}}return[[e,t],[n,r]]},t.prototype.diff_bisectSplit_=function(t,e,n,r,i){var o=t.substring(0,n),a=e.substring(0,r),s=t.substring(n),l=e.substring(r),c=this.diff_main(o,a,!1,i),u=this.diff_main(s,l,!1,i);return c.concat(u)},t.prototype.diff_linesToChars_=function(t,e){function n(t){for(var e="",n=0,o=-1,a=r.length;o<t.length-1;){o=t.indexOf("\n",n),o==-1&&(o=t.length-1);var s=t.substring(n,o+1);n=o+1,(i.hasOwnProperty?i.hasOwnProperty(s):void 0!==i[s])?e+=String.fromCharCode(i[s]):(e+=String.fromCharCode(a),i[s]=a,r[a++]=s)}return e}var r=[],i={};r[0]="";var o=n(t),a=n(e);return{chars1:o,chars2:a,lineArray:r}},t.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],o=0;o<r.length;o++)i[o]=e[r.charCodeAt(o)];t[n][1]=i.join("")}},t.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i},t.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i},t.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var o=0,a=1;;){var s=t.substring(i-a),l=e.indexOf(s);if(l==-1)return o;a+=l,0!=l&&t.substring(i-a)!=e.substring(0,a)||(o=a,a++)}},t.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var r,i,o,s,l=t.substring(n,n+Math.floor(t.length/4)),c=-1,u="";(c=e.indexOf(l,c+1))!=-1;){var d=a.diff_commonPrefix(t.substring(n),e.substring(c)),h=a.diff_commonSuffix(t.substring(0,n),e.substring(0,c));u.length<h+d&&(u=e.substring(c-h,c)+e.substring(c,c+d),r=t.substring(0,n-h),i=t.substring(n+d),o=e.substring(0,c-h),s=e.substring(c+d))}return 2*u.length>=t.length?[r,i,o,s,u]:null}if(this.Diff_Timeout<=0)return null;var r=t.length>e.length?t:e,i=t.length>e.length?e:t;if(r.length<4||2*i.length<r.length)return null;var o,a=this,s=n(r,i,Math.ceil(r.length/4)),l=n(r,i,Math.ceil(r.length/2));if(!s&&!l)return null;o=l?s&&s[4].length>l[4].length?s:l:s;var c,u,d,h;t.length>e.length?(c=o[0],u=o[1],d=o[2],h=o[3]):(d=o[0],h=o[1],c=o[2],u=o[3]);var p=o[4];return[c,u,d,h,p]},t.prototype.diff_cleanupSemantic=function(t){for(var i=!1,o=[],a=0,s=null,l=0,c=0,u=0,d=0,h=0;l<t.length;)t[l][0]==r?(o[a++]=l,c=d,u=h,d=0,h=0,s=t[l][1]):(t[l][0]==n?d+=t[l][1].length:h+=t[l][1].length,s&&s.length<=Math.max(c,u)&&s.length<=Math.max(d,h)&&(t.splice(o[a-1],0,[e,s]),t[o[a-1]+1][0]=n,a--,a--,l=a>0?o[a-1]:-1,c=0,u=0,d=0,h=0,s=null,i=!0)),l++;for(i&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),l=1;l<t.length;){if(t[l-1][0]==e&&t[l][0]==n){var p=t[l-1][1],f=t[l][1],m=this.diff_commonOverlap_(p,f),g=this.diff_commonOverlap_(f,p);m>=g?(m>=p.length/2||m>=f.length/2)&&(t.splice(l,0,[r,f.substring(0,m)]),t[l-1][1]=p.substring(0,p.length-m),t[l+1][1]=f.substring(m),l++):(g>=p.length/2||g>=f.length/2)&&(t.splice(l,0,[r,p.substring(0,g)]),t[l-1][0]=n,t[l-1][1]=f.substring(0,f.length-g),t[l+1][0]=e,t[l+1][1]=p.substring(g),l++),l++}l++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),o=r.match(t.nonAlphaNumericRegex_),a=i.match(t.nonAlphaNumericRegex_),s=o&&r.match(t.whitespaceRegex_),l=a&&i.match(t.whitespaceRegex_),c=s&&r.match(t.linebreakRegex_),u=l&&i.match(t.linebreakRegex_),d=c&&e.match(t.blanklineEndRegex_),h=u&&n.match(t.blanklineStartRegex_);return d||h?5:c||u?4:o&&!s&&l?3:s||l?2:o||a?1:0}for(var i=1;i<e.length-1;){if(e[i-1][0]==r&&e[i+1][0]==r){var o=e[i-1][1],a=e[i][1],s=e[i+1][1],l=this.diff_commonSuffix(o,a);if(l){var c=a.substring(a.length-l);o=o.substring(0,o.length-l),a=c+a.substring(0,a.length-l),s=c+s}for(var u=o,d=a,h=s,p=n(o,a)+n(a,s);a.charAt(0)===s.charAt(0);){o+=a.charAt(0),a=a.substring(1)+s.charAt(0),s=s.substring(1);var f=n(o,a)+n(a,s);f>=p&&(p=f,u=o,d=a,h=s)}e[i-1][1]!=u&&(u?e[i-1][1]=u:(e.splice(i-1,1),i--),e[i][1]=d,h?e[i+1][1]=h:(e.splice(i+1,1),i--))}i++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(t){for(var i=!1,o=[],a=0,s=null,l=0,c=!1,u=!1,d=!1,h=!1;l<t.length;)t[l][0]==r?(t[l][1].length<this.Diff_EditCost&&(d||h)?(o[a++]=l,c=d,u=h,s=t[l][1]):(a=0,s=null),d=h=!1):(t[l][0]==e?h=!0:d=!0,s&&(c&&u&&d&&h||s.length<this.Diff_EditCost/2&&c+u+d+h==3)&&(t.splice(o[a-1],0,[e,s]),t[o[a-1]+1][0]=n,a--,s=null,c&&u?(d=h=!0,a=0):(a--,l=a>0?o[a-1]:-1,d=h=!1),i=!0)),l++;i&&this.diff_cleanupMerge(t)},t.prototype.diff_cleanupMerge=function(t){t.push([r,""]);for(var i,o=0,a=0,s=0,l="",c="";o<t.length;)switch(t[o][0]){case n:s++,c+=t[o][1],o++;break;case e:a++,l+=t[o][1],o++;break;case r:a+s>1?(0!==a&&0!==s&&(i=this.diff_commonPrefix(c,l),0!==i&&(o-a-s>0&&t[o-a-s-1][0]==r?t[o-a-s-1][1]+=c.substring(0,i):(t.splice(0,0,[r,c.substring(0,i)]),o++),c=c.substring(i),l=l.substring(i)),i=this.diff_commonSuffix(c,l),0!==i&&(t[o][1]=c.substring(c.length-i)+t[o][1],c=c.substring(0,c.length-i),l=l.substring(0,l.length-i))),0===a?t.splice(o-s,a+s,[n,c]):0===s?t.splice(o-a,a+s,[e,l]):t.splice(o-a-s,a+s,[e,l],[n,c]),o=o-a-s+(a?1:0)+(s?1:0)+1):0!==o&&t[o-1][0]==r?(t[o-1][1]+=t[o][1],t.splice(o,1)):o++,s=0,a=0,l="",c=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(o=1;o<t.length-1;)t[o-1][0]==r&&t[o+1][0]==r&&(t[o][1].substring(t[o][1].length-t[o-1][1].length)==t[o-1][1]?(t[o][1]=t[o-1][1]+t[o][1].substring(0,t[o][1].length-t[o-1][1].length),t[o+1][1]=t[o-1][1]+t[o+1][1],t.splice(o-1,1),u=!0):t[o][1].substring(0,t[o+1][1].length)==t[o+1][1]&&(t[o-1][1]+=t[o+1][1],t[o][1]=t[o][1].substring(t[o+1][1].length)+t[o+1][1],t.splice(o+1,1),u=!0)),o++;u&&this.diff_cleanupMerge(t)},t.prototype.diff_xIndex=function(t,r){var i,o=0,a=0,s=0,l=0;for(i=0;i<t.length&&(t[i][0]!==n&&(o+=t[i][1].length),t[i][0]!==e&&(a+=t[i][1].length),!(o>r));i++)s=o,l=a;return t.length!=i&&t[i][0]===e?l:l+(r-s)},t.prototype.diff_prettyHtml=function(t){for(var i=[],o=/&/g,a=/</g,s=/>/g,l=/\n/g,c=0;c<t.length;c++){var u=t[c][0],d=t[c][1],h=d.replace(o,"&amp;").replace(a,"&lt;").replace(s,"&gt;").replace(l,"&para;<br>");switch(u){case n:i[c]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case e:i[c]='<del style="background:#ffe6e6;">'+h+"</del>";break;case r:i[c]="<span>"+h+"</span>"}}return i.join("")},t.prototype.diff_text1=function(t){for(var e=[],r=0;r<t.length;r++)t[r][0]!==n&&(e[r]=t[r][1]);return e.join("")},t.prototype.diff_text2=function(t){for(var n=[],r=0;r<t.length;r++)t[r][0]!==e&&(n[r]=t[r][1]);return n.join("")},t.prototype.diff_levenshtein=function(t){for(var i=0,o=0,a=0,s=0;s<t.length;s++){var l=t[s][0],c=t[s][1];switch(l){case n:o+=c.length;break;case e:a+=c.length;break;case r:i+=Math.max(o,a),o=0,a=0}}return i+=Math.max(o,a)},t.prototype.diff_toDelta=function(t){for(var i=[],o=0;o<t.length;o++)switch(t[o][0]){case n:i[o]="+"+encodeURI(t[o][1]);break;case e:i[o]="-"+t[o][1].length;break;case r:i[o]="="+t[o][1].length}return i.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(t,i){for(var o=[],a=0,s=0,l=i.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{o[a++]=[n,decodeURI(u)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var h=t.substring(s,s+=d);"="==l[c].charAt(0)?o[a++]=[r,h]:o[a++]=[e,h];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(s!=t.length)throw new Error("Delta length ("+s+") does not equal source text length ("+t.length+").");return o},t.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},t.prototype.match_bitap_=function(t,e,n){function r(t,r){var i=t/e.length,a=Math.abs(n-r);return o.Match_Distance?i+a/o.Match_Distance:a?1:i}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),o=this,a=this.Match_Threshold,s=t.indexOf(e,n);s!=-1&&(a=Math.min(r(0,s),a),s=t.lastIndexOf(e,n+e.length),s!=-1&&(a=Math.min(r(0,s),a)));var l=1<<e.length-1;s=-1;for(var c,u,d,h=e.length+t.length,p=0;p<e.length;p++){for(c=0,u=h;c<u;)r(p,n+u)<=a?c=u:h=u,u=Math.floor((h-c)/2+c);h=u;var f=Math.max(1,n-u+1),m=Math.min(n+u,t.length)+e.length,g=Array(m+2);g[m+1]=(1<<p)-1;for(var v=m;v>=f;v--){var b=i[t.charAt(v-1)];if(0===p?g[v]=(g[v+1]<<1|1)&b:g[v]=(g[v+1]<<1|1)&b|((d[v+1]|d[v])<<1|1)|d[v+1],g[v]&l){var y=r(p,v-1);if(y<=a){if(a=y,s=v-1,!(s>n))break;f=Math.max(1,2*n-s)}}}if(r(p+1,n)>a)break;d=g}return s},t.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},t.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),i=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var o=e.substring(t.start2-i,t.start2);o&&t.diffs.unshift([r,o]);var a=e.substring(t.start2+t.length1,t.start2+t.length1+i);a&&t.diffs.push([r,a]),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+a.length,t.length2+=o.length+a.length}},t.prototype.patch_make=function(i,o,a){var s,l;if("string"==typeof i&&"string"==typeof o&&"undefined"==typeof a)s=i,l=this.diff_main(s,o,!0),l.length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(i&&"object"==typeof i&&"undefined"==typeof o&&"undefined"==typeof a)l=i,s=this.diff_text1(l);else if("string"==typeof i&&o&&"object"==typeof o&&"undefined"==typeof a)s=i,l=o;else{if("string"!=typeof i||"string"!=typeof o||!a||"object"!=typeof a)throw new Error("Unknown call format to patch_make.");s=i,l=a}if(0===l.length)return[];for(var c=[],u=new t.patch_obj,d=0,h=0,p=0,f=s,m=s,g=0;g<l.length;g++){var v=l[g][0],b=l[g][1];switch(d||v===r||(u.start1=h,u.start2=p),v){case n:u.diffs[d++]=l[g],u.length2+=b.length,m=m.substring(0,p)+b+m.substring(p);break;case e:u.length1+=b.length,u.diffs[d++]=l[g],m=m.substring(0,p)+m.substring(p+b.length);break;case r:b.length<=2*this.Patch_Margin&&d&&l.length!=g+1?(u.diffs[d++]=l[g],u.length1+=b.length,u.length2+=b.length):b.length>=2*this.Patch_Margin&&d&&(this.patch_addContext_(u,f),c.push(u),u=new t.patch_obj,d=0,f=m,h=p)}v!==n&&(h+=b.length),v!==e&&(p+=b.length)}return d&&(this.patch_addContext_(u,f),c.push(u)),c},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=new t.patch_obj;o.diffs=[];for(var a=0;a<i.diffs.length;a++)o.diffs[a]=i.diffs[a].slice();o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,n[r]=o}return n},t.prototype.patch_apply=function(t,i){if(0==t.length)return[i,[]];t=this.patch_deepCopy(t);var o=this.patch_addPadding(t);i=o+i+o,this.patch_splitMax(t);for(var a=0,s=[],l=0;l<t.length;l++){var c,u=t[l].start2+a,d=this.diff_text1(t[l].diffs),h=-1;if(d.length>this.Match_MaxBits?(c=this.match_main(i,d.substring(0,this.Match_MaxBits),u),c!=-1&&(h=this.match_main(i,d.substring(d.length-this.Match_MaxBits),u+d.length-this.Match_MaxBits),(h==-1||c>=h)&&(c=-1))):c=this.match_main(i,d,u),c==-1)s[l]=!1,a-=t[l].length2-t[l].length1;else{s[l]=!0,a=c-u;var p;if(p=h==-1?i.substring(c,c+d.length):i.substring(c,h+this.Match_MaxBits),d==p)i=i.substring(0,c)+this.diff_text2(t[l].diffs)+i.substring(c+d.length);else{var f=this.diff_main(d,p,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(f)/d.length>this.Patch_DeleteThreshold)s[l]=!1;else{this.diff_cleanupSemanticLossless(f);for(var m,g=0,v=0;v<t[l].diffs.length;v++){var b=t[l].diffs[v];b[0]!==r&&(m=this.diff_xIndex(f,g)),b[0]===n?i=i.substring(0,c+m)+b[1]+i.substring(c+m):b[0]===e&&(i=i.substring(0,c+m)+i.substring(c+this.diff_xIndex(f,g+b[1].length))),b[0]!==e&&(g+=b[1].length)}}}}}return i=i.substring(o.length,i.length-o.length),[i,s]},t.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;i<=e;i++)n+=String.fromCharCode(i);for(var i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var o=t[0],a=o.diffs;if(0==a.length||a[0][0]!=r)a.unshift([r,n]),o.start1-=e,o.start2-=e,o.length1+=e,o.length2+=e;else if(e>a[0][1].length){var s=e-a[0][1].length;a[0][1]=n.substring(a[0][1].length)+a[0][1],o.start1-=s,o.start2-=s,o.length1+=s,o.length2+=s}if(o=t[t.length-1],a=o.diffs,0==a.length||a[a.length-1][0]!=r)a.push([r,n]),o.length1+=e,o.length2+=e;else if(e>a[a.length-1][1].length){var s=e-a[a.length-1][1].length;a[a.length-1][1]+=n.substring(0,s),o.length1+=s,o.length2+=s}return n},t.prototype.patch_splitMax=function(i){for(var o=this.Match_MaxBits,a=0;a<i.length;a++)if(!(i[a].length1<=o)){var s=i[a];i.splice(a--,1);for(var l=s.start1,c=s.start2,u="";0!==s.diffs.length;){var d=new t.patch_obj,h=!0;for(d.start1=l-u.length,d.start2=c-u.length,""!==u&&(d.length1=d.length2=u.length,d.diffs.push([r,u]));0!==s.diffs.length&&d.length1<o-this.Patch_Margin;){var p=s.diffs[0][0],f=s.diffs[0][1];p===n?(d.length2+=f.length,c+=f.length,d.diffs.push(s.diffs.shift()),h=!1):p===e&&1==d.diffs.length&&d.diffs[0][0]==r&&f.length>2*o?(d.length1+=f.length,l+=f.length,h=!1,d.diffs.push([p,f]),s.diffs.shift()):(f=f.substring(0,o-d.length1-this.Patch_Margin),d.length1+=f.length,l+=f.length,p===r?(d.length2+=f.length,c+=f.length):h=!1,d.diffs.push([p,f]),f==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(f.length))}u=this.diff_text2(d.diffs),u=u.substring(u.length-this.Patch_Margin);var m=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);""!==m&&(d.length1+=m.length,d.length2+=m.length,0!==d.diffs.length&&d.diffs[d.diffs.length-1][0]===r?d.diffs[d.diffs.length-1][1]+=m:d.diffs.push([r,m])),h||i.splice(++a,0,d)}}},t.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},t.prototype.patch_fromText=function(i){var o=[];if(!i)return o;for(var a=i.split("\n"),s=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;s<a.length;){var c=a[s].match(l);if(!c)throw new Error("Invalid patch string: "+a[s]);var u=new t.patch_obj;for(o.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),s++;s<a.length;){var d=a[s].charAt(0);try{var h=decodeURI(a[s].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+h)}if("-"==d)u.diffs.push([e,h]);else if("+"==d)u.diffs.push([n,h]);else if(" "==d)u.diffs.push([r,h]);else{if("@"==d)break;if(""!==d)throw new Error('Invalid patch mode "'+d+'" in: '+h)}s++}}return o},t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},t.patch_obj.prototype.toString=function(){var t,i;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,i=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var o,a=["@@ -"+t+" +"+i+" @@\n"],s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case n:o="+";break;case e:o="-";break;case r:o=" "}a[s+1]=o+encodeURI(this.diffs[s][1])+"\n"}return a.join("").replace(/%20/g," ")},this.diff_match_patch=t,this.DIFF_DELETE=e,this.DIFF_INSERT=n,this.DIFF_EQUAL=r,t}),function(t){"use strict";t("jquery_scrollTo",["jquery"],function(t){function e(e){return t.isFunction(e)||t.isPlainObject(e)?e:{top:e,left:e}}var n=t.scrollTo=function(e,n,r){return t(window).scrollTo(e,n,r)};return n.defaults={axis:"xy",duration:0,limit:!0},n.window=function(){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this,n=!e.nodeName||t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])!==-1;if(!n)return e;var r=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"===r.compatMode?r.body:r.documentElement})},t.fn.scrollTo=function(r,i,o){return"object"==typeof i&&(o=i,i=0),"function"==typeof o&&(o={onAfter:o}),"max"===r&&(r=9e9),o=t.extend({},n.defaults,o),i=i||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(i/=2),o.offset=e(o.offset),o.over=e(o.over),this._scrollable().each(function(){function a(t){c.animate(d,i,o.easing,t&&function(){t.call(this,u,o)})}if(null!==r){var s,l=this,c=t(l),u=r,d={},h=c.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(u)){u=e(u);break}if(u=h?t(u):t(u,this),!u.length)return;case"object":(u.is||u.style)&&(s=(u=t(u)).offset())}var p=t.isFunction(o.offset)&&o.offset(l,u)||o.offset;t.each(o.axis.split(""),function(t,e){var r="x"===e?"Left":"Top",i=r.toLowerCase(),f="scroll"+r,m=l[f],g=n.max(l,e);if(s)d[f]=s[i]+(h?0:m-c.offset()[i]),o.margin&&(d[f]-=parseInt(u.css("margin"+r),10)||0,d[f]-=parseInt(u.css("border"+r+"Width"),10)||0),d[f]+=p[i]||0,o.over[i]&&(d[f]+=u["x"===e?"width":"height"]()*o.over[i]);else{var v=u[i];d[f]=v.slice&&"%"===v.slice(-1)?parseFloat(v)/100*g:v}o.limit&&/^\d+$/.test(d[f])&&(d[f]=d[f]<=0?0:Math.min(d[f],g)),!t&&o.queue&&(m!==d[f]&&a(o.onAfterFirst),delete d[f])}),a(o.onAfter)}}).end()},n.max=function(e,n){var r="x"===n?"Width":"Height",i="scroll"+r;if(!t(e).is("html,body"))return e[i]-t(e)[r.toLowerCase()]();var o="client"+r,a=e.ownerDocument.documentElement,s=e.ownerDocument.body;return Math.max(a[i],s[i])-Math.min(a[o],s[o])},n})}("function"==typeof define&&define.amd?define:function(t,e){"use strict";"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}),function(t){var e;return t.event.fix=function(t){return function(e){return e=t.apply(this,arguments),0!==e.type.indexOf("copy")&&0!==e.type.indexOf("paste")||(e.clipboardData=e.originalEvent.clipboardData),e}}(t.event.fix),e={callback:t.noop,matchType:/image.*/},t.fn.pasteImageReader=function(n){return"function"==typeof n&&(n={callback:n}),n=t.extend({},e,n),this.each(function(){var e,r;return r=this,e=t(this),e.bind("paste",function(t){var e,i;return i=!1,e=t.clipboardData,Array.prototype.forEach.call(e.types,function(t,o){var a,s;if(!i)return t.match(n.matchType)||e.items[o].type.match(n.matchType)?(a=e.items[o].getAsFile(),s=new FileReader,s.onload=function(t){return n.callback.call(r,{dataURL:t.target.result,event:t,file:a,name:a.name})},s.readAsDataURL(a),i=!0):void 0})})})}}(jQuery),define("jquery_pasteImage",["jquery"],function(t){return function(){var e;return e||t.$.fn.pasteImageReader}}(this)),define("Editor",["main","sfModal","template","highLight","highlightjs","pagedown_editor","tabIndent","diff_match_patch","jquery_scrollTo","jquery_pasteImage","atwho","caret","fileUpload"],function(t,e,n,r,i,o,a,s){var l=function t(e){e=$.extend({toolbar:t.toolbar,statusbar:!0,status:t.statusbar},e),this.options=e,this.converter=null,this.isBig=!1,this.isLive=!1,this.originHeight=420},c=function(t){var e,n;return e=null!=(n=$.cookie("editor-code-detect-disabled"))?n:0,e>0?$(".code-detect").addClass("hide"):(t.find("p").each(function(t){var e,n;return e=$(this),n=i.highlightAuto(e.text()),n.r>2&&n.language?($(".code-detect").removeClass("hide"),e.addClass("bg-danger")):$(".code-detect").addClass("hide")}),t.find(".bg-danger").length>0?$(".code-detect").removeClass("hide"):void 0)},u=function(t){var e,n;n=function(){$(".editor__menu--zen").addClass("editor__menu--unzen").removeClass("editor__menu--zen"),$(".editor").addClass("editor_fullscreen"),$("body").addClass("noscroll"),$(".editor__resize").hide(),$(".wmd-input").css("height","100%"),t.isBig=!0},e=function(){$(".editor__resize").show(),$(".editor__menu--unzen").addClass("editor__menu--zen").removeClass("editor__menu--unzen"),$(".editor").removeClass("editor_fullscreen"),$("body").removeClass("noscroll"),t.isBig=!1},$(".editor__menu--zen").length?n():e&&e()},d=function(t){t.mode="preview",$(".editor").removeClass("liveMode editMode").addClass("previewMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--preview").addClass("muted"),r($("#wmd-preview"))},h=function(t){t.mode="edit",$(".editor").removeClass("liveMode previewMode").addClass("editMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--edit").addClass("muted")},p=function(t){t.mode="live",$(".editor").removeClass("editMode previewMode").addClass("liveMode"),$(".editor-mode a").removeClass("muted"),$(".editor__menu--live").addClass("muted"),r($("#wmd-preview"))};return l.prototype.getVal=function(){return $(".wmd-input").val()},l.prototype.setVal=function(t){var e;return e=$(".wmd-input").val(t),this.pagedownEditor.refreshPreview(),e},l.prototype.change=function(t){t&&$(".wmd-input").on("input",function(){$(".editor").hasClass("error")&&($(".editor").removeClass("error").removeAttr("data-error"),$(".editor").next(".error--msg").remove()),t()})},l.prototype.render=function(n,i,l){var u,d,h,p,f,m,g,v,b,y,x,w,_,k,C,S,D,T,E,M,L,B,A,I,N,P,F,O;if(A=this,!this._rendered||this._rendered!==n){if(document.cookie.indexOf("typemode")>-1)return void $(n).addClass("wmd-input");i=i||"live",$(n).removeClass("hidden hide").addClass("mono form-control wmd-input"),$(n).before('<div class="editor-toolbar" id="wmd-button-bar"><ul class="editor-mode"></ul></div>'),$(n).wrap('<div class="wmd"></div>'),$(".wmd").after("<div class=\"editor-line\"></div><div class=\"editor-preview\"><div class='fmt' id='wmd-preview'></div></div>"),$(".wmd").append('<div style=\'position: absolute;z-index: 100;top: 31px;right: 0;\' class="alert alert-info code-detect hide" role="alert"><span class="showVideo" style="cursor: pointer;">使用代码格式化改进排版</span><span class=\'disable\' style=\'margin-left: 10px; cursor: pointer;\'>✕</span> </div>'),$(".code-detect .showVideo").click(function(){return e({title:"使用代码格式化改进排版",modalSize:"modal-lg",content:'<video style="width: 100%;" autoplay loop src="'+t.staticUrl+'/global/video/editor-code-func.mp4" autoplay poster="posterimage.jpg"></video>',closeText:"不再提示",doneText:"我已了解",closeClass:"close-btn btn-default",closeFn:function(){return $.cookie("editor-code-detect-disabled",1,{expires:365}),A.pagedownEditor.refreshPreview(),$(".code-detect").addClass("hide")}})}),$(".code-detect .disable").click(function(t){return t.stopPropagation(),$.cookie("editor-code-detect-disabled",1,{expires:365}),A.pagedownEditor.refreshPreview(),$(".code-detect").addClass("hide")}),a.config.tab="    ",a.render($(n)[0]),$(".wmd-input").pasteImageReader(function(t){x(t.name,t.dataURL)}),x=function(t,r){var i,o,a,s,l;return s=$(".wmd-input").val(),o=$(".wmd-input")[0].selectionStart,$(".wmd-input").val(s.slice(0,o)+"\n![图片上传中...]\n"+s.slice(o)),l="image/png",a={type:"POST"},a.url="/img/upload/image?enc=base64",a.name="image",i="xhrupload-"+parseInt(Math.random()*(2<<16)),a.contentType="multipart/form-data; boundary="+i,a.data="--"+i+'\ncontent-disposition: form-data; enc="base64"; name="'+a.name+'"; filename="'+encodeURIComponent(t)+'.base64"\nContent-Transfer-Encoding: base64\nContent-Type: '+l+"\n\n"+r.slice(22)+"\n\n--"+i+"--",$.ajax(a).success(function(t){var r,i,a,l;l=t[0],r=t[1],i="clipboard.png",l?(e(r),$(n).val(s.slice(0,o)+s.slice(o+13))):(a="\n!["+i+"]("+r+")\n",s=$(n).val(),$(n).val(s.slice(0,o)+a+s.slice(o+13)),A.pagedownEditor.refreshPreview(),$(".wmd-input")[0].setSelectionRange(o+1,o+1))}).error(function(t){if(413===t.status)return $(n).val(s.slice(0,o)+s.slice(o+13))})},T=function(t){return $(".editor").addClass("dragging")},S=function(t){return $(".editor").removeClass("dragging")},D=function(t){return t.originalEvent.dataTransfer.dropEffect="copy"},C=function(t){var e,n,r,i,o,a;for($(".editor").removeClass("dragging"),o=t.originalEvent.dataTransfer.files,a=[],r=0,i=o.length;r<i;r++)e=o[r],window.FileReader?(t.preventDefault(),t.stopPropagation(),n=new FileReader,n.onload=function(t){return x(e.name,t.currentTarget.result)},a.push(n.readAsDataURL(e))):a.push(void 0);return a},$(".wmd-input").on({"dragenter.dragevent":T,"dragleave.dragevent":S,"dragover.dragevent":D,"drop.dragevent":C}),$(n).atwho({at:"@",callbacks:{remote_filter:function(t,e){var n,r;if(r={q:t},!t&&$("#answerIt").length)n=$("#answerIt").data("id"),r={objectId:n};else if(!t)return;$.getJSON("/api/users/search",r,function(t){t.status||e(t.data)})},tpl_eval:function(t,e){return'<li data-value="@'+e.name+"["+e.slug+']">'+(e.avatarUrl?'<img class="avatar-24 mr10" src="'+e.avatarUrl+'" />':"")+e.name+" &nbsp; <small>@"+e.slug+"</small></li>"}}}),this.element=$(n)[0],E=this.options,f=new o.getSanitizingConverter,o.Extra.init(f),g=new o.Editor(f),g.run(n.slice(1)),this.converter=f,this.pagedownEditor=g,m=new s,_="@mark"+Math.ceil(1e8*Math.random())+"@",L=$("#wmd-preview"),w="",I='<span class="diff" />',O=void 0,p=null,$("#wmd-preview a").attr("target","_blank"),g.hooks.chain("onPreviewRefresh",function(){!function(){var t,e,n,r,i,o,a,s,l,c,u,d,h,p,f=$("#wmd-preview").html();if(e=m.diff_main(w,f),w=f,e.length>0){for(h=[],a=_,r=0;r<e.length;)t=e[r],l=t[0],p=t[1],d=p.lastIndexOf("<"),n=p.lastIndexOf(">"),0!==l?(d>=0&&d>n?l>0?h.push(p.substring(0,d)+a+p.substring(d)):(o=h[h.length-1],i=o.lastIndexOf("<"),h[h.length-1]=o.substring(0,i)+a+o.substring(i)):l>0?h.push(p+a):h.push(a),a=""):h.push(p),r++;f=h.join(""),a||(c=f.indexOf(_),u=f.substring(0,c),s=f.substr(c+_.length),d=u.lastIndexOf("<"),n=u.lastIndexOf(">"),f=d>=0&&d>n?u.substring(0,d)+I+u.substring(d)+s:s.match(/\$\$/g)?u+s:u+I+s)}return $("#wmd-preview").html(f),f}(),$("#wmd-preview a").attr("target","_blank");var t,e,n,i,o;($("#wmd-preview pre").length||$("#wmd-preview").text().indexOf("$$")!==-1)&&r(L),e=$(".diff",L),o=!1,O&&clearTimeout(O),t=$(".diff",L).parent(),t.is(L)||(t.css("background-color","#D9EDF7"),O=setTimeout(function(){t.css("background-color","transparent")},4500)),e.length>0&&(i=e.position(),n=e.parent().css("line-height"),n=n?parseInt(n):0,(i.top<0||i.top>$(".editor-preview").height()-n)&&($(".editor-preview").scrollTo(e),o=!0)),p&&clearTimeout(p),p=setTimeout(function(){return c(L)},200)}),E.toolbar!==!1&&this.createToolbar(),B='<a class="editor__resize" href="javascript:void(0);">调整高度</a>',$(".editor").after(B),P=void 0,b=0,y=32,F=void 0,N=function(t){return F=$(".wmd-input"),b=k(t).y,P=F.height()-b,F.css("opacity",.3),$(document).mousemove(M).mouseup(v),!1},M=function(t){var e,n;return n=k(t).y,e=P+n,b>=n&&(e-=5),b=n,e=Math.max(y,e),F.height(e+"px"),e<y&&v(t),!1},v=function(){$(document).unbind("mousemove",M).unbind("mouseup",v),F.css({opacity:1}),F.focus(),F=null,P=null,b=0},k=function(t){return{x:t.clientX+document.documentElement.scrollLeft,y:t.clientY+document.documentElement.scrollTop}},$(".editor__resize").on("mousedown",N),$(window).scroll(function(){var t,e,n,r;A.isBig||(r=$(".editor").width(),n=$(".editor").offset().top,e=$(this).scrollTop(),t=62+$(".editor-help .tab-content").height(),e>=n?($(".editor-help-content.active").removeClass("active"),$(".editor__menu").css({position:"fixed",top:0,"z-index":1e3,width:r,"border-bottom":"1px solid #CCC"}),$(".editor-help").css({position:"fixed",top:"31px","z-index":1e3,width:r})):$(".editor__menu, .editor-help").css({position:"static",width:"auto","border-bottom":"none"}))}),this._rendered=n,"live"===i?$(".editor__menu--live").trigger("click"):"edit"===i?$(".editor__menu--edit").trigger("click"):"preview"===i&&$(".editor__menu--preview").trigger("click"),window.localStorage&&(u="autoSaveContent_"+location.pathname+location.search,h="autoSaveTitle_"+location.pathname+location.search,d="autoSaveTags_"+location.pathname+location.search,localStorage[u]&&$(n).val(localStorage[u]),localStorage[h]&&$("#myTitle").val(localStorage[h])),l&&l(A)}},l.prototype.createToolbar=function(t){var e,n,r,i,o,a;r=this,o='<li class="pull-right"><a class="editor__menu--preview" title="预览模式"></a></li><li class="pull-right"><a class="editor__menu--live" title="实况模式"></a></li><li class="pull-right"><a class="editor__menu--edit" title="编辑模式"></a></li><li class="pull-right editor__menu--divider"></li><li id="wmd-zen-button" class="pull-right" title="全屏"><a class="editor__menu--zen"></a></li>',i=$(o),$(".editor-mode").append(i),$(".editor").delegate(".editor__menu--edit","click",function(){$(this).hasClass("muted")||h(r)}),$(".editor").delegate(".editor__menu--preview","click",function(){$(this).hasClass("muted")||d(r)}),$(".editor").delegate(".editor__menu--live","click",function(){$(this).hasClass("muted")||p(r)}),$("#wmd-zen-button").find("a").removeClass("editor__menu--bold").addClass("editor__menu--zen"),$("#wmd-zen-button").click(function(){u(r)}),e='<title>Markdown 语法指南</title><link rel="stylesheet" href="'+$('head link[rel="stylesheet"]').attr("href")+'"><script src="https://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script><script src="https://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>',n=e+'<body style="background-color:#FAF2CC"><div class="editor-help"><ul class="editor-help-tabs nav nav-tabs" id="editorHelpTab" role="tablist">    <li rel="heading"><a href="#editorHelpHeading" role="tab" data-toggle="tab">标题 / 粗斜体</a></li>    <li rel="code"><a href="#editorHelpCode" role="tab" data-toggle="tag">代码</a></li>    <li rel="link"><a href="#editorHelpLink" role="tab" data-toggle="tag">链接</a></li>    <li rel="image"><a href="#editorHelpImage" role="tab" data-toggle="tag">图片</a></li>    <li rel="split"><a href="#editorHelpSplit" role="tab" data-toggle="tag">换行 / 分隔符</a></li>    <li rel="list"><a href="#editorHelpList" role="tab" data-toggle="tag">列表 / 引用</li></a>    <li class="pull-right"><a href="http://segmentfault.com/markdown" target="_blank">高级技巧</a></li>    </ul><div class="tab-content"><!-- 粗斜体、标题 --><div class="editor-help-content tab-pane fade" id="editorHelpHeading" rel="heading"><p>文章内容较多时，可以用标题分段：</p><pre>## 大标题 ##\n### 小标题 ###</pre><p>粗体 / 斜体</p><pre>*斜体文本*    _斜体文本_\n**粗体文本**    __粗体文本__\n***粗斜体文本***    ___粗斜体文本___</pre></div><!-- end 粗斜体、标题 --><!-- 代码 --><div class="editor-help-content tab-pane fade" id="editorHelpCode" rel="code"><p>如果你只想高亮语句中的某个函数名或关键字，可以使用 <code>`function_name()`</code> 实现</p><p>通常我们会根据您的代码片段适配合适的高亮方法，但你也可以用 <code>```</code> 包裹一段代码，并指定一种语言</p><pre>```<strong>javascript</strong>\n$(document).ready(function () {\n    alert(\'hello world\');\n});\n```</pre><p>支持的语言：<code>actionscript, apache, bash, clojure, cmake, coffeescript, cpp, cs, css, d, delphi, django, erlang, go, haskell, html, http, ini, java, javascript, json, lisp, lua, markdown, matlab, nginx, objectivec, perl, php, python, r, ruby, scala, smalltalk, sql, tex, vbscript, xml</code></p><p>您也可以使用 4 空格缩进，再贴上代码，实现相同的的效果</p><pre><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>def g(x):\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>yield from range(x, 0, -1)\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>yield from range(x)</pre></div><!-- end 代码 --><!-- 链接 --><div class="editor-help-content tab-pane fade" rel="link" id="editorHelpLink"><p>常用链接方法</p><pre>文字链接 [链接名称](http://链接网址)\n网址链接 &lt;http://链接网址&gt;</pre><p>高级链接技巧</p><pre>这个链接用 1 作为网址变量 [Google][1].\n这个链接用 yahoo 作为网址变量 [Yahoo!][yahoo].\n然后在文档的结尾为变量赋值（网址）\n\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[1]: http://www.google.com/\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[yahoo]: http://www.yahoo.com/</pre></div><!-- end 链接 --><!-- 图片 --><div class="editor-help-content tab-pane fade" id="editorHelpImage" rel="image"><p>跟链接的方法区别在于前面加了个感叹号 <code>!</code>，这样是不是觉得好记多了呢？</p><pre>![图片名称](http://图片网址)</pre><p>当然，你也可以像网址那样对图片网址使用变量</p><pre>这个链接用 1 作为网址变量 [Google][1].\n然后在文档的结尾位变量赋值（网址）\n\n<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>[1]: http://www.google.com/logo.png</pre></div><!-- end 图片 --><!-- 换行、分隔符 --><div class="editor-help-content tab-pane fade" id="editorHelpSplit" rel="split"><p>如果另起一行，只需在当前行结尾加 2 个空格</p><pre>在当前行的结尾加 2 个空格<i class="nbsp">&nbsp;</i><i class="nbsp">&nbsp;</i>\n这行就会新起一行</pre><p>如果是要起一个新段落，只需要空出一行即可。</p><p>如果你有写分割线的习惯，可以新起一行输入三个减号 <code>-</code>：</p><pre>---\n</pre></div><!-- end 换行、分隔符 --><!-- 列表、引用 --><div class="editor-help-content tab-pane fade" id="editorHelpList" rel="list"><p>普通列表</p><pre>-<i class="nbsp">&nbsp;</i>列表文本前使用 [减号+空格]\n+<i class="nbsp">&nbsp;</i>列表文本前使用 [加号+空格]\n*<i class="nbsp">&nbsp;</i>列表文本前使用 [星号+空格]</pre><p>带数字的列表</p><pre>1.<i class="nbsp">&nbsp;</i>列表前使用 [数字+空格]\n2.<i class="nbsp">&nbsp;</i>我们会自动帮你添加数字\n7.<i class="nbsp">&nbsp;</i>不用担心数字不对，显示的时候我们会自动把这行的 7 纠正为 3</pre><p>引用</p><pre>&gt;<i class="nbsp">&nbsp;</i>引用文本前使用 [大于号+空格]\n&gt;<i class="nbsp">&nbsp;</i>折行可以不加，新起一行都要加上哦</pre></div><!-- end 列表、引用 --></div></div><script>$("#editorHelpTab a").eq(0).tab("show");$("#editorHelpTab a").click(function (e) {    var _$wrap = $(this).parent();    if(! _$wrap.hasClass("pull-right")) {        e.preventDefault();        $(this).tab("show");    }});</script></body>',
a=null,$("#wmd-help-button").click(function(){a&&a.window?a.focus():(a=window.open("","Markdown Help","channelmode=yes, toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, width=505, height=400, top=100, left=100"),a.document.write(n))})},l}),define("911",["main"],function(t){"use strict";var e,n,r,i,o,a,s,l,c,u,d,h,p,f,m,g,v,b,y,x,w,_,k;o=$("#911"),r=$("#reportForm"),n=o.find('[data-role="base"]'),c=o.find('[data-model="type"]'),a=o.find('[data-model="returnMsg"]'),e=o.find('[data-role="back"]'),s=o.find('[data-role="submit"]'),l=o.find('[data-model="type"]');var C=o.find('[data-model="action"]');i=n.find('[data-model="list"]'),d="",h="";var S="";p="",u=[],_=function(t){var e;return null!=t.subReason&&(u[t.value]=t.subReason),e='<li class="radio">',e+="<label>",e+='<input name="reason"',e+=' type="radio" value="'+t.value+" - "+t.desc+'"',"duplicate"===t.short.split("-")[1]&&(t.short="duplicate"),"none-of-all"===t.short||"duplicate"===t.short?e+=' data-action="'+t.short+'"':t.hasOwnProperty("subReason")&&(e+=' data-action="subReason" data-reason='+JSON.stringify(t)),e+=">",e+=t.value+'：<span class="text-muted">'+t.desc+"</span>",e+="</label>",e+="</li>"},k=function(t){var e,n;return e=t.isAccepted?"[解决] ":"",n='<li class="radio">',n+="<label>",n+='<input name="q" type="radio" value="'+t.id+'">',n+='<a href="'+t.url+'" title="'+t.title+'" class="mr10" target="_blank"> ',n+=e+t.title,n+="</a>",n+='<span class="text-muted">'+t.answers+" 个回答</span>",n+="</label>",n+="</li>"},b=function(t,e){var n,r;if(null!=t)return n=function(){var n,i,o;for(o=[],n=0,i=t.length;n<i;n++)r=t[n],o.push(e(r));return o}().join(" ")},v=function(t,e){var n,r,i;return e?(r=" has-input",n='<input type="hidden" name="q">'):(r="",n=b(t.subReason,_)),i='<div class="overlay'+r+'">',e||(i+='<p><strong class="required">该问题'+t.value+"，理由是：</strong></p>"),e&&(i+='<input class="form-control" type="text" placeholder="请输入已有问题标题或网址" >'),i+='<ul class="list-unstyled" data-model="list">',i+=n,i+="</ul>",i+="</div>"},y=function(t){return'<textarea autocomplete="false" class="form-control" rows="3" data-role="custom" name="'+t+'" placeholder="请提供详尽的理由说明" ></textarea>'},g=function(t,e){return $.ajax({type:"get",url:"/api/question/search",async:!0,data:{q:t},dataType:"json",success:function(t){var n;return"login"===t.data[0]?void o.modal("hide"):(n=b(t.data,k),void e.html(n))}})},f={subReason:function(t){var e;return e=$(v(t)),r.append(e),e},duplicate:function(t){var n,i,o,a,s={value:t};return a=$(v(s,!0)),r.append(a),n=a.find("input"),i=a.find('[data-model="list"]'),o=null,n.on("input",function(t){var e;e=$(this).val(),clearTimeout(o),o=setTimeout(function(){g(e,i)},1e3)}),e.hide(),a},"none-of-all":function(){var t;return t=$(y("custom")),$(this).parent().after(t),e.hide(),t}},w={show:function(t,e){a.text(t).slideDown("fast"),setTimeout(function(){w.hide(),e&&e()},3e3)},hide:function(){a.slideUp("fast")},reset:function(){a.hide().empty()}},x=function(t){var e,n,r=(t.type,t.typeText),o=t.actionText,a=t.reason;if(l.text(r),C.text(o),w.reset(),n=a,e=b(n,_),i.html(e),m&&m(n),$(".js-911-delete-tips").remove(),("answer"===t.type||"question"===t.type)&&"删除"===o&&window.config){var s=window.config["delete_"+t.type][1];$("#reportForm").append('<p style="color: #a94442;" class="js-911-delete-tips">注意：删除'+r+"将 "+s+" 声望</p>")}},m=function(t){var n;n=[],o.on("click.911","input[type=radio]",function(t){var r;n.length>0&&(n[0]&&!$.contains(n[0][0],this)?(n[0].off().remove(),n.splice(0,2)):n[0]||n.splice(0,1)),r=$(this).data("action"),r?(n.unshift($(this)),"q-duplicate"===r?n.unshift(f[r]&&f[r].call(this,$(this).val())):n.unshift(f[r]&&f[r].call(this,$(this).data("reason")))):n.unshift(!1),n.some(function(t){return t})&&"none-of-all"!==r&&e.show()}),o.on("click.911",'[data-role="back"]',function(t){for(var e;!(e=n.shift()););e.off().remove(),n.shift().prop("checked",!1),0===n.length&&$(this).hide()}),o.on("click.911",'[data-role="submit"]',function(t){var e,n,i,a,s,l;if(e=r.serializeArray(),l=[],r.find("input[type=radio],textarea").each(function(t,e){var n;n=$(e).attr("name"),$.inArray(n,l)===-1&&l.push(n)}),e.length!==l.length)return void w.show("请完善理由");for(i=0,a=e.length;i<a;i++)if(n=e[i],!n.value)return void w.show("请完善理由");s=r.serialize(),0!==s.indexOf("reason=以上选项都不是 - 请补充说明")&&s.indexOf("custom=")==-1||(s={reason:$('textarea[name="custom"]').val()}),$.post("/api/"+h+"/"+d+"/"+S,s,function(t){if(0===t.status)location.reload();else if("login"===t.data[0])o.modal("hide");else{var e="";for(var n in t.data[1])e+=t.data[1][n];w.show(e)}},"json")})},o.on("shown.bs.modal",function(t){var e=$(t.relatedTarget),n=e.closest(".js__content-ops");n.length||(n=e),d=n.data("id"),p=n.data("typetext");var r=h=n.data("module"),i=n.data("action-text")?n.data("action-text"):e.text()?e.text():"处理";S=e.data("action"),$(".widget-911").css("visibility","hidden"),$(".modal-backdrop").css("visibility","hidden");var o="/api/reason/"+r+"/"+S,a=function(t){x({type:h,typeText:p,actionText:i,reason:t}),$(".widget-911").css("visibility","visible"),$(".modal-backdrop").css("visibility","visible")};$.get(o,{id:d},function(t){if(!t.status){var e=t.data;a(e)}})}),o.on("hidden.bs.modal",function(t){u=[],o.off("click.911").find(".overlay").remove(),i.empty(),e.hide()})}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("handlebars",e):"object"==typeof exports?exports.Handlebars=e():t.Handlebars=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(){var t=v();return t.compile=function(e,n){return u.compile(e,n,t)},t.precompile=function(e,n){return u.precompile(e,n,t)},t.AST=l.default,t.Compiler=u.Compiler,t.JavaScriptCompiler=h.default,t.Parser=c.parser,t.parse=c.parse,t}var i=n(8).default;e.__esModule=!0;var o=n(1),a=i(o),s=n(2),l=i(s),c=n(3),u=n(4),d=n(5),h=i(d),p=n(6),f=i(p),m=n(7),g=i(m),v=a.default.create,b=r();b.create=r,g.default(b),b.Visitor=f.default,b.default=b,e.default=b,t.exports=e.default},function(t,e,n){"use strict";function r(){var t=new s.HandlebarsEnvironment;return p.extend(t,s),t.SafeString=c.default,t.Exception=d.default,t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=m,t.template=function(e){return m.template(e,t)},t}var i=n(9).default,o=n(8).default;e.__esModule=!0;var a=n(10),s=i(a),l=n(11),c=o(l),u=n(12),d=o(u),h=n(13),p=i(h),f=n(14),m=i(f),g=n(7),v=o(g),b=r();b.create=r,v.default(b),b.default=b,e.default=b,t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!r.helpers.scopedId(t)&&!t.depth}}};e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if("Program"===t.type)return t;s.default.yy=p,p.locInfo=function(t){return new p.SourceLocation(e&&e.srcName,t)};var n=new c.default(e);return n.accept(s.default.parse(t))}var i=n(8).default,o=n(9).default;e.__esModule=!0,e.parse=r;var a=n(15),s=i(a),l=n(16),c=i(l),u=n(17),d=o(u),h=n(13);e.parser=s.default;var p={};h.extend(p,d)},function(t,e,n){"use strict";function r(){}function i(t,e,n){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var r=n.parse(t,e),i=(new n.Compiler).compile(r,e);return(new n.JavaScriptCompiler).compile(i,e)}function o(t,e,n){function r(){var r=n.parse(t,e),i=(new n.Compiler).compile(r,e),o=(new n.JavaScriptCompiler).compile(i,e,void 0,!0);return n.template(o)}function i(t,e){return o||(o=r()),o.call(this,t,e)}if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var o=void 0;return i._setup=function(t){return o||(o=r()),o._setup(t)},i._child=function(t,e,n,i){return o||(o=r()),o._child(t,e,n,i)},i}function a(t,e){if(t===e)return!0;if(d.isArray(t)&&d.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!a(t[n],e[n]))return!1;return!0}}function s(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}var l=n(8).default;e.__esModule=!0,e.Compiler=r,e.precompile=i,e.compile=o;var c=n(12),u=l(c),d=n(13),h=n(2),p=l(h),f=[].slice;r.prototype={compiler:r,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var r=this.opcodes[n],i=t.opcodes[n];if(r.opcode!==i.opcode||!a(r.args,i.args))return!1}e=this.children.length;for(var n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[];var n=e.knownHelpers;if(e.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},n)for(var r in n)r in n&&(e.knownHelpers[r]=n[r]);return this.accept(t)},compileProgram:function(t){var e=new this.compiler,n=e.compile(t,this.options),r=this.guid++;return this.usePartial=this.usePartial||n.usePartial,this.children[r]=n,this.useDepths=this.useDepths||n.useDepths,r},accept:function(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,n=e.length,r=0;n>r;r++)this.accept(e[r]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){s(t);var e=t.program,n=t.inverse;e=e&&this.compileProgram(e),n=n&&this.compileProgram(n);var r=this.classifySexpr(t);"helper"===r?this.helperSexpr(t,e,n):"simple"===r?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,n),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),n=this.setupFullMustacheParams(t,e,void 0),r=t.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,r.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var n=t.params;if(n.length>1)throw new u.default("Unsupported number of partial arguments: "+n.length,t);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var r=t.name.original,i="SubExpression"===t.name.type;i&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,r,o),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){s(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,n){var r=t.path,i=r.parts[0],o=null!=e||null!=n;this.opcode("getContext",r.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),r.strict=!0,this.accept(r),this.opcode("invokeAmbiguous",i,o)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var r=this.setupFullMustacheParams(t,e,n),i=t.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",r.length,o);else{if(this.options.knownHelpersOnly)throw new u.default("You specified knownHelpersOnly, but used the unknown helper "+o,t);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",r.length,i.original,p.default.helpers.simpleId(i))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],n=p.default.helpers.scopedId(t),r=!t.depth&&!n&&this.blockParamIndex(e);r?this.opcode("lookupBlockParam",r,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,n):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,n=0,r=e.length;for(this.opcode("pushHash");r>n;n++)this.pushParam(e[n].value);for(;n--;)this.opcode("assignToHash",e[n].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:f.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=p.default.helpers.simpleId(t.path),n=e&&!!this.blockParamIndex(t.path.parts[0]),r=!n&&p.default.helpers.helperExpression(t),i=!n&&(r||e);if(i&&!r){var o=t.path.parts[0],a=this.options;a.knownHelpers[o]?r=!0:a.knownHelpersOnly&&(i=!1)}return r?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e=0,n=t.length;n>e;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var n=void 0;if(!t.parts||p.default.helpers.scopedId(t)||t.depth||(n=this.blockParamIndex(t.parts[0])),n){var r=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,r)}else e=t.original||e,e.replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,n,r){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.accept(t.hash):this.opcode("emptyHash",r),i},blockParamIndex:function(t){for(var e=0,n=this.options.blockParams.length;n>e;e++){var r=this.options.blockParams[e],i=r&&d.indexOf(r,t);if(r&&i>=0)return[e,i]}}}},function(t,e,n){"use strict";function r(t){this.value=t}function i(){}function o(t,e,n,r){var i=e.popStack(),o=0,a=n.length;for(t&&a--;a>o;o++)i=e.nameLookup(i,n[o],r);return t?[e.aliasable("container.strict"),"(",i,", ",e.quotedString(n[o]),")"]:i}var a=n(8).default;e.__esModule=!0;var s=n(10),l=n(12),c=a(l),u=n(13),d=n(18),h=a(d);i.prototype={nameLookup:function(t,e){return i.isValidJavaScriptVariableName(e)?[t,".",e]:[t,"[",JSON.stringify(e),"]"]},depthedLookup:function(t){return[this.aliasable("container.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=s.COMPILER_REVISION,e=s.REVISION_CHANGES[t];return[t,e]},appendToBuffer:function(t,e,n){return u.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:n?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},compile:function(t,e,n,r){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var i=t.opcodes,o=void 0,a=void 0,s=void 0,l=void 0;for(s=0,l=i.length;l>s;s++)o=i[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),r?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(r);if(this.isChild)return u;var d={compiler:this.compilerInfo(),main:u};this.decorators&&(d.main_d=this.decorators,d.useDecorators=!0);var h=this.context,p=h.programs,f=h.decorators;for(s=0,l=p.length;l>s;s++)p[s]&&(d[s]=p[s],f[s]&&(d[s+"_d"]=f[s],d.useDecorators=!0));return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),r?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),e.srcName?(d=d.toStringWithSourceMap({file:e.destName}),d.map=d.map&&d.map.toString()):d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new h.default(this.options.srcName),this.decorators=new h.default(this.options.srcName)},createFunctionContext:function(t){var e="",n=this.stackVars.concat(this.registers.list);n.length>0&&(e+=", "+n.join(", "));var r=0;for(var i in this.aliases){var o=this.aliases[i];this.aliases.hasOwnProperty(i)&&o.children&&o.referenceCount>1&&(e+=", alias"+ ++r+"="+i,o.children[0]="alias"+r)}var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(e);return t?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(t){var e=this.environment.isSimple,n=!this.forceBuffer,r=void 0,i=void 0,o=void 0,a=void 0;return this.source.each(function(t){t.appendToBuffer?(o?t.prepend("  + "):o=t,a=t):(o&&(i?o.prepend("buffer += "):r=!0,a.add(";"),o=a=void 0),i=!0,e||(n=!1))}),n?o?(o.prepend("return "),a.add(";")):i||this.source.push('return "";'):(t+=", buffer = "+(r?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(r?"":";\n")),this.source.merge()},blockValue:function(t){var e=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(t,0,n);var r=this.popStack();n.splice(1,0,r),this.push(this.source.functionCall(e,"call",n))},ambiguousBlockValue:function(){var t=this.aliasable("helpers.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var n=this.topStack();e.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack(function(t){return[" != null ? ",t,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,n,r){var i=0;r||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[i++])),this.resolvePath("context",t,i,e,n)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,n){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,n)},resolvePath:function(t,e,n,r,i){var a=this;if(this.options.strict||this.options.assumeObjects)return void this.push(o(this.options.strict&&i,this,e,t));for(var s=e.length;s>n;n++)this.replaceStack(function(i){var o=a.nameLookup(i,e[n],t);return r?[" && ",o]:[" != null ? ",o," : ",i]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var n=this.nameLookup("decorators",e,"decorator"),r=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",r])," || fn;"])},invokeHelper:function(t,e,n){var r=this.popStack(),i=this.setupHelper(t,e),o=n?[i.name," || "]:"",a=["("].concat(o,r);this.options.strict||a.push(" || ",this.aliasable("helpers.helperMissing")),a.push(")"),this.push(this.source.functionCall(a,"call",i.callParams))},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var n=this.popStack();this.emptyHash();var r=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),o=["(","(helper = ",i," || ",n,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",o,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(t,e,n){var r=[],i=this.setupParams(e,1,r);t&&(e=this.popStack(),delete i.name),n&&(i.indent=JSON.stringify(n)),i.helpers="helpers",i.partials="partials",t?r.unshift(e):r.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),r.push(i),this.push(this.source.functionCall("container.invokePartial","",r))},assignToHash:function(t){var e=this.popStack(),n=void 0,r=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(r=this.popStack(),n=this.popStack());var o=this.hash;n&&(o.contexts[t]=n),r&&(o.types[t]=r),i&&(o.ids[t]=i),o.values[t]=e},pushId:function(t,e,n){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:i,compileChildren:function(t,e){for(var n=t.children,r=void 0,i=void 0,o=0,a=n.length;a>o;o++){r=n[o],i=new this.compiler;var s=this.matchExistingProgram(r);null==s?(this.context.programs.push(""),s=this.context.programs.length,r.index=s,r.name="program"+s,this.context.programs[s]=i.compile(r,e,this.context,!this.precompile),this.context.decorators[s]=i.decorators,this.context.environments[s]=r,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams):(r.index=s,r.name="program"+s,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var r=this.context.environments[e];if(r&&r.equals(t))return e}},programExpression:function(t){var e=this.environment.children[t],n=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof r||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new r(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],n=void 0,i=void 0,o=void 0;if(!this.isInline())throw new c.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof r)n=[a.value],e=["(",n],o=!0;else{i=!0;var s=this.incrStack();e=["((",this.push(s)," = ",a,")"],n=this.topStack()}var l=t.call(this,n);o||this.popStack(),i&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var i=t[e];if(i instanceof r)this.compileStack.push(i);else{var o=this.incrStack();this.pushSource([o," = ",i,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof r)return n.value;if(!e){if(!this.stackSlot)throw new c.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof r?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):(e=this.aliases[t]=this.source.wrap(t),e.aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,n){var r=[],i=this.setupHelperArgs(e,t,r,n),o=this.nameLookup("helpers",e,"helper");return{params:r,paramsInit:i,name:o,callParams:[this.contextName(0)].concat(r)}},setupParams:function(t,e,n){var r={},i=[],o=[],a=[],s=!n,l=void 0;s&&(n=[]),r.name=this.quotedString(t),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(r.fn=u||"container.noop",r.inverse=c||"container.noop");for(var d=e;d--;)l=this.popStack(),n[d]=l,this.trackIds&&(a[d]=this.popStack()),this.stringParams&&(o[d]=this.popStack(),i[d]=this.popStack());return s&&(r.args=this.source.generateArray(n)),this.trackIds&&(r.ids=this.source.generateArray(a)),this.stringParams&&(r.types=this.source.generateArray(o),r.contexts=this.source.generateArray(i)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(t,e,n,r){var i=this.setupParams(t,e,n);return i=this.objectLiteral(i),r?(this.useRegister("options"),n.push("options"),["options=",i]):n?(n.push(i),""):i}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=i.RESERVED_WORDS={},n=0,r=t.length;r>n;n++)e[t[n]]=!0}(),i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=i,t.exports=e.default},function(t,e,n){"use strict";function r(){this.parents=[]}function i(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function o(t){i.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function a(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}var s=n(8).default;e.__esModule=!0;var l=n(12),c=s(l);r.prototype={constructor:r,mutating:!1,acceptKey:function(t,e){var n=this.accept(t[e]);if(this.mutating){if(n&&!r.prototype[n.type])throw new c.default('Unexpected node type "'+n.type+'" found when accepting '+e+" on "+t.type);t[e]=n}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new c.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,n=t.length;n>e;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,n--)},accept:function(t){if(t){if(!this[t.type])throw new c.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:e!==!1?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:i,Decorator:i,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(t){a.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:i,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=r,t.exports=e.default},function(t,e,n){(function(n){"use strict";e.__esModule=!0,e.default=function(t){var e="undefined"!=typeof n?n:window,r=e.Handlebars;t.noConflict=function(){e.Handlebars===t&&(e.Handlebars=r)}},t.exports=e.default}).call(e,function(){return this}())},function(t,e,n){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,n){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__esModule=!0},function(t,e,n){"use strict";function r(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},l.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}var i=n(8).default;e.__esModule=!0,e.HandlebarsEnvironment=r;var o=n(13),a=n(12),s=i(a),l=n(19),c=n(20),u=n(21),d=i(u),h="4.0.0";e.VERSION=h;var p=7;e.COMPILER_REVISION=p;var f={1:"<= 1.0.rc.2",
2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=f;var m="[object Object]";r.prototype={constructor:r,logger:d.default,log:d.default.log,registerHelper:function(t,e){if(o.toString.call(t)===m){if(e)throw new s.default("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===m)o.extend(this.partials,t);else{if("undefined"==typeof e)throw new s.default("Attempting to register a partial as undefined");this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===m){if(e)throw new s.default("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var g=d.default.log;e.log=g,e.createFrame=o.createFrame,e.logger=d.default},function(t,e,n){"use strict";function r(t){this.string=t}e.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){var n=e&&e.loc,o=void 0,a=void 0;n&&(o=n.start.line,a=n.start.column,t+=" - "+o+":"+a);for(var s=Error.prototype.constructor.call(this,t),l=0;l<i.length;l++)this[i[l]]=s[i[l]];Error.captureStackTrace&&Error.captureStackTrace(this,r),n&&(this.lineNumber=o,this.column=a)}e.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];r.prototype=new Error,e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t){return d[t]}function i(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function o(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function a(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return p.test(t)?t.replace(h,r):t}function s(t){return!t&&0!==t||!(!g(t)||0!==t.length)}function l(t){var e=i({},t);return e._parent=t,e}function c(t,e){return t.path=e,t}function u(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=i,e.indexOf=o,e.escapeExpression=a,e.isEmpty=s,e.createFrame=l,e.blockParams=c,e.appendContextPath=u;var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},h=/[&<>"'`=]/g,p=/[&<>"'`=]/,f=Object.prototype.toString;e.toString=f;var m=function(t){return"function"==typeof t};m(/x/)&&(e.isFunction=m=function(t){return"function"==typeof t&&"[object Function]"===f.call(t)}),e.isFunction=m;var g=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===f.call(t)};e.isArray=g},function(t,e,n){"use strict";function r(t){var e=t&&t[0]||1,n=v.COMPILER_REVISION;if(e!==n){if(n>e){var r=v.REVISION_CHANGES[n],i=v.REVISION_CHANGES[e];throw new g.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new g.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function i(t,e){function n(n,r,i){i.hash&&(r=f.extend({},r,i.hash),i.ids&&(i.ids[0]=!0)),n=e.VM.resolvePartial.call(this,n,r,i);var o=e.VM.invokePartial.call(this,n,r,i);if(null==o&&e.compile&&(i.partials[i.name]=e.compile(n,t.compilerOptions,e),o=i.partials[i.name](r,i)),null!=o){if(i.indent){for(var a=o.split("\n"),s=0,l=a.length;l>s&&(a[s]||s+1!==l);s++)a[s]=i.indent+a[s];o=a.join("\n")}return o}throw new g.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function r(e){function n(e){return""+t.main(i,e,i.helpers,i.partials,a,l,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.data;r._setup(o),!o.partial&&t.useData&&(a=c(e,a));var s=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(s=o.depths?e!==o.depths[0]?[e].concat(o.depths):o.depths:[e]),(n=u(t.main,n,i,o.depths||[],a,l))(e,o)}if(!e)throw new g.default("No environment passed to template");if(!t||!t.main)throw new g.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var i={strict:function(t,e){if(!(e in t))throw new g.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,r=0;n>r;r++)if(t[r]&&null!=t[r][e])return t[r][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:f.escapeExpression,invokePartial:n,fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,r,i){var a=this.programs[t],s=this.fn(t);return e||i||r||n?a=o(this,t,s,e,n,r,i):a||(a=this.programs[t]=o(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=f.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials,i.decorators=n.decorators):(i.helpers=i.merge(n.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(n.partials,e.partials)),t.useDecorators&&(i.decorators=i.merge(n.decorators,e.decorators)))},r._child=function(e,n,r,a){if(t.useBlockParams&&!r)throw new g.default("must pass block params");if(t.useDepths&&!a)throw new g.default("must pass parent depths");return o(i,e,t[e],n,0,r,a)},r}function o(t,e,n,r,i,o,a){function s(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return a&&e!==a[0]&&(s=[e].concat(a)),n(t,e,t.helpers,t.partials,i.data||r,o&&[i.blockParams].concat(o),s)}return s=u(n,s,t,a,r,o),s.program=e,s.depth=a?a.length:0,s.blockParams=i||0,s}function a(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],t}function s(t,e,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var r=void 0;if(n.fn&&n.fn!==l&&(r=n.data["partial-block"]=n.fn,r.partials&&(n.partials=f.extend({},n.partials,r.partials))),void 0===t&&r&&(t=r),void 0===t)throw new g.default("The partial "+n.name+" could not be found");return t instanceof Function?t(e,n):void 0}function l(){return""}function c(t,e){return e&&"root"in e||(e=e?v.createFrame(e):{},e.root=t),e}function u(t,e,n,r,i,o){if(t.decorator){var a={};e=t.decorator(e,a,n,r&&r[0],i,o,r),f.extend(e,a)}return e}var d=n(9).default,h=n(8).default;e.__esModule=!0,e.checkRevision=r,e.template=i,e.wrapProgram=o,e.resolvePartial=a,e.invokePartial=s,e.noop=l;var p=n(13),f=d(p),m=n(12),g=h(m),v=n(10)},function(t,e,n){"use strict";var r=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,n,r,i,o,a){var s=o.length-1;switch(i){case 1:return o[s-1];case 2:this.$=r.prepareProgram(o[s]);break;case 3:this.$=o[s];break;case 4:this.$=o[s];break;case 5:this.$=o[s];break;case 6:this.$=o[s];break;case 7:this.$=o[s];break;case 8:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:r.stripComment(o[s]),strip:r.stripFlags(o[s],o[s]),loc:r.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:r.locInfo(this._$)};break;case 11:this.$=r.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=r.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=r.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:r.stripFlags(o[s-5],o[s])};break;case 16:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:r.stripFlags(o[s-5],o[s])};break;case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:r.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:r.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var l=r.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),c=r.prepareProgram([l],o[s-1].loc);c.chained=!0,this.$={strip:o[s-2].strip,program:c,chain:!0};break;case 20:this.$=o[s];break;case 21:this.$={path:o[s-1],strip:r.stripFlags(o[s-2],o[s])};break;case 22:this.$=r.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],r.stripFlags(o[s-4],o[s]),this._$);break;case 23:this.$=r.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],r.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:r.stripFlags(o[s-4],o[s]),loc:r.locInfo(this._$)};break;case 25:this.$=r.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:r.stripFlags(o[s-4],o[s])};break;case 27:this.$=o[s];break;case 28:this.$=o[s];break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:r.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:r.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:r.id(o[s-2]),value:o[s],loc:r.locInfo(this._$)};break;case 32:this.$=r.id(o[s-1]);break;case 33:this.$=o[s];break;case 34:this.$=o[s];break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:r.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:r.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:r.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:r.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:r.locInfo(this._$)};break;case 40:this.$=o[s];break;case 41:this.$=o[s];break;case 42:this.$=r.preparePath(!0,o[s],this._$);break;case 43:this.$=r.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:r.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:r.id(o[s]),original:o[s]}];break;case 46:this.$=[];break;case 47:o[s-1].push(o[s]);break;case 48:this.$=[o[s]];break;case 49:o[s-1].push(o[s]);break;case 50:this.$=[];break;case 51:o[s-1].push(o[s]);break;case 58:this.$=[];break;case 59:o[s-1].push(o[s]);break;case 64:this.$=[];break;case 65:o[s-1].push(o[s]);break;case 70:this.$=[];break;case 71:o[s-1].push(o[s]);break;case 78:this.$=[];break;case 79:o[s-1].push(o[s]);break;case 82:this.$=[];break;case 83:o[s-1].push(o[s]);break;case 86:this.$=[];break;case 87:o[s-1].push(o[s]);break;case 90:this.$=[];break;case 91:o[s-1].push(o[s]);break;case 94:this.$=[];break;case 95:o[s-1].push(o[s]);break;case 98:this.$=[o[s]];break;case 99:o[s-1].push(o[s]);break;case 100:this.$=[o[s]];break;case 101:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,r=[0],i=[null],o=[],a=this.table,s="",l=0,c=0,u=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var d=this.lexer.yylloc;o.push(d);var h=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,b,y,x,w,_={};;){if(m=r[r.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=e()),g=a[m]&&a[m][p]),"undefined"==typeof g||!g.length||!g[0]){var k="";if(!u){w=[];for(b in a[m])this.terminals_[b]&&b>2&&w.push("'"+this.terminals_[b]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:d,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:r.push(p),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,d=this.lexer.yylloc,u>0&&u--);break;case 2:if(y=this.productions_[g[1]][1],_.$=i[i.length-y],_._$={first_line:o[o.length-(y||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(y||1)].first_column,last_column:o[o.length-1].last_column},h&&(_._$.range=[o[o.length-(y||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(_,s,c,l,this.yy,g[1],i,o),"undefined"!=typeof v)return v;y&&(r=r.slice(0,-1*y*2),i=i.slice(0,-1*y),o=o.slice(0,-1*y)),r.push(this.productions_[g[1]][0]),i.push(_.$),o.push(_._$),x=a[r[r.length-2]][r[r.length-1]],r.push(x);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,r,i;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(n=this._input.match(this.rules[o[a]]),!n||e&&!(n[0].length>e[0].length)||(e=n,r=a,this.options.flex));a++);return e?(i=e[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,r){function i(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(e.yytext=e.yytext.substr(5,e.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return 72;case 43:return"INVALID";
case 44:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},t}();return e.lexer=n,t.prototype=e,e.Parser=t,new t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function r(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function i(t,e,n){void 0===e&&(e=t.length);var r=t[e-1],i=t[e-2];return r?"ContentStatement"===r.type?(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(r.original):void 0:n}function o(t,e,n){void 0===e&&(e=-1);var r=t[e+1],i=t[e+2];return r?"ContentStatement"===r.type?(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(r.original):void 0:n}function a(t,e,n){var r=t[null==e?0:e+1];if(r&&"ContentStatement"===r.type&&(n||!r.rightStripped)){var i=r.value;r.value=r.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),r.rightStripped=r.value!==i}}function s(t,e,n){var r=t[null==e?t.length-1:e-1];if(r&&"ContentStatement"===r.type&&(n||!r.leftStripped)){var i=r.value;return r.value=r.value.replace(n?/\s+$/:/[ \t]+$/,""),r.leftStripped=r.value!==i,r.leftStripped}}var l=n(8).default;e.__esModule=!0;var c=n(6),u=l(c);r.prototype=new u.default,r.prototype.Program=function(t){var e=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var r=t.body,l=0,c=r.length;c>l;l++){var u=r[l],d=this.accept(u);if(d){var h=i(r,l,n),p=o(r,l,n),f=d.openStandalone&&h,m=d.closeStandalone&&p,g=d.inlineStandalone&&h&&p;d.close&&a(r,l,!0),d.open&&s(r,l,!0),e&&g&&(a(r,l),s(r,l)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(r[l-1].original)[1])),e&&f&&(a((u.program||u.inverse).body),s(r,l)),e&&m&&(a(r,l),s((u.inverse||u.program).body))}}return t},r.prototype.BlockStatement=r.prototype.DecoratorBlock=r.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,n=t.program&&t.inverse,r=n,l=n;if(n&&n.chained)for(r=n.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:o(e.body),closeStandalone:i((r||e).body)};if(t.openStrip.close&&a(e.body,null,!0),n){var u=t.inverseStrip;u.open&&s(e.body,null,!0),u.close&&a(r.body,null,!0),t.closeStrip.open&&s(l.body,null,!0),!this.options.ignoreStandalone&&i(e.body)&&o(r.body)&&(s(e.body),a(r.body))}else t.closeStrip.open&&s(e.body,null,!0);return c},r.prototype.Decorator=r.prototype.MustacheStatement=function(t){return t.strip},r.prototype.PartialStatement=r.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var n={loc:t.path.loc};throw new g.default(t.path.original+" doesn't match "+e,n)}}function i(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function o(t){return/^\[.*\]$/.test(t)?t.substr(1,t.length-2):t}function a(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}}function s(t){return t.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function l(t,e,n){n=this.locInfo(n);for(var r=t?"@":"",i=[],o=0,a="",s=0,l=e.length;l>s;s++){var c=e[s].part,u=e[s].original!==c;if(r+=(e[s].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)i.push(c);else{if(i.length>0)throw new g.default("Invalid path: "+r,{loc:n});".."===c&&(o++,a+="../")}}return{type:"PathExpression",data:t,depth:o,parts:i,original:r,loc:n}}function c(t,e,n,r,i,o){var a=r.charAt(3)||r.charAt(2),s="{"!==a&&"&"!==a,l=/\*/.test(r);return{type:l?"Decorator":"MustacheStatement",path:t,params:e,hash:n,escaped:s,strip:i,loc:this.locInfo(o)}}function u(t,e,n,i){r(t,n),i=this.locInfo(i);var o={type:"Program",body:e,strip:{},loc:i};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}}function d(t,e,n,i,o,a){i&&i.path&&r(t,i);var s=/\*/.test(t.open);e.blockParams=t.blockParams;var l=void 0,c=void 0;if(n){if(s)throw new g.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=i.strip),c=n.strip,l=n.program}return o&&(o=l,l=e,e=o),{type:s?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:l,openStrip:t.strip,inverseStrip:c,closeStrip:i&&i.strip,loc:this.locInfo(a)}}function h(t,e){if(!e&&t.length){var n=t[0].loc,r=t[t.length-1].loc;n&&r&&(e={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:r.end.line,column:r.end.column}})}return{type:"Program",body:t,strip:{},loc:e}}function p(t,e,n,i){return r(t,n),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:n&&n.strip,loc:this.locInfo(i)}}var f=n(8).default;e.__esModule=!0,e.SourceLocation=i,e.id=o,e.stripFlags=a,e.stripComment=s,e.preparePath=l,e.prepareMustache=c,e.prepareRawBlock=u,e.prepareBlock=d,e.prepareProgram=h,e.preparePartialBlock=p;var m=n(12),g=f(m)},function(t,e,n){"use strict";function r(t,e,n){if(o.isArray(t)){for(var r=[],i=0,a=t.length;a>i;i++)r.push(e.wrap(t[i],n));return r}return"boolean"==typeof t||"number"==typeof t?t+"":t}function i(t){this.srcFile=t,this.source=[]}e.__esModule=!0;var o=n(13),a=void 0;try{}catch(t){}a||(a=function(t,e,n,r){this.src="",r&&this.add(r)},a.prototype={add:function(t){o.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){o.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),i.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(t){for(var e=0,n=this.source.length;n>e;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new a(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof a?t:(t=r(t,this,e),new a(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,n){return n=this.generateList(n),this.wrap([t,e?"."+e+"(":"(",n,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var n in t)if(t.hasOwnProperty(n)){var i=r(t[n],this);"undefined"!==i&&e.push([this.quotedString(n),":",i])}var o=this.generateList(e);return o.prepend("{"),o.add("}"),o},generateList:function(t){for(var e=this.empty(),n=0,i=t.length;i>n;n++)n&&e.add(","),e.add(r(t[n],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=i,t.exports=e.default},function(t,e,n){"use strict";function r(t){a.default(t),l.default(t),u.default(t),h.default(t),f.default(t),g.default(t),b.default(t)}var i=n(8).default;e.__esModule=!0,e.registerDefaultHelpers=r;var o=n(22),a=i(o),s=n(23),l=i(s),c=n(24),u=i(c),d=n(25),h=i(d),p=n(26),f=i(p),m=n(27),g=i(m),v=n(28),b=i(v)},function(t,e,n){"use strict";function r(t){a.default(t)}var i=n(8).default;e.__esModule=!0,e.registerDefaultDecorators=r;var o=n(29),a=i(o)},function(t,e,n){"use strict";e.__esModule=!0;var r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=r.methodMap.indexOf(t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=r.lookupLevel(t),"undefined"!=typeof console&&r.lookupLevel(r.level)<=t){var e=r.methodMap[t];console[e]||(e="log");for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;n>o;o++)i[o-1]=arguments[o];console[e].apply(console,i)}}};e.default=r,t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r=n(13);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,o=n.fn;if(e===!0)return o(this);if(e===!1||null==e)return i(this);if(r.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var a=r.createFrame(n.data);a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return o(e,n)})},t.exports=e.default},function(t,e,n){"use strict";var r=n(8).default;e.__esModule=!0;var i=n(13),o=n(12),a=r(o);e.default=function(t){t.registerHelper("each",function(t,e){function n(e,n,o){null!=t[e]&&(c&&(c.key=e,c.index=n,c.first=0===n,c.last=!!o,u&&(c.contextPath=u+e)),l+=r(t[e],{data:c,blockParams:i.blockParams([t[e],e],[u+e,null])}))}if(!e)throw new a.default("Must pass iterator to #each");var r=e.fn,o=e.inverse,s=0,l="",c=void 0,u=void 0;if(e.data&&e.ids&&(u=i.appendContextPath(e.data.contextPath,e.ids[0])+"."),i.isFunction(t)&&(t=t.call(this)),e.data&&(c=i.createFrame(e.data)),t&&"object"==typeof t)if(i.isArray(t))for(var d=t.length;d>s;s++)n(s,s,s===t.length-1);else{var h=void 0;for(var p in t)t.hasOwnProperty(p)&&(void 0!==h&&n(h,s-1),h=p,s++);void 0!==h&&n(h,s-1,!0)}return 0===s&&(l=o(this)),l})},t.exports=e.default},function(t,e,n){"use strict";var r=n(8).default;e.__esModule=!0;var i=n(12),o=r(i);e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r=n(13);e.default=function(t){t.registerHelper("if",function(t,e){return r.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||r.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers.if.call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),e[0]=i,t.log.apply(t,e)})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r=n(13);e.default=function(t){t.registerHelper("with",function(t,e){r.isFunction(t)&&(t=t.call(this));var n=e.fn;if(r.isEmpty(t))return e.inverse(this);var i=e.data;return e.data&&e.ids&&(i=r.createFrame(e.data),i.contextPath=r.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:i,blockParams:r.blockParams([t],[i&&i.contextPath])})})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r=n(13);e.default=function(t){t.registerDecorator("inline",function(t,e,n,i){var o=t;return e.partials||(e.partials={},o=function(i,o){var a=n.partials;n.partials=r.extend({},a,e.partials);var s=t(i,o);return n.partials=a,s}),e.partials[i.args[0]]=i.fn,o})},t.exports=e.default}])}),define("sf_tagpopup",[],function(){var t={},e=function(e,i){var o,a=function(){var t=i.options.animation;i.options.content=o,i.options.animation=!1,i.show(),i.options.animation=t};null!=t[e]?(o=t[e],a(),r(i,e)):$.ajax({url:"/api/tag/"+e,async:!0,dataType:"json",success:function(s){o=n(s),a(),t[e]=o,r(i,e)}})},n=function(t){var e=t.data;if(0!=e.length){e.isFollowed?(e.isFollowedBtn="已关注",e.isFollowedClass="active"):(e.isFollowedBtn="加关注",e.isFollowedClass=""),e.excerpt||(e.excerpt="目前还没有关于这个标签的解释");var n=_.template('<p><%- excerpt %></p> <div class="operation"> <a href="<%- url %>">查看</a> <span class="text-muted">&middot;</span> <a href="<%- editUrl %>">编辑</a> <span class="text-muted">&middot;</span> <a href="/feeds/tag/<%- name %>">订阅</a> <div class="pull-right"> <span class="text-muted followers"><%- followers %> 人</span> <button class="btn btn-default btn-xs tagfollow <%- isFollowedClass %>" data-id="<%- id %>"><%- isFollowedBtn %></button> </div></div>'),r=n(e);return r}},r=function(e,n){var r=e.tip(),i=r.find(".popover-content"),o=r.find("button");i.on("click",".tagfollow",function(r){o=$(r.target),o.hasClass("active")?(o.text("加关注").removeClass("active").attr("disabled","disabled"),$.post("/api/tag/"+n+"/follow/cancel",function(r){0===r.status&&e.tip().find(".followers").text(r.data+" 人"),o.removeAttr("disabled"),e.options.content=i.html(),t[n]=i.html()})):(o.text("已关注").addClass("active").attr("disabled","disabled"),$.post("/api/tag/"+n+"/follow",function(r){0===r.status&&e.tip().find(".followers").text(r.data+" 人"),o.removeAttr("disabled"),e.options.content=i.html(),t[n]=i.html()}))})},i=function(t,n,r){t.popover({template:'<div class="popover tag-popup" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',content:"loading...",html:!0,placement:"top",trigger:"hover",container:"body",delay:{show:1e3,hide:1e3}},n),t.one("show.bs.popover",function(){var t=$(this).data("bs.popover"),n=$(t.tip()),r=$(this).data("id");n.on("mouseenter",function(){var e=t.options.animation;t.options.animation=!1,t.show.call(t),t.enter(t),t.options.animation=e}),n.on("mouseleave",function(){t.leave(t)}),e(r,t)})};return $.fn.tagpopup=function(t,e,n){i(this,t,e,n)},i}),function(t,e){var n,r;return r={initData:[],remoteData:[],inputTpl:'<span class="sf-typeHelper-item <%= itemClass %> "><%= name %><span data-role="remove">&times;</span></span>',tpl:"<li data-id='<%= id %>' ><a data-role='typeHelper' href='javascript:;'><% if (typeof(img)!='undefined'){ %> <img class='avatar-24' src='<%= img %>'> <% } %> <%= name.replace(query,'<strong>' + query + '</strong>') %> </a></li>",maxNum:5,confirmKeys:[13,44,32],emptyTip:"",emptyDefault:[],emptyFunc:function(){},afterAdd:function(){},afterRemove:function(){},beforeAdd:function(){}},n=function(n,i){return 0===t(n).length?void console.warn("element not found in DOM"):(e.each(r,function(t,e){var n;return i[e]=null!=(n=i[e])?n:t}),this.opt=i,this.items=[],this.result=[],this.query="",this.$element=t(n),this.$element.addClass("hidden"),n.hasAttribute("placeholder")?this.placeholderText=this.$element.attr("placeholder"):this.placeholderText="",this.$container=t('<div class="sf-typeHelper"></div>'),this.$input=t('<input type="text" data-role="sf_typeHelper-input" class="sf-typeHelper-input" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$list=t('<ul class="sf-typeHelper-list dropdown-menu"></ul>'),this.$element.after(this.$container),this.$container.append(this.$list),this.build(i))},n.prototype={constructor:n,formatter:function(t){var n;return t=null!=t?t:[],n=e.map(t,function(t,e){var n,r,i,o;return"object"!=typeof t&&(n={},n.name=t,n.id=e,t=n),t.name=null!=(r=t.name)?r:t,t.id=null!=(i=t.id)?i:e,t.img=null!=(o=t.img)?o:t.avatarUrl,t})},getRemoteData:function(n,r){var i,o;return o=this,i=[],"object"!=typeof o.opt.remoteData?(o.timer&&clearTimeout(o.timer),o.timer=setTimeout(function(){return t.ajax({url:o.opt.remoteData,data:{q:n},dataType:"json",success:function(t){if(i=t.data,i=o.formatter(i),r)return r(i)}})},300)):(i=o.formatter(o.opt.remoteData),i=e.filter(i,function(t){return t.name.search(n)!==-1}),r?r(i):void 0)},renderList:function(t){var n,r;return r=this,t.length>0?r.getRemoteData(t,function(n){var i;return n=e.difference(n,r.result),0===n.length&&r.opt.emptyTip.length>0&&(n.push({id:-1,name:r.opt.emptyTip.replace("{{query}}",t)}),r.opt.emptyDefault.length>0&&e.each(r.opt.emptyDefault,function(t,e){return n.push(t)})),r.items=n,i=e.reduce(n,function(n,i){return i.query=t,n+e.template(r.opt.tpl)(i)},""),i.length>0?r.$list.show():r.$list.hide(),r.$list.html(i),r.$list.find("li:first").addClass("active"),r.$list.css("left",r.$input.position().left+"px"),r.$container.next(".panel").hide()}):(n="",r.$list.hide(),r.$list.html(n))},renderInput:function(){var t,n,r;return r=this,r.$container.find(".sf-typeHelper-item").remove(),r.$container.find(".sf-typeHelper-item-single").remove(),n="",1===r.opt.maxNum&&(n="sf-typeHelper-item-single btn btn-default",r.opt.maxNum===r.result.length?this.$container.addClass("sf-typeHelper-single"):this.$container.removeClass("sf-typeHelper-single")),r.opt.inputTpl.length>0&&(t=e.reduce(r.result,function(t,i){return i.itemClass=n,t+e.template(r.opt.inputTpl)(i)},""),r.$container.prepend(t)),0!==r.opt.maxNum&&r.result.length>0&&0!==r.$container.next(".realms").length?(r.$input.attr("placeholder",""),r.$input.css("width","10px"),!1):(r.$input.attr("placeholder",this.placeholderText),this.placeholderText.length>0?r.$input.css("width",r.placeholderText.length+"em"):r.$input.css("width","auto"))},add:function(t){var e;if(e=this,e.opt.beforeAdd&&e.opt.beforeAdd(t,e),e.$list.trigger("hide"),e.result.push(t),e.renderInput(),e.opt.afterAdd)return e.opt.afterAdd(t,e)},remove:function(t){var n;if(n=this,n.result=e.filter(n.result,function(e){return e.name!==t.name}),n.renderInput(),n.opt.afterRemove)return n.opt.afterRemove(t,n)},init:function(t){var e;return e=this,e.result=e.formatter(t.initData),e.renderInput()},build:function(n){var r;r=this,window.chinese=!1,n.initData.length>0?r.init(n):r.renderInput(),1===n.maxNum&&r.$container.addClass("sf-typeHelper--single"),r.$container.on("click",function(){return r.$container.trigger("focus"),r.$input.trigger("focus")}),r.$list.on("hide",function(){return r.$input.val(""),r.renderList(""),r.query=""}),r.$input.on("compositionstart",function(){return window.chinese=!0}),r.$input.on("compositionend",function(){return window.chinese=!1}),r.$input.on("keydown",function(t){var n;if(n=t.keyCode,8===n&&0===r.query.length&&(r.remove(e.last(r.result)),r.renderInput()),13===n&&t.preventDefault(),r.result.length===r.opt.maxNum&&0!==r.opt.maxNum)return t.preventDefault()}),r.$input.on("change",function(t){}),r.$input.on("keyup",function(n){var i,o,a,s;if(!window.chinese&&(r.result.length!==r.opt.maxNum||0===r.opt.maxNum))switch(r.query=t(this).val(),s=n.keyCode,o=function(){var t,n;return t=r.$list.find("li.active").index(),n=r.items[t],n&&n.id!==-1&&!e.find(r.result,function(t){return t.id===n.id})?r.add(n):r.opt.emptyFunc&&r.opt.emptyFunc(r.query,r),r.$list.trigger("hide")},s){case 8:return r.renderList(r.query);case 188:return o();case 186:return o();case 13:return o();case 38:if(i=r.$list.find("li.active"),a=i.index(),a>0)return i.removeClass("active"),i.prev("li").addClass("active");break;case 40:if(i=r.$list.find("li.active"),a=i.index(),a<r.items.length-1)return i.removeClass("active"),i.next("li").addClass("active");break;default:return r.renderList(r.query)}}),t("body").on("click",function(e){var n,i;if(n=t(e.target),i=n.attr("data-role"),"typeHelper"!==i)return r.$list.trigger("hide")}),r.$container.on("click","[data-role=remove]",function(){var e,n,i,o;return e=t(this),n=e.closest(".sf-typeHelper-item"),o=n.index(),i=r.result[o],r.remove(i)}),r.$list.on("click","li",function(){var n,i;return n=t(this).index(),i=r.items[n],i.id===-1||e.find(r.result,function(t){return t.id===i.id})?r.opt.emptyFunc&&r.opt.emptyFunc(r.query,r):r.add(i),r.$list.trigger("hide")})}},t.fn.typeHelper=function(e){return new n(t(this)[0],e)}}($,_),define("sf_typeHelper",["jquery","underscore"],function(t){return function(){var e;return e||t.$.fn.typeHelper}}(this)),function(t){t.fn.qrcode=function(e){function n(t){this.mode=s,this.data=t}function r(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(t,e){if(void 0==t.length)throw Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}function o(t,e){this.totalCount=t,this.dataCount=e}function a(){this.buffer=[],this.length=0}var s;n.prototype={getLength:function(){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},r.prototype={addData:function(t){this.dataList.push(new n(t)),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var t=1,t=1;40>t;t++){for(var e=o.getRSBlocks(t,this.errorCorrectLevel),n=new a,r=0,i=0;i<e.length;i++)r+=e[i].dataCount;for(i=0;i<this.dataList.length;i++)e=this.dataList[i],n.put(e.mode,4),n.put(e.getLength(),l.getLengthInBits(e.mode,t)),e.write(n);if(n.getLengthInBits()<=8*r)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),7<=this.typeNumber&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var n=-1;7>=n;n++)if(!(-1>=t+n||this.moduleCount<=t+n))for(var r=-1;7>=r;r++)-1>=e+r||this.moduleCount<=e+r||(this.modules[t+n][e+r]=0<=n&&6>=n&&(0==r||6==r)||0<=r&&6>=r&&(0==n||6==n)||2<=n&&4>=n&&2<=r&&4>=r)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;8>n;n++){this.makeImpl(!0,n);var r=l.getLostPoint(this);(0==n||t>r)&&(t=r,e=n)}return e},createMovieClip:function(t,e,n){for(t=t.createEmptyMovieClip(e,n),this.make(),e=0;e<this.modules.length;e++)for(var n=1*e,r=0;r<this.modules[e].length;r++){var i=1*r;this.modules[e][r]&&(t.beginFill(0,100),t.moveTo(i,n),t.lineTo(i+1,n),t.lineTo(i+1,n+1),t.lineTo(i,n+1),t.endFill())}return t},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2);for(t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(null==this.modules[r][i])for(var o=-2;2>=o;o++)for(var a=-2;2>=a;a++)this.modules[r+o][i+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var r=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;18>n;n++)r=!t&&1==(e>>n&1),this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r},setupTypeInfo:function(t,e){for(var n=l.getBCHTypeInfo(this.errorCorrectLevel<<3|e),r=0;15>r;r++){var i=!t&&1==(n>>r&1);6>r?this.modules[r][8]=i:8>r?this.modules[r+1][8]=i:this.modules[this.moduleCount-15+r][8]=i}for(r=0;15>r;r++)i=!t&&1==(n>>r&1),8>r?this.modules[8][this.moduleCount-r-1]=i:9>r?this.modules[8][15-r-1+1]=i:this.modules[8][15-r-1]=i;this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,o=0,a=this.moduleCount-1;0<a;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[r][a-s]){var c=!1;o<t.length&&(c=1==(t[o]>>>i&1)),l.getMask(e,r,a-s)&&(c=!c),this.modules[r][a-s]=c,i--,-1==i&&(o++,i=7)}if(r+=n,0>r||this.moduleCount<=r){r-=n,n=-n;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(t,e,n){for(var e=o.getRSBlocks(t,e),i=new a,s=0;s<n.length;s++){var c=n[s];i.put(c.mode,4),i.put(c.getLength(),l.getLengthInBits(c.mode,t)),c.write(i)}for(s=t=0;s<e.length;s++)t+=e[s].dataCount;if(i.getLengthInBits()>8*t)throw Error("code length overflow. ("+i.getLengthInBits()+">"+8*t+")");for(i.getLengthInBits()+4<=8*t&&i.put(0,4);0!=i.getLengthInBits()%8;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*t)&&(i.put(r.PAD0,8),!(i.getLengthInBits()>=8*t));)i.put(r.PAD1,8);return r.createBytes(i,e)},r.createBytes=function(t,e){for(var n=0,r=0,o=0,a=Array(e.length),s=Array(e.length),c=0;c<e.length;c++){var u=e[c].dataCount,d=e[c].totalCount-u,r=Math.max(r,u),o=Math.max(o,d);a[c]=Array(u);for(var h=0;h<a[c].length;h++)a[c][h]=255&t.buffer[h+n];for(n+=u,h=l.getErrorCorrectPolynomial(d),u=new i(a[c],h.getLength()-1).mod(h),s[c]=Array(h.getLength()-1),h=0;h<s[c].length;h++)d=h+u.getLength()-s[c].length,s[c][h]=0<=d?u.get(d):0}for(h=c=0;h<e.length;h++)c+=e[h].totalCount;for(n=Array(c),h=u=0;h<r;h++)for(c=0;c<e.length;c++)h<a[c].length&&(n[u++]=a[c][h]);for(h=0;h<o;h++)for(c=0;c<e.length;c++)h<s[c].length&&(n[u++]=s[c][h]);return n},s=4;for(var l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;0<=l.getBCHDigit(e)-l.getBCHDigit(l.G15);)e^=l.G15<<l.getBCHDigit(e)-l.getBCHDigit(l.G15);return(t<<10|e)^l.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;0<=l.getBCHDigit(e)-l.getBCHDigit(l.G18);)e^=l.G18<<l.getBCHDigit(e)-l.getBCHDigit(l.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case 0:return 0==(e+n)%2;case 1:return 0==e%2;case 2:return 0==n%3;case 3:return 0==(e+n)%3;case 4:return 0==(Math.floor(e/2)+Math.floor(n/3))%2;case 5:return 0==e*n%2+e*n%3;case 6:return 0==(e*n%2+e*n%3)%2;case 7:return 0==(e*n%3+(e+n)%2)%2;default:throw Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new i([1],0),n=0;n<t;n++)e=e.multiply(new i([1,c.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&10>e)switch(t){case 1:return 10;case 2:return 9;case s:return 8;case 8:return 8;default:throw Error("mode:"+t)}else if(27>e)switch(t){case 1:return 12;case 2:return 11;case s:return 16;case 8:return 10;default:throw Error("mode:"+t)}else{if(!(41>e))throw Error("type:"+e);switch(t){case 1:return 14;case 2:return 13;case s:return 16;case 8:return 12;default:throw Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var o=0,a=t.isDark(r,i),s=-1;1>=s;s++)if(!(0>r+s||e<=r+s))for(var l=-1;1>=l;l++)0>i+l||e<=i+l||0==s&&0==l||a==t.isDark(r+s,i+l)&&o++;5<o&&(n+=3+o-5)}for(r=0;r<e-1;r++)for(i=0;i<e-1;i++)o=0,t.isDark(r,i)&&o++,t.isDark(r+1,i)&&o++,t.isDark(r,i+1)&&o++,t.isDark(r+1,i+1)&&o++,(0==o||4==o)&&(n+=3);for(r=0;r<e;r++)for(i=0;i<e-6;i++)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(i=0;i<e;i++)for(r=0;r<e-6;r++)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);for(i=o=0;i<e;i++)for(r=0;r<e;r++)t.isDark(r,i)&&o++;return t=Math.abs(100*o/e/e-50)/5,n+10*t}},c={glog:function(t){if(1>t)throw Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;256<=t;)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},u=0;8>u;u++)c.EXP_TABLE[u]=1<<u;for(u=8;256>u;u++)c.EXP_TABLE[u]=c.EXP_TABLE[u-4]^c.EXP_TABLE[u-5]^c.EXP_TABLE[u-6]^c.EXP_TABLE[u-8];for(u=0;255>u;u++)c.LOG_TABLE[c.EXP_TABLE[u]]=u;return i.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=c.gexp(c.glog(this.get(n))+c.glog(t.get(r)));return new i(e,0)},mod:function(t){if(0>this.getLength()-t.getLength())return this;for(var e=c.glog(this.get(0))-c.glog(t.get(0)),n=Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<t.getLength();r++)n[r]^=c.gexp(c.glog(t.get(r))+e);return new i(n,0).mod(t)}},o.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],
o.getRSBlocks=function(t,e){var n=o.getRsBlockTable(t,e);if(void 0==n)throw Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=[],a=0;a<r;a++)for(var s=n[3*a+0],l=n[3*a+1],c=n[3*a+2],u=0;u<s;u++)i.push(new o(l,c));return i},o.getRsBlockTable=function(t,e){switch(e){case 1:return o.RS_BLOCK_TABLE[4*(t-1)+0];case 0:return o.RS_BLOCK_TABLE[4*(t-1)+1];case 3:return o.RS_BLOCK_TABLE[4*(t-1)+2];case 2:return o.RS_BLOCK_TABLE[4*(t-1)+3]}},a.prototype={get:function(t){return 1==(this.buffer[Math.floor(t/8)]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},"string"==typeof e&&(e={text:e}),e=t.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},e),this.each(function(){var n;if("canvas"==e.render){n=new r(e.typeNumber,e.correctLevel),n.addData(e.text),n.make();var i=document.createElement("canvas");i.width=e.width,i.height=e.height;for(var o=i.getContext("2d"),a=e.width/n.getModuleCount(),s=e.height/n.getModuleCount(),l=0;l<n.getModuleCount();l++)for(var c=0;c<n.getModuleCount();c++){o.fillStyle=n.isDark(l,c)?e.foreground:e.background;var u=Math.ceil((c+1)*a)-Math.floor(c*a),d=Math.ceil((l+1)*a)-Math.floor(l*a);o.fillRect(Math.round(c*a),Math.round(l*s),u,d)}}else for(n=new r(e.typeNumber,e.correctLevel),n.addData(e.text),n.make(),i=t("<table></table>").css("width",e.width+"px").css("height",e.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",e.background),o=e.width/n.getModuleCount(),a=e.height/n.getModuleCount(),s=0;s<n.getModuleCount();s++)for(l=t("<tr></tr>").css("height",a+"px").appendTo(i),c=0;c<n.getModuleCount();c++)t("<td></td>").css("width",o+"px").css("background-color",n.isDark(s,c)?e.foreground:e.background).appendTo(l);n=i,jQuery(n).appendTo(this)})}}(jQuery),define("jquery_qrcode",["jquery"],function(t){return function(){var e;return e||t.$.fn.qrcode}}(this)),define("widget",["jquery","underscore"],function(t,e){var n;return n=[{api:"/api/user/ranking",ajaxFormat:function(t){return(!t.status&&t.data.daily.length>0||t.data.weekly.length>0)&&(t=t.data,t.data={length:1}),t},renderedCallback:function(){return t(".userstab a[data-tab]").click(function(){var e;return t(".userstab a").removeClass("active"),t(this).toggleClass("active"),e=t(this).data("tab"),t("#usersDaily, #usersWeekly").addClass("hidden"),t("#users"+e).removeClass("hidden")})}},{api:"/api/question/recentHottestQuestions"},{api:"/api/bookmarkArchive/hots",renderedCallback:function(n,r){var i,o,a,s;return o=t("#widgetBookmarkRefresh"),i=t("[data-api='"+r.api+"']"),n.data.length<3&&o.remove(),n.currentPage&&(1===n.totalPage?o.remove():i.data({page:n.currentPage,total:n.totalPage})),a=function(){var n;return n=i.find("[type='text/template']"),t.get(r.apiOverwrite,function(t){var r;if(!t.status&&(t.currentPage&&i.data("page",t.currentPage).data("total",t.totalPage),t.data&&t.data.length>0))return r=e.template(n.html())(t),i.find(".widget-box").remove(),i.append(r)})},s=null,t("body").on("click","#widgetBookmarkRefresh",function(){return s&&clearTimeout(s),s=setTimeout(function(){var t;return n.currentPage&&(r.apiOverwrite=r.apiOverwrite.split("?")[0],t=i.data(),t.page<t.total?r.apiOverwrite=r.apiOverwrite+"?page="+parseInt(t.page+1):r.apiOverwrite=r.apiOverwrite+"?page=1"),a()},200)})}},{api:"/api/tag/hotArticleTags"},{api:"/api/blog/hotBlogs"},{api:"/api/news/newest"},{api:"/api/news/hottest"},{api:"/api/live/recommend"}],e.each(n,function(n){var r,i,o;if(r=t("[data-api='"+n.api+"']"),r.length>0&&(i=r.find("[type='text/template']"),i.length>0))return o=r.data("api-overwrite"),n.apiOverwrite=o?o:n.api,t.get(n.apiOverwrite,function(t){var o;if(!t.status){if(n.hasOwnProperty("ajaxFormat")&&(t=n.ajaxFormat(t)),!(t.data&&t.data.length>0))return r.remove();if(o=e.template(i.html())(t),r.append(o),n.hasOwnProperty("renderedCallback"))return t=n.renderedCallback(t,n)}})})}),define("test_tagpopup",["jquery"],function(t){function e(e,a,s){var l,c,u;e.popover({template:'<div class="popover tag-popup" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',content:"loading...",html:!0,placement:"top",trigger:"",container:"body",delay:{show:1e3,hide:1e3}},s),e.one("show.bs.popover",function(){l=t(this).data("bs.popover"),c=l.tip(),u=n(),c.data("cache",u),e.data("cache",u),r(a,u,l)}),e.on("mouseover",function(){var e=t(this),n=e.data("cache");a.handle&&a.handle.call(a,e),window.datastore&&window.datastore[n]&&i(a,window.datastore[n],l),e.popover("show")}).on("mouseout",function(){var e=t(this),n=e.data("cache");o(e,n)})}function n(){var t=parseInt(1e4*Math.random());return window.datastore[t]?void n():t}function r(e,n,r){t.get(e.url,e.options,function(t){0==t.status&&(window.datastore[n]=t.data,i(e,t.data,r))})}function i(t,e,n){var r,i;r=_.template(t.template,s),n.options.content=r(e),i=n.options.animation,n.options.animation=!1,n.show(),n.options.animation=i,t.callback.call({el:n.tip(),update:a})}function o(t,e){window.cuttimer[e]?clearTimeout(window.cuttimer[e].timer):window.cuttimer[e]={},window.cuttimer[e].timer=setTimeout(function(){t.popover("hide")},300),window.cuttimer[e].dom=t}function a(t,e,n){for(var r=e.split("."),i=r.length-1,o=0,a=window.datastore[t];o<i;o++)a=a[r[o]];a[e]=n}window.datastore||(window.datastore={});var s={interpolate:/\{\{(.+?)\}\}/g,evaluate:/\{%(.+?)%\}/g};t.fn.test_tagpopup=function(n,r){e(t(this),n,r)},t("body").on("mouseover",".tag-popup",function(){var e=t(this),n=e.data("cache");n&&window.cuttimer[n]&&clearTimeout(window.cuttimer[n].timer)}).on("mouseout",".tag-popup",function(){var e=t(this),n=e.data("cache");n&&window.cuttimer[n]&&o(window.cuttimer[n].dom,n)}),window.cuttimer||(window.cuttimer={}),window.updateCache=a}),define("personCard",["jquery","test_tagpopup"],function(t,e){function n(t,e,n){e.data.isFollowed&&(t.html("已关注"),t.addClass("active")),t.parent().find(".person-card-follow").html(e.data.followedUsers+"人"),window.updateCache(n,"isFollowed",e.data.isFollowed)}function r(t,e,n){e.data&&(t.html("加关注"),t.removeClass("active")),t.parent().find(".person-card-follow").html(e.data+"人"),window.updateCache(n,"isFollowed",!1)}var i={template:['<div class="top-info">','<div class="avatar-40"><a href="{{ url }}">','<img src="{{ avatarUrl }}" class="avatar-40"/>',"</a></div>",'<div class="info">','<p class="author-name"><a href="{{ url }}">{{ name }}</a></p>','<p class="card-info">','<span class="author-rank">{{ rankWord }}<b>声望</b></span>','<span class="badge--gold">','<i class="badge__icon"></i>',"</span>","<span >{{ SummaryBadges.gold }}</span>",'<span class="badge--silver">','<i class="badge__icon"></i>',"</span>","<span >{{ SummaryBadges.silver }}</span>",'<span class="badge--bronze">','<i class="badge__icon"></i>',"</span>","<span >{{ SummaryBadges.bronze }}</span>","</p>","</div>","</div>",'<div class="excerpt">{{ excerpt }}</div>','<div class="footer-info">','<a class="homepage" target="_blank" href="{{ homepage }}">{{ domainUrl }}</a>','<div class=><span class="person-card-follow">{{ followedUsers }}人</span>$tpl</div>',"</div>"].join(""),handle:function(t){var e="";this.url="/api/user/card/"+t.data("slug"),t.data("id")!=parseInt(o)&&(e=a.replace("$id",t.data("id"))),this.template=this.template.replace("$tpl",e)},callback:function(){this.el.data("cache")}},o=t("#SFUserId").attr("value"),a=['<button type="button" data-id="$id" class="btn btn-default btn-sm person-card-addfollow',"{% if(!isFollowed){ %}",'"> 加关注',"{% }else{%}",' active"> 已关注',"{% }%}","</button>"].join("");t.fn.popup_card=function(){t(this).test_tagpopup(i)},t("body").on("click",".person-card-addfollow",function(){var e,i,o,a=t(this);o=a.closest(".tag-popup").data("cache"),a.hasClass("active")?(e="/api/user/"+a.data("id")+"/follow/cancel",i=r):(e="/api/user/"+a.data("id")+"/follow",i=n),t.post(e,function(t){0==t.status&&i(a,t,o)})})}),requirejs(["main","likeHate","getRelated","bookmark","comment","autoSave","sfModal","sf_share","specialUrl","highLight","template","Editor","911","caret","atwho","sf_tagpopup","sf_typeHelper","jquery_cookie","jquery_lazyload","jquery_qrcode","widget","personCard"],function(t,e,n,r,i,o,a,s,l,c,u,d){var h,p,f,m,g,v,b,y,x,w,k,C,S,D,T,E,M,L,B,A,I,N;return $("body").on("click",".js__rank-check",function(){var e=$(this).data("original-title"),n=$('meta[name="userId"]').attr("value");n?(obj={title:"声望值不够",$content:'<p class="sfModal-content">'+e+'，<a href="https://segmentfault.com/repu">如何获得声望？</a></p>',hideClose:!0},a(obj)):t.login()}),function(){var t,e,n,r;if(e=$(".widget-invite-list"),t=$("#SFUserId"),0===e.length&&0!==t.length&&$(".widget-invite").length>0)return r="<div class=\"qa-detail__invent\">\n    <div class=\"row\" >\n\n            <% _.each(data,function (d) {\n        %>\n<div class=\"col-md-6 qa-detail__invent-item\"><img src=\"<%- d.avatarUrl %>\">\n<div class='qa-detail__invent-info'><a class='qa-detail__invent-name'\ntarget='_blank' href='<%- d.url %>'><%- d.name %></a><span\nclass='qa-detail__invent-desc'>\n<%- d.tagName %> 标签下有 <%- d.tagAnswers %> 个回答</span></div>\n<button class='btn btn-default btn-xs\n<%-\nd.id == \"active\"?\"qa-detail__invent-btn--active active\":\"qa-detail__invent-btn\"\n%>\n'\ndata-id='<%- d.id %>' data-slug='<%- d.slug %>'>\n<%- d.id == 'active'?'已邀请':'邀请回答' %></button>\n        </div>\n                <% })  %>\n        </div>\n        </div>\n",n=$("#questionTitle").data("id"),$.get("/api/question/"+n+"/invite/default",function(t){var e,i,o,s,l,c,u,d,h,p;if(!t.status&&t.data.list.length>0){for(s=t.data.list,p=4,h=[],u=p,u>0?(l=i=0,c=s.length):l=i=s.length-1;u>0?i<c:i>=0;l=i+=u)o=s[l],h.push(s.slice(l,l+4));return d=function(t){var e,n;return e=$(".qa-detail__invent"),n=_.template(r)({data:h[t]}),e.length&&e.remove(),$(".widget-invite").append(n),!1},e=$(".qa-detail__invent-switch"),t.data.list.length>4&&e.removeClass("hide"),e.data("order",0),e.on("click",function(){var t,e;return e=$(this).data("order"),t=h.length,e===t&&(e=0),d(e),$(this).data("order",e+1),!1}),e.trigger("click"),$(".widget-invite").on("click",".qa-detail__invent-btn",function(){var t,r,i,o,s,l;return i=e.data("order"),o=i-1,t=$(this),r=t.closest(".qa-detail__invent-item").index(),l=t.data("id"),s=t.data("slug"),$.post("/api/question/"+n+"/invite/user",{userId:l,slug:s},function(e){return e.status?a({title:"提示",content:e.data[1].slug}):(t.text("已邀请").addClass("active"),h[o][r].id="active")}),!1}),!1}}),!1}(),$(".tagPopup .tag").tagpopup(),$(".prestige-exceed-1000").popup_card(),$(".fmt").find("img").lazyload({data_attribute:"src",url_rewriter_fn:function(t,e){return console.log(e),0===e.indexOf("http")?"/image?src="+e:e}}),$(".comments").click(function(){var t,e;e=$(this).data("id"),t=$("#comment-"+e),!!t.data("opened")==!1?(i.init(t),i.get(e,t,!1),t.removeClass("hidden"),t.data("opened",!0)):t.toggleClass("hidden")}),B=!0,A=function(){if("false"===$.cookie("showRegister")&&"false"!==$.cookie("showRegister2")&&$(".widget-register").hasClass("hidden"))return $(".widget-register .container").html($("#regNext").html()),$(".widget-register").removeClass("hidden"),$(".widget-register .tomorrow").on("click",function(){return $.cookie("showRegister2","false",{expires:1,path:"/"}),$(".widget-register").addClass("widget-register-slideDown"),setTimeout(function(){$(".widget-register").remove()},1e3)})},$(document).scroll(function(){A(),$.cookie("showRegister")||(window.ga&&B&&(B=!1,ga("send","event","footer welcome popup","show","footer welcome popup")),$(".widget-register").removeClass("hidden"),$(".widget-register .tomorrow").on("click",function(){$.cookie("showRegister2")||$.cookie("showRegister2","true",{expires:1,path:"/"}),$.cookie("showRegister","false",{expires:1,path:"/"}),$(".widget-register").addClass("widget-register-slideDown")}))}),$(".widget-vote button, .answerAccept, #sideFollow,.edit-btn").tooltip({container:"body"}),S=new d,h=$("#activate"),$("#answerEditor").focus(function(){t.userId||t.login(),S.render("#answerEditor","edit",function(){var e;setTimeout(function(){$(".wmd-input").focus()},0),t.userRank<30&&(e=$('<div id="answerNotify" class="alert alert-warning mb0"> <button type="button" class="close" data-dismiss="alert"> <span aria-hidden="true">&times;</span><span class="sr-only">Close</span> </button><p class="h4 mt0">你正在撰写答案</p> <p>如果你是要对问题或其他回答进行点评或询问，请使用“评论”功能。</p></div>').hide(),$("form.editor-wrap").before(e),e.slideDown(),$("#answerNotify .close").click(function(t){return e.slideUp(),!1}))}),$("#answerSubmit").removeClass("hide"),o.bind(S,function(){this.do="saveAnswer",this.type="answer",this.text=S.getVal(),this.id=$("#draftId").val(),this.questionId=$("#questionId").val(),this.weibo=$("#shareToWeibo:checked").length})}),k=void 0,"true"===$.cookie("dontlikeShare")&&$("#shareToWeibo").removeAttr("checked"),$("#shareToWeibo").click(function(t){$("#shareToWeibo:checked").length>0?$.cookie("dontlikeShare",!1,{path:"/"}):$.cookie("dontlikeShare",!0,{path:"/"})}),h.length>0&&$("#answerText").click(function(t){h.modal("show")}),$("#answerIt").click(function(t){var e,n,r;e=$(this),t.preventDefault(),r=S.getVal(),n=$(this).data("id"),e.attr("disabled","disabled"),$("#shareToWeibo:checked").length>0&&$.cookie("shareAnswerToWeibo",!0,{path:"/"}),$.post("/api/question/"+n+"/answers/add",{text:r,id:n,draftId:$("#draftId").val()},function(t){t.status?e.removeAttr("disabled"):(S.isSubmited=!0,window.localStorage&&localStorage.removeItem("autoSaveContent_"+location.pathname),window.localStorage&&localStorage.removeItem("autoSaveTitle_"+location.pathname),location.reload())})}),$(".like, .hate").likeHate("data.votes",function(t){var e=this.siblings(".likeAndhate"),n=this.data("type");e&&"comment"!=n?(e.find(".dull-red").text("+"+t.data.like),e.find(".green").text("-"+t.data.hate)):"comment"==n&&this.parents(".widget-vote").find(".count").text(parseInt(t.data)?"+"+t.data:"")}),$(".commentReply").click(function(){var t,e,n,r,o,a;e=$(this).parents(".widget-comments").data("id"),t=$("#comment-"+e),o=$(this).data("userid"),a=$(this).data("username"),n=$(this).data("id"),r=$(this).parents(".widget-comments__item").siblings(".widget-comments__form"),i.init(t),i.get(e,t,!1,null,function(){i.reply({userId:o,username:a,commentId:n,form:r})}),t.removeClass("hidden"),t.data("opened",!0)}),$(".commentDel").click(function(){var t,e,n,r;e=$(this).parents(".widget-comments").data("id"),t=$("#comment-"+e),r=$(this).data("username"),n=$(this).data("id"),i.init(t),i.get(e,t,!1,null,function(){var t;t={id:n,commentId:e,username:r},i.delete(t)}),t.removeClass("hidden"),t.data("opened",!0)}),$(".commentEdit").click(function(){var t,e,n;n=$(this).data("id"),e=$(this).parents(".widget-comments").data("id"),t=$("#comment-"+e),i.init(t),i.get(e,t,!1,null,function(){i.edit({id:n,content:t.find("#"+n+" .comment-content")})}),t.removeClass("hidden"),t.data("opened",!0)}),location.hash.split("-")&&"#a"===location.hash.split("-")[0]&&($(location.hash+" .post-offset").addClass("highlight"),setTimeout(function(){$(location.hash+" .post-offset").removeClass("highlight")},3e3)),$("#SFEventObject").length>0&&(M=JSON.parse($("#SFEventObject").attr("value")),v=M.current[0],g=M.current[1],x=M.root[1],p=void 0,"comment"===v?(p=$("#comment-"+x),i.init(p),i.get(x,p,!0,g),p.addClass("in")):"answer"===v&&(Array.isArray(g)||(g=[g]),m=null,g.forEach(function(t){$("#a-"+t).length&&($("#a-"+t+" .post-offset").addClass("highlight"),setTimeout(function(){$("#a-"+t+" .post-offset").removeClass("highlight")},3e3),m=$("#a-"+t))}),m&&$("body").scrollTop(m.offset().top))),$(".postComment").click(function(){i.set({trigger:$(this),form:$(this).parents(".widget-comments__form"),textarea:$(this).parents(".widget-comments__form").find("textarea"),reply:$(this).parents(".widget-comments__form").data("reply")})}),$("#sideBookmark").click(function(){var t;t=$(this),t.hasClass("active")?r.editBookmark(t,function(e,n){0===n&&t.removeClass("active").text("收藏"),$("#sideBookmarked").text(e.data)}):r.addBookmark(t,function(e){t.addClass("active").text("已收藏"),$("#sideBookmarked").text(e.data)})}),$("#sideFollow").click(function(){var t,e,n;t=$(this),n=t.hasClass("active"),t.text("加载中").attr("disabled","disabled"),e="/api/"+t.data("type")+"/"+t.data("id")+"/"+t.data("do"),$.post(e,function(e){0===e.status?(t.siblings("strong").text(e.data),n?t.removeClass("active").data("do","follow").text("关注"):t.addClass("active").data("do","follow/cancel").text("已关注")):n?t.text("已关注"):t.text("关注"),t.removeAttr("disabled")})}),$("body").on("click",".answerAccept",function(){var t=$(this);t.hasClass("disabled")||(t.addClass("disabled"),$.post("/api/answer/"+t.data("id")+"/accept/cancel",function(e){0===e.status&&window.location.reload(),t.removeClass("disabled")}))}),$("body").on("click",".unanswerAccept-cursor-pointer",function(){var t=$(this);t.hasClass("disabled")||(t.addClass("disabled"),$.post("/api/answer/"+t.data("id")+"/accept",function(e){0===e.status&&window.location.reload(),t.removeClass("disabled")}))}),$(".answerUnIgnore").click(function(){var t;return t=$(this),t.text("加载中"),$.post("/api/answer/"+t.data("id")+"/ignore/cancel",function(e){0===e.status?window.location.reload():t.text("取消忽略")}),!1}),$(".answerUnDel").click(function(){var t;return t=$(this),t.text("加载中"),$.post("/api/answer/"+t.data("id")+"/delete/cancel",function(e){0===e.status?window.location.reload():t.text("取消删除")}),!1}),$(".showIgnored").click(function(){return $(".ignored").each(function(){$(this).toggle()}),!1}),$("#questionOpen, #questionShow , #questionPublish, #questionPush, #questionUnpush").click(function(){$.sfAjax($(this),function(){location.reload()})}),$("#questionSite").click(function(){var t;t=$(this).data("id"),a({title:"推送到子站",content:'<label class="required">请选择子站:</label> <ul id="siteList" class="list-inline mb0"></ul>',show:function(){$.getJSON("/api/sites",function(t){var e,n;n='<li><a href="javascript:void(0);" class="btn btn-default btn-sm mb10" data-id="{{ id }}"> <img class="avatar-16 mr5" src="{{ thumbnailUrl }}">{{ name }}</a></li>',e="",t.data.forEach(function(t){e+=u(n,t)}),$("#siteList").html(e),$("#siteList .btn").click(function(){$("#siteList .btn").removeClass("active btn-success"),$(this).addClass("active btn-success")})})},doneFn:function(){var e;e=$("#siteList .active").data("id"),$.post("/api/question/"+t+"/site/"+e,function(t){0===t.status&&location.reload()},"json")}})}),$("#draftId").val()&&($("body,html").animate({scrollTop:$("#draftId").siblings("h4").offset().top}),$("#answerEditor").click()),f=function(t,e){var n;return n=null,function(){var r,i;return r=this,i=Array.prototype.slice.call(arguments),n&&clearTimeout(n),n=setTimeout(function(){return t.apply(r,i)},e)}},T=[],E="<% _.each(data,function (d) { %>\n<a target='_blank' href='<%- d.url %>'><%- d.name %></a>，\n<% }) %>",L=$("#questionId").val(),D='<form class="invite-popup" autocomplete="off"\naction="/api/question/'+L+'/invite/user" method="POST" id="question">\n    <div style="position: relative;">\n        <ul class="nav nav-tabs">\n            <li class="active"><a data-by="username" href="#by-username"\n            data-toggle="tab">站内邀请</a></li>\n            <li><a data-by="email" href="#by-email"\n            data-toggle="tab">Email 邀请</a></li>\n            <li><a data-by="weibo" href="#by-weibo"\n            data-toggle="tab">新浪微博邀请</a></li>\n        </ul>\n        <br>\n        <div class="tab-content invite-tab-content">\n            <div class="tab-pane active" id="by-username"\n            data-type="username">\n                <div class="search-user" id="questionSlug">\n                    <label>你今天还能邀请\n                      <span id="userLast"></span> 人\n                    </label>\n                    <input id="atInput" class="text-28 form-control"\n                    type="text" name="slug"\n                    autocomplete="off" placeholder="搜索你要邀请的人" />\n                </div>\n<p class="help-block" id="inviteInfo"></p>\n                <div class=\'qa-detail__invent-modal\'>\n<div class="text-center" id="loading">\n                    <span class="glyphicon glyphicon-refresh rotate"></span>\n                </div>\n\n</div>\n            </div>\n            <div class="tab-pane" id="by-email" data-type="email">\n                <div class="mb10">\n                   <label>你今天还能邀请\n                      <span id="mailLast"></span> 人\n                    </label>\n                    <input class="text-28 form-control" type="email"\n                    name="mail" placeholder="Email 地址" />\n                </div>\n                <p><textarea class="textarea-13 form-control\n                share-content" rows="5"></textarea></p>\n            </div>\n            <div class="tab-pane" id="by-weibo" data-type="weibo">\n                <div class="input-group mb10">\n                    <span class="input-group-addon">@</span>\n                    <input type="text" class="text-28 form-control"\n                    placeholder="微博用户名">\n                </div>\n                <p><textarea class="textarea-13 form-control share-content"\n                rows="5"></textarea></p>\n            </div>\n        </div>\n    </div>\n</form>',$(".inviteBtn").click(function(){var t,e;return e="",t=$(this),L=$(this).data("id"),a({title:"邀请",content:D,show:function(){var e,n,r,i;return $(".sfModal-content").addClass("mb0"),$(".modal-footer").addClass("hidden"),$('.invite-popup a[data-toggle="tab"]').on("shown.bs.tab",function(t){return"username"!==$(t.target).data("by")?$(".modal-footer").removeClass("hidden"):$(".modal-footer").addClass("hidden")}),i=" <div class='qa-detail__invent'>\n     <div class=\"row qa-detail__invent--hide\" >\n\n             <% _.each(data,function (d) { %>\n             <div class=\"col-md-12 qa-detail__invent-item\">\n             <img src=\"<%- d.avatarUrl %>\">\n<div class='qa-detail__invent-info'>\n<a class='qa-detail__invent-name' target='_blank'\nhref='<%- d.url %>'><%- d.name %></a>\n<span class='qa-detail__invent-desc'>\n<%- d.tagName %> 标签下有 <%- d.tagAnswers %> 个回答</span></div>\n<button type='button' class='btn btn-default btn-xs\n<%-\nd.id == \"active\"?\"qa-detail__invent-btn--active active\":\"qa-detail__invent-btn\"\n%>\n'\ndata-id='<%- d.id %>' data-slug='<%- d.slug %>'>\n<%- d.id == 'active'?'已邀请':'邀请回答' %></button>\n         </div>\n                 <% })  %>\n         </div>\n         </div>\n",n=$("#questionTitle").data("id"),$.get("/api/question/"+n+"/invite/default",function(t){var e,r,o;return t.status?$(".qa-detail__invent-modal").remove():($("#userLast").text(t.data.limit.userLast),$("#mailLast").text(t.data.limit.mailLast),T=t.data.hasInvited,0===T.length&&$("#inviteInfo").html(""),1!==T.length&&2!==T.length||(e=_.template(E)({data:T}).slice(0,-1),$("#inviteInfo").html(e.replace(/，\s*$/,"")+" 已被邀请")),T.length>2&&(e=_.template(E)({data:T.slice(0,2)}).slice(0,-1),$("#inviteInfo").html(e.replace(/，\s*$/,"")+' 等 <a id="showAllInvited" href="javascript:void(0);">'+T.length+"</a> 人已被邀请")),$("#showAllInvited").click(function(){return e=_.template(E)({data:T}).slice(0,-1),$("#inviteInfo").html(e.replace(/，\s*$/,"")+" 已被邀请")}),o=t.data.list,r=_.template(i)({data:o}),$(".qa-detail__invent-modal").html(r),$(".qa-detail__invent-more-btn").on("click",function(){return $(this).remove(),$(".qa-detail__invent--hide").removeClass("qa-detail__invent--hide")}),o.length<=5&&$(".qa-detail__invent-more-btn").trigger("click"),$(".qa-detail__invent-modal").on("click",".qa-detail__invent-btn",function(){var t,r,i;return t=$(this),i=t.data("id"),r=t.data("slug"),$.post("/api/question/"+n+"/invite/user",{userId:i,slug:r},function(n){var r;return n.status?a({title:"提示",content:n.data[1].slug}):(T.push(n.data),r=$("#userLast").text(),$("#userLast").text(r-1),r-1<=1&&$(".qa-detail__invent-btn").attr("disabled","disabled"),0===T.length&&$("#inviteInfo").html(""),1!==T.length&&2!==T.length||(e=_.template(E)({data:T}),$("#inviteInfo").html(e.replace(/，\s*$/,"")+" 已被邀请")),T.length>2&&(e=_.template(E)({data:T.slice(0,2)}),$("#inviteInfo").html(e.replace(/，\s*$/,"")+' 等 <a id="showAllInvited" href="javascript:void(0);">'+T.length+"</a> 人已被邀请")),$("#showAllInvited").click(function(){return e=_.template(E)({data:T}),$("#inviteInfo").html(e.replace(/，\s*$/,"")+" 已被邀请")}),t.text("已邀请").addClass("active"),t.addClass("qa-detail__invent-btn--active").removeClass("qa-detail__invent-btn"))})}))}),r=function(t){return $.get("/api/question/"+n+"/invite/search?q="+t,function(t){var e;return e=_.template(i)({data:t.data}),$(".qa-detail__invent-modal").html(e)})},e=f(r,1e3),$("#atInput").on("input",function(t){return e($(this).val())}),$(".share-content").each(function(){$(this).val("我在 @SegmentFault 上遇到了问题「"+t.data("title")+"」 → "+t.data("url")+"，希望您能帮我解答 ")}),$("#atInput").focus(),!1},doneFn:function(){var t,n,r,i,o,s,l;switch(n=$(".invite-tab-content .tab-pane.active").data("type"),t=$(".invite-popup"),n){case"username":if(l=_.map(e.result,function(t){return t.slug}),s=_.map(e.result,function(t){return t.id}),l.length)return $.post("/api/question/"+L+"/invite/user",{slug:l[0],userId:s[0]},function(t){0===t.status?window.location.reload():a({hideClose:!0,hideDone:!0,content:t.data[1].message})});break;case"email":return r=$("#by-email input.text-28",t).val(),i=$("#by-email textarea.textarea-13",t).val(),$.post("/api/question/"+L+"/invite/mail",{mail:r,text:i},function(t){0===t.status&&window.location.reload()});case"weibo":return i=$("#by-weibo textarea.textarea-13",t).val(),o=$("#by-weibo input.text-28").val(),o=""===o?"":" @"+o,window.open("http://service.weibo.com/share/share.php?title="+i+o+"&appkey=1742025894","_blank")}}}),!1}),C=$(".widget-share__full").data("text"),w=[],$(".question.fmt img, .answer.fmt img").each(function(){var t;return t=$(this).data("src"),!t||0!==t.indexOf("/image?src")&&0!==t.indexOf("/img/")||(t=location.origin+t),w.push(t)}),$(".tagPopup .tag").each(function(){var t;t=$(this).data("img"),t&&w.push(t)}),I="http://tp1.sinaimg.cn/2036070420/180/40003289296/0",w.length||w.push(I),b=$(".question.fmt").text().trim().replace(/\s+/g," "),b=b.slice(0,40),new s(".widget-share__full",{image:w.join("||"),text:"【"+C+"】分享自 @SegmentFault，问题传送门：",title:"【"+C+"】分享自 @SegmentFault，问题传送门：",networks:{renren:{title:C+" - SegmentFault",description:b+"... ",comment:""},douban:{title:C+" - SegmentFault",description:b+"... ",comment:""},twitter:{text:"【"+C+"】分享自 @segment_fault，问题传送门：",title:"【"+C+"】分享自 @segment_fault，问题传送门："}}},!0),c($(".main")),l(),$("#questionLoginMore").click(function(e){e.preventDefault(),t.login()}),$("#delete-modal").on("show.bs.modal",function(t){var e,n,r,i;i=$(k).data("type"),n=$(k).data("do"),r=$(k).data("isauthor"),e=$("#delete-modal .btw"),e.hide(),$(".radio-del input[type=radio]").change(function(){$(".radio-del.btwRadio input").prop("checked")?e.show():e.hide()}),$(".radio-del").hide(),$(".radio-del.all, ."+i+"-"+n+"-only").show(),r&&(e.siblings().hide(),e.show(),e.find(".mt20").hide())}),$("#submit-delete").click(function(){var t,e;return e=$(this),(t=$("#deleteDesc").val()||$(".radio-del input:checked").val())?($(this).attr("disabled","disabled"),$.post("/api/"+$(k).data("type")+"/"+$(k).data("id")+"/"+$(k).data("do"),{reason:t},function(t){if(e.removeAttr("disabled"),0===t.status)return location.reload()},"json")):($(".btw").addClass("has-error"),void $("#deleteDesc").after('<p class="help-block">请填写理由</p>'))}),$("#directReport").click(function(){var t;t=$(this).data("id"),a({title:"与已有问题重复",content:'<form><div class="form-group"><input class="form-control" name="redirectId" type="text" id="directId" placeholder="已有问题的 URL 或 ID" autofocus="true" /></div></form>',show:function(){$("#directId").bind("input",function(){var t;t=$("#directId").val().replace(/[^\d]/g,""),$.get("/api/question/"+t,function(t){!t.status&&t.data?($("#directId").hide().after('<p><a class="btn btn-default" href="'+t.data.url+'" target="_blank">'+t.data.title+'</a> <a href="javascript:void(0);" class="i-cancel ml10 delete-result">×</a></p>'),$(".delete-result").click(function(){$(this).parent("p").remove(),$("#directId").val("").show().focus()})):$(this).parent("p").remove()})})},doneFn:function(){var e;e=$("#directId").val().replace(/[^\d]/g,""),$.post("/api/question/"+t+"/redirect",{redirectId:e},function(t){console.log(t),t.status||location.reload()})}})}),"#shareToWeibo"===location.hash&&(N="http://service.weibo.com/share/share.php?url="+encodeURIComponent(window.location.href)+"&title="+encodeURIComponent("我在 @SegmentFault 提问了【"+$("#questionTitle a").text()+"】，传送门：")+"&appkey=1742025894",$("#shareToWeiboModal").find("#shareLink").attr("href",N),$("#shareToWeiboModal").modal("show")),"true"===$.cookie("shareAnswerToWeibo")&&(N="http://service.weibo.com/share/share.php?url="+encodeURIComponent(window.location+"/"+$(".widget-answers__item").last().attr("id"))+"?utm_source=Weibo&title="+encodeURIComponent("我在 @SegmentFault 回答了【"+$("#questionTitle a").text()+"】，传送门：")+"&appkey=1742025894",$("#shareToWeiboModal").find("#shareLink").attr("href",N),$("#shareToWeiboModal").modal("show"),$.removeCookie("shareAnswerToWeibo",{path:"/"})),$("#reloadCaptcha").click(function(){$(this).find("img").attr("src","/user/captcha?w=178&h=35")}),y=$("#mail").val(),$("#ignoreInvite").click(function(){var t;return t=$(this).data("id"),$.post("/api/invite/"+t+"/ignore",function(t){if(!t.status)return location.reload()})}),$("#user").submit(function(t){var e,n,r,i,o,a;if(t.preventDefault(),e=$(this),n=e.find("input").not("input[disabled]"),i=n.index($("input:focus")),o=n.slice(i+1),r=!1,o.length&&o.each(function(){var t,e;if(e=$(this).attr("type"),t=["text","email","password","url"],!$(this).val()&&t.indexOf(e)!==-1)return $(this).focus(),r=!0,!1}),!r)return e.find("button[type=submit]").attr("disabled","disabled"),y=$("input[name=mail]").val(),a={mail:y,name:$("input[name=name]").val(),password:$("input[name=password]").val(),captcha:$("#captcha").val(),ref:$("input[name=ref]").val()},$.post("/api/user/register",a,function(t){return e.find("button[type=submit]").removeAttr("disabled"),0===t.status?location.reload():($("#captcha").val(""),$("#reloadCaptcha img").attr("src","/user/captcha?w=178&h=35"),t.data[1].captcha?($("#captcha").removeAttr("disabled"),$("#captcha").parents(".captcha-part").show()):void 0)})})}),define("qa_question",function(){});